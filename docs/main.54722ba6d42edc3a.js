"use strict";(self.webpackChunkmvp_rorr=self.webpackChunkmvp_rorr||[]).push([[179],{2011:(vt,Ae,F)=>{F.d(Ae,{Dh:()=>Ee,GT:()=>fe,cc:()=>xe,hO:()=>We,on:()=>z,pX:()=>le,xv:()=>ge});var d=F(4650),ee=F(9260),P=F(4976);vt=F.hmd(vt);const ce=["ngOnDestroy"],le=(ve,bt,St,Ne={})=>new Proxy(ve,{get:(Ce,me)=>St.runOutsideAngular(()=>{var Ke;if(ve[me])return!(null===(Ke=Ne?.spy)||void 0===Ke)&&Ke.get&&Ne.spy.get(me,ve[me]),ve[me];if(ce.indexOf(me)>-1)return()=>{};const $e=bt.toPromise().then(rt=>{const re=rt&&rt[me];return"function"==typeof re?re.bind(rt):re&&re.then?re.then(kt=>St.run(()=>kt)):St.run(()=>re)});return new Proxy(()=>{},{get:(rt,re)=>$e[re],apply:(rt,re,kt)=>$e.then(ft=>{var Qt;const ut=ft&&ft(...kt);return!(null===(Qt=Ne?.spy)||void 0===Qt)&&Qt.apply&&Ne.spy.apply(me,kt,ut),ut})})})}),fe=(ve,bt)=>{bt.forEach(St=>{Object.getOwnPropertyNames(St.prototype||St).forEach(Ne=>{Object.defineProperty(ve.prototype,Ne,Object.getOwnPropertyDescriptor(St.prototype||St,Ne))})})};class se{constructor(bt){return bt}}const Ee=new d.OlP("angularfire2.app.options"),ge=new d.OlP("angularfire2.app.name");function z(ve,bt,St){const Ce="object"==typeof St&&St||{};Ce.name=Ce.name||"string"==typeof St&&St||"[DEFAULT]";const Ke=ee.Z.apps.filter($e=>$e&&$e.name===Ce.name)[0]||bt.runOutsideAngular(()=>ee.Z.initializeApp(ve,Ce));try{JSON.stringify(ve)!==JSON.stringify(Ke.options)&&$("error",`${Ke.name} Firebase App already initialized with different options${vt.hot?", you may need to reload as Firebase is not HMR aware.":"."}`)}catch{}return new se(Ke)}const $=(ve,...bt)=>{(0,d.X6Q)()&&typeof console<"u"&&console[ve](...bt)},Y={provide:se,useFactory:z,deps:[Ee,d.R0b,[new d.FiY,ge]]};let We=(()=>{class ve{constructor(St){ee.Z.registerVersion("angularfire",P.q4.full,"core"),ee.Z.registerVersion("angularfire",P.q4.full,"app-compat"),ee.Z.registerVersion("angular",d.q4F.full,St.toString())}static initializeApp(St,Ne){return{ngModule:ve,providers:[{provide:Ee,useValue:St},{provide:ge,useValue:Ne}]}}}return ve.\u0275fac=function(St){return new(St||ve)(d.LFG(d.Lbi))},ve.\u0275mod=d.oAB({type:ve}),ve.\u0275inj=d.cJS({providers:[Y]}),ve})();function xe(ve,bt,St,Ne,Ce){const[,me,Ke]=globalThis.\u0275AngularfireInstanceCache.find($e=>$e[0]===ve)||[];if(me)return function De(ve,bt){try{return ve.toString()===bt.toString()}catch{return ve===bt}}(Ce,Ke)||(be("error",`${bt} was already initialized on the ${St} Firebase App with different settings.${at?" You may need to reload as Firebase is not HMR aware.":""}`),be("warn",{is:Ce,was:Ke})),me;{const $e=Ne();return globalThis.\u0275AngularfireInstanceCache.push([ve,$e,Ce]),$e}}const at=!!vt.hot,be=(ve,...bt)=>{(0,d.X6Q)()&&typeof console<"u"&&console[ve](...bt)};globalThis.\u0275AngularfireInstanceCache||(globalThis.\u0275AngularfireInstanceCache=[])},4976:(vt,Ae,F)=>{F.d(Ae,{q4:()=>Kn,iC:()=>Xl,HU:()=>Qa,vb:()=>lu,JM:()=>Cf});var d=F(4650),ee=F(259),P=F(5861),ce=F(6881),le=F(2090),fe=F(4859),se=F(1877);let ge,z;const We=new WeakMap,xe=new WeakMap,De=new WeakMap,at=new WeakMap,be=new WeakMap;let St={get(E,I,R){if(E instanceof IDBTransaction){if("done"===I)return xe.get(E);if("objectStoreNames"===I)return E.objectStoreNames||De.get(E);if("store"===I)return R.objectStoreNames[1]?void 0:R.objectStore(R.objectStoreNames[0])}return Ke(E[I])},set:(E,I,R)=>(E[I]=R,!0),has:(E,I)=>E instanceof IDBTransaction&&("done"===I||"store"===I)||I in E};function me(E){return"function"==typeof E?function Ce(E){return E!==IDBDatabase.prototype.transaction||"objectStoreNames"in IDBTransaction.prototype?function Y(){return z||(z=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}().includes(E)?function(...I){return E.apply($e(this),I),Ke(We.get(this))}:function(...I){return Ke(E.apply($e(this),I))}:function(I,...R){const N=E.call($e(this),I,...R);return De.set(N,I.sort?I.sort():[I]),Ke(N)}}(E):(E instanceof IDBTransaction&&function bt(E){if(xe.has(E))return;const I=new Promise((R,N)=>{const G=()=>{E.removeEventListener("complete",Q),E.removeEventListener("error",de),E.removeEventListener("abort",de)},Q=()=>{R(),G()},de=()=>{N(E.error||new DOMException("AbortError","AbortError")),G()};E.addEventListener("complete",Q),E.addEventListener("error",de),E.addEventListener("abort",de)});xe.set(E,I)}(E),((E,I)=>I.some(R=>E instanceof R))(E,function $(){return ge||(ge=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}())?new Proxy(E,St):E)}function Ke(E){if(E instanceof IDBRequest)return function ve(E){const I=new Promise((R,N)=>{const G=()=>{E.removeEventListener("success",Q),E.removeEventListener("error",de)},Q=()=>{R(Ke(E.result)),G()},de=()=>{N(E.error),G()};E.addEventListener("success",Q),E.addEventListener("error",de)});return I.then(R=>{R instanceof IDBCursor&&We.set(R,E)}).catch(()=>{}),be.set(I,E),I}(E);if(at.has(E))return at.get(E);const I=me(E);return I!==E&&(at.set(E,I),be.set(I,E)),I}const $e=E=>be.get(E),kt=["get","getKey","getAll","getAllKeys","count"],ft=["put","add","delete","clear"],Qt=new Map;function ut(E,I){if(!(E instanceof IDBDatabase)||I in E||"string"!=typeof I)return;if(Qt.get(I))return Qt.get(I);const R=I.replace(/FromIndex$/,""),N=I!==R,G=ft.includes(R);if(!(R in(N?IDBIndex:IDBObjectStore).prototype)||!G&&!kt.includes(R))return;const Q=function(){var de=(0,P.Z)(function*(Ye,...ze){const ht=this.transaction(Ye,G?"readwrite":"readonly");let gt=ht.store;return N&&(gt=gt.index(ze.shift())),(yield Promise.all([gt[R](...ze),G&&ht.done]))[0]});return function(ze){return de.apply(this,arguments)}}();return Qt.set(I,Q),Q}!function Ne(E){St=E(St)}(E=>({...E,get:(I,R,N)=>ut(I,R)||E.get(I,R,N),has:(I,R)=>!!ut(I,R)||E.has(I,R)}));const pe="@firebase/installations",Re="w:0.6.4",Ve="FIS_v2",qt=new le.LL("installations","Installations",{"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"not-registered":"Firebase Installation is not registered.","installation-not-found":"Firebase Installation not found.","request-failed":'{$requestName} request failed with error "{$serverCode} {$serverStatus}: {$serverMessage}"',"app-offline":"Could not process request. Application offline.","delete-pending-registration":"Can't delete installation while there is a pending registration request."});function Xt(E){return E instanceof le.ZR&&E.code.includes("request-failed")}function nn({projectId:E}){return`https://firebaseinstallations.googleapis.com/v1/projects/${E}/installations`}function kn(E){return{token:E.token,requestStatus:2,expiresIn:Ta(E.expiresIn),creationTime:Date.now()}}function jn(E,I){return Lr.apply(this,arguments)}function Lr(){return(Lr=(0,P.Z)(function*(E,I){const N=(yield I.json()).error;return qt.create("request-failed",{requestName:E,serverCode:N.code,serverMessage:N.message,serverStatus:N.status})})).apply(this,arguments)}function ei({apiKey:E}){return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":E})}function Ir(E,{refreshToken:I}){const R=ei(E);return R.append("Authorization",function Vo(E){return`${Ve} ${E}`}(I)),R}function is(E){return Oi.apply(this,arguments)}function Oi(){return(Oi=(0,P.Z)(function*(E){const I=yield E();return I.status>=500&&I.status<600?E():I})).apply(this,arguments)}function Ta(E){return Number(E.replace("s","000"))}function pt(E,I){return Wr.apply(this,arguments)}function Wr(){return(Wr=(0,P.Z)(function*({appConfig:E,heartbeatServiceProvider:I},{fid:R}){const N=nn(E),G=ei(E),Q=I.getImmediate({optional:!0});if(Q){const ht=yield Q.getHeartbeatsHeader();ht&&G.append("x-firebase-client",ht)}const Ye={method:"POST",headers:G,body:JSON.stringify({fid:R,authVersion:Ve,appId:E.appId,sdkVersion:Re})},ze=yield is(()=>fetch(N,Ye));if(ze.ok){const ht=yield ze.json();return{fid:ht.fid||R,registrationStatus:2,refreshToken:ht.refreshToken,authToken:kn(ht.authToken)}}throw yield jn("Create Installation",ze)})).apply(this,arguments)}function Pi(E){return new Promise(I=>{setTimeout(I,E)})}const Bo=/^[cdef][\w-]{21}$/;function fr(){try{const E=new Uint8Array(17);(self.crypto||self.msCrypto).getRandomValues(E),E[0]=112+E[0]%16;const R=function An(E){return function Kr(E){return btoa(String.fromCharCode(...E)).replace(/\+/g,"-").replace(/\//g,"_")}(E).substr(0,22)}(E);return Bo.test(R)?R:""}catch{return""}}function sn(E){return`${E.appName}!${E.appId}`}const it=new Map;function Ct(E,I){const R=sn(E);ti(R,I),function tr(E,I){const R=function Dr(){return!Mt&&"BroadcastChannel"in self&&(Mt=new BroadcastChannel("[Firebase] FID Change"),Mt.onmessage=E=>{ti(E.data.key,E.data.fid)}),Mt}();R&&R.postMessage({key:E,fid:I}),function pn(){0===it.size&&Mt&&(Mt.close(),Mt=null)}()}(R,I)}function ti(E,I){const R=it.get(E);if(R)for(const N of R)N(I)}let Mt=null;const pr="firebase-installations-store";let Sr=null;function Ni(){return Sr||(Sr=function rt(E,I,{blocked:R,upgrade:N,blocking:G,terminated:Q}={}){const de=indexedDB.open(E,I),Ye=Ke(de);return N&&de.addEventListener("upgradeneeded",ze=>{N(Ke(de.result),ze.oldVersion,ze.newVersion,Ke(de.transaction))}),R&&de.addEventListener("blocked",()=>R()),Ye.then(ze=>{Q&&ze.addEventListener("close",()=>Q()),G&&ze.addEventListener("versionchange",()=>G())}).catch(()=>{}),Ye}("firebase-installations-database",1,{upgrade:(E,I)=>{0===I&&E.createObjectStore(pr)}})),Sr}function Vn(E,I){return Tr.apply(this,arguments)}function Tr(){return(Tr=(0,P.Z)(function*(E,I){const R=sn(E),G=(yield Ni()).transaction(pr,"readwrite"),Q=G.objectStore(pr),de=yield Q.get(R);return yield Q.put(I,R),yield G.done,(!de||de.fid!==I.fid)&&Ct(E,I.fid),I})).apply(this,arguments)}function os(E){return $n.apply(this,arguments)}function $n(){return($n=(0,P.Z)(function*(E){const I=sn(E),N=(yield Ni()).transaction(pr,"readwrite");yield N.objectStore(pr).delete(I),yield N.done})).apply(this,arguments)}function ni(E,I){return Zr.apply(this,arguments)}function Zr(){return(Zr=(0,P.Z)(function*(E,I){const R=sn(E),G=(yield Ni()).transaction(pr,"readwrite"),Q=G.objectStore(pr),de=yield Q.get(R),Ye=I(de);return void 0===Ye?yield Q.delete(R):yield Q.put(Ye,R),yield G.done,Ye&&(!de||de.fid!==Ye.fid)&&Ct(E,Ye.fid),Ye})).apply(this,arguments)}function H(E){return B.apply(this,arguments)}function B(){return(B=(0,P.Z)(function*(E){let I;const R=yield ni(E.appConfig,N=>{const G=K(N),Q=ue(E,G);return I=Q.registrationPromise,Q.installationEntry});return""===R.fid?{installationEntry:yield I}:{installationEntry:R,registrationPromise:I}})).apply(this,arguments)}function K(E){return Be(E||{fid:fr(),registrationStatus:0})}function ue(E,I){if(0===I.registrationStatus){if(!navigator.onLine)return{installationEntry:I,registrationPromise:Promise.reject(qt.create("app-offline"))};const R={fid:I.fid,registrationStatus:1,registrationTime:Date.now()},N=function J(E,I){return Ze.apply(this,arguments)}(E,R);return{installationEntry:R,registrationPromise:N}}return 1===I.registrationStatus?{installationEntry:I,registrationPromise:xt(E)}:{installationEntry:I}}function Ze(){return(Ze=(0,P.Z)(function*(E,I){try{const R=yield pt(E,I);return Vn(E.appConfig,R)}catch(R){throw Xt(R)&&409===R.customData.serverCode?yield os(E.appConfig):yield Vn(E.appConfig,{fid:I.fid,registrationStatus:0}),R}})).apply(this,arguments)}function xt(E){return Ut.apply(this,arguments)}function Ut(){return(Ut=(0,P.Z)(function*(E){let I=yield hn(E.appConfig);for(;1===I.registrationStatus;)yield Pi(100),I=yield hn(E.appConfig);if(0===I.registrationStatus){const{installationEntry:R,registrationPromise:N}=yield H(E);return N||R}return I})).apply(this,arguments)}function hn(E){return ni(E,I=>{if(!I)throw qt.create("installation-not-found");return Be(I)})}function Be(E){return function dt(E){return 1===E.registrationStatus&&E.registrationTime+1e4<Date.now()}(E)?{fid:E.fid,registrationStatus:0}:E}function wt(E,I){return bn.apply(this,arguments)}function bn(){return(bn=(0,P.Z)(function*({appConfig:E,heartbeatServiceProvider:I},R){const N=Ar(E,R),G=Ir(E,R),Q=I.getImmediate({optional:!0});if(Q){const ht=yield Q.getHeartbeatsHeader();ht&&G.append("x-firebase-client",ht)}const Ye={method:"POST",headers:G,body:JSON.stringify({installation:{sdkVersion:Re,appId:E.appId}})},ze=yield is(()=>fetch(N,Ye));if(ze.ok)return kn(yield ze.json());throw yield jn("Generate Auth Token",ze)})).apply(this,arguments)}function Ar(E,{fid:I}){return`${nn(E)}/${I}/authTokens:generate`}function wn(E){return Fi.apply(this,arguments)}function Fi(){return(Fi=(0,P.Z)(function*(E,I=!1){let R;const N=yield ni(E.appConfig,Q=>{if(!Ht(Q))throw qt.create("not-registered");const de=Q.authToken;if(!I&&an(de))return Q;if(1===de.requestStatus)return R=oe(E,I),Q;{if(!navigator.onLine)throw qt.create("app-offline");const Ye=en(Q);return R=Le(E,Ye),Ye}});return R?yield R:N.authToken})).apply(this,arguments)}function oe(E,I){return ne.apply(this,arguments)}function ne(){return(ne=(0,P.Z)(function*(E,I){let R=yield Fe(E.appConfig);for(;1===R.authToken.requestStatus;)yield Pi(100),R=yield Fe(E.appConfig);const N=R.authToken;return 0===N.requestStatus?wn(E,I):N})).apply(this,arguments)}function Fe(E){return ni(E,I=>{if(!Ht(I))throw qt.create("not-registered");return function Mr(E){return 1===E.requestStatus&&E.requestTime+1e4<Date.now()}(I.authToken)?Object.assign(Object.assign({},I),{authToken:{requestStatus:0}}):I})}function Le(E,I){return Tt.apply(this,arguments)}function Tt(){return(Tt=(0,P.Z)(function*(E,I){try{const R=yield wt(E,I),N=Object.assign(Object.assign({},I),{authToken:R});return yield Vn(E.appConfig,N),R}catch(R){if(!Xt(R)||401!==R.customData.serverCode&&404!==R.customData.serverCode){const N=Object.assign(Object.assign({},I),{authToken:{requestStatus:0}});yield Vn(E.appConfig,N)}else yield os(E.appConfig);throw R}})).apply(this,arguments)}function Ht(E){return void 0!==E&&2===E.registrationStatus}function an(E){return 2===E.requestStatus&&!function On(E){const I=Date.now();return I<E.creationTime||E.creationTime+E.expiresIn<I+36e5}(E)}function en(E){const I={requestStatus:1,requestTime:Date.now()};return Object.assign(Object.assign({},E),{authToken:I})}function ri(){return(ri=(0,P.Z)(function*(E){const I=E,{installationEntry:R,registrationPromise:N}=yield H(I);return N?N.catch(console.error):wn(I).catch(console.error),R.fid})).apply(this,arguments)}function pl(){return(pl=(0,P.Z)(function*(E,I=!1){const R=E;return yield gn(R),(yield wn(R,I)).token})).apply(this,arguments)}function gn(E){return as.apply(this,arguments)}function as(){return(as=(0,P.Z)(function*(E){const{registrationPromise:I}=yield H(E);I&&(yield I)})).apply(this,arguments)}function gr(E){return qt.create("missing-app-config-values",{valueName:E})}const Yr="installations",jo=E=>{const I=E.getProvider("app").getImmediate(),R=function nd(E){if(!E||!E.options)throw gr("App Configuration");if(!E.name)throw gr("App Name");const I=["projectId","apiKey","appId"];for(const R of I)if(!E.options[R])throw gr(R);return{appName:E.name,projectId:E.options.projectId,apiKey:E.options.apiKey,appId:E.options.appId}}(I);return{app:I,appConfig:R,heartbeatServiceProvider:(0,ce._getProvider)(I,"heartbeat"),_delete:()=>Promise.resolve()}},Ds=E=>{const I=E.getProvider("app").getImmediate(),R=(0,ce._getProvider)(I,Yr).getImmediate();return{getId:()=>function pi(E){return ri.apply(this,arguments)}(R),getToken:G=>function Aa(E){return pl.apply(this,arguments)}(R,G)}};(function Li(){(0,ce._registerComponent)(new fe.wA(Yr,jo,"PUBLIC")),(0,ce._registerComponent)(new fe.wA("installations-internal",Ds,"PRIVATE"))})(),(0,ce.registerVersion)(pe,"0.6.4"),(0,ce.registerVersion)(pe,"0.6.4","esm2017");const $o="@firebase/remote-config",Sn=new le.LL("remoteconfig","Remote Config",{"registration-window":"Undefined window object. This SDK only supports usage in a browser environment.","registration-project-id":"Undefined project identifier. Check Firebase app initialization.","registration-api-key":"Undefined API key. Check Firebase app initialization.","registration-app-id":"Undefined app identifier. Check Firebase app initialization.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","storage-delete":"Error thrown when deleting from storage. Original error: {$originalErrorMessage}.","fetch-client-network":"Fetch client failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.","fetch-timeout":'The config fetch request timed out.  Configure timeout using "fetchTimeoutMillis" SDK setting.',"fetch-throttle":'The config fetch request timed out while in an exponential backoff state. Configure timeout using "fetchTimeoutMillis" SDK setting. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.',"fetch-client-parse":"Fetch client could not parse response. Original error: {$originalErrorMessage}.","fetch-status":"Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.","indexed-db-unavailable":"Indexed DB is not supported by current browser"});class gi{constructor(I,R,N,G){this.client=I,this.storage=R,this.storageCache=N,this.logger=G}isCachedDataFresh(I,R){if(!R)return this.logger.debug("Config fetch cache check. Cache unpopulated."),!1;const N=Date.now()-R,G=N<=I;return this.logger.debug(`Config fetch cache check. Cache age millis: ${N}. Cache max age millis (minimumFetchIntervalMillis setting): ${I}. Is cache hit: ${G}.`),G}fetch(I){var R=this;return(0,P.Z)(function*(){const[N,G]=yield Promise.all([R.storage.getLastSuccessfulFetchTimestampMillis(),R.storage.getLastSuccessfulFetchResponse()]);if(G&&R.isCachedDataFresh(I.cacheMaxAgeMillis,N))return G;I.eTag=G&&G.eTag;const Q=yield R.client.fetch(I),de=[R.storageCache.setLastSuccessfulFetchTimestampMillis(Date.now())];return 200===Q.status&&de.push(R.storage.setLastSuccessfulFetchResponse(Q)),yield Promise.all(de),Q})()}}function hd(E=navigator){return E.languages&&E.languages[0]||E.language}class Ma{constructor(I,R,N,G,Q,de){this.firebaseInstallations=I,this.sdkVersion=R,this.namespace=N,this.projectId=G,this.apiKey=Q,this.appId=de}fetch(I){var R=this;return(0,P.Z)(function*(){const[N,G]=yield Promise.all([R.firebaseInstallations.getId(),R.firebaseInstallations.getToken()]),de=`${window.FIREBASE_REMOTE_CONFIG_URL_BASE||"https://firebaseremoteconfig.googleapis.com"}/v1/projects/${R.projectId}/namespaces/${R.namespace}:fetch?key=${R.apiKey}`,Ye={"Content-Type":"application/json","Content-Encoding":"gzip","If-None-Match":I.eTag||"*"},ze={sdk_version:R.sdkVersion,app_instance_id:N,app_instance_id_token:G,app_id:R.appId,language_code:hd()},ht={method:"POST",headers:Ye,body:JSON.stringify(ze)},gt=fetch(de,ht),Ft=new Promise((br,Ls)=>{I.signal.addEventListener(()=>{const Jl=new Error("The operation was aborted.");Jl.name="AbortError",Ls(Jl)})});let kr;try{yield Promise.race([gt,Ft]),kr=yield gt}catch(br){let Ls="fetch-client-network";throw"AbortError"===br?.name&&(Ls="fetch-timeout"),Sn.create(Ls,{originalErrorMessage:br?.message})}let En=kr.status;const yt=kr.headers.get("ETag")||void 0;let Ki,io;if(200===kr.status){let br;try{br=yield kr.json()}catch(Ls){throw Sn.create("fetch-client-parse",{originalErrorMessage:Ls?.message})}Ki=br.entries,io=br.state}if("INSTANCE_STATE_UNSPECIFIED"===io?En=500:"NO_CHANGE"===io?En=304:("NO_TEMPLATE"===io||"EMPTY_CONFIG"===io)&&(Ki={}),304!==En&&200!==En)throw Sn.create("fetch-status",{httpStatus:En});return{status:En,eTag:yt,config:Ki}})()}}class Qh{constructor(I,R){this.client=I,this.storage=R}fetch(I){var R=this;return(0,P.Z)(function*(){const N=(yield R.storage.getThrottleMetadata())||{backoffCount:0,throttleEndTimeMillis:Date.now()};return R.attemptFetch(I,N)})()}attemptFetch(I,{throttleEndTimeMillis:R,backoffCount:N}){var G=this;return(0,P.Z)(function*(){yield function Vc(E,I){return new Promise((R,N)=>{const G=Math.max(I-Date.now(),0),Q=setTimeout(R,G);E.addEventListener(()=>{clearTimeout(Q),N(Sn.create("fetch-throttle",{throttleEndTimeMillis:I}))})})}(I.signal,R);try{const Q=yield G.client.fetch(I);return yield G.storage.deleteThrottleMetadata(),Q}catch(Q){if(!function yl(E){if(!(E instanceof le.ZR&&E.customData))return!1;const I=Number(E.customData.httpStatus);return 429===I||500===I||503===I||504===I}(Q))throw Q;const de={throttleEndTimeMillis:Date.now()+(0,le.$s)(N),backoffCount:N+1};return yield G.storage.setThrottleMetadata(de),G.attemptFetch(I,de)}})()}}class Xh{constructor(I,R,N,G,Q){this.app=I,this._client=R,this._storageCache=N,this._storage=G,this._logger=Q,this._isInitializationComplete=!1,this.settings={fetchTimeoutMillis:6e4,minimumFetchIntervalMillis:432e5},this.defaultConfig={}}get fetchTimeMillis(){return this._storageCache.getLastSuccessfulFetchTimestampMillis()||-1}get lastFetchStatus(){return this._storageCache.getLastFetchStatus()||"no-fetch-yet"}}function vr(E,I){const R=E.target.error||void 0;return Sn.create(I,{originalErrorMessage:R&&R?.message})}const Vr="app_namespace_store";class Qb{constructor(I,R,N,G=function wl(){return new Promise((E,I)=>{try{const R=indexedDB.open("firebase_remote_config",1);R.onerror=N=>{I(vr(N,"storage-open"))},R.onsuccess=N=>{E(N.target.result)},R.onupgradeneeded=N=>{0===N.oldVersion&&N.target.result.createObjectStore(Vr,{keyPath:"compositeKey"})}}catch(R){I(Sn.create("storage-open",{originalErrorMessage:R?.message}))}})}()){this.appId=I,this.appName=R,this.namespace=N,this.openDbPromise=G}getLastFetchStatus(){return this.get("last_fetch_status")}setLastFetchStatus(I){return this.set("last_fetch_status",I)}getLastSuccessfulFetchTimestampMillis(){return this.get("last_successful_fetch_timestamp_millis")}setLastSuccessfulFetchTimestampMillis(I){return this.set("last_successful_fetch_timestamp_millis",I)}getLastSuccessfulFetchResponse(){return this.get("last_successful_fetch_response")}setLastSuccessfulFetchResponse(I){return this.set("last_successful_fetch_response",I)}getActiveConfig(){return this.get("active_config")}setActiveConfig(I){return this.set("active_config",I)}getActiveConfigEtag(){return this.get("active_config_etag")}setActiveConfigEtag(I){return this.set("active_config_etag",I)}getThrottleMetadata(){return this.get("throttle_metadata")}setThrottleMetadata(I){return this.set("throttle_metadata",I)}deleteThrottleMetadata(){return this.delete("throttle_metadata")}get(I){var R=this;return(0,P.Z)(function*(){const N=yield R.openDbPromise;return new Promise((G,Q)=>{const Ye=N.transaction([Vr],"readonly").objectStore(Vr),ze=R.createCompositeKey(I);try{const ht=Ye.get(ze);ht.onerror=gt=>{Q(vr(gt,"storage-get"))},ht.onsuccess=gt=>{const Ft=gt.target.result;G(Ft?Ft.value:void 0)}}catch(ht){Q(Sn.create("storage-get",{originalErrorMessage:ht?.message}))}})})()}set(I,R){var N=this;return(0,P.Z)(function*(){const G=yield N.openDbPromise;return new Promise((Q,de)=>{const ze=G.transaction([Vr],"readwrite").objectStore(Vr),ht=N.createCompositeKey(I);try{const gt=ze.put({compositeKey:ht,value:R});gt.onerror=Ft=>{de(vr(Ft,"storage-set"))},gt.onsuccess=()=>{Q()}}catch(gt){de(Sn.create("storage-set",{originalErrorMessage:gt?.message}))}})})()}delete(I){var R=this;return(0,P.Z)(function*(){const N=yield R.openDbPromise;return new Promise((G,Q)=>{const Ye=N.transaction([Vr],"readwrite").objectStore(Vr),ze=R.createCompositeKey(I);try{const ht=Ye.delete(ze);ht.onerror=gt=>{Q(vr(gt,"storage-delete"))},ht.onsuccess=()=>{G()}}catch(ht){Q(Sn.create("storage-delete",{originalErrorMessage:ht?.message}))}})})()}createCompositeKey(I){return[this.appId,this.appName,this.namespace,I].join()}}class zn{constructor(I){this.storage=I}getLastFetchStatus(){return this.lastFetchStatus}getLastSuccessfulFetchTimestampMillis(){return this.lastSuccessfulFetchTimestampMillis}getActiveConfig(){return this.activeConfig}loadFromStorage(){var I=this;return(0,P.Z)(function*(){const R=I.storage.getLastFetchStatus(),N=I.storage.getLastSuccessfulFetchTimestampMillis(),G=I.storage.getActiveConfig(),Q=yield R;Q&&(I.lastFetchStatus=Q);const de=yield N;de&&(I.lastSuccessfulFetchTimestampMillis=de);const Ye=yield G;Ye&&(I.activeConfig=Ye)})()}setLastFetchStatus(I){return this.lastFetchStatus=I,this.storage.setLastFetchStatus(I)}setLastSuccessfulFetchTimestampMillis(I){return this.lastSuccessfulFetchTimestampMillis=I,this.storage.setLastSuccessfulFetchTimestampMillis(I)}setActiveConfig(I){return this.activeConfig=I,this.storage.setActiveConfig(I)}}function Qr(){return Bc.apply(this,arguments)}function Bc(){return(Bc=(0,P.Z)(function*(){if(!(0,le.hl)())return!1;try{return yield(0,le.eu)()}catch{return!1}})).apply(this,arguments)}let zo,Gn;!function As(){(0,ce._registerComponent)(new fe.wA("remote-config",function E(I,{instanceIdentifier:R}){const N=I.getProvider("app").getImmediate(),G=I.getProvider("installations-internal").getImmediate();if(typeof window>"u")throw Sn.create("registration-window");if(!(0,le.hl)())throw Sn.create("indexed-db-unavailable");const{projectId:Q,apiKey:de,appId:Ye}=N.options;if(!Q)throw Sn.create("registration-project-id");if(!de)throw Sn.create("registration-api-key");if(!Ye)throw Sn.create("registration-app-id");const ze=new Qb(Ye,N.name,R=R||"firebase"),ht=new zn(ze),gt=new se.Yd($o);gt.logLevel=se.in.ERROR;const Ft=new Ma(G,ce.SDK_VERSION,R,Q,de,Ye),kr=new Qh(Ft,ze),En=new gi(kr,ze,ht,gt),yt=new Xh(N,En,ht,ze,gt);return function vg(E){const I=(0,le.m9)(E);I._initializePromise||(I._initializePromise=I._storageCache.loadFromStorage().then(()=>{I._isInitializationComplete=!0}))}(yt),yt},"PUBLIC").setMultipleInstances(!0)),(0,ce.registerVersion)($o,"0.4.4"),(0,ce.registerVersion)($o,"0.4.4","esm2017")}();const Uc=new WeakMap,ii=new WeakMap,Js=new WeakMap,xr=new WeakMap,Rt=new WeakMap;let xa={get(E,I,R){if(E instanceof IDBTransaction){if("done"===I)return ii.get(E);if("objectStoreNames"===I)return E.objectStoreNames||Js.get(E);if("store"===I)return R.objectStoreNames[1]?void 0:R.objectStore(R.objectStoreNames[0])}return Bi(E[I])},set:(E,I,R)=>(E[I]=R,!0),has:(E,I)=>E instanceof IDBTransaction&&("done"===I||"store"===I)||I in E};function _d(E){return"function"==typeof E?function md(E){return E!==IDBDatabase.prototype.transaction||"objectStoreNames"in IDBTransaction.prototype?function po(){return Gn||(Gn=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}().includes(E)?function(...I){return E.apply(Il(this),I),Bi(Uc.get(this))}:function(...I){return Bi(E.apply(Il(this),I))}:function(I,...R){const N=E.call(Il(this),I,...R);return Js.set(N,I.sort?I.sort():[I]),Bi(N)}}(E):(E instanceof IDBTransaction&&function pd(E){if(ii.has(E))return;const I=new Promise((R,N)=>{const G=()=>{E.removeEventListener("complete",Q),E.removeEventListener("error",de),E.removeEventListener("abort",de)},Q=()=>{R(),G()},de=()=>{N(E.error||new DOMException("AbortError","AbortError")),G()};E.addEventListener("complete",Q),E.addEventListener("error",de),E.addEventListener("abort",de)});ii.set(E,I)}(E),((E,I)=>I.some(R=>E instanceof R))(E,function bg(){return zo||(zo=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}())?new Proxy(E,xa):E)}function Bi(E){if(E instanceof IDBRequest)return function fd(E){const I=new Promise((R,N)=>{const G=()=>{E.removeEventListener("success",Q),E.removeEventListener("error",de)},Q=()=>{R(Bi(E.result)),G()},de=()=>{N(E.error),G()};E.addEventListener("success",Q),E.addEventListener("error",de)});return I.then(R=>{R instanceof IDBCursor&&Uc.set(R,E)}).catch(()=>{}),Rt.set(I,E),I}(E);if(xr.has(E))return xr.get(E);const I=_d(E);return I!==E&&(xr.set(E,I),Rt.set(I,E)),I}const Il=E=>Rt.get(E);function Te(E,I,{blocked:R,upgrade:N,blocking:G,terminated:Q}={}){const de=indexedDB.open(E,I),Ye=Bi(de);return N&&de.addEventListener("upgradeneeded",ze=>{N(Bi(de.result),ze.oldVersion,ze.newVersion,Bi(de.transaction))}),R&&de.addEventListener("blocked",()=>R()),Ye.then(ze=>{Q&&ze.addEventListener("close",()=>Q()),G&&ze.addEventListener("versionchange",()=>G())}).catch(()=>{}),Ye}function Wt(E,{blocked:I}={}){const R=indexedDB.deleteDatabase(E);return I&&R.addEventListener("blocked",()=>I()),Bi(R).then(()=>{})}const Dl=["get","getKey","getAll","getAllKeys","count"],Hc=["put","add","delete","clear"],Bn=new Map;function Sl(E,I){if(!(E instanceof IDBDatabase)||I in E||"string"!=typeof I)return;if(Bn.get(I))return Bn.get(I);const R=I.replace(/FromIndex$/,""),N=I!==R,G=Hc.includes(R);if(!(R in(N?IDBIndex:IDBObjectStore).prototype)||!G&&!Dl.includes(R))return;const Q=function(){var de=(0,P.Z)(function*(Ye,...ze){const ht=this.transaction(Ye,G?"readwrite":"readonly");let gt=ht.store;return N&&(gt=gt.index(ze.shift())),(yield Promise.all([gt[R](...ze),G&&ht.done]))[0]});return function(ze){return de.apply(this,arguments)}}();return Bn.set(I,Q),Q}!function gd(E){xa=E(xa)}(E=>({...E,get:(I,R,N)=>Sl(I,R)||E.get(I,R,N),has:(I,R)=>!!Sl(I,R)||E.has(I,R)}));const go="/firebase-messaging-sw.js",si="/firebase-cloud-messaging-push-scope",Go="BDOU99-h67HcA6JeFXHbSNMu7e2yNNu3RzoMj8TM4W88jITfq7ZmPvIM1Iv-4_l2LxQcYwhqby2xGpWwzjfAnG4",$c="google.c.a.c_id",Un="google.c.a.c_l",ef="google.c.a.ts",tf="google.c.a.e";var oi=(()=>{return(E=oi||(oi={})).PUSH_RECEIVED="push-received",E.NOTIFICATION_CLICKED="notification-clicked",oi;var E})();function Ui(E){const I=new Uint8Array(E);return btoa(String.fromCharCode(...I)).replace(/=/g,"").replace(/\+/g,"-").replace(/\//g,"_")}function Ms(E){const R=(E+"=".repeat((4-E.length%4)%4)).replace(/\-/g,"+").replace(/_/g,"/"),N=atob(R),G=new Uint8Array(N.length);for(let Q=0;Q<N.length;++Q)G[Q]=N.charCodeAt(Q);return G}const ai="fcm_token_details_db",mo="fcm_token_object_Store";function wg(E){return qo.apply(this,arguments)}function qo(){return qo=(0,P.Z)(function*(E){if("databases"in indexedDB&&!(yield indexedDB.databases()).map(Q=>Q.name).includes(ai))return null;let I=null;return(yield Te(ai,5,{upgrade:(N=(0,P.Z)(function*(G,Q,de,Ye){var ze;if(Q<2||!G.objectStoreNames.contains(mo))return;const ht=Ye.objectStore(mo),gt=yield ht.index("fcmSenderId").get(E);if(yield ht.clear(),gt)if(2===Q){const Ft=gt;if(!Ft.auth||!Ft.p256dh||!Ft.endpoint)return;I={token:Ft.fcmToken,createTime:null!==(ze=Ft.createTime)&&void 0!==ze?ze:Date.now(),subscriptionOptions:{auth:Ft.auth,p256dh:Ft.p256dh,endpoint:Ft.endpoint,swScope:Ft.swScope,vapidKey:"string"==typeof Ft.vapidKey?Ft.vapidKey:Ui(Ft.vapidKey)}}}else if(3===Q){const Ft=gt;I={token:Ft.fcmToken,createTime:Ft.createTime,subscriptionOptions:{auth:Ui(Ft.auth),p256dh:Ui(Ft.p256dh),endpoint:Ft.endpoint,swScope:Ft.swScope,vapidKey:Ui(Ft.vapidKey)}}}else if(4===Q){const Ft=gt;I={token:Ft.fcmToken,createTime:Ft.createTime,subscriptionOptions:{auth:Ui(Ft.auth),p256dh:Ui(Ft.p256dh),endpoint:Ft.endpoint,swScope:Ft.swScope,vapidKey:Ui(Ft.vapidKey)}}}}),function(Q,de,Ye,ze){return N.apply(this,arguments)})})).close(),yield Wt(ai),yield Wt("fcm_vapid_details_db"),yield Wt("undefined"),zc(I)?I:null;var N}),qo.apply(this,arguments)}function zc(E){if(!E||!E.subscriptionOptions)return!1;const{subscriptionOptions:I}=E;return"number"==typeof E.createTime&&E.createTime>0&&"string"==typeof E.token&&E.token.length>0&&"string"==typeof I.auth&&I.auth.length>0&&"string"==typeof I.p256dh&&I.p256dh.length>0&&"string"==typeof I.endpoint&&I.endpoint.length>0&&"string"==typeof I.swScope&&I.swScope.length>0&&"string"==typeof I.vapidKey&&I.vapidKey.length>0}const Ur="firebase-messaging-store";let Gc=null;function ka(){return Gc||(Gc=Te("firebase-messaging-database",1,{upgrade:(E,I)=>{0===I&&E.createObjectStore(Ur)}})),Gc}function Oa(E){return _o.apply(this,arguments)}function _o(){return(_o=(0,P.Z)(function*(E){const I=Al(E),N=yield(yield ka()).transaction(Ur).objectStore(Ur).get(I);if(N)return N;{const G=yield wg(E.appConfig.senderId);if(G)return yield qc(E,G),G}})).apply(this,arguments)}function qc(E,I){return Pa.apply(this,arguments)}function Pa(){return(Pa=(0,P.Z)(function*(E,I){const R=Al(E),G=(yield ka()).transaction(Ur,"readwrite");return yield G.objectStore(Ur).put(I,R),yield G.done,I})).apply(this,arguments)}function vd(E){return Wo.apply(this,arguments)}function Wo(){return(Wo=(0,P.Z)(function*(E){const I=Al(E),N=(yield ka()).transaction(Ur,"readwrite");yield N.objectStore(Ur).delete(I),yield N.done})).apply(this,arguments)}function Al({appConfig:E}){return E.appId}const ln=new le.LL("messaging","Messaging",{"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"only-available-in-window":"This method is available in a Window context.","only-available-in-sw":"This method is available in a service worker context.","permission-default":"The notification permission was not granted and dismissed instead.","permission-blocked":"The notification permission was not granted and blocked instead.","unsupported-browser":"This browser doesn't support the API's required to use the Firebase SDK.","indexed-db-unsupported":"This browser doesn't support indexedDb.open() (ex. Safari iFrame, Firefox Private Browsing, etc)","failed-service-worker-registration":"We are unable to register the default service worker. {$browserErrorMessage}","token-subscribe-failed":"A problem occurred while subscribing the user to FCM: {$errorInfo}","token-subscribe-no-token":"FCM returned no token when subscribing the user to push.","token-unsubscribe-failed":"A problem occurred while unsubscribing the user from FCM: {$errorInfo}","token-update-failed":"A problem occurred while updating the user from FCM: {$errorInfo}","token-update-no-token":"FCM returned no token when updating the user to push.","use-sw-after-get-token":"The useServiceWorker() method may only be called once and must be called before calling getToken() to ensure your service worker is used.","invalid-sw-registration":"The input to useServiceWorker() must be a ServiceWorkerRegistration.","invalid-bg-handler":"The input to setBackgroundMessageHandler() must be a function.","invalid-vapid-key":"The public VAPID key must be a string.","use-vapid-key-after-get-token":"The usePublicVapidKey() method may only be called once and must be called before calling getToken() to ensure your VAPID key is used."});function xs(E,I){return Mn.apply(this,arguments)}function Mn(){return(Mn=(0,P.Z)(function*(E,I){const R=yield Zc(E),N=Na(I),G={method:"POST",headers:R,body:JSON.stringify(N)};let Q;try{Q=yield(yield fetch(Ml(E.appConfig),G)).json()}catch(de){throw ln.create("token-subscribe-failed",{errorInfo:de?.toString()})}if(Q.error)throw ln.create("token-subscribe-failed",{errorInfo:Q.error.message});if(!Q.token)throw ln.create("token-subscribe-no-token");return Q.token})).apply(this,arguments)}function Wc(E,I){return bd.apply(this,arguments)}function bd(){return(bd=(0,P.Z)(function*(E,I){const R=yield Zc(E),N=Na(I.subscriptionOptions),G={method:"PATCH",headers:R,body:JSON.stringify(N)};let Q;try{Q=yield(yield fetch(`${Ml(E.appConfig)}/${I.token}`,G)).json()}catch(de){throw ln.create("token-update-failed",{errorInfo:de?.toString()})}if(Q.error)throw ln.create("token-update-failed",{errorInfo:Q.error.message});if(!Q.token)throw ln.create("token-update-no-token");return Q.token})).apply(this,arguments)}function Kc(E,I){return wd.apply(this,arguments)}function wd(){return(wd=(0,P.Z)(function*(E,I){const N={method:"DELETE",headers:yield Zc(E)};try{const Q=yield(yield fetch(`${Ml(E.appConfig)}/${I}`,N)).json();if(Q.error)throw ln.create("token-unsubscribe-failed",{errorInfo:Q.error.message})}catch(G){throw ln.create("token-unsubscribe-failed",{errorInfo:G?.toString()})}})).apply(this,arguments)}function Ml({projectId:E}){return`https://fcmregistrations.googleapis.com/v1/projects/${E}/registrations`}function Zc(E){return yo.apply(this,arguments)}function yo(){return(yo=(0,P.Z)(function*({appConfig:E,installations:I}){const R=yield I.getToken();return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":E.apiKey,"x-goog-firebase-installations-auth":`FIS ${R}`})})).apply(this,arguments)}function Na({p256dh:E,auth:I,endpoint:R,vapidKey:N}){const G={web:{endpoint:R,auth:I,p256dh:E}};return N!==Go&&(G.web.applicationPubKey=N),G}const Ko=6048e5;function Ed(E){return Fa.apply(this,arguments)}function Fa(){return(Fa=(0,P.Z)(function*(E){const I=yield Yc(E.swRegistration,E.vapidKey),R={vapidKey:E.vapidKey,swScope:E.swRegistration.scope,endpoint:I.endpoint,auth:Ui(I.getKey("auth")),p256dh:Ui(I.getKey("p256dh"))},N=yield Oa(E.firebaseDependencies);if(N){if(sf(N.subscriptionOptions,R))return Date.now()>=N.createTime+Ko?La(E,{token:N.token,createTime:Date.now(),subscriptionOptions:R}):N.token;try{yield Kc(E.firebaseDependencies,N.token)}catch(G){console.warn(G)}return rf(E.firebaseDependencies,R)}return rf(E.firebaseDependencies,R)})).apply(this,arguments)}function nf(E){return Rs.apply(this,arguments)}function Rs(){return(Rs=(0,P.Z)(function*(E){const I=yield Oa(E.firebaseDependencies);I&&(yield Kc(E.firebaseDependencies,I.token),yield vd(E.firebaseDependencies));const R=yield E.swRegistration.pushManager.getSubscription();return!R||R.unsubscribe()})).apply(this,arguments)}function La(E,I){return xl.apply(this,arguments)}function xl(){return(xl=(0,P.Z)(function*(E,I){try{const R=yield Wc(E.firebaseDependencies,I),N=Object.assign(Object.assign({},I),{token:R,createTime:Date.now()});return yield qc(E.firebaseDependencies,N),R}catch(R){throw yield nf(E),R}})).apply(this,arguments)}function rf(E,I){return Hi.apply(this,arguments)}function Hi(){return(Hi=(0,P.Z)(function*(E,I){const N={token:yield xs(E,I),createTime:Date.now(),subscriptionOptions:I};return yield qc(E,N),N.token})).apply(this,arguments)}function Yc(E,I){return Cd.apply(this,arguments)}function Cd(){return(Cd=(0,P.Z)(function*(E,I){return(yield E.pushManager.getSubscription())||E.pushManager.subscribe({userVisibleOnly:!0,applicationServerKey:Ms(I)})})).apply(this,arguments)}function sf(E,I){return I.vapidKey===E.vapidKey&&I.endpoint===E.endpoint&&I.auth===E.auth&&I.p256dh===E.p256dh}function Qc(E){const I={from:E.from,collapseKey:E.collapse_key,messageId:E.fcmMessageId};return function Rl(E,I){if(!I.notification)return;E.notification={};const R=I.notification.title;R&&(E.notification.title=R);const N=I.notification.body;N&&(E.notification.body=N);const G=I.notification.image;G&&(E.notification.image=G);const Q=I.notification.icon;Q&&(E.notification.icon=Q)}(I,E),function kl(E,I){!I.data||(E.data=I.data)}(I,E),function Ol(E,I){var R,N,G,Q,de;if(!(I.fcmOptions||null!==(R=I.notification)&&void 0!==R&&R.click_action))return;E.fcmOptions={};const Ye=null!==(G=null===(N=I.fcmOptions)||void 0===N?void 0:N.link)&&void 0!==G?G:null===(Q=I.notification)||void 0===Q?void 0:Q.click_action;Ye&&(E.fcmOptions.link=Ye);const ze=null===(de=I.fcmOptions)||void 0===de?void 0:de.analytics_label;ze&&(E.fcmOptions.analyticsLabel=ze)}(I,E),I}function af(E){return"object"==typeof E&&!!E&&$c in E}function Zo(E,I){const R=[];for(let N=0;N<E.length;N++)R.push(E.charAt(N)),N<I.length&&R.push(I.charAt(N));return R.join("")}function Xc(E){return ln.create("missing-app-config-values",{valueName:E})}Zo("hts/frbslgigp.ogepscmv/ieo/eaylg","tp:/ieaeogn-agolai.o/1frlglgc/o"),Zo("AzSCbw63g1R0nCw85jG8","Iaya3yLKwmgvh7cF0q4");class Va{constructor(I,R,N){this.deliveryMetricsExportedToBigQueryEnabled=!1,this.onBackgroundMessageHandler=null,this.onMessageHandler=null,this.logEvents=[],this.isLogServiceStarted=!1;const G=function Id(E){if(!E||!E.options)throw Xc("App Configuration Object");if(!E.name)throw Xc("App Name");const I=["projectId","apiKey","appId","messagingSenderId"],{options:R}=E;for(const N of I)if(!R[N])throw Xc(N);return{appName:E.name,projectId:R.projectId,apiKey:R.apiKey,appId:R.appId,senderId:R.messagingSenderId}}(I);this.firebaseDependencies={app:I,appConfig:G,installations:R,analyticsProvider:N}}_delete(){return Promise.resolve()}}function lf(E){return ls.apply(this,arguments)}function ls(){return(ls=(0,P.Z)(function*(E){try{E.swRegistration=yield navigator.serviceWorker.register(go,{scope:si}),E.swRegistration.update().catch(()=>{})}catch(I){throw ln.create("failed-service-worker-registration",{browserErrorMessage:I?.message})}})).apply(this,arguments)}function Ba(E,I){return ks.apply(this,arguments)}function ks(){return(ks=(0,P.Z)(function*(E,I){if(!I&&!E.swRegistration&&(yield lf(E)),I||!E.swRegistration){if(!(I instanceof ServiceWorkerRegistration))throw ln.create("invalid-sw-registration");E.swRegistration=I}})).apply(this,arguments)}function vo(E,I){return cs.apply(this,arguments)}function cs(){return(cs=(0,P.Z)(function*(E,I){I?E.vapidKey=I:E.vapidKey||(E.vapidKey=Go)})).apply(this,arguments)}function Ua(){return(Ua=(0,P.Z)(function*(E,I){if(!navigator)throw ln.create("only-available-in-window");if("default"===Notification.permission&&(yield Notification.requestPermission()),"granted"!==Notification.permission)throw ln.create("permission-blocked");return yield vo(E,I?.vapidKey),yield Ba(E,I?.serviceWorkerRegistration),Ed(E)})).apply(this,arguments)}function _i(E,I,R){return Jc.apply(this,arguments)}function Jc(){return(Jc=(0,P.Z)(function*(E,I,R){const N=Yo(I);(yield E.firebaseDependencies.analyticsProvider.get()).logEvent(N,{message_id:R[$c],message_name:R[Un],message_time:R[ef],message_device_time:Math.floor(Date.now()/1e3)})})).apply(this,arguments)}function Yo(E){switch(E){case oi.NOTIFICATION_CLICKED:return"notification_open";case oi.PUSH_RECEIVED:return"notification_foreground";default:throw new Error}}function bo(){return(bo=(0,P.Z)(function*(E,I){const R=I.data;if(!R.isFirebaseMessaging)return;E.onMessageHandler&&R.messageType===oi.PUSH_RECEIVED&&("function"==typeof E.onMessageHandler?E.onMessageHandler(Qc(R)):E.onMessageHandler.next(Qc(R)));const N=R.data;af(N)&&"1"===N[tf]&&(yield _i(E,R.messageType,N))})).apply(this,arguments)}const wo="@firebase/messaging",Eo=E=>{const I=new Va(E.getProvider("app").getImmediate(),E.getProvider("installations-internal").getImmediate(),E.getProvider("analytics-internal"));return navigator.serviceWorker.addEventListener("message",R=>function eu(E,I){return bo.apply(this,arguments)}(I,R)),I},Nl=E=>{const I=E.getProvider("messaging").getImmediate();return{getToken:N=>function Pl(E,I){return Ua.apply(this,arguments)}(I,N)}};function Qo(){return Xo.apply(this,arguments)}function Xo(){return(Xo=(0,P.Z)(function*(){try{yield(0,le.eu)()}catch{return!1}return typeof window<"u"&&(0,le.hl)()&&(0,le.zI)()&&"serviceWorker"in navigator&&"PushManager"in window&&"Notification"in window&&"fetch"in window&&ServiceWorkerRegistration.prototype.hasOwnProperty("showNotification")&&PushSubscription.prototype.hasOwnProperty("getKey")})).apply(this,arguments)}!function cf(){(0,ce._registerComponent)(new fe.wA("messaging",Eo,"PUBLIC")),(0,ce._registerComponent)(new fe.wA("messaging-internal",Nl,"PRIVATE")),(0,ce.registerVersion)(wo,"0.12.4"),(0,ce.registerVersion)(wo,"0.12.4","esm2017")}();const xn="analytics",tu="firebase_id",Ll="https://firebase.googleapis.com/v1alpha/projects/-/apps/{app-id}/webConfig",Os="https://www.googletagmanager.com/gtag/js",Hn=new se.Yd("@firebase/analytics"),Rr=new le.LL("analytics","Analytics",{"already-exists":"A Firebase Analytics instance with the appId {$id}  already exists. Only one Firebase Analytics instance can be created for each appId.","already-initialized":"initializeAnalytics() cannot be called again with different options than those it was initially called with. It can be called again with the same options to return the existing instance, or getAnalytics() can be used to get a reference to the already-intialized instance.","already-initialized-settings":"Firebase Analytics has already been initialized.settings() must be called before initializing any Analytics instanceor it will have no effect.","interop-component-reg-failed":"Firebase Analytics Interop Component failed to instantiate: {$reason}","invalid-analytics-context":"Firebase Analytics is not supported in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","indexeddb-unavailable":"IndexedDB unavailable or restricted in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","fetch-throttle":"The config fetch request timed out while in an exponential backoff state. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.","config-fetch-failed":"Dynamic config fetch failed: [{$httpStatus}] {$responseMessage}","no-api-key":'The "apiKey" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid API key.',"no-app-id":'The "appId" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid app ID.',"no-client-id":'The "client_id" field is empty.',"invalid-gtag-resource":"Trusted Types detected an invalid gtag resource: {$gtagURL}."});function Jo(E){if(!E.startsWith(Os)){const I=Rr.create("invalid-gtag-resource",{gtagURL:E});return Hn.warn(I.message),""}return E}function Ps(E){return Promise.all(E.map(I=>I.catch(R=>R)))}function za(E,I){const R=function Vl(E,I){let R;return window.trustedTypes&&(R=window.trustedTypes.createPolicy(E,I)),R}("firebase-js-sdk-policy",{createScriptURL:Jo}),N=document.createElement("script"),G=`${Os}?l=${E}&id=${I}`;N.src=R?R?.createScriptURL(G):G,N.async=!0,document.head.appendChild(N)}function nu(E,I,R,N,G,Q){return Bl.apply(this,arguments)}function Bl(){return(Bl=(0,P.Z)(function*(E,I,R,N,G,Q){const de=N[G];try{if(de)yield I[de];else{const ze=(yield Ps(R)).find(ht=>ht.measurementId===G);ze&&(yield I[ze.appId])}}catch(Ye){Hn.error(Ye)}E("config",G,Q)})).apply(this,arguments)}function hf(E,I,R,N,G){return Dd.apply(this,arguments)}function Dd(){return(Dd=(0,P.Z)(function*(E,I,R,N,G){try{let Q=[];if(G&&G.send_to){let de=G.send_to;Array.isArray(de)||(de=[de]);const Ye=yield Ps(R);for(const ze of de){const ht=Ye.find(Ft=>Ft.measurementId===ze),gt=ht&&I[ht.appId];if(!gt){Q=[];break}Q.push(gt)}}0===Q.length&&(Q=Object.values(I)),yield Promise.all(Q),E("event",N,G||{})}catch(Q){Hn.error(Q)}})).apply(this,arguments)}function gf(E){const I=window.document.getElementsByTagName("script");for(const R of Object.values(I))if(R.src&&R.src.includes(Os)&&R.src.includes(E))return R;return null}const rr=new class Ul{constructor(I={},R=1e3){this.throttleMetadata=I,this.intervalMillis=R}getThrottleMetadata(I){return this.throttleMetadata[I]}setThrottleMetadata(I,R){this.throttleMetadata[I]=R}deleteThrottleMetadata(I){delete this.throttleMetadata[I]}};function Hl(E){return new Headers({Accept:"application/json","x-goog-api-key":E})}function yi(E){return Sd.apply(this,arguments)}function Sd(){return(Sd=(0,P.Z)(function*(E){var I;const{appId:R,apiKey:N}=E,G={method:"GET",headers:Hl(N)},Q=Ll.replace("{app-id}",R),de=yield fetch(Q,G);if(200!==de.status&&304!==de.status){let Ye="";try{const ze=yield de.json();null!==(I=ze.error)&&void 0!==I&&I.message&&(Ye=ze.error.message)}catch{}throw Rr.create("config-fetch-failed",{httpStatus:de.status,responseMessage:Ye})}return de.json()})).apply(this,arguments)}function mf(E){return Yn.apply(this,arguments)}function Yn(){return(Yn=(0,P.Z)(function*(E,I=rr,R){const{appId:N,apiKey:G,measurementId:Q}=E.options;if(!N)throw Rr.create("no-app-id");if(!G){if(Q)return{measurementId:Q,appId:N};throw Rr.create("no-api-key")}const de=I.getThrottleMetadata(N)||{backoffCount:0,throttleEndTimeMillis:Date.now()},Ye=new Td;return setTimeout((0,P.Z)(function*(){Ye.abort()}),void 0!==R?R:6e4),ji({appId:N,apiKey:G,measurementId:Q},de,Ye,I)})).apply(this,arguments)}function ji(E,I,R){return ru.apply(this,arguments)}function ru(){return(ru=(0,P.Z)(function*(E,{throttleEndTimeMillis:I,backoffCount:R},N,G=rr){var Q;const{appId:de,measurementId:Ye}=E;try{yield iu(N,I)}catch(ze){if(Ye)return Hn.warn(`Timed out fetching this Firebase app's measurement ID from the server. Falling back to the measurement ID ${Ye} provided in the "measurementId" field in the local Firebase config. [${ze?.message}]`),{appId:de,measurementId:Ye};throw ze}try{const ze=yield yi(E);return G.deleteThrottleMetadata(de),ze}catch(ze){const ht=ze;if(!ea(ht)){if(G.deleteThrottleMetadata(de),Ye)return Hn.warn(`Failed to fetch this Firebase app's measurement ID from the server. Falling back to the measurement ID ${Ye} provided in the "measurementId" field in the local Firebase config. [${ht?.message}]`),{appId:de,measurementId:Ye};throw ze}const gt=503===Number(null===(Q=ht?.customData)||void 0===Q?void 0:Q.httpStatus)?(0,le.$s)(R,G.intervalMillis,30):(0,le.$s)(R,G.intervalMillis),Ft={throttleEndTimeMillis:Date.now()+gt,backoffCount:R+1};return G.setThrottleMetadata(de,Ft),Hn.debug(`Calling attemptFetch again in ${gt} millis`),ji(E,Ft,N,G)}})).apply(this,arguments)}function iu(E,I){return new Promise((R,N)=>{const G=Math.max(I-Date.now(),0),Q=setTimeout(R,G);E.addEventListener(()=>{clearTimeout(Q),N(Rr.create("fetch-throttle",{throttleEndTimeMillis:I}))})})}function ea(E){if(!(E instanceof le.ZR&&E.customData))return!1;const I=Number(E.customData.httpStatus);return 429===I||500===I||503===I||504===I}class Td{constructor(){this.listeners=[]}addEventListener(I){this.listeners.push(I)}abort(){this.listeners.forEach(I=>I())}}let Ad,ou;function _f(){return(_f=(0,P.Z)(function*(E,I,R,N,G){if(G&&G.global)E("event",R,N);else{const Q=yield I;E("event",R,Object.assign(Object.assign({},N),{send_to:Q}))}})).apply(this,arguments)}function Wa(E){ou=E}function Gl(E){Ad=E}function fn(){return $i.apply(this,arguments)}function $i(){return($i=(0,P.Z)(function*(){if(!(0,le.hl)())return Hn.warn(Rr.create("indexeddb-unavailable",{errorInfo:"IndexedDB is not available in this environment."}).message),!1;try{yield(0,le.eu)()}catch(E){return Hn.warn(Rr.create("indexeddb-unavailable",{errorInfo:E?.toString()}).message),!1}return!0})).apply(this,arguments)}function Kt(){return(Kt=(0,P.Z)(function*(E,I,R,N,G,Q,de){var Ye;const ze=mf(E);ze.then(En=>{R[En.measurementId]=En.appId,E.options.measurementId&&En.measurementId!==E.options.measurementId&&Hn.warn(`The measurement ID in the local Firebase config (${E.options.measurementId}) does not match the measurement ID fetched from the server (${En.measurementId}). To ensure analytics events are always sent to the correct Analytics property, update the measurement ID field in the local config or remove it from the local config.`)}).catch(En=>Hn.error(En)),I.push(ze);const ht=fn().then(En=>{if(En)return N.getId()}),[gt,Ft]=yield Promise.all([ze,ht]);gf(Q)||za(Q,gt.measurementId),ou&&(G("consent","default",ou),Wa(void 0)),G("js",new Date);const kr=null!==(Ye=de?.config)&&void 0!==Ye?Ye:{};return kr.origin="firebase",kr.update=!0,null!=Ft&&(kr[tu]=Ft),G("config",gt.measurementId,kr),Ad&&(G("set",Ad),Gl(void 0)),gt.measurementId})).apply(this,arguments)}class Qn{constructor(I){this.app=I}_delete(){return delete Hr[this.app.options.appId],Promise.resolve()}}let Hr={},Ka=[];const Xr={};let So,jr,ql="dataLayer",Wl=!1;function _t(E,I,R){!function ta(){const E=[];if((0,le.ru)()&&E.push("This is a browser extension environment."),(0,le.zI)()||E.push("Cookies are not available."),E.length>0){const I=E.map((N,G)=>`(${G+1}) ${N}`).join(" "),R=Rr.create("invalid-analytics-context",{errorInfo:I});Hn.warn(R.message)}}();const N=E.options.appId;if(!N)throw Rr.create("no-app-id");if(!E.options.apiKey){if(!E.options.measurementId)throw Rr.create("no-api-key");Hn.warn(`The "apiKey" field is empty in the local Firebase config. This is needed to fetch the latest measurement ID for this Firebase app. Falling back to the measurement ID ${E.options.measurementId} provided in the "measurementId" field in the local Firebase config.`)}if(null!=Hr[N])throw Rr.create("already-exists",{id:N});if(!Wl){!function mn(E){let I=[];Array.isArray(window[E])?I=window[E]:window[E]=I}(ql);const{wrappedGtag:Q,gtagCore:de}=function pf(E,I,R,N,G){let Q=function(...de){window[N].push(arguments)};return window[G]&&"function"==typeof window[G]&&(Q=window[G]),window[G]=function ff(E,I,R,N){function Q(){return(Q=(0,P.Z)(function*(de,...Ye){try{if("event"===de){const[ze,ht]=Ye;yield hf(E,I,R,ze,ht)}else if("config"===de){const[ze,ht]=Ye;yield nu(E,I,R,N,ze,ht)}else if("consent"===de){const[ze]=Ye;E("consent","update",ze)}else if("get"===de){const[ze,ht,gt]=Ye;E("get",ze,ht,gt)}else if("set"===de){const[ze]=Ye;E("set",ze)}else E(de,...Ye)}catch(ze){Hn.error(ze)}})).apply(this,arguments)}return function G(de){return Q.apply(this,arguments)}}(Q,E,I,R),{gtagCore:Q,wrappedGtag:window[G]}}(Hr,Ka,Xr,ql,"gtag");jr=Q,So=de,Wl=!0}return Hr[N]=function nt(E,I,R,N,G,Q,de){return Kt.apply(this,arguments)}(E,Ka,Xr,I,So,ql,R),new Qn(E)}function Ya(){return Kl.apply(this,arguments)}function Kl(){return(Kl=(0,P.Z)(function*(){if((0,le.ru)()||!(0,le.zI)()||!(0,le.hl)())return!1;try{return yield(0,le.eu)()}catch{return!1}})).apply(this,arguments)}const ra="@firebase/analytics";!function fs(){(0,ce._registerComponent)(new fe.wA(xn,(I,{options:R})=>_t(I.getProvider("app").getImmediate(),I.getProvider("installations-internal").getImmediate(),R),"PUBLIC")),(0,ce._registerComponent)(new fe.wA("analytics-internal",function E(I){try{const R=I.getProvider(xn).getImmediate();return{logEvent:(N,G,Q)=>function Ns(E,I,R,N){E=(0,le.m9)(E),function Dg(E,I,R,N,G){return _f.apply(this,arguments)}(jr,Hr[E.app.options.appId],I,R,N).catch(G=>Hn.error(G))}(R,N,G,Q)}}catch(R){throw Rr.create("interop-component-reg-failed",{reason:R})}},"PRIVATE")),(0,ce.registerVersion)(ra,"0.10.0"),(0,ce.registerVersion)(ra,"0.10.0","esm2017")}();var ci=F(4408),ia=F(7565);const Zl=new class ir extends ia.v{}(class vi extends ci.o{constructor(I,R){super(I,R),this.scheduler=I,this.work=R}schedule(I,R=0){return R>0?super.schedule(I,R):(this.delay=R,this.state=I,this.scheduler.flush(this),this)}execute(I,R){return R>0||this.closed?super.execute(I,R):this._execute(I,R)}requestAsyncId(I,R,N=0){return null!=N&&N>0||null==N&&this.delay>0?super.requestAsyncId(I,R,N):(I.flush(this),0)}});var sr=F(4986),zi=F(8505),ps=F(9468),Wn=F(5363);const Kn=new d.GfV("7.5.0"),to="__angularfire_symbol__analyticsIsSupportedValue",sa="__angularfire_symbol__analyticsIsSupported",Yl="__angularfire_symbol__remoteConfigIsSupportedValue",Gi="__angularfire_symbol__remoteConfigIsSupported",bi="__angularfire_symbol__messagingIsSupportedValue",Zn="__angularfire_symbol__messagingIsSupported";function Cf(E,I,R){if(I){if(1===I.length)return I[0];const Q=I.filter(de=>de.app===R);if(1===Q.length)return Q[0]}return R.container.getProvider(E).getImmediate({optional:!0})}globalThis[sa]||(globalThis[sa]=Ya().then(E=>globalThis[to]=E).catch(()=>globalThis[to]=!1)),globalThis[Zn]||(globalThis[Zn]=Qo().then(E=>globalThis[bi]=E).catch(()=>globalThis[bi]=!1)),globalThis[Gi]||(globalThis[Gi]=Qr().then(E=>globalThis[Yl]=E).catch(()=>globalThis[Yl]=!1));const lu=(E,I)=>{const R=I?[I]:(0,ee.C6)(),N=[];return R.forEach(G=>{G.container.getProvider(E).instances.forEach(de=>{N.includes(de)||N.push(de)})}),N};function Mo(){}class Ql{constructor(I,R=Zl){this.zone=I,this.delegate=R}now(){return this.delegate.now()}schedule(I,R,N){const G=this.zone;return this.delegate.schedule(function(de){G.runGuarded(()=>{I.apply(this,[de])})},R,N)}}class Jt{constructor(I){this.zone=I,this.task=null}call(I,R){const N=this.unscheduleTask.bind(this);return this.task=this.zone.run(()=>Zone.current.scheduleMacroTask("firebaseZoneBlock",Mo,{},Mo,Mo)),R.pipe((0,zi.b)({next:N,complete:N,error:N})).subscribe(I).add(N)}unscheduleTask(){setTimeout(()=>{null!=this.task&&"scheduled"===this.task.state&&(this.task.invoke(),this.task=null)},10)}}let Qa=(()=>{class E{constructor(R){this.ngZone=R,this.outsideAngular=R.runOutsideAngular(()=>new Ql(Zone.current)),this.insideAngular=R.run(()=>new Ql(Zone.current,sr.z)),globalThis.\u0275AngularFireScheduler||(globalThis.\u0275AngularFireScheduler=this)}}return E.\u0275fac=function(R){return new(R||E)(d.LFG(d.R0b))},E.\u0275prov=d.Yz7({token:E,factory:E.\u0275fac,providedIn:"root"}),E})();function oa(){const E=globalThis.\u0275AngularFireScheduler;if(!E)throw new Error("Either AngularFireModule has not been provided in your AppModule (this can be done manually or implictly using\nprovideFirebaseApp) or you're calling an AngularFire method outside of an NgModule (which is not supported).");return E}function Xl(E){return oa(),function cu(E){return function(R){return(R=R.lift(new Jt(E.ngZone))).pipe((0,ps.R)(E.outsideAngular),(0,Wn.Q)(E.insideAngular))}}(oa())(E)}},2090:(vt,Ae,F)=>{F.d(Ae,{$s:()=>os,BH:()=>me,G6:()=>Re,L:()=>ge,LL:()=>He,Pz:()=>Ce,Sg:()=>Ke,UG:()=>re,US:()=>fe,ZB:()=>Y,ZR:()=>Vt,aH:()=>Ne,b$:()=>Qt,eu:()=>Se,hl:()=>Ve,jU:()=>kt,m9:()=>Zr,ne:()=>sn,pd:()=>fr,r3:()=>Oi,ru:()=>ft,tV:()=>z,uI:()=>rt,vZ:()=>Wr,w1:()=>pe,xO:()=>Bo,xb:()=>Vo,z$:()=>$e,zI:()=>Nt,zd:()=>fi});const ce=function(H){const B=[];let K=0;for(let ue=0;ue<H.length;ue++){let J=H.charCodeAt(ue);J<128?B[K++]=J:J<2048?(B[K++]=J>>6|192,B[K++]=63&J|128):55296==(64512&J)&&ue+1<H.length&&56320==(64512&H.charCodeAt(ue+1))?(J=65536+((1023&J)<<10)+(1023&H.charCodeAt(++ue)),B[K++]=J>>18|240,B[K++]=J>>12&63|128,B[K++]=J>>6&63|128,B[K++]=63&J|128):(B[K++]=J>>12|224,B[K++]=J>>6&63|128,B[K++]=63&J|128)}return B},fe={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:"function"==typeof atob,encodeByteArray(H,B){if(!Array.isArray(H))throw Error("encodeByteArray takes an array as a parameter");this.init_();const K=B?this.byteToCharMapWebSafe_:this.byteToCharMap_,ue=[];for(let J=0;J<H.length;J+=3){const Ze=H[J],xt=J+1<H.length,Ut=xt?H[J+1]:0,hn=J+2<H.length,Be=hn?H[J+2]:0;let bn=(15&Ut)<<2|Be>>6,Ar=63&Be;hn||(Ar=64,xt||(bn=64)),ue.push(K[Ze>>2],K[(3&Ze)<<4|Ut>>4],K[bn],K[Ar])}return ue.join("")},encodeString(H,B){return this.HAS_NATIVE_SUPPORT&&!B?btoa(H):this.encodeByteArray(ce(H),B)},decodeString(H,B){return this.HAS_NATIVE_SUPPORT&&!B?atob(H):function(H){const B=[];let K=0,ue=0;for(;K<H.length;){const J=H[K++];if(J<128)B[ue++]=String.fromCharCode(J);else if(J>191&&J<224){const Ze=H[K++];B[ue++]=String.fromCharCode((31&J)<<6|63&Ze)}else if(J>239&&J<365){const hn=((7&J)<<18|(63&H[K++])<<12|(63&H[K++])<<6|63&H[K++])-65536;B[ue++]=String.fromCharCode(55296+(hn>>10)),B[ue++]=String.fromCharCode(56320+(1023&hn))}else{const Ze=H[K++],xt=H[K++];B[ue++]=String.fromCharCode((15&J)<<12|(63&Ze)<<6|63&xt)}}return B.join("")}(this.decodeStringToByteArray(H,B))},decodeStringToByteArray(H,B){this.init_();const K=B?this.charToByteMapWebSafe_:this.charToByteMap_,ue=[];for(let J=0;J<H.length;){const Ze=K[H.charAt(J++)],Ut=J<H.length?K[H.charAt(J)]:0;++J;const Be=J<H.length?K[H.charAt(J)]:64;++J;const wt=J<H.length?K[H.charAt(J)]:64;if(++J,null==Ze||null==Ut||null==Be||null==wt)throw new se;ue.push(Ze<<2|Ut>>4),64!==Be&&(ue.push(Ut<<4&240|Be>>2),64!==wt&&ue.push(Be<<6&192|wt))}return ue},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let H=0;H<this.ENCODED_VALS.length;H++)this.byteToCharMap_[H]=this.ENCODED_VALS.charAt(H),this.charToByteMap_[this.byteToCharMap_[H]]=H,this.byteToCharMapWebSafe_[H]=this.ENCODED_VALS_WEBSAFE.charAt(H),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[H]]=H,H>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(H)]=H,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(H)]=H)}}};class se extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const ge=function(H){return function(H){const B=ce(H);return fe.encodeByteArray(B,!0)}(H).replace(/\./g,"")},z=function(H){try{return fe.decodeString(H,!0)}catch(B){console.error("base64Decode failed: ",B)}return null};function Y(H,B){if(!(B instanceof Object))return B;switch(B.constructor){case Date:return new Date(B.getTime());case Object:void 0===H&&(H={});break;case Array:H=[];break;default:return B}for(const K in B)!B.hasOwnProperty(K)||!We(K)||(H[K]=Y(H[K],B[K]));return H}function We(H){return"__proto__"!==H}const ve=()=>{try{return function xe(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}().__FIREBASE_DEFAULTS__||(()=>{if(typeof process>"u"||typeof process.env>"u")return;const H=process.env.__FIREBASE_DEFAULTS__;return H?JSON.parse(H):void 0})()||(()=>{if(typeof document>"u")return;let H;try{H=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const B=H&&z(H[1]);return B&&JSON.parse(B)})()}catch(H){return void console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${H}`)}},Ne=()=>{var H;return null===(H=ve())||void 0===H?void 0:H.config},Ce=H=>{var B;return null===(B=ve())||void 0===B?void 0:B[`_${H}`]};class me{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((B,K)=>{this.resolve=B,this.reject=K})}wrapCallback(B){return(K,ue)=>{K?this.reject(K):this.resolve(ue),"function"==typeof B&&(this.promise.catch(()=>{}),1===B.length?B(K):B(K,ue))}}}function Ke(H,B){if(H.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const ue=B||"demo-project",J=H.iat||0,Ze=H.sub||H.user_id;if(!Ze)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const xt=Object.assign({iss:`https://securetoken.google.com/${ue}`,aud:ue,iat:J,exp:J+3600,auth_time:J,sub:Ze,user_id:Ze,firebase:{sign_in_provider:"custom",identities:{}}},H);return[ge(JSON.stringify({alg:"none",type:"JWT"})),ge(JSON.stringify(xt)),""].join(".")}function $e(){return typeof navigator<"u"&&"string"==typeof navigator.userAgent?navigator.userAgent:""}function rt(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test($e())}function re(){var H;const B=null===(H=ve())||void 0===H?void 0:H.forceEnvironment;if("node"===B)return!0;if("browser"===B)return!1;try{return"[object process]"===Object.prototype.toString.call(global.process)}catch{return!1}}function kt(){return"object"==typeof self&&self.self===self}function ft(){const H="object"==typeof chrome?chrome.runtime:"object"==typeof browser?browser.runtime:void 0;return"object"==typeof H&&void 0!==H.id}function Qt(){return"object"==typeof navigator&&"ReactNative"===navigator.product}function pe(){const H=$e();return H.indexOf("MSIE ")>=0||H.indexOf("Trident/")>=0}function Re(){return!re()&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function Ve(){try{return"object"==typeof indexedDB}catch{return!1}}function Se(){return new Promise((H,B)=>{try{let K=!0;const ue="validate-browser-context-for-indexeddb-analytics-module",J=self.indexedDB.open(ue);J.onsuccess=()=>{J.result.close(),K||self.indexedDB.deleteDatabase(ue),H(!0)},J.onupgradeneeded=()=>{K=!1},J.onerror=()=>{var Ze;B((null===(Ze=J.error)||void 0===Ze?void 0:Ze.message)||"")}}catch(K){B(K)}})}function Nt(){return!(typeof navigator>"u"||!navigator.cookieEnabled)}class Vt extends Error{constructor(B,K,ue){super(K),this.code=B,this.customData=ue,this.name="FirebaseError",Object.setPrototypeOf(this,Vt.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,He.prototype.create)}}class He{constructor(B,K,ue){this.service=B,this.serviceName=K,this.errors=ue}create(B,...K){const ue=K[0]||{},J=`${this.service}/${B}`,Ze=this.errors[B],xt=Ze?function qt(H,B){return H.replace(Xt,(K,ue)=>{const J=B[ue];return null!=J?String(J):`<${ue}?>`})}(Ze,ue):"Error";return new Vt(J,`${this.serviceName}: ${xt} (${J}).`,ue)}}const Xt=/\{\$([^}]+)}/g;function Oi(H,B){return Object.prototype.hasOwnProperty.call(H,B)}function Vo(H){for(const B in H)if(Object.prototype.hasOwnProperty.call(H,B))return!1;return!0}function Wr(H,B){if(H===B)return!0;const K=Object.keys(H),ue=Object.keys(B);for(const J of K){if(!ue.includes(J))return!1;const Ze=H[J],xt=B[J];if(Pi(Ze)&&Pi(xt)){if(!Wr(Ze,xt))return!1}else if(Ze!==xt)return!1}for(const J of ue)if(!K.includes(J))return!1;return!0}function Pi(H){return null!==H&&"object"==typeof H}function Bo(H){const B=[];for(const[K,ue]of Object.entries(H))Array.isArray(ue)?ue.forEach(J=>{B.push(encodeURIComponent(K)+"="+encodeURIComponent(J))}):B.push(encodeURIComponent(K)+"="+encodeURIComponent(ue));return B.length?"&"+B.join("&"):""}function fi(H){const B={};return H.replace(/^\?/,"").split("&").forEach(ue=>{if(ue){const[J,Ze]=ue.split("=");B[decodeURIComponent(J)]=decodeURIComponent(Ze)}}),B}function fr(H){const B=H.indexOf("?");if(!B)return"";const K=H.indexOf("#",B);return H.substring(B,K>0?K:void 0)}function sn(H,B){const K=new it(H,B);return K.subscribe.bind(K)}class it{constructor(B,K){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=K,this.task.then(()=>{B(this)}).catch(ue=>{this.error(ue)})}next(B){this.forEachObserver(K=>{K.next(B)})}error(B){this.forEachObserver(K=>{K.error(B)}),this.close(B)}complete(){this.forEachObserver(B=>{B.complete()}),this.close()}subscribe(B,K,ue){let J;if(void 0===B&&void 0===K&&void 0===ue)throw new Error("Missing Observer.");J=function vn(H,B){if("object"!=typeof H||null===H)return!1;for(const K of B)if(K in H&&"function"==typeof H[K])return!0;return!1}(B,["next","error","complete"])?B:{next:B,error:K,complete:ue},void 0===J.next&&(J.next=ss),void 0===J.error&&(J.error=ss),void 0===J.complete&&(J.complete=ss);const Ze=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?J.error(this.finalError):J.complete()}catch{}}),this.observers.push(J),Ze}unsubscribeOne(B){void 0===this.observers||void 0===this.observers[B]||(delete this.observers[B],this.observerCount-=1,0===this.observerCount&&void 0!==this.onNoObservers&&this.onNoObservers(this))}forEachObserver(B){if(!this.finalized)for(let K=0;K<this.observers.length;K++)this.sendOne(K,B)}sendOne(B,K){this.task.then(()=>{if(void 0!==this.observers&&void 0!==this.observers[B])try{K(this.observers[B])}catch(ue){typeof console<"u"&&console.error&&console.error(ue)}})}close(B){this.finalized||(this.finalized=!0,void 0!==B&&(this.finalError=B),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function ss(){}function os(H,B=1e3,K=2){const ue=B*Math.pow(K,H),J=Math.round(.5*ue*(Math.random()-.5)*2);return Math.min(144e5,ue+J)}function Zr(H){return H&&H._delegate?H._delegate:H}},3954:(vt,Ae,F)=>{var d=F(4650);let ee=null;function P(){return ee}const se=new d.OlP("DocumentToken");let Ee=(()=>{class n{historyGo(t){throw new Error("Not implemented")}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=d.Yz7({token:n,factory:function(){return function ge(){return(0,d.LFG)($)}()},providedIn:"platform"}),n})();const z=new d.OlP("Location Initialized");let $=(()=>{class n extends Ee{constructor(t){super(),this._doc=t,this._init()}_init(){this.location=window.location,this._history=window.history}getBaseHrefFromDOM(){return P().getBaseHref(this._doc)}onPopState(t){const r=P().getGlobalEventTarget(this._doc,"window");return r.addEventListener("popstate",t,!1),()=>r.removeEventListener("popstate",t)}onHashChange(t){const r=P().getGlobalEventTarget(this._doc,"window");return r.addEventListener("hashchange",t,!1),()=>r.removeEventListener("hashchange",t)}get href(){return this.location.href}get protocol(){return this.location.protocol}get hostname(){return this.location.hostname}get port(){return this.location.port}get pathname(){return this.location.pathname}get search(){return this.location.search}get hash(){return this.location.hash}set pathname(t){this.location.pathname=t}pushState(t,r,i){Y()?this._history.pushState(t,r,i):this.location.hash=i}replaceState(t,r,i){Y()?this._history.replaceState(t,r,i):this.location.hash=i}forward(){this._history.forward()}back(){this._history.back()}historyGo(t=0){this._history.go(t)}getState(){return this._history.state}}return n.\u0275fac=function(t){return new(t||n)(d.LFG(se))},n.\u0275prov=d.Yz7({token:n,factory:function(){return function We(){return new $((0,d.LFG)(se))}()},providedIn:"platform"}),n})();function Y(){return!!window.history.pushState}function xe(n,e){if(0==n.length)return e;if(0==e.length)return n;let t=0;return n.endsWith("/")&&t++,e.startsWith("/")&&t++,2==t?n+e.substring(1):1==t?n+e:n+"/"+e}function De(n){const e=n.match(/#|\?|$/),t=e&&e.index||n.length;return n.slice(0,t-("/"===n[t-1]?1:0))+n.slice(t)}function at(n){return n&&"?"!==n[0]?"?"+n:n}let be=(()=>{class n{historyGo(t){throw new Error("Not implemented")}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=d.Yz7({token:n,factory:function(){return(0,d.f3M)(bt)},providedIn:"root"}),n})();const ve=new d.OlP("appBaseHref");let bt=(()=>{class n extends be{constructor(t,r){super(),this._platformLocation=t,this._removeListenerFns=[],this._baseHref=r??this._platformLocation.getBaseHrefFromDOM()??(0,d.f3M)(se).location?.origin??""}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(t){this._removeListenerFns.push(this._platformLocation.onPopState(t),this._platformLocation.onHashChange(t))}getBaseHref(){return this._baseHref}prepareExternalUrl(t){return xe(this._baseHref,t)}path(t=!1){const r=this._platformLocation.pathname+at(this._platformLocation.search),i=this._platformLocation.hash;return i&&t?`${r}${i}`:r}pushState(t,r,i,a){const c=this.prepareExternalUrl(i+at(a));this._platformLocation.pushState(t,r,c)}replaceState(t,r,i,a){const c=this.prepareExternalUrl(i+at(a));this._platformLocation.replaceState(t,r,c)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(t=0){this._platformLocation.historyGo?.(t)}}return n.\u0275fac=function(t){return new(t||n)(d.LFG(Ee),d.LFG(ve,8))},n.\u0275prov=d.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),St=(()=>{class n extends be{constructor(t,r){super(),this._platformLocation=t,this._baseHref="",this._removeListenerFns=[],null!=r&&(this._baseHref=r)}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(t){this._removeListenerFns.push(this._platformLocation.onPopState(t),this._platformLocation.onHashChange(t))}getBaseHref(){return this._baseHref}path(t=!1){let r=this._platformLocation.hash;return null==r&&(r="#"),r.length>0?r.substring(1):r}prepareExternalUrl(t){const r=xe(this._baseHref,t);return r.length>0?"#"+r:r}pushState(t,r,i,a){let c=this.prepareExternalUrl(i+at(a));0==c.length&&(c=this._platformLocation.pathname),this._platformLocation.pushState(t,r,c)}replaceState(t,r,i,a){let c=this.prepareExternalUrl(i+at(a));0==c.length&&(c=this._platformLocation.pathname),this._platformLocation.replaceState(t,r,c)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(t=0){this._platformLocation.historyGo?.(t)}}return n.\u0275fac=function(t){return new(t||n)(d.LFG(Ee),d.LFG(ve,8))},n.\u0275prov=d.Yz7({token:n,factory:n.\u0275fac}),n})(),Ne=(()=>{class n{constructor(t){this._subject=new d.vpe,this._urlChangeListeners=[],this._urlChangeSubscription=null,this._locationStrategy=t;const r=this._locationStrategy.getBaseHref();this._baseHref=De(Ke(r)),this._locationStrategy.onPopState(i=>{this._subject.emit({url:this.path(!0),pop:!0,state:i.state,type:i.type})})}ngOnDestroy(){this._urlChangeSubscription?.unsubscribe(),this._urlChangeListeners=[]}path(t=!1){return this.normalize(this._locationStrategy.path(t))}getState(){return this._locationStrategy.getState()}isCurrentPathEqualTo(t,r=""){return this.path()==this.normalize(t+at(r))}normalize(t){return n.stripTrailingSlash(function me(n,e){return n&&e.startsWith(n)?e.substring(n.length):e}(this._baseHref,Ke(t)))}prepareExternalUrl(t){return t&&"/"!==t[0]&&(t="/"+t),this._locationStrategy.prepareExternalUrl(t)}go(t,r="",i=null){this._locationStrategy.pushState(i,"",t,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+at(r)),i)}replaceState(t,r="",i=null){this._locationStrategy.replaceState(i,"",t,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+at(r)),i)}forward(){this._locationStrategy.forward()}back(){this._locationStrategy.back()}historyGo(t=0){this._locationStrategy.historyGo?.(t)}onUrlChange(t){return this._urlChangeListeners.push(t),this._urlChangeSubscription||(this._urlChangeSubscription=this.subscribe(r=>{this._notifyUrlChangeListeners(r.url,r.state)})),()=>{const r=this._urlChangeListeners.indexOf(t);this._urlChangeListeners.splice(r,1),0===this._urlChangeListeners.length&&(this._urlChangeSubscription?.unsubscribe(),this._urlChangeSubscription=null)}}_notifyUrlChangeListeners(t="",r){this._urlChangeListeners.forEach(i=>i(t,r))}subscribe(t,r,i){return this._subject.subscribe({next:t,error:r,complete:i})}}return n.normalizeQueryParams=at,n.joinWithSlash=xe,n.stripTrailingSlash=De,n.\u0275fac=function(t){return new(t||n)(d.LFG(be))},n.\u0275prov=d.Yz7({token:n,factory:function(){return function Ce(){return new Ne((0,d.LFG)(be))}()},providedIn:"root"}),n})();function Ke(n){return n.replace(/\/index.html$/,"")}let gn=(()=>{class n{constructor(t,r,i,a){this._iterableDiffers=t,this._keyValueDiffers=r,this._ngEl=i,this._renderer=a,this._iterableDiffer=null,this._keyValueDiffer=null,this._initialClasses=[],this._rawClass=null}set klass(t){this._removeClasses(this._initialClasses),this._initialClasses="string"==typeof t?t.split(/\s+/):[],this._applyClasses(this._initialClasses),this._applyClasses(this._rawClass)}set ngClass(t){this._removeClasses(this._rawClass),this._applyClasses(this._initialClasses),this._iterableDiffer=null,this._keyValueDiffer=null,this._rawClass="string"==typeof t?t.split(/\s+/):t,this._rawClass&&((0,d.sIi)(this._rawClass)?this._iterableDiffer=this._iterableDiffers.find(this._rawClass).create():this._keyValueDiffer=this._keyValueDiffers.find(this._rawClass).create())}ngDoCheck(){if(this._iterableDiffer){const t=this._iterableDiffer.diff(this._rawClass);t&&this._applyIterableChanges(t)}else if(this._keyValueDiffer){const t=this._keyValueDiffer.diff(this._rawClass);t&&this._applyKeyValueChanges(t)}}_applyKeyValueChanges(t){t.forEachAddedItem(r=>this._toggleClass(r.key,r.currentValue)),t.forEachChangedItem(r=>this._toggleClass(r.key,r.currentValue)),t.forEachRemovedItem(r=>{r.previousValue&&this._toggleClass(r.key,!1)})}_applyIterableChanges(t){t.forEachAddedItem(r=>{if("string"!=typeof r.item)throw new Error(`NgClass can only toggle CSS classes expressed as strings, got ${(0,d.AaK)(r.item)}`);this._toggleClass(r.item,!0)}),t.forEachRemovedItem(r=>this._toggleClass(r.item,!1))}_applyClasses(t){t&&(Array.isArray(t)||t instanceof Set?t.forEach(r=>this._toggleClass(r,!0)):Object.keys(t).forEach(r=>this._toggleClass(r,!!t[r])))}_removeClasses(t){t&&(Array.isArray(t)||t instanceof Set?t.forEach(r=>this._toggleClass(r,!1)):Object.keys(t).forEach(r=>this._toggleClass(r,!1)))}_toggleClass(t,r){(t=t.trim())&&t.split(/\s+/g).forEach(i=>{r?this._renderer.addClass(this._ngEl.nativeElement,i):this._renderer.removeClass(this._ngEl.nativeElement,i)})}}return n.\u0275fac=function(t){return new(t||n)(d.Y36(d.ZZ4),d.Y36(d.aQg),d.Y36(d.SBq),d.Y36(d.Qsj))},n.\u0275dir=d.lG2({type:n,selectors:[["","ngClass",""]],inputs:{klass:["class","klass"],ngClass:"ngClass"},standalone:!0}),n})();class Oc{constructor(e,t,r,i){this.$implicit=e,this.ngForOf=t,this.index=r,this.count=i}get first(){return 0===this.index}get last(){return this.index===this.count-1}get even(){return this.index%2==0}get odd(){return!this.even}}let In=(()=>{class n{constructor(t,r,i){this._viewContainer=t,this._template=r,this._differs=i,this._ngForOf=null,this._ngForOfDirty=!0,this._differ=null}set ngForOf(t){this._ngForOf=t,this._ngForOfDirty=!0}set ngForTrackBy(t){this._trackByFn=t}get ngForTrackBy(){return this._trackByFn}set ngForTemplate(t){t&&(this._template=t)}ngDoCheck(){if(this._ngForOfDirty){this._ngForOfDirty=!1;const t=this._ngForOf;!this._differ&&t&&(this._differ=this._differs.find(t).create(this.ngForTrackBy))}if(this._differ){const t=this._differ.diff(this._ngForOf);t&&this._applyChanges(t)}}_applyChanges(t){const r=this._viewContainer;t.forEachOperation((i,a,c)=>{if(null==i.previousIndex)r.createEmbeddedView(this._template,new Oc(i.item,this._ngForOf,-1,-1),null===c?void 0:c);else if(null==c)r.remove(null===a?void 0:a);else if(null!==a){const f=r.get(a);r.move(f,c),Qs(f,i)}});for(let i=0,a=r.length;i<a;i++){const f=r.get(i).context;f.index=i,f.count=a,f.ngForOf=this._ngForOf}t.forEachIdentityChange(i=>{Qs(r.get(i.currentIndex),i)})}static ngTemplateContextGuard(t,r){return!0}}return n.\u0275fac=function(t){return new(t||n)(d.Y36(d.s_b),d.Y36(d.Rgc),d.Y36(d.ZZ4))},n.\u0275dir=d.lG2({type:n,selectors:[["","ngFor","","ngForOf",""]],inputs:{ngForOf:"ngForOf",ngForTrackBy:"ngForTrackBy",ngForTemplate:"ngForTemplate"},standalone:!0}),n})();function Qs(n,e){n.context.$implicit=e.item}let nr=(()=>{class n{constructor(t,r){this._viewContainer=t,this._context=new nd,this._thenTemplateRef=null,this._elseTemplateRef=null,this._thenViewRef=null,this._elseViewRef=null,this._thenTemplateRef=r}set ngIf(t){this._context.$implicit=this._context.ngIf=t,this._updateView()}set ngIfThen(t){gr("ngIfThen",t),this._thenTemplateRef=t,this._thenViewRef=null,this._updateView()}set ngIfElse(t){gr("ngIfElse",t),this._elseTemplateRef=t,this._elseViewRef=null,this._updateView()}_updateView(){this._context.$implicit?this._thenViewRef||(this._viewContainer.clear(),this._elseViewRef=null,this._thenTemplateRef&&(this._thenViewRef=this._viewContainer.createEmbeddedView(this._thenTemplateRef,this._context))):this._elseViewRef||(this._viewContainer.clear(),this._thenViewRef=null,this._elseTemplateRef&&(this._elseViewRef=this._viewContainer.createEmbeddedView(this._elseTemplateRef,this._context)))}static ngTemplateContextGuard(t,r){return!0}}return n.\u0275fac=function(t){return new(t||n)(d.Y36(d.s_b),d.Y36(d.Rgc))},n.\u0275dir=d.lG2({type:n,selectors:[["","ngIf",""]],inputs:{ngIf:"ngIf",ngIfThen:"ngIfThen",ngIfElse:"ngIfElse"},standalone:!0}),n})();class nd{constructor(){this.$implicit=null,this.ngIf=null}}function gr(n,e){if(e&&!e.createEmbeddedView)throw new Error(`${n} must be a TemplateRef, but received '${(0,d.AaK)(e)}'.`)}class Yr{constructor(e,t){this._viewContainerRef=e,this._templateRef=t,this._created=!1}create(){this._created=!0,this._viewContainerRef.createEmbeddedView(this._templateRef)}destroy(){this._created=!1,this._viewContainerRef.clear()}enforceState(e){e&&!this._created?this.create():!e&&this._created&&this.destroy()}}let Xs=(()=>{class n{constructor(){this._defaultUsed=!1,this._caseCount=0,this._lastCaseCheckIndex=0,this._lastCasesMatched=!1}set ngSwitch(t){this._ngSwitch=t,0===this._caseCount&&this._updateDefaultCases(!0)}_addCase(){return this._caseCount++}_addDefault(t){this._defaultViews||(this._defaultViews=[]),this._defaultViews.push(t)}_matchCase(t){const r=t==this._ngSwitch;return this._lastCasesMatched=this._lastCasesMatched||r,this._lastCaseCheckIndex++,this._lastCaseCheckIndex===this._caseCount&&(this._updateDefaultCases(!this._lastCasesMatched),this._lastCaseCheckIndex=0,this._lastCasesMatched=!1),r}_updateDefaultCases(t){if(this._defaultViews&&t!==this._defaultUsed){this._defaultUsed=t;for(let r=0;r<this._defaultViews.length;r++)this._defaultViews[r].enforceState(t)}}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275dir=d.lG2({type:n,selectors:[["","ngSwitch",""]],inputs:{ngSwitch:"ngSwitch"},standalone:!0}),n})(),jo=(()=>{class n{constructor(t,r,i){this.ngSwitch=i,i._addCase(),this._view=new Yr(t,r)}ngDoCheck(){this._view.enforceState(this.ngSwitch._matchCase(this.ngSwitchCase))}}return n.\u0275fac=function(t){return new(t||n)(d.Y36(d.s_b),d.Y36(d.Rgc),d.Y36(Xs,9))},n.\u0275dir=d.lG2({type:n,selectors:[["","ngSwitchCase",""]],inputs:{ngSwitchCase:"ngSwitchCase"},standalone:!0}),n})(),Ts=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=d.oAB({type:n}),n.\u0275inj=d.cJS({}),n})();const vl="browser";function bl(n){return"server"===n}let As=(()=>{class n{}return n.\u0275prov=(0,d.Yz7)({token:n,providedIn:"root",factory:()=>new El((0,d.LFG)(se),window)}),n})();class El{constructor(e,t){this.document=e,this.window=t,this.offset=()=>[0,0]}setOffset(e){this.offset=Array.isArray(e)?()=>e:e}getScrollPosition(){return this.supportsScrolling()?[this.window.pageXOffset,this.window.pageYOffset]:[0,0]}scrollToPosition(e){this.supportsScrolling()&&this.window.scrollTo(e[0],e[1])}scrollToAnchor(e){if(!this.supportsScrolling())return;const t=function Qr(n,e){const t=n.getElementById(e)||n.getElementsByName(e)[0];if(t)return t;if("function"==typeof n.createTreeWalker&&n.body&&(n.body.createShadowRoot||n.body.attachShadow)){const r=n.createTreeWalker(n.body,NodeFilter.SHOW_ELEMENT);let i=r.currentNode;for(;i;){const a=i.shadowRoot;if(a){const c=a.getElementById(e)||a.querySelector(`[name="${e}"]`);if(c)return c}i=r.nextNode()}}return null}(this.document,e);t&&(this.scrollToElement(t),t.focus())}setHistoryScrollRestoration(e){if(this.supportScrollRestoration()){const t=this.window.history;t&&t.scrollRestoration&&(t.scrollRestoration=e)}}scrollToElement(e){const t=e.getBoundingClientRect(),r=t.left+this.window.pageXOffset,i=t.top+this.window.pageYOffset,a=this.offset();this.window.scrollTo(r-a[0],i-a[1])}supportScrollRestoration(){try{if(!this.supportsScrolling())return!1;const e=mi(this.window.history)||mi(Object.getPrototypeOf(this.window.history));return!(!e||!e.writable&&!e.set)}catch{return!1}}supportsScrolling(){try{return!!this.window&&!!this.window.scrollTo&&"pageXOffset"in this.window}catch{return!1}}}function mi(n){return Object.getOwnPropertyDescriptor(n,"scrollRestoration")}class Qc extends class sf extends class fe{}{constructor(){super(...arguments),this.supportsDOMEvents=!0}}{static makeCurrent(){!function le(n){ee||(ee=n)}(new Qc)}onAndCancel(e,t,r){return e.addEventListener(t,r,!1),()=>{e.removeEventListener(t,r,!1)}}dispatchEvent(e,t){e.dispatchEvent(t)}remove(e){e.parentNode&&e.parentNode.removeChild(e)}createElement(e,t){return(t=t||this.getDefaultDocument()).createElement(e)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(e){return e.nodeType===Node.ELEMENT_NODE}isShadowRoot(e){return e instanceof DocumentFragment}getGlobalEventTarget(e,t){return"window"===t?window:"document"===t?e:"body"===t?e.body:null}getBaseHref(e){const t=function kl(){return Rl=Rl||document.querySelector("base"),Rl?Rl.getAttribute("href"):null}();return null==t?null:function af(n){Ol=Ol||document.createElement("a"),Ol.setAttribute("href",n);const e=Ol.pathname;return"/"===e.charAt(0)?e:`/${e}`}(t)}resetBaseElement(){Rl=null}getUserAgent(){return window.navigator.userAgent}getCookie(e){return function pl(n,e){e=encodeURIComponent(e);for(const t of n.split(";")){const r=t.indexOf("="),[i,a]=-1==r?[t,""]:[t.slice(0,r),t.slice(r+1)];if(i.trim()===e)return decodeURIComponent(a)}return null}(document.cookie,e)}}let Ol,Rl=null;const Zo=new d.OlP("TRANSITION_ID"),Xc=[{provide:d.ip1,useFactory:function Id(n,e,t){return()=>{t.get(d.CZH).donePromise.then(()=>{const r=P(),i=e.querySelectorAll(`style[ng-transition="${n}"]`);for(let a=0;a<i.length;a++)r.remove(i[a])})}},deps:[Zo,se,d.zs3],multi:!0}];let lf=(()=>{class n{build(){return new XMLHttpRequest}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=d.Yz7({token:n,factory:n.\u0275fac}),n})();const ls=new d.OlP("EventManagerPlugins");let Ba=(()=>{class n{constructor(t,r){this._zone=r,this._eventNameToPlugin=new Map,t.forEach(i=>i.manager=this),this._plugins=t.slice().reverse()}addEventListener(t,r,i){return this._findPluginFor(r).addEventListener(t,r,i)}addGlobalEventListener(t,r,i){return this._findPluginFor(r).addGlobalEventListener(t,r,i)}getZone(){return this._zone}_findPluginFor(t){const r=this._eventNameToPlugin.get(t);if(r)return r;const i=this._plugins;for(let a=0;a<i.length;a++){const c=i[a];if(c.supports(t))return this._eventNameToPlugin.set(t,c),c}throw new Error(`No event manager plugin found for event ${t}`)}}return n.\u0275fac=function(t){return new(t||n)(d.LFG(ls),d.LFG(d.R0b))},n.\u0275prov=d.Yz7({token:n,factory:n.\u0275fac}),n})();class ks{constructor(e){this._doc=e}addGlobalEventListener(e,t,r){const i=P().getGlobalEventTarget(this._doc,e);if(!i)throw new Error(`Unsupported event target ${i} for event ${t}`);return this.addEventListener(i,t,r)}}let vo=(()=>{class n{constructor(){this._stylesSet=new Set}addStyles(t){const r=new Set;t.forEach(i=>{this._stylesSet.has(i)||(this._stylesSet.add(i),r.add(i))}),this.onStylesAdded(r)}onStylesAdded(t){}getAllStyles(){return Array.from(this._stylesSet)}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=d.Yz7({token:n,factory:n.\u0275fac}),n})(),cs=(()=>{class n extends vo{constructor(t){super(),this._doc=t,this._hostNodes=new Map,this._hostNodes.set(t.head,[])}_addStylesToHost(t,r,i){t.forEach(a=>{const c=this._doc.createElement("style");c.textContent=a,i.push(r.appendChild(c))})}addHost(t){const r=[];this._addStylesToHost(this._stylesSet,t,r),this._hostNodes.set(t,r)}removeHost(t){const r=this._hostNodes.get(t);r&&r.forEach(Pl),this._hostNodes.delete(t)}onStylesAdded(t){this._hostNodes.forEach((r,i)=>{this._addStylesToHost(t,i,r)})}ngOnDestroy(){this._hostNodes.forEach(t=>t.forEach(Pl))}}return n.\u0275fac=function(t){return new(t||n)(d.LFG(se))},n.\u0275prov=d.Yz7({token:n,factory:n.\u0275fac}),n})();function Pl(n){P().remove(n)}const Ua={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/",math:"http://www.w3.org/1998/MathML/"},_i=/%COMP%/g;function Eo(n,e,t){for(let r=0;r<e.length;r++){let i=e[r];Array.isArray(i)?Eo(n,i,t):(i=i.replace(_i,n),t.push(i))}return t}function Nl(n){return e=>{if("__ngUnwrap__"===e)return n;!1===n(e)&&(e.preventDefault(),e.returnValue=!1)}}let Qo=(()=>{class n{constructor(t,r,i){this.eventManager=t,this.sharedStylesHost=r,this.appId=i,this.rendererByCompId=new Map,this.defaultRenderer=new Xo(t)}createRenderer(t,r){if(!t||!r)return this.defaultRenderer;switch(r.encapsulation){case d.ifc.Emulated:{let i=this.rendererByCompId.get(r.id);return i||(i=new Co(this.eventManager,this.sharedStylesHost,r,this.appId),this.rendererByCompId.set(r.id,i)),i.applyToHost(t),i}case 1:case d.ifc.ShadowDom:return new uf(this.eventManager,this.sharedStylesHost,t,r);default:if(!this.rendererByCompId.has(r.id)){const i=Eo(r.id,r.styles,[]);this.sharedStylesHost.addStyles(i),this.rendererByCompId.set(r.id,this.defaultRenderer)}return this.defaultRenderer}}begin(){}end(){}}return n.\u0275fac=function(t){return new(t||n)(d.LFG(Ba),d.LFG(cs),d.LFG(d.AFp))},n.\u0275prov=d.Yz7({token:n,factory:n.\u0275fac}),n})();class Xo{constructor(e){this.eventManager=e,this.data=Object.create(null),this.destroyNode=null}destroy(){}createElement(e,t){return t?document.createElementNS(Ua[t]||t,e):document.createElement(e)}createComment(e){return document.createComment(e)}createText(e){return document.createTextNode(e)}appendChild(e,t){(ja(e)?e.content:e).appendChild(t)}insertBefore(e,t,r){e&&(ja(e)?e.content:e).insertBefore(t,r)}removeChild(e,t){e&&e.removeChild(t)}selectRootElement(e,t){let r="string"==typeof e?document.querySelector(e):e;if(!r)throw new Error(`The selector "${e}" did not match any elements`);return t||(r.textContent=""),r}parentNode(e){return e.parentNode}nextSibling(e){return e.nextSibling}setAttribute(e,t,r,i){if(i){t=i+":"+t;const a=Ua[i];a?e.setAttributeNS(a,t,r):e.setAttribute(t,r)}else e.setAttribute(t,r)}removeAttribute(e,t,r){if(r){const i=Ua[r];i?e.removeAttributeNS(i,t):e.removeAttribute(`${r}:${t}`)}else e.removeAttribute(t)}addClass(e,t){e.classList.add(t)}removeClass(e,t){e.classList.remove(t)}setStyle(e,t,r,i){i&(d.JOm.DashCase|d.JOm.Important)?e.style.setProperty(t,r,i&d.JOm.Important?"important":""):e.style[t]=r}removeStyle(e,t,r){r&d.JOm.DashCase?e.style.removeProperty(t):e.style[t]=""}setProperty(e,t,r){e[t]=r}setValue(e,t){e.nodeValue=t}listen(e,t,r){return"string"==typeof e?this.eventManager.addGlobalEventListener(e,t,Nl(r)):this.eventManager.addEventListener(e,t,Nl(r))}}function ja(n){return"TEMPLATE"===n.tagName&&void 0!==n.content}class Co extends Xo{constructor(e,t,r,i){super(e),this.component=r;const a=Eo(i+"-"+r.id,r.styles,[]);t.addStyles(a),this.contentAttr=function wo(n){return"_ngcontent-%COMP%".replace(_i,n)}(i+"-"+r.id),this.hostAttr=function Ha(n){return"_nghost-%COMP%".replace(_i,n)}(i+"-"+r.id)}applyToHost(e){super.setAttribute(e,this.hostAttr,"")}createElement(e,t){const r=super.createElement(e,t);return super.setAttribute(r,this.contentAttr,""),r}}class uf extends Xo{constructor(e,t,r,i){super(e),this.sharedStylesHost=t,this.hostEl=r,this.shadowRoot=r.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);const a=Eo(i.id,i.styles,[]);for(let c=0;c<a.length;c++){const f=document.createElement("style");f.textContent=a[c],this.shadowRoot.appendChild(f)}}nodeOrShadowRoot(e){return e===this.hostEl?this.shadowRoot:e}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}appendChild(e,t){return super.appendChild(this.nodeOrShadowRoot(e),t)}insertBefore(e,t,r){return super.insertBefore(this.nodeOrShadowRoot(e),t,r)}removeChild(e,t){return super.removeChild(this.nodeOrShadowRoot(e),t)}parentNode(e){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(e)))}}let Fl=(()=>{class n extends ks{constructor(t){super(t)}supports(t){return!0}addEventListener(t,r,i){return t.addEventListener(r,i,!1),()=>this.removeEventListener(t,r,i)}removeEventListener(t,r,i){return t.removeEventListener(r,i)}}return n.\u0275fac=function(t){return new(t||n)(d.LFG(se))},n.\u0275prov=d.Yz7({token:n,factory:n.\u0275fac}),n})();const ds=["alt","control","meta","shift"],Ig={"\b":"Backspace","\t":"Tab","\x7f":"Delete","\x1b":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},xn={alt:n=>n.altKey,control:n=>n.ctrlKey,meta:n=>n.metaKey,shift:n=>n.shiftKey};let tu=(()=>{class n extends ks{constructor(t){super(t)}supports(t){return null!=n.parseEventName(t)}addEventListener(t,r,i){const a=n.parseEventName(r),c=n.eventCallback(a.fullKey,i,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>P().onAndCancel(t,a.domEventName,c))}static parseEventName(t){const r=t.toLowerCase().split("."),i=r.shift();if(0===r.length||"keydown"!==i&&"keyup"!==i)return null;const a=n._normalizeKey(r.pop());let c="",f=r.indexOf("code");if(f>-1&&(r.splice(f,1),c="code."),ds.forEach(w=>{const S=r.indexOf(w);S>-1&&(r.splice(S,1),c+=w+".")}),c+=a,0!=r.length||0===a.length)return null;const _={};return _.domEventName=i,_.fullKey=c,_}static matchEventFullKeyCode(t,r){let i=Ig[t.key]||t.key,a="";return r.indexOf("code.")>-1&&(i=t.code,a="code."),!(null==i||!i)&&(i=i.toLowerCase()," "===i?i="space":"."===i&&(i="dot"),ds.forEach(c=>{c!==i&&(0,xn[c])(t)&&(a+=c+".")}),a+=i,a===r)}static eventCallback(t,r,i){return a=>{n.matchEventFullKeyCode(a,t)&&i.runGuarded(()=>r(a))}}static _normalizeKey(t){return"esc"===t?"escape":t}}return n.\u0275fac=function(t){return new(t||n)(d.LFG(se))},n.\u0275prov=d.Yz7({token:n,factory:n.\u0275fac}),n})();const Vl=(0,d.eFA)(d._c5,"browser",[{provide:d.Lbi,useValue:vl},{provide:d.g9A,useValue:function Io(){Qc.makeCurrent()},multi:!0},{provide:se,useFactory:function Jo(){return(0,d.RDi)(document),document},deps:[]}]),za=new d.OlP(""),mn=[{provide:d.rWj,useClass:class Va{addToWindow(e){d.dqk.getAngularTestability=(r,i=!0)=>{const a=e.findTestabilityInTree(r,i);if(null==a)throw new Error("Could not find testability for element.");return a},d.dqk.getAllAngularTestabilities=()=>e.getAllTestabilities(),d.dqk.getAllAngularRootElements=()=>e.getAllRootElements(),d.dqk.frameworkStabilizers||(d.dqk.frameworkStabilizers=[]),d.dqk.frameworkStabilizers.push(r=>{const i=d.dqk.getAllAngularTestabilities();let a=i.length,c=!1;const f=function(_){c=c||_,a--,0==a&&r(c)};i.forEach(function(_){_.whenStable(f)})})}findTestabilityInTree(e,t,r){return null==t?null:e.getTestability(t)??(r?P().isShadowRoot(t)?this.findTestabilityInTree(e,t.host,!0):this.findTestabilityInTree(e,t.parentElement,!0):null)}},deps:[]},{provide:d.lri,useClass:d.dDg,deps:[d.R0b,d.eoX,d.rWj]},{provide:d.dDg,useClass:d.dDg,deps:[d.R0b,d.eoX,d.rWj]}],nu=[{provide:d.zSh,useValue:"root"},{provide:d.qLn,useFactory:function Rr(){return new d.qLn},deps:[]},{provide:ls,useClass:Fl,multi:!0,deps:[se,d.R0b,d.Lbi]},{provide:ls,useClass:tu,multi:!0,deps:[se]},{provide:Qo,useClass:Qo,deps:[Ba,cs,d.AFp]},{provide:d.FYo,useExisting:Qo},{provide:vo,useExisting:cs},{provide:cs,useClass:cs,deps:[se]},{provide:Ba,useClass:Ba,deps:[ls,d.R0b]},{provide:class Cl{},useClass:lf,deps:[]},[]];let Bl=(()=>{class n{constructor(t){}static withServerTransition(t){return{ngModule:n,providers:[{provide:d.AFp,useValue:t.appId},{provide:Zo,useExisting:d.AFp},Xc]}}}return n.\u0275fac=function(t){return new(t||n)(d.LFG(za,12))},n.\u0275mod=d.oAB({type:n}),n.\u0275inj=d.cJS({providers:[...nu,...mn],imports:[Ts,d.hGG]}),n})(),gf=(()=>{class n{constructor(t){this._doc=t}getTitle(){return this._doc.title}setTitle(t){this._doc.title=t||""}}return n.\u0275fac=function(t){return new(t||n)(d.LFG(se))},n.\u0275prov=d.Yz7({token:n,factory:function(t){let r=null;return r=t?new t:function pf(){return new gf((0,d.LFG)(se))}(),r},providedIn:"root"}),n})();typeof window<"u"&&window;var fn=F(8996),$i=F(3269);function nt(...n){const e=(0,$i.yG)(n);return(0,fn.D)(n,e)}var Kt=F(7579);class Qn extends Kt.x{constructor(e){super(),this._value=e}get value(){return this.getValue()}_subscribe(e){const t=super._subscribe(e);return!t.closed&&e.next(this._value),t}getValue(){const{hasError:e,thrownError:t,_value:r}=this;if(e)throw t;return this._throwIfClosed(),r}next(e){super.next(this._value=e)}}const Ka=(0,F(3888).d)(n=>function(){n(this),this.name="EmptyError",this.message="no elements in sequence"});var Xr=F(9751);const{isArray:ql}=Array,{getPrototypeOf:Za,prototype:So,keys:jr}=Object;function Wl(n){if(1===n.length){const e=n[0];if(ql(e))return{args:e,keys:null};if(function qn(n){return n&&"object"==typeof n&&Za(n)===So}(e)){const t=jr(e);return{args:t.map(r=>e[r]),keys:t}}}return{args:n,keys:null}}var ta=F(4671),_t=F(4004);const{isArray:Md}=Array;function Ya(n){return(0,_t.U)(e=>function To(n,e){return Md(e)?n(...e):n(e)}(n,e))}function Kl(n,e){return n.reduce((t,r,i)=>(t[r]=e[i],t),{})}var Pn=F(5403),xd=F(9672);function eo(...n){const e=(0,$i.yG)(n),t=(0,$i.jO)(n),{args:r,keys:i}=Wl(n);if(0===r.length)return(0,fn.D)([],e);const a=new Xr.y(function au(n,e,t=ta.y){return r=>{Ao(e,()=>{const{length:i}=n,a=new Array(i);let c=i,f=i;for(let _=0;_<i;_++)Ao(e,()=>{const w=(0,fn.D)(n[_],e);let S=!1;w.subscribe((0,Pn.x)(r,x=>{a[_]=x,S||(S=!0,f--),f||r.next(t(a.slice()))},()=>{--c||r.complete()}))},r)},r)}}(r,e,i?c=>Kl(i,c):ta.y));return t?a.pipe(Ya(t)):a}function Ao(n,e,t){n?(0,xd.f)(t,n,e):e()}var na=F(8189);function Ns(...n){return function vf(){return(0,na.J)(1)}()((0,fn.D)(n,(0,$i.yG)(n)))}var hs=F(8421);function ra(n){return new Xr.y(e=>{(0,hs.Xf)(n()).subscribe(e)})}var Rd=F(9635),fs=F(576);function ci(n,e){const t=(0,fs.m)(n)?n:()=>n,r=i=>i.error(t());return new Xr.y(e?i=>e.schedule(r,0,i):r)}var vi=F(515),ia=F(727),ir=F(4482);function Zl(){return(0,ir.e)((n,e)=>{let t=null;n._refCount++;const r=(0,Pn.x)(e,void 0,void 0,void 0,()=>{if(!n||n._refCount<=0||0<--n._refCount)return void(t=null);const i=n._connection,a=t;t=null,i&&(!a||i===a)&&i.unsubscribe(),e.unsubscribe()});n.subscribe(r),r.closed||(t=n.connect())})}class bf extends Xr.y{constructor(e,t){super(),this.source=e,this.subjectFactory=t,this._subject=null,this._refCount=0,this._connection=null,(0,ir.A)(e)&&(this.lift=e.lift)}_subscribe(e){return this.getSubject().subscribe(e)}getSubject(){const e=this._subject;return(!e||e.isStopped)&&(this._subject=this.subjectFactory()),this._subject}_teardown(){this._refCount=0;const{_connection:e}=this;this._subject=this._connection=null,e?.unsubscribe()}connect(){let e=this._connection;if(!e){e=this._connection=new ia.w0;const t=this.getSubject();e.add(this.source.subscribe((0,Pn.x)(t,void 0,()=>{this._teardown(),t.complete()},r=>{this._teardown(),t.error(r)},()=>this._teardown()))),e.closed&&(this._connection=null,e=ia.w0.EMPTY)}return e}refCount(){return Zl()(this)}}function sr(n,e){return(0,ir.e)((t,r)=>{let i=null,a=0,c=!1;const f=()=>c&&!i&&r.complete();t.subscribe((0,Pn.x)(r,_=>{i?.unsubscribe();let w=0;const S=a++;(0,hs.Xf)(n(_,S)).subscribe(i=(0,Pn.x)(r,x=>r.next(e?e(_,x,S,w++):x),()=>{i=null,f()}))},()=>{c=!0,f()}))})}function zi(n){return n<=0?()=>vi.E:(0,ir.e)((e,t)=>{let r=0;e.subscribe((0,Pn.x)(t,i=>{++r<=n&&(t.next(i),n<=r&&t.complete())}))})}function ps(...n){const e=(0,$i.yG)(n);return(0,ir.e)((t,r)=>{(e?Ns(n,t,e):Ns(n,t)).subscribe(r)})}function Wn(n,e){return(0,ir.e)((t,r)=>{let i=0;t.subscribe((0,Pn.x)(r,a=>n.call(e,a,i++)&&r.next(a)))})}var Kn=F(5577);function to(n){return(0,ir.e)((e,t)=>{let r=!1;e.subscribe((0,Pn.x)(t,i=>{r=!0,t.next(i)},()=>{r||t.next(n),t.complete()}))})}function sa(n=Yl){return(0,ir.e)((e,t)=>{let r=!1;e.subscribe((0,Pn.x)(t,i=>{r=!0,t.next(i)},()=>r?t.complete():t.error(n())))})}function Yl(){return new Ka}function Gi(n,e){const t=arguments.length>=2;return r=>r.pipe(n?Wn((i,a)=>n(i,a,r)):ta.y,zi(1),t?to(e):sa(()=>new Ka))}function bi(n,e){return(0,fs.m)(e)?(0,Kn.z)(n,e,1):(0,Kn.z)(n,1)}var Zn=F(8505);function qi(n){return(0,ir.e)((e,t)=>{let a,r=null,i=!1;r=e.subscribe((0,Pn.x)(t,void 0,void 0,c=>{a=(0,hs.Xf)(n(c,qi(n)(e))),r?(r.unsubscribe(),r=null,a.subscribe(t)):i=!0})),i&&(r.unsubscribe(),r=null,a.subscribe(t))})}function wf(n,e,t,r,i){return(a,c)=>{let f=t,_=e,w=0;a.subscribe((0,Pn.x)(c,S=>{const x=w++;_=f?n(_,S,x):(f=!0,S),r&&c.next(_)},i&&(()=>{f&&c.next(_),c.complete()})))}}function no(n,e){return(0,ir.e)(wf(n,e,arguments.length>=2,!0))}function Ef(n){return n<=0?()=>vi.E:(0,ir.e)((e,t)=>{let r=[];e.subscribe((0,Pn.x)(t,i=>{r.push(i),n<r.length&&r.shift()},()=>{for(const i of r)t.next(i);t.complete()},void 0,()=>{r=null}))})}function Cf(n,e){const t=arguments.length>=2;return r=>r.pipe(n?Wn((i,a)=>n(i,a,r)):ta.y,Ef(1),t?to(e):sa(()=>new Ka))}function Ql(n){return(0,ir.e)((e,t)=>{try{e.subscribe(t)}finally{t.add(n)}})}const Jt="primary",Qa=Symbol("RouteTitle");class oa{constructor(e){this.params=e||{}}has(e){return Object.prototype.hasOwnProperty.call(this.params,e)}get(e){if(this.has(e)){const t=this.params[e];return Array.isArray(t)?t[0]:t}return null}getAll(e){if(this.has(e)){const t=this.params[e];return Array.isArray(t)?t:[t]}return[]}get keys(){return Object.keys(this.params)}}function Fs(n){return new oa(n)}function ro(n,e,t){const r=t.path.split("/");if(r.length>n.length||"full"===t.pathMatch&&(e.hasChildren()||r.length<n.length))return null;const i={};for(let a=0;a<r.length;a++){const c=r[a],f=n[a];if(c.startsWith(":"))i[c.substring(1)]=f;else if(c!==f.path)return null}return{consumed:n.slice(0,r.length),posParams:i}}function gs(n,e){const t=n?Object.keys(n):void 0,r=e?Object.keys(e):void 0;if(!t||!r||t.length!=r.length)return!1;let i;for(let a=0;a<t.length;a++)if(i=t[a],!Xl(n[i],e[i]))return!1;return!0}function Xl(n,e){if(Array.isArray(n)&&Array.isArray(e)){if(n.length!==e.length)return!1;const t=[...n].sort(),r=[...e].sort();return t.every((i,a)=>r[a]===i)}return n===e}function cu(n){return Array.prototype.concat.apply([],n)}function Wi(n){return n.length>0?n[n.length-1]:null}function E(n,e){for(const t in n)n.hasOwnProperty(t)&&e(n[t],t)}function I(n){return(0,d.CqO)(n)?n:(0,d.QGY)(n)?(0,fn.D)(Promise.resolve(n)):nt(n)}const R=!1,G={exact:function ze(n,e,t){if(!br(n.segments,e.segments)||!kr(n.segments,e.segments,t)||n.numberOfChildren!==e.numberOfChildren)return!1;for(const r in e.children)if(!n.children[r]||!ze(n.children[r],e.children[r],t))return!1;return!0},subset:gt},Q={exact:function Ye(n,e){return gs(n,e)},subset:function ht(n,e){return Object.keys(e).length<=Object.keys(n).length&&Object.keys(e).every(t=>Xl(n[t],e[t]))},ignored:()=>!0};function de(n,e,t){return G[t.paths](n.root,e.root,t.matrixParams)&&Q[t.queryParams](n.queryParams,e.queryParams)&&!("exact"===t.fragment&&n.fragment!==e.fragment)}function gt(n,e,t){return Ft(n,e,e.segments,t)}function Ft(n,e,t,r){if(n.segments.length>t.length){const i=n.segments.slice(0,t.length);return!(!br(i,t)||e.hasChildren()||!kr(i,t,r))}if(n.segments.length===t.length){if(!br(n.segments,t)||!kr(n.segments,t,r))return!1;for(const i in e.children)if(!n.children[i]||!gt(n.children[i],e.children[i],r))return!1;return!0}{const i=t.slice(0,n.segments.length),a=t.slice(n.segments.length);return!!(br(n.segments,i)&&kr(n.segments,i,r)&&n.children[Jt])&&Ft(n.children[Jt],e,a,r)}}function kr(n,e,t){return e.every((r,i)=>Q[t](n[i].parameters,r.parameters))}class En{constructor(e,t,r){this.root=e,this.queryParams=t,this.fragment=r}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=Fs(this.queryParams)),this._queryParamMap}toString(){return Tg.serialize(this)}}class yt{constructor(e,t){this.segments=e,this.children=t,this.parent=null,E(t,(r,i)=>r.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return If(this)}}class Ki{constructor(e,t){this.path=e,this.parameters=t}get parameterMap(){return this._parameterMap||(this._parameterMap=Fs(this.parameters)),this._parameterMap}toString(){return Ag(this)}}function br(n,e){return n.length===e.length&&n.every((t,r)=>t.path===e[r].path)}let Jl=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=d.Yz7({token:n,factory:function(){return new uu},providedIn:"root"}),n})();class uu{parse(e){const t=new hu(e);return new En(t.parseRootSegment(),t.parseQueryParams(),t.parseFragment())}serialize(e){const t=`/${aa(e.root,!0)}`,r=function N_(n){const e=Object.keys(n).map(t=>{const r=n[t];return Array.isArray(r)?r.map(i=>`${Xa(t)}=${Xa(i)}`).join("&"):`${Xa(t)}=${Xa(r)}`}).filter(t=>!!t);return e.length?`?${e.join("&")}`:""}(e.queryParams);return`${t}${r}${"string"==typeof e.fragment?`#${function Od(n){return encodeURI(n)}(e.fragment)}`:""}`}}const Tg=new uu;function If(n){return n.segments.map(e=>Ag(e)).join("/")}function aa(n,e){if(!n.hasChildren())return If(n);if(e){const t=n.children[Jt]?aa(n.children[Jt],!1):"",r=[];return E(n.children,(i,a)=>{a!==Jt&&r.push(`${a}:${aa(i,!1)}`)}),r.length>0?`${t}(${r.join("//")})`:t}{const t=function Ls(n,e){let t=[];return E(n.children,(r,i)=>{i===Jt&&(t=t.concat(e(r,i)))}),E(n.children,(r,i)=>{i!==Jt&&(t=t.concat(e(r,i)))}),t}(n,(r,i)=>i===Jt?[aa(n.children[Jt],!1)]:[`${i}:${aa(r,!1)}`]);return 1===Object.keys(n.children).length&&null!=n.children[Jt]?`${If(n)}/${t[0]}`:`${If(n)}/(${t.join("//")})`}}function Df(n){return encodeURIComponent(n).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function Xa(n){return Df(n).replace(/%3B/gi,";")}function ec(n){return Df(n).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function Pd(n){return decodeURIComponent(n)}function Sf(n){return Pd(n.replace(/\+/g,"%20"))}function Ag(n){return`${ec(n.path)}${function du(n){return Object.keys(n).map(e=>`;${ec(e)}=${ec(n[e])}`).join("")}(n.parameters)}`}const Mg=/^[^\/()?;=#]+/;function tc(n){const e=n.match(Mg);return e?e[0]:""}const xg=/^[^=?&#]+/,Xb=/^[^&#]+/;class hu{constructor(e){this.url=e,this.remaining=e}parseRootSegment(){return this.consumeOptional("/"),""===this.remaining||this.peekStartsWith("?")||this.peekStartsWith("#")?new yt([],{}):new yt([],this.parseChildren())}parseQueryParams(){const e={};if(this.consumeOptional("?"))do{this.parseQueryParam(e)}while(this.consumeOptional("&"));return e}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(""===this.remaining)return{};this.consumeOptional("/");const e=[];for(this.peekStartsWith("(")||e.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),e.push(this.parseSegment());let t={};this.peekStartsWith("/(")&&(this.capture("/"),t=this.parseParens(!0));let r={};return this.peekStartsWith("(")&&(r=this.parseParens(!1)),(e.length>0||Object.keys(t).length>0)&&(r[Jt]=new yt(e,t)),r}parseSegment(){const e=tc(this.remaining);if(""===e&&this.peekStartsWith(";"))throw new d.vHH(4009,R);return this.capture(e),new Ki(Pd(e),this.parseMatrixParams())}parseMatrixParams(){const e={};for(;this.consumeOptional(";");)this.parseParam(e);return e}parseParam(e){const t=tc(this.remaining);if(!t)return;this.capture(t);let r="";if(this.consumeOptional("=")){const i=tc(this.remaining);i&&(r=i,this.capture(r))}e[Pd(t)]=Pd(r)}parseQueryParam(e){const t=function la(n){const e=n.match(xg);return e?e[0]:""}(this.remaining);if(!t)return;this.capture(t);let r="";if(this.consumeOptional("=")){const c=function nc(n){const e=n.match(Xb);return e?e[0]:""}(this.remaining);c&&(r=c,this.capture(r))}const i=Sf(t),a=Sf(r);if(e.hasOwnProperty(i)){let c=e[i];Array.isArray(c)||(c=[c],e[i]=c),c.push(a)}else e[i]=a}parseParens(e){const t={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){const r=tc(this.remaining),i=this.remaining[r.length];if("/"!==i&&")"!==i&&";"!==i)throw new d.vHH(4010,R);let a;r.indexOf(":")>-1?(a=r.slice(0,r.indexOf(":")),this.capture(a),this.capture(":")):e&&(a=Jt);const c=this.parseChildren();t[a]=1===Object.keys(c).length?c[Jt]:new yt([],c),this.consumeOptional("//")}return t}peekStartsWith(e){return this.remaining.startsWith(e)}consumeOptional(e){return!!this.peekStartsWith(e)&&(this.remaining=this.remaining.substring(e.length),!0)}capture(e){if(!this.consumeOptional(e))throw new d.vHH(4011,R)}}function Nd(n){return n.segments.length>0?new yt([],{[Jt]:n}):n}function rc(n){const e={};for(const r of Object.keys(n.children)){const a=rc(n.children[r]);(a.segments.length>0||a.hasChildren())&&(e[r]=a)}return function Tf(n){if(1===n.numberOfChildren&&n.children[Jt]){const e=n.children[Jt];return new yt(n.segments.concat(e.segments),e.children)}return n}(new yt(n.segments,e))}function Ja(n){return n instanceof En}function L_(n,e,t,r,i){if(0===t.length)return tl(e.root,e.root,e.root,r,i);const a=function Ld(n){if("string"==typeof n[0]&&1===n.length&&"/"===n[0])return new Mf(!0,0,n);let e=0,t=!1;const r=n.reduce((i,a,c)=>{if("object"==typeof a&&null!=a){if(a.outlets){const f={};return E(a.outlets,(_,w)=>{f[w]="string"==typeof _?_.split("/"):_}),[...i,{outlets:f}]}if(a.segmentPath)return[...i,a.segmentPath]}return"string"!=typeof a?[...i,a]:0===c?(a.split("/").forEach((f,_)=>{0==_&&"."===f||(0==_&&""===f?t=!0:".."===f?e++:""!=f&&i.push(f))}),i):[...i,a]},[]);return new Mf(t,e,r)}(t);return a.toRoot()?tl(e.root,e.root,new yt([],{}),r,i):function c(_){const w=function xo(n,e,t,r){if(n.isAbsolute)return new nl(e.root,!0,0);if(-1===r)return new nl(t,t===e.root,0);return function pu(n,e,t){let r=n,i=e,a=t;for(;a>i;){if(a-=i,r=r.parent,!r)throw new d.vHH(4005,!1);i=r.segments.length}return new nl(r,!1,i-a)}(t,r+(ic(n.commands[0])?0:1),n.numberOfDoubleDots)}(a,e,n.snapshot?._urlSegment,_),S=w.processChildren?rl(w.segmentGroup,w.index,a.commands):xf(w.segmentGroup,w.index,a.commands);return tl(e.root,w.segmentGroup,S,r,i)}(n.snapshot?._lastPathIndex)}function ic(n){return"object"==typeof n&&null!=n&&!n.outlets&&!n.segmentPath}function el(n){return"object"==typeof n&&null!=n&&n.outlets}function tl(n,e,t,r,i){let c,a={};r&&E(r,(_,w)=>{a[w]=Array.isArray(_)?_.map(S=>`${S}`):`${_}`}),c=n===e?t:Fd(n,e,t);const f=Nd(rc(c));return new En(f,a,i)}function Fd(n,e,t){const r={};return E(n.children,(i,a)=>{r[a]=i===e?t:Fd(i,e,t)}),new yt(n.segments,r)}class Mf{constructor(e,t,r){if(this.isAbsolute=e,this.numberOfDoubleDots=t,this.commands=r,e&&r.length>0&&ic(r[0]))throw new d.vHH(4003,!1);const i=r.find(el);if(i&&i!==Wi(r))throw new d.vHH(4004,!1)}toRoot(){return this.isAbsolute&&1===this.commands.length&&"/"==this.commands[0]}}class nl{constructor(e,t,r){this.segmentGroup=e,this.processChildren=t,this.index=r}}function xf(n,e,t){if(n||(n=new yt([],{})),0===n.segments.length&&n.hasChildren())return rl(n,e,t);const r=function Vd(n,e,t){let r=0,i=e;const a={match:!1,pathIndex:0,commandIndex:0};for(;i<n.segments.length;){if(r>=t.length)return a;const c=n.segments[i],f=t[r];if(el(f))break;const _=`${f}`,w=r<t.length-1?t[r+1]:null;if(i>0&&void 0===_)break;if(_&&w&&"object"==typeof w&&void 0===w.outlets){if(!kf(_,w,c))return a;r+=2}else{if(!kf(_,{},c))return a;r++}i++}return{match:!0,pathIndex:i,commandIndex:r}}(n,e,t),i=t.slice(r.commandIndex);if(r.match&&r.pathIndex<n.segments.length){const a=new yt(n.segments.slice(0,r.pathIndex),{});return a.children[Jt]=new yt(n.segments.slice(r.pathIndex),n.children),rl(a,0,i)}return r.match&&0===i.length?new yt(n.segments,{}):r.match&&!n.hasChildren()?Rf(n,e,t):r.match?rl(n,0,i):Rf(n,e,t)}function rl(n,e,t){if(0===t.length)return new yt(n.segments,{});{const r=function kg(n){return el(n[0])?n[0].outlets:{[Jt]:n}}(t),i={};return E(r,(a,c)=>{"string"==typeof a&&(a=[a]),null!==a&&(i[c]=xf(n.children[c],e,a))}),E(n.children,(a,c)=>{void 0===r[c]&&(i[c]=a)}),new yt(n.segments,i)}}function Rf(n,e,t){const r=n.segments.slice(0,e);let i=0;for(;i<t.length;){const a=t[i];if(el(a)){const _=Og(a.outlets);return new yt(r,_)}if(0===i&&ic(t[0])){r.push(new Ki(n.segments[e].path,Bd(t[0]))),i++;continue}const c=el(a)?a.outlets[Jt]:`${a}`,f=i<t.length-1?t[i+1]:null;c&&f&&ic(f)?(r.push(new Ki(c,Bd(f))),i+=2):(r.push(new Ki(c,{})),i++)}return new yt(r,{})}function Og(n){const e={};return E(n,(t,r)=>{"string"==typeof t&&(t=[t]),null!==t&&(e[r]=Rf(new yt([],{}),0,t))}),e}function Bd(n){const e={};return E(n,(t,r)=>e[r]=`${t}`),e}function kf(n,e,t){return n==t.path&&gs(e,t.parameters)}class Vs{constructor(e,t){this.id=e,this.url=t}}class Ud extends Vs{constructor(e,t,r="imperative",i=null){super(e,t),this.type=0,this.navigationTrigger=r,this.restoredState=i}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}}class so extends Vs{constructor(e,t,r){super(e,t),this.urlAfterRedirects=r,this.type=1}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}}class Bs extends Vs{constructor(e,t,r,i){super(e,t),this.reason=r,this.code=i,this.type=2}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}}class Of extends Vs{constructor(e,t,r,i){super(e,t),this.error=r,this.target=i,this.type=3}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}}class Hd extends Vs{constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i,this.type=4}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class Pf extends Vs{constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i,this.type=7}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class Nf extends Vs{constructor(e,t,r,i,a){super(e,t),this.urlAfterRedirects=r,this.state=i,this.shouldActivate=a,this.type=8}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}}class gu extends Vs{constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i,this.type=5}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class V_ extends Vs{constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i,this.type=6}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class Ff{constructor(e){this.route=e,this.type=9}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}}class Lf{constructor(e){this.route=e,this.type=10}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}}class Vf{constructor(e){this.snapshot=e,this.type=11}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class Bf{constructor(e){this.snapshot=e,this.type=12}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class Uf{constructor(e){this.snapshot=e,this.type=13}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class sc{constructor(e){this.snapshot=e,this.type=14}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class jd{constructor(e,t,r){this.routerEvent=e,this.position=t,this.anchor=r,this.type=15}toString(){return`Scroll(anchor: '${this.anchor}', position: '${this.position?`${this.position[0]}, ${this.position[1]}`:null}')`}}class oc{constructor(e){this._root=e}get root(){return this._root.value}parent(e){const t=this.pathFromRoot(e);return t.length>1?t[t.length-2]:null}children(e){const t=$d(e,this._root);return t?t.children.map(r=>r.value):[]}firstChild(e){const t=$d(e,this._root);return t&&t.children.length>0?t.children[0].value:null}siblings(e){const t=Pg(e,this._root);return t.length<2?[]:t[t.length-2].children.map(i=>i.value).filter(i=>i!==e)}pathFromRoot(e){return Pg(e,this._root).map(t=>t.value)}}function $d(n,e){if(n===e.value)return e;for(const t of e.children){const r=$d(n,t);if(r)return r}return null}function Pg(n,e){if(n===e.value)return[e];for(const t of e.children){const r=Pg(n,t);if(r.length)return r.unshift(e),r}return[]}class Us{constructor(e,t){this.value=e,this.children=t}toString(){return`TreeNode(${this.value})`}}function oo(n){const e={};return n&&n.children.forEach(t=>e[t.value.outlet]=t),e}class Ng extends oc{constructor(e,t){super(e),this.snapshot=t,Wd(this,e)}toString(){return this.snapshot.toString()}}function zd(n,e){const t=function Gd(n,e){const c=new mu([],{},{},"",{},Jt,e,null,n.root,-1,{});return new ca("",new Us(c,[]))}(n,e),r=new Qn([new Ki("",{})]),i=new Qn({}),a=new Qn({}),c=new Qn({}),f=new Qn(""),_=new $r(r,i,c,f,a,Jt,e,t.root);return _.snapshot=t.root,new Ng(new Us(_,[]),t)}class $r{constructor(e,t,r,i,a,c,f,_){this.url=e,this.params=t,this.queryParams=r,this.fragment=i,this.data=a,this.outlet=c,this.component=f,this.title=this.data?.pipe((0,_t.U)(w=>w[Qa]))??nt(void 0),this._futureSnapshot=_}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=this.params.pipe((0,_t.U)(e=>Fs(e)))),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=this.queryParams.pipe((0,_t.U)(e=>Fs(e)))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}}function qd(n,e="emptyOnly"){const t=n.pathFromRoot;let r=0;if("always"!==e)for(r=t.length-1;r>=1;){const i=t[r],a=t[r-1];if(i.routeConfig&&""===i.routeConfig.path)r--;else{if(a.component)break;r--}}return function Fg(n){return n.reduce((e,t)=>({params:{...e.params,...t.params},data:{...e.data,...t.data},resolve:{...t.data,...e.resolve,...t.routeConfig?.data,...t._resolvedData}}),{params:{},data:{},resolve:{}})}(t.slice(r))}class mu{constructor(e,t,r,i,a,c,f,_,w,S,x,L){this.url=e,this.params=t,this.queryParams=r,this.fragment=i,this.data=a,this.outlet=c,this.component=f,this.title=this.data?.[Qa],this.routeConfig=_,this._urlSegment=w,this._lastPathIndex=S,this._correctedLastPathIndex=L??S,this._resolve=x}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=Fs(this.params)),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=Fs(this.queryParams)),this._queryParamMap}toString(){return`Route(url:'${this.url.map(r=>r.toString()).join("/")}', path:'${this.routeConfig?this.routeConfig.path:""}')`}}class ca extends oc{constructor(e,t){super(t),this.url=e,Wd(this,t)}toString(){return ui(this._root)}}function Wd(n,e){e.value._routerState=n,e.children.forEach(t=>Wd(n,t))}function ui(n){const e=n.children.length>0?` { ${n.children.map(ui).join(", ")} } `:"";return`${n.value}${e}`}function _u(n){if(n.snapshot){const e=n.snapshot,t=n._futureSnapshot;n.snapshot=t,gs(e.queryParams,t.queryParams)||n.queryParams.next(t.queryParams),e.fragment!==t.fragment&&n.fragment.next(t.fragment),gs(e.params,t.params)||n.params.next(t.params),function kd(n,e){if(n.length!==e.length)return!1;for(let t=0;t<n.length;++t)if(!gs(n[t],e[t]))return!1;return!0}(e.url,t.url)||n.url.next(t.url),gs(e.data,t.data)||n.data.next(t.data)}else n.snapshot=n._futureSnapshot,n.data.next(n._futureSnapshot.data)}function yu(n,e){const t=gs(n.params,e.params)&&function io(n,e){return br(n,e)&&n.every((t,r)=>gs(t.parameters,e[r].parameters))}(n.url,e.url);return t&&!(!n.parent!=!e.parent)&&(!n.parent||yu(n.parent,e.parent))}function or(n,e,t){if(t&&n.shouldReuseRoute(e.value,t.value.snapshot)){const r=t.value;r._futureSnapshot=e.value;const i=function ao(n,e,t){return e.children.map(r=>{for(const i of t.children)if(n.shouldReuseRoute(r.value,i.value.snapshot))return or(n,r,i);return or(n,r)})}(n,e,t);return new Us(r,i)}{if(n.shouldAttach(e.value)){const a=n.retrieve(e.value);if(null!==a){const c=a.route;return c.value._futureSnapshot=e.value,c.children=e.children.map(f=>or(n,f)),c}}const r=function Lg(n){return new $r(new Qn(n.url),new Qn(n.params),new Qn(n.queryParams),new Qn(n.fragment),new Qn(n.data),n.outlet,n.component,n)}(e.value),i=e.children.map(a=>or(n,a));return new Us(r,i)}}const Kd="ngNavigationCancelingError";function Vg(n,e){const{redirectTo:t,navigationBehaviorOptions:r}=Ja(e)?{redirectTo:e,navigationBehaviorOptions:void 0}:e,i=Zd(!1,0,e);return i.url=t,i.navigationBehaviorOptions=r,i}function Zd(n,e,t){const r=new Error("NavigationCancelingError: "+(n||""));return r[Kd]=!0,r.cancellationCode=e,t&&(r.url=t),r}function Bg(n){return Ug(n)&&Ja(n.url)}function Ug(n){return n&&n[Kd]}class Hg{constructor(){this.outlet=null,this.route=null,this.resolver=null,this.injector=null,this.children=new vu,this.attachRef=null}}let vu=(()=>{class n{constructor(){this.contexts=new Map}onChildOutletCreated(t,r){const i=this.getOrCreateContext(t);i.outlet=r,this.contexts.set(t,i)}onChildOutletDestroyed(t){const r=this.getContext(t);r&&(r.outlet=null,r.attachRef=null)}onOutletDeactivated(){const t=this.contexts;return this.contexts=new Map,t}onOutletReAttached(t){this.contexts=t}getOrCreateContext(t){let r=this.getContext(t);return r||(r=new Hg,this.contexts.set(t,r)),r}getContext(t){return this.contexts.get(t)||null}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=d.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();const y=!1;let p=(()=>{class n{constructor(t,r,i,a,c){this.parentContexts=t,this.location=r,this.changeDetector=a,this.environmentInjector=c,this.activated=null,this._activatedRoute=null,this.activateEvents=new d.vpe,this.deactivateEvents=new d.vpe,this.attachEvents=new d.vpe,this.detachEvents=new d.vpe,this.name=i||Jt,t.onChildOutletCreated(this.name,this)}ngOnDestroy(){this.parentContexts.getContext(this.name)?.outlet===this&&this.parentContexts.onChildOutletDestroyed(this.name)}ngOnInit(){if(!this.activated){const t=this.parentContexts.getContext(this.name);t&&t.route&&(t.attachRef?this.attach(t.attachRef,t.route):this.activateWith(t.route,t.injector))}}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new d.vHH(4012,y);return this.activated.instance}get activatedRoute(){if(!this.activated)throw new d.vHH(4012,y);return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new d.vHH(4012,y);this.location.detach();const t=this.activated;return this.activated=null,this._activatedRoute=null,this.detachEvents.emit(t.instance),t}attach(t,r){this.activated=t,this._activatedRoute=r,this.location.insert(t.hostView),this.attachEvents.emit(t.instance)}deactivate(){if(this.activated){const t=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(t)}}activateWith(t,r){if(this.isActivated)throw new d.vHH(4013,y);this._activatedRoute=t;const i=this.location,c=t._futureSnapshot.component,f=this.parentContexts.getOrCreateContext(this.name).children,_=new g(t,f,i.injector);if(r&&function b(n){return!!n.resolveComponentFactory}(r)){const w=r.resolveComponentFactory(c);this.activated=i.createComponent(w,i.length,_)}else this.activated=i.createComponent(c,{index:i.length,injector:_,environmentInjector:r??this.environmentInjector});this.changeDetector.markForCheck(),this.activateEvents.emit(this.activated.instance)}}return n.\u0275fac=function(t){return new(t||n)(d.Y36(vu),d.Y36(d.s_b),d.$8M("name"),d.Y36(d.sBO),d.Y36(d.lqb))},n.\u0275dir=d.lG2({type:n,selectors:[["router-outlet"]],outputs:{activateEvents:"activate",deactivateEvents:"deactivate",attachEvents:"attach",detachEvents:"detach"},exportAs:["outlet"],standalone:!0}),n})();class g{constructor(e,t,r){this.route=e,this.childContexts=t,this.parent=r}get(e,t){return e===$r?this.route:e===vu?this.childContexts:this.parent.get(e,t)}}let T=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=d.Xpm({type:n,selectors:[["ng-component"]],standalone:!0,features:[d.jDz],decls:1,vars:0,template:function(t,r){1&t&&d._UZ(0,"router-outlet")},dependencies:[p],encapsulation:2}),n})();function k(n,e){return n.providers&&!n._injector&&(n._injector=(0,d.MMx)(n.providers,e,`Route: ${n.path}`)),n._injector??e}function bu(n){const e=n.children&&n.children.map(bu),t=e?{...n,children:e}:{...n};return!t.component&&!t.loadComponent&&(e||t.loadChildren)&&t.outlet&&t.outlet!==Jt&&(t.component=T),t}function ms(n){return n.outlet||Jt}function wu(n,e){const t=n.filter(r=>ms(r)===e);return t.push(...n.filter(r=>ms(r)!==e)),t}function ac(n){if(!n)return null;if(n.routeConfig?._injector)return n.routeConfig._injector;for(let e=n.parent;e;e=e.parent){const t=e.routeConfig;if(t?._loadedInjector)return t._loadedInjector;if(t?._injector)return t._injector}return null}class Hf{constructor(e,t,r,i){this.routeReuseStrategy=e,this.futureState=t,this.currState=r,this.forwardEvent=i}activate(e){const t=this.futureState._root,r=this.currState?this.currState._root:null;this.deactivateChildRoutes(t,r,e),_u(this.futureState.root),this.activateChildRoutes(t,r,e)}deactivateChildRoutes(e,t,r){const i=oo(t);e.children.forEach(a=>{const c=a.value.outlet;this.deactivateRoutes(a,i[c],r),delete i[c]}),E(i,(a,c)=>{this.deactivateRouteAndItsChildren(a,r)})}deactivateRoutes(e,t,r){const i=e.value,a=t?t.value:null;if(i===a)if(i.component){const c=r.getContext(i.outlet);c&&this.deactivateChildRoutes(e,t,c.children)}else this.deactivateChildRoutes(e,t,r);else a&&this.deactivateRouteAndItsChildren(t,r)}deactivateRouteAndItsChildren(e,t){e.value.component&&this.routeReuseStrategy.shouldDetach(e.value.snapshot)?this.detachAndStoreRouteSubtree(e,t):this.deactivateRouteAndOutlet(e,t)}detachAndStoreRouteSubtree(e,t){const r=t.getContext(e.value.outlet),i=r&&e.value.component?r.children:t,a=oo(e);for(const c of Object.keys(a))this.deactivateRouteAndItsChildren(a[c],i);if(r&&r.outlet){const c=r.outlet.detach(),f=r.children.onOutletDeactivated();this.routeReuseStrategy.store(e.value.snapshot,{componentRef:c,route:e,contexts:f})}}deactivateRouteAndOutlet(e,t){const r=t.getContext(e.value.outlet),i=r&&e.value.component?r.children:t,a=oo(e);for(const c of Object.keys(a))this.deactivateRouteAndItsChildren(a[c],i);r&&r.outlet&&(r.outlet.deactivate(),r.children.onOutletDeactivated(),r.attachRef=null,r.resolver=null,r.route=null)}activateChildRoutes(e,t,r){const i=oo(t);e.children.forEach(a=>{this.activateRoutes(a,i[a.value.outlet],r),this.forwardEvent(new sc(a.value.snapshot))}),e.children.length&&this.forwardEvent(new Bf(e.value.snapshot))}activateRoutes(e,t,r){const i=e.value,a=t?t.value:null;if(_u(i),i===a)if(i.component){const c=r.getOrCreateContext(i.outlet);this.activateChildRoutes(e,t,c.children)}else this.activateChildRoutes(e,t,r);else if(i.component){const c=r.getOrCreateContext(i.outlet);if(this.routeReuseStrategy.shouldAttach(i.snapshot)){const f=this.routeReuseStrategy.retrieve(i.snapshot);this.routeReuseStrategy.store(i.snapshot,null),c.children.onOutletReAttached(f.contexts),c.attachRef=f.componentRef,c.route=f.route.value,c.outlet&&c.outlet.attach(f.componentRef,f.route.value),_u(f.route.value),this.activateChildRoutes(e,null,c.children)}else{const f=ac(i.snapshot),_=f?.get(d._Vd)??null;c.attachRef=null,c.route=i,c.resolver=_,c.injector=f,c.outlet&&c.outlet.activateWith(i,c.injector),this.activateChildRoutes(e,null,c.children)}}else this.activateChildRoutes(e,null,r)}}class jf{constructor(e){this.path=e,this.route=this.path[this.path.length-1]}}class lc{constructor(e,t){this.component=e,this.route=t}}function cc(n,e,t){const r=n._root;return il(r,e?e._root:null,t,[r.value])}function ua(n,e){const t=Symbol(),r=e.get(n,t);return r===t?"function"!=typeof n||(0,d.Z0I)(n)?e.get(n):n:r}function il(n,e,t,r,i={canDeactivateChecks:[],canActivateChecks:[]}){const a=oo(e);return n.children.forEach(c=>{(function ar(n,e,t,r,i={canDeactivateChecks:[],canActivateChecks:[]}){const a=n.value,c=e?e.value:null,f=t?t.getContext(n.value.outlet):null;if(c&&a.routeConfig===c.routeConfig){const _=function fD(n,e,t){if("function"==typeof t)return t(n,e);switch(t){case"pathParamsChange":return!br(n.url,e.url);case"pathParamsOrQueryParamsChange":return!br(n.url,e.url)||!gs(n.queryParams,e.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!yu(n,e)||!gs(n.queryParams,e.queryParams);default:return!yu(n,e)}}(c,a,a.routeConfig.runGuardsAndResolvers);_?i.canActivateChecks.push(new jf(r)):(a.data=c.data,a._resolvedData=c._resolvedData),il(n,e,a.component?f?f.children:null:t,r,i),_&&f&&f.outlet&&f.outlet.isActivated&&i.canDeactivateChecks.push(new lc(f.outlet.component,c))}else c&&zf(e,f,i),i.canActivateChecks.push(new jf(r)),il(n,null,a.component?f?f.children:null:t,r,i)})(c,a[c.value.outlet],t,r.concat([c.value]),i),delete a[c.value.outlet]}),E(a,(c,f)=>zf(c,t.getContext(f),i)),i}function zf(n,e,t){const r=oo(n),i=n.value;E(r,(a,c)=>{zf(a,i.component?e?e.children.getContext(c):null:e,t)}),t.canDeactivateChecks.push(new lc(i.component&&e&&e.outlet&&e.outlet.isActivated?e.outlet.component:null,i))}function Eu(n){return"function"==typeof n}function Cu(n){return n instanceof Ka||"EmptyError"===n?.name}const Yd=Symbol("INITIAL_VALUE");function Iu(){return sr(n=>eo(n.map(e=>e.pipe(zi(1),ps(Yd)))).pipe((0,_t.U)(e=>{for(const t of e)if(!0!==t){if(t===Yd)return Yd;if(!1===t||t instanceof En)return t}return!0}),Wn(e=>e!==Yd),zi(1)))}function j_(n){return(0,Rd.z)((0,Zn.b)(e=>{if(Ja(e))throw Vg(0,e)}),(0,_t.U)(e=>!0===e))}const sl={matched:!1,consumedSegments:[],remainingSegments:[],parameters:{},positionalParamSegments:{}};function a0(n,e,t,r,i){const a=Gf(n,e,t);return a.matched?function o0(n,e,t,r){const i=e.canMatch;return i&&0!==i.length?nt(i.map(c=>{const f=ua(c,n);return I(function yD(n){return n&&Eu(n.canMatch)}(f)?f.canMatch(e,t):n.runInContext(()=>f(e,t)))})).pipe(Iu(),j_()):nt(!0)}(r=k(e,r),e,t).pipe((0,_t.U)(c=>!0===c?a:{...sl})):nt(a)}function Gf(n,e,t){if(""===e.path)return"full"===e.pathMatch&&(n.hasChildren()||t.length>0)?{...sl}:{matched:!0,consumedSegments:[],remainingSegments:t,parameters:{},positionalParamSegments:{}};const i=(e.matcher||ro)(t,n,e);if(!i)return{...sl};const a={};E(i.posParams,(f,_)=>{a[_]=f.path});const c=i.consumed.length>0?{...a,...i.consumed[i.consumed.length-1].parameters}:a;return{matched:!0,consumedSegments:i.consumed,remainingSegments:t.slice(i.consumed.length),parameters:c,positionalParamSegments:i.posParams??{}}}function Du(n,e,t,r,i="corrected"){if(t.length>0&&function $g(n,e,t){return t.some(r=>qf(n,e,r)&&ms(r)!==Jt)}(n,t,r)){const c=new yt(e,function $_(n,e,t,r){const i={};i[Jt]=r,r._sourceSegment=n,r._segmentIndexShift=e.length;for(const a of t)if(""===a.path&&ms(a)!==Jt){const c=new yt([],{});c._sourceSegment=n,c._segmentIndexShift=e.length,i[ms(a)]=c}return i}(n,e,r,new yt(t,n.children)));return c._sourceSegment=n,c._segmentIndexShift=e.length,{segmentGroup:c,slicedSegments:[]}}if(0===t.length&&function Su(n,e,t){return t.some(r=>qf(n,e,r))}(n,t,r)){const c=new yt(n.segments,function wD(n,e,t,r,i,a){const c={};for(const f of r)if(qf(n,t,f)&&!i[ms(f)]){const _=new yt([],{});_._sourceSegment=n,_._segmentIndexShift="legacy"===a?n.segments.length:e.length,c[ms(f)]=_}return{...i,...c}}(n,e,t,r,n.children,i));return c._sourceSegment=n,c._segmentIndexShift=e.length,{segmentGroup:c,slicedSegments:t}}const a=new yt(n.segments,n.children);return a._sourceSegment=n,a._segmentIndexShift=e.length,{segmentGroup:a,slicedSegments:t}}function qf(n,e,t){return(!(n.hasChildren()||e.length>0)||"full"!==t.pathMatch)&&""===t.path}function zg(n,e,t,r){return!!(ms(n)===r||r!==Jt&&qf(e,t,n))&&("**"===n.path||Gf(e,n,t).matched)}function l0(n,e,t){return 0===e.length&&!n.children[t]}const Gg=!1;class Wf{constructor(e){this.segmentGroup=e||null}}class Tu{constructor(e){this.urlTree=e}}function Kf(n){return ci(new Wf(n))}function c0(n){return ci(new Tu(n))}class ID{constructor(e,t,r,i,a){this.injector=e,this.configLoader=t,this.urlSerializer=r,this.urlTree=i,this.config=a,this.allowRedirects=!0}apply(){const e=Du(this.urlTree.root,[],[],this.config).segmentGroup,t=new yt(e.segments,e.children);return this.expandSegmentGroup(this.injector,this.config,t,Jt).pipe((0,_t.U)(a=>this.createUrlTree(rc(a),this.urlTree.queryParams,this.urlTree.fragment))).pipe(qi(a=>{if(a instanceof Tu)return this.allowRedirects=!1,this.match(a.urlTree);throw a instanceof Wf?this.noMatchError(a):a}))}match(e){return this.expandSegmentGroup(this.injector,this.config,e.root,Jt).pipe((0,_t.U)(i=>this.createUrlTree(rc(i),e.queryParams,e.fragment))).pipe(qi(i=>{throw i instanceof Wf?this.noMatchError(i):i}))}noMatchError(e){return new d.vHH(4002,Gg)}createUrlTree(e,t,r){const i=Nd(e);return new En(i,t,r)}expandSegmentGroup(e,t,r,i){return 0===r.segments.length&&r.hasChildren()?this.expandChildren(e,t,r).pipe((0,_t.U)(a=>new yt([],a))):this.expandSegment(e,r,t,r.segments,i,!0)}expandChildren(e,t,r){const i=[];for(const a of Object.keys(r.children))"primary"===a?i.unshift(a):i.push(a);return(0,fn.D)(i).pipe(bi(a=>{const c=r.children[a],f=wu(t,a);return this.expandSegmentGroup(e,f,c,a).pipe((0,_t.U)(_=>({segment:_,outlet:a})))}),no((a,c)=>(a[c.outlet]=c.segment,a),{}),Cf())}expandSegment(e,t,r,i,a,c){return(0,fn.D)(r).pipe(bi(f=>this.expandSegmentAgainstRoute(e,t,r,f,i,a,c).pipe(qi(w=>{if(w instanceof Wf)return nt(null);throw w}))),Gi(f=>!!f),qi((f,_)=>{if(Cu(f))return l0(t,i,a)?nt(new yt([],{})):Kf(t);throw f}))}expandSegmentAgainstRoute(e,t,r,i,a,c,f){return zg(i,t,a,c)?void 0===i.redirectTo?this.matchSegmentAgainstRoute(e,t,i,a,c):f&&this.allowRedirects?this.expandSegmentAgainstRouteUsingRedirect(e,t,r,i,a,c):Kf(t):Kf(t)}expandSegmentAgainstRouteUsingRedirect(e,t,r,i,a,c){return"**"===i.path?this.expandWildCardWithParamsAgainstRouteUsingRedirect(e,r,i,c):this.expandRegularSegmentAgainstRouteUsingRedirect(e,t,r,i,a,c)}expandWildCardWithParamsAgainstRouteUsingRedirect(e,t,r,i){const a=this.applyRedirectCommands([],r.redirectTo,{});return r.redirectTo.startsWith("/")?c0(a):this.lineralizeSegments(r,a).pipe((0,Kn.z)(c=>{const f=new yt(c,{});return this.expandSegment(e,f,t,c,i,!1)}))}expandRegularSegmentAgainstRouteUsingRedirect(e,t,r,i,a,c){const{matched:f,consumedSegments:_,remainingSegments:w,positionalParamSegments:S}=Gf(t,i,a);if(!f)return Kf(t);const x=this.applyRedirectCommands(_,i.redirectTo,S);return i.redirectTo.startsWith("/")?c0(x):this.lineralizeSegments(i,x).pipe((0,Kn.z)(L=>this.expandSegment(e,t,r,L.concat(w),c,!1)))}matchSegmentAgainstRoute(e,t,r,i,a){return"**"===r.path?(e=k(r,e),r.loadChildren?(r._loadedRoutes?nt({routes:r._loadedRoutes,injector:r._loadedInjector}):this.configLoader.loadChildren(e,r)).pipe((0,_t.U)(f=>(r._loadedRoutes=f.routes,r._loadedInjector=f.injector,new yt(i,{})))):nt(new yt(i,{}))):a0(t,r,i,e).pipe(sr(({matched:c,consumedSegments:f,remainingSegments:_})=>c?this.getChildConfig(e=r._injector??e,r,i).pipe((0,Kn.z)(S=>{const x=S.injector??e,L=S.routes,{segmentGroup:U,slicedSegments:W}=Du(t,f,_,L),ie=new yt(U.segments,U.children);if(0===W.length&&ie.hasChildren())return this.expandChildren(x,L,ie).pipe((0,_t.U)(tt=>new yt(f,tt)));if(0===L.length&&0===W.length)return nt(new yt(f,{}));const we=ms(r)===a;return this.expandSegment(x,ie,L,W,we?Jt:a,!0).pipe((0,_t.U)(ot=>new yt(f.concat(ot.segments),ot.children)))})):Kf(t)))}getChildConfig(e,t,r){return t.children?nt({routes:t.children,injector:e}):t.loadChildren?void 0!==t._loadedRoutes?nt({routes:t._loadedRoutes,injector:t._loadedInjector}):function H_(n,e,t,r){const i=e.canLoad;return void 0===i||0===i.length?nt(!0):nt(i.map(c=>{const f=ua(c,n);return I(function pD(n){return n&&Eu(n.canLoad)}(f)?f.canLoad(e,t):n.runInContext(()=>f(e,t)))})).pipe(Iu(),j_())}(e,t,r).pipe((0,Kn.z)(i=>i?this.configLoader.loadChildren(e,t).pipe((0,Zn.b)(a=>{t._loadedRoutes=a.routes,t._loadedInjector=a.injector})):function CD(n){return ci(Zd(Gg,3))}())):nt({routes:[],injector:e})}lineralizeSegments(e,t){let r=[],i=t.root;for(;;){if(r=r.concat(i.segments),0===i.numberOfChildren)return nt(r);if(i.numberOfChildren>1||!i.children[Jt])return ci(new d.vHH(4e3,Gg));i=i.children[Jt]}}applyRedirectCommands(e,t,r){return this.applyRedirectCreateUrlTree(t,this.urlSerializer.parse(t),e,r)}applyRedirectCreateUrlTree(e,t,r,i){const a=this.createSegmentGroup(e,t.root,r,i);return new En(a,this.createQueryParams(t.queryParams,this.urlTree.queryParams),t.fragment)}createQueryParams(e,t){const r={};return E(e,(i,a)=>{if("string"==typeof i&&i.startsWith(":")){const f=i.substring(1);r[a]=t[f]}else r[a]=i}),r}createSegmentGroup(e,t,r,i){const a=this.createSegments(e,t.segments,r,i);let c={};return E(t.children,(f,_)=>{c[_]=this.createSegmentGroup(e,f,r,i)}),new yt(a,c)}createSegments(e,t,r,i){return t.map(a=>a.path.startsWith(":")?this.findPosParam(e,a,i):this.findOrReturn(a,r))}findPosParam(e,t,r){const i=r[t.path.substring(1)];if(!i)throw new d.vHH(4001,Gg);return i}findOrReturn(e,t){let r=0;for(const i of t){if(i.path===e.path)return t.splice(r),i;r++}return e}}class d0{}class Zf{constructor(e,t,r,i,a,c,f,_){this.injector=e,this.rootComponentType=t,this.config=r,this.urlTree=i,this.url=a,this.paramsInheritanceStrategy=c,this.relativeLinkResolution=f,this.urlSerializer=_}recognize(){const e=Du(this.urlTree.root,[],[],this.config.filter(t=>void 0===t.redirectTo),this.relativeLinkResolution).segmentGroup;return this.processSegmentGroup(this.injector,this.config,e,Jt).pipe((0,_t.U)(t=>{if(null===t)return null;const r=new mu([],Object.freeze({}),Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,{},Jt,this.rootComponentType,null,this.urlTree.root,-1,{}),i=new Us(r,t),a=new ca(this.url,i);return this.inheritParamsAndData(a._root),a}))}inheritParamsAndData(e){const t=e.value,r=qd(t,this.paramsInheritanceStrategy);t.params=Object.freeze(r.params),t.data=Object.freeze(r.data),e.children.forEach(i=>this.inheritParamsAndData(i))}processSegmentGroup(e,t,r,i){return 0===r.segments.length&&r.hasChildren()?this.processChildren(e,t,r):this.processSegment(e,t,r,r.segments,i)}processChildren(e,t,r){return(0,fn.D)(Object.keys(r.children)).pipe(bi(i=>{const a=r.children[i],c=wu(t,i);return this.processSegmentGroup(e,c,a,i)}),no((i,a)=>i&&a?(i.push(...a),i):null),function lu(n,e=!1){return(0,ir.e)((t,r)=>{let i=0;t.subscribe((0,Pn.x)(r,a=>{const c=n(a,i++);(c||e)&&r.next(a),!c&&r.complete()}))})}(i=>null!==i),to(null),Cf(),(0,_t.U)(i=>{if(null===i)return null;const a=h0(i);return function SD(n){n.sort((e,t)=>e.value.outlet===Jt?-1:t.value.outlet===Jt?1:e.value.outlet.localeCompare(t.value.outlet))}(a),a}))}processSegment(e,t,r,i,a){return(0,fn.D)(t).pipe(bi(c=>this.processSegmentAgainstRoute(c._injector??e,c,r,i,a)),Gi(c=>!!c),qi(c=>{if(Cu(c))return l0(r,i,a)?nt([]):nt(null);throw c}))}processSegmentAgainstRoute(e,t,r,i,a){if(t.redirectTo||!zg(t,r,i,a))return nt(null);let c;if("**"===t.path){const f=i.length>0?Wi(i).parameters:{},_=f0(r)+i.length;c=nt({snapshot:new mu(i,f,Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,g0(t),ms(t),t.component??t._loadedComponent??null,t,G_(r),_,q_(t),_),consumedSegments:[],remainingSegments:[]})}else c=a0(r,t,i,e).pipe((0,_t.U)(({matched:f,consumedSegments:_,remainingSegments:w,parameters:S})=>{if(!f)return null;const x=f0(r)+_.length;return{snapshot:new mu(_,S,Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,g0(t),ms(t),t.component??t._loadedComponent??null,t,G_(r),x,q_(t),x),consumedSegments:_,remainingSegments:w}}));return c.pipe(sr(f=>{if(null===f)return nt(null);const{snapshot:_,consumedSegments:w,remainingSegments:S}=f;e=t._injector??e;const x=t._loadedInjector??e,L=function Qd(n){return n.children?n.children:n.loadChildren?n._loadedRoutes:[]}(t),{segmentGroup:U,slicedSegments:W}=Du(r,w,S,L.filter(we=>void 0===we.redirectTo),this.relativeLinkResolution);if(0===W.length&&U.hasChildren())return this.processChildren(x,L,U).pipe((0,_t.U)(we=>null===we?null:[new Us(_,we)]));if(0===L.length&&0===W.length)return nt([new Us(_,[])]);const ie=ms(t)===a;return this.processSegment(x,L,U,W,ie?Jt:a).pipe((0,_t.U)(we=>null===we?null:[new Us(_,we)]))}))}}function Yf(n){const e=n.value.routeConfig;return e&&""===e.path&&void 0===e.redirectTo}function h0(n){const e=[],t=new Set;for(const r of n){if(!Yf(r)){e.push(r);continue}const i=e.find(a=>r.value.routeConfig===a.value.routeConfig);void 0!==i?(i.children.push(...r.children),t.add(i)):e.push(r)}for(const r of t){const i=h0(r.children);e.push(new Us(r.value,i))}return e.filter(r=>!t.has(r))}function G_(n){let e=n;for(;e._sourceSegment;)e=e._sourceSegment;return e}function f0(n){let e=n,t=e._segmentIndexShift??0;for(;e._sourceSegment;)e=e._sourceSegment,t+=e._segmentIndexShift??0;return t-1}function g0(n){return n.data||{}}function q_(n){return n.resolve||{}}function _0(n){return"string"==typeof n.title||null===n.title}function Y_(n){return sr(e=>{const t=n(e);return t?(0,fn.D)(t).pipe((0,_t.U)(()=>e)):nt(e)})}let y0=(()=>{class n{buildTitle(t){let r,i=t.root;for(;void 0!==i;)r=this.getResolvedTitleForRoute(i)??r,i=i.children.find(a=>a.outlet===Jt);return r}getResolvedTitleForRoute(t){return t.data[Qa]}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=d.Yz7({token:n,factory:function(){return(0,d.f3M)(v0)},providedIn:"root"}),n})(),v0=(()=>{class n extends y0{constructor(t){super(),this.title=t}updateTitle(t){const r=this.buildTitle(t);void 0!==r&&this.title.setTitle(r)}}return n.\u0275fac=function(t){return new(t||n)(d.LFG(gf))},n.\u0275prov=d.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();class AD{}class Xd extends class MD{shouldDetach(e){return!1}store(e,t){}shouldAttach(e){return!1}retrieve(e){return null}shouldReuseRoute(e,t){return e.routeConfig===t.routeConfig}}{}const Wg=new d.OlP("",{providedIn:"root",factory:()=>({})}),w0=new d.OlP("ROUTES");let E0=(()=>{class n{constructor(t,r){this.injector=t,this.compiler=r,this.componentLoaders=new WeakMap,this.childrenLoaders=new WeakMap}loadComponent(t){if(this.componentLoaders.get(t))return this.componentLoaders.get(t);if(t._loadedComponent)return nt(t._loadedComponent);this.onLoadStartListener&&this.onLoadStartListener(t);const r=I(t.loadComponent()).pipe((0,Zn.b)(a=>{this.onLoadEndListener&&this.onLoadEndListener(t),t._loadedComponent=a}),Ql(()=>{this.componentLoaders.delete(t)})),i=new bf(r,()=>new Kt.x).pipe(Zl());return this.componentLoaders.set(t,i),i}loadChildren(t,r){if(this.childrenLoaders.get(r))return this.childrenLoaders.get(r);if(r._loadedRoutes)return nt({routes:r._loadedRoutes,injector:r._loadedInjector});this.onLoadStartListener&&this.onLoadStartListener(r);const a=this.loadModuleFactoryOrRoutes(r.loadChildren).pipe((0,_t.U)(f=>{this.onLoadEndListener&&this.onLoadEndListener(r);let _,w,S=!1;Array.isArray(f)?w=f:(_=f.create(t).injector,w=cu(_.get(w0,[],d.XFs.Self|d.XFs.Optional)));return{routes:w.map(bu),injector:_}}),Ql(()=>{this.childrenLoaders.delete(r)})),c=new bf(a,()=>new Kt.x).pipe(Zl());return this.childrenLoaders.set(r,c),c}loadModuleFactoryOrRoutes(t){return I(t()).pipe((0,Kn.z)(r=>r instanceof d.YKP||Array.isArray(r)?nt(r):(0,fn.D)(this.compiler.compileModuleAsync(r))))}}return n.\u0275fac=function(t){return new(t||n)(d.LFG(d.zs3),d.LFG(d.Sil))},n.\u0275prov=d.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();class C0{}class sO{shouldProcessUrl(e){return!0}extract(e){return e}merge(e,t){return e}}function oO(n){throw n}function I0(n,e,t){return e.parse("/")}const xD={paths:"exact",fragment:"ignored",matrixParams:"ignored",queryParams:"exact"},D0={paths:"subset",fragment:"ignored",matrixParams:"ignored",queryParams:"subset"};function S0(){const n=(0,d.f3M)(Jl),e=(0,d.f3M)(vu),t=(0,d.f3M)(Ne),r=(0,d.f3M)(d.zs3),i=(0,d.f3M)(d.Sil),a=(0,d.f3M)(w0,{optional:!0})??[],c=(0,d.f3M)(Wg,{optional:!0})??{},f=(0,d.f3M)(v0),_=(0,d.f3M)(y0,{optional:!0}),w=(0,d.f3M)(C0,{optional:!0}),S=(0,d.f3M)(AD,{optional:!0}),x=new Rn(null,n,e,t,r,i,cu(a));return w&&(x.urlHandlingStrategy=w),S&&(x.routeReuseStrategy=S),x.titleStrategy=_??f,function RD(n,e){n.errorHandler&&(e.errorHandler=n.errorHandler),n.malformedUriErrorHandler&&(e.malformedUriErrorHandler=n.malformedUriErrorHandler),n.onSameUrlNavigation&&(e.onSameUrlNavigation=n.onSameUrlNavigation),n.paramsInheritanceStrategy&&(e.paramsInheritanceStrategy=n.paramsInheritanceStrategy),n.relativeLinkResolution&&(e.relativeLinkResolution=n.relativeLinkResolution),n.urlUpdateStrategy&&(e.urlUpdateStrategy=n.urlUpdateStrategy),n.canceledNavigationResolution&&(e.canceledNavigationResolution=n.canceledNavigationResolution)}(c,x),x}let Rn=(()=>{class n{constructor(t,r,i,a,c,f,_){this.rootComponentType=t,this.urlSerializer=r,this.rootContexts=i,this.location=a,this.config=_,this.lastSuccessfulNavigation=null,this.currentNavigation=null,this.disposed=!1,this.navigationId=0,this.currentPageId=0,this.isNgZoneEnabled=!1,this.events=new Kt.x,this.errorHandler=oO,this.malformedUriErrorHandler=I0,this.navigated=!1,this.lastSuccessfulId=-1,this.afterPreactivation=()=>nt(void 0),this.urlHandlingStrategy=new sO,this.routeReuseStrategy=new Xd,this.onSameUrlNavigation="ignore",this.paramsInheritanceStrategy="emptyOnly",this.urlUpdateStrategy="deferred",this.relativeLinkResolution="corrected",this.canceledNavigationResolution="replace",this.configLoader=c.get(E0),this.configLoader.onLoadEndListener=L=>this.triggerEvent(new Lf(L)),this.configLoader.onLoadStartListener=L=>this.triggerEvent(new Ff(L)),this.ngModule=c.get(d.h0i),this.console=c.get(d.c2e);const x=c.get(d.R0b);this.isNgZoneEnabled=x instanceof d.R0b&&d.R0b.isInAngularZone(),this.resetConfig(_),this.currentUrlTree=function N(){return new En(new yt([],{}),{},null)}(),this.rawUrlTree=this.currentUrlTree,this.browserUrlTree=this.currentUrlTree,this.routerState=zd(this.currentUrlTree,this.rootComponentType),this.transitions=new Qn({id:0,targetPageId:0,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,extractedUrl:this.urlHandlingStrategy.extract(this.currentUrlTree),urlAfterRedirects:this.urlHandlingStrategy.extract(this.currentUrlTree),rawUrl:this.currentUrlTree,extras:{},resolve:null,reject:null,promise:Promise.resolve(!0),source:"imperative",restoredState:null,currentSnapshot:this.routerState.snapshot,targetSnapshot:null,currentRouterState:this.routerState,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null}),this.navigations=this.setupNavigations(this.transitions),this.processNavigations()}get browserPageId(){return this.location.getState()?.\u0275routerPageId}setupNavigations(t){const r=this.events;return t.pipe(Wn(i=>0!==i.id),(0,_t.U)(i=>({...i,extractedUrl:this.urlHandlingStrategy.extract(i.rawUrl)})),sr(i=>{let a=!1,c=!1;return nt(i).pipe((0,Zn.b)(f=>{this.currentNavigation={id:f.id,initialUrl:f.rawUrl,extractedUrl:f.extractedUrl,trigger:f.source,extras:f.extras,previousNavigation:this.lastSuccessfulNavigation?{...this.lastSuccessfulNavigation,previousNavigation:null}:null}}),sr(f=>{const _=this.browserUrlTree.toString(),w=!this.navigated||f.extractedUrl.toString()!==_||_!==this.currentUrlTree.toString();if(("reload"===this.onSameUrlNavigation||w)&&this.urlHandlingStrategy.shouldProcessUrl(f.rawUrl))return Q_(f.source)&&(this.browserUrlTree=f.extractedUrl),nt(f).pipe(sr(x=>{const L=this.transitions.getValue();return r.next(new Ud(x.id,this.serializeUrl(x.extractedUrl),x.source,x.restoredState)),L!==this.transitions.getValue()?vi.E:Promise.resolve(x)}),function u0(n,e,t,r){return sr(i=>function z_(n,e,t,r,i){return new ID(n,e,t,r,i).apply()}(n,e,t,i.extractedUrl,r).pipe((0,_t.U)(a=>({...i,urlAfterRedirects:a}))))}(this.ngModule.injector,this.configLoader,this.urlSerializer,this.config),(0,Zn.b)(x=>{this.currentNavigation={...this.currentNavigation,finalUrl:x.urlAfterRedirects},i.urlAfterRedirects=x.urlAfterRedirects}),function m0(n,e,t,r,i,a){return(0,Kn.z)(c=>function DD(n,e,t,r,i,a,c="emptyOnly",f="legacy"){return new Zf(n,e,t,r,i,c,f,a).recognize().pipe(sr(_=>null===_?function nO(n){return new Xr.y(e=>e.error(n))}(new d0):nt(_)))}(n,e,t,c.urlAfterRedirects,r.serialize(c.urlAfterRedirects),r,i,a).pipe((0,_t.U)(f=>({...c,targetSnapshot:f}))))}(this.ngModule.injector,this.rootComponentType,this.config,this.urlSerializer,this.paramsInheritanceStrategy,this.relativeLinkResolution),(0,Zn.b)(x=>{if(i.targetSnapshot=x.targetSnapshot,"eager"===this.urlUpdateStrategy){if(!x.extras.skipLocationChange){const U=this.urlHandlingStrategy.merge(x.urlAfterRedirects,x.rawUrl);this.setBrowserUrl(U,x)}this.browserUrlTree=x.urlAfterRedirects}const L=new Hd(x.id,this.serializeUrl(x.extractedUrl),this.serializeUrl(x.urlAfterRedirects),x.targetSnapshot);r.next(L)}));if(w&&this.rawUrlTree&&this.urlHandlingStrategy.shouldProcessUrl(this.rawUrlTree)){const{id:L,extractedUrl:U,source:W,restoredState:ie,extras:we}=f,qe=new Ud(L,this.serializeUrl(U),W,ie);r.next(qe);const ot=zd(U,this.rootComponentType).snapshot;return nt(i={...f,targetSnapshot:ot,urlAfterRedirects:U,extras:{...we,skipLocationChange:!1,replaceUrl:!1}})}return this.rawUrlTree=f.rawUrl,f.resolve(null),vi.E}),(0,Zn.b)(f=>{const _=new Pf(f.id,this.serializeUrl(f.extractedUrl),this.serializeUrl(f.urlAfterRedirects),f.targetSnapshot);this.triggerEvent(_)}),(0,_t.U)(f=>i={...f,guards:cc(f.targetSnapshot,f.currentSnapshot,this.rootContexts)}),function t0(n,e){return(0,Kn.z)(t=>{const{targetSnapshot:r,currentSnapshot:i,guards:{canActivateChecks:a,canDeactivateChecks:c}}=t;return 0===c.length&&0===a.length?nt({...t,guardsResult:!0}):function n0(n,e,t,r){return(0,fn.D)(n).pipe((0,Kn.z)(i=>function bD(n,e,t,r,i){const a=e&&e.routeConfig?e.routeConfig.canDeactivate:null;return a&&0!==a.length?nt(a.map(f=>{const _=ac(e)??i,w=ua(f,_);return I(function _D(n){return n&&Eu(n.canDeactivate)}(w)?w.canDeactivate(n,e,t,r):_.runInContext(()=>w(n,e,t,r))).pipe(Gi())})).pipe(Iu()):nt(!0)}(i.component,i.route,t,e,r)),Gi(i=>!0!==i,!0))}(c,r,i,n).pipe((0,Kn.z)(f=>f&&function e0(n){return"boolean"==typeof n}(f)?function vD(n,e,t,r){return(0,fn.D)(e).pipe(bi(i=>Ns(function s0(n,e){return null!==n&&e&&e(new Vf(n)),nt(!0)}(i.route.parent,r),function r0(n,e){return null!==n&&e&&e(new Uf(n)),nt(!0)}(i.route,r),function tO(n,e,t){const r=e[e.length-1],a=e.slice(0,e.length-1).reverse().map(c=>function $f(n){const e=n.routeConfig?n.routeConfig.canActivateChild:null;return e&&0!==e.length?{node:n,guards:e}:null}(c)).filter(c=>null!==c).map(c=>ra(()=>nt(c.guards.map(_=>{const w=ac(c.node)??t,S=ua(_,w);return I(function mD(n){return n&&Eu(n.canActivateChild)}(S)?S.canActivateChild(r,n):w.runInContext(()=>S(r,n))).pipe(Gi())})).pipe(Iu())));return nt(a).pipe(Iu())}(n,i.path,t),function U_(n,e,t){const r=e.routeConfig?e.routeConfig.canActivate:null;if(!r||0===r.length)return nt(!0);const i=r.map(a=>ra(()=>{const c=ac(e)??t,f=ua(a,c);return I(function gD(n){return n&&Eu(n.canActivate)}(f)?f.canActivate(e,n):c.runInContext(()=>f(e,n))).pipe(Gi())}));return nt(i).pipe(Iu())}(n,i.route,t))),Gi(i=>!0!==i,!0))}(r,a,n,e):nt(f)),(0,_t.U)(f=>({...t,guardsResult:f})))})}(this.ngModule.injector,f=>this.triggerEvent(f)),(0,Zn.b)(f=>{if(i.guardsResult=f.guardsResult,Ja(f.guardsResult))throw Vg(0,f.guardsResult);const _=new Nf(f.id,this.serializeUrl(f.extractedUrl),this.serializeUrl(f.urlAfterRedirects),f.targetSnapshot,!!f.guardsResult);this.triggerEvent(_)}),Wn(f=>!!f.guardsResult||(this.restoreHistory(f),this.cancelNavigationTransition(f,"",3),!1)),Y_(f=>{if(f.guards.canActivateChecks.length)return nt(f).pipe((0,Zn.b)(_=>{const w=new gu(_.id,this.serializeUrl(_.extractedUrl),this.serializeUrl(_.urlAfterRedirects),_.targetSnapshot);this.triggerEvent(w)}),sr(_=>{let w=!1;return nt(_).pipe(function W_(n,e){return(0,Kn.z)(t=>{const{targetSnapshot:r,guards:{canActivateChecks:i}}=t;if(!i.length)return nt(t);let a=0;return(0,fn.D)(i).pipe(bi(c=>function K_(n,e,t,r){const i=n.routeConfig,a=n._resolve;return void 0!==i?.title&&!_0(i)&&(a[Qa]=i.title),function TD(n,e,t,r){const i=function Z_(n){return[...Object.keys(n),...Object.getOwnPropertySymbols(n)]}(n);if(0===i.length)return nt({});const a={};return(0,fn.D)(i).pipe((0,Kn.z)(c=>function Qf(n,e,t,r){const i=ac(e)??r,a=ua(n,i);return I(a.resolve?a.resolve(e,t):i.runInContext(()=>a(e,t)))}(n[c],e,t,r).pipe(Gi(),(0,Zn.b)(f=>{a[c]=f}))),Ef(1),function Mo(n){return(0,_t.U)(()=>n)}(a),qi(c=>Cu(c)?vi.E:ci(c)))}(a,n,e,r).pipe((0,_t.U)(c=>(n._resolvedData=c,n.data=qd(n,t).resolve,i&&_0(i)&&(n.data[Qa]=i.title),null)))}(c.route,r,n,e)),(0,Zn.b)(()=>a++),Ef(1),(0,Kn.z)(c=>a===i.length?nt(t):vi.E))})}(this.paramsInheritanceStrategy,this.ngModule.injector),(0,Zn.b)({next:()=>w=!0,complete:()=>{w||(this.restoreHistory(_),this.cancelNavigationTransition(_,"",2))}}))}),(0,Zn.b)(_=>{const w=new V_(_.id,this.serializeUrl(_.extractedUrl),this.serializeUrl(_.urlAfterRedirects),_.targetSnapshot);this.triggerEvent(w)}))}),Y_(f=>{const _=w=>{const S=[];w.routeConfig?.loadComponent&&!w.routeConfig._loadedComponent&&S.push(this.configLoader.loadComponent(w.routeConfig).pipe((0,Zn.b)(x=>{w.component=x}),(0,_t.U)(()=>{})));for(const x of w.children)S.push(..._(x));return S};return eo(_(f.targetSnapshot.root)).pipe(to(),zi(1))}),Y_(()=>this.afterPreactivation()),(0,_t.U)(f=>{const _=function B_(n,e,t){const r=or(n,e._root,t?t._root:void 0);return new Ng(r,e)}(this.routeReuseStrategy,f.targetSnapshot,f.currentRouterState);return i={...f,targetRouterState:_}}),(0,Zn.b)(f=>{this.currentUrlTree=f.urlAfterRedirects,this.rawUrlTree=this.urlHandlingStrategy.merge(f.urlAfterRedirects,f.rawUrl),this.routerState=f.targetRouterState,"deferred"===this.urlUpdateStrategy&&(f.extras.skipLocationChange||this.setBrowserUrl(this.rawUrlTree,f),this.browserUrlTree=f.urlAfterRedirects)}),((n,e,t)=>(0,_t.U)(r=>(new Hf(e,r.targetRouterState,r.currentRouterState,t).activate(n),r)))(this.rootContexts,this.routeReuseStrategy,f=>this.triggerEvent(f)),(0,Zn.b)({next(){a=!0},complete(){a=!0}}),Ql(()=>{a||c||this.cancelNavigationTransition(i,"",1),this.currentNavigation?.id===i.id&&(this.currentNavigation=null)}),qi(f=>{if(c=!0,Ug(f)){Bg(f)||(this.navigated=!0,this.restoreHistory(i,!0));const _=new Bs(i.id,this.serializeUrl(i.extractedUrl),f.message,f.cancellationCode);if(r.next(_),Bg(f)){const w=this.urlHandlingStrategy.merge(f.url,this.rawUrlTree),S={skipLocationChange:i.extras.skipLocationChange,replaceUrl:"eager"===this.urlUpdateStrategy||Q_(i.source)};this.scheduleNavigation(w,"imperative",null,S,{resolve:i.resolve,reject:i.reject,promise:i.promise})}else i.resolve(!1)}else{this.restoreHistory(i,!0);const _=new Of(i.id,this.serializeUrl(i.extractedUrl),f,i.targetSnapshot??void 0);r.next(_);try{i.resolve(this.errorHandler(f))}catch(w){i.reject(w)}}return vi.E}))}))}resetRootComponentType(t){this.rootComponentType=t,this.routerState.root.component=this.rootComponentType}setTransition(t){this.transitions.next({...this.transitions.value,...t})}initialNavigation(){this.setUpLocationChangeListener(),0===this.navigationId&&this.navigateByUrl(this.location.path(!0),{replaceUrl:!0})}setUpLocationChangeListener(){this.locationSubscription||(this.locationSubscription=this.location.subscribe(t=>{const r="popstate"===t.type?"popstate":"hashchange";"popstate"===r&&setTimeout(()=>{const i={replaceUrl:!0},a=t.state?.navigationId?t.state:null;if(a){const f={...a};delete f.navigationId,delete f.\u0275routerPageId,0!==Object.keys(f).length&&(i.state=f)}const c=this.parseUrl(t.url);this.scheduleNavigation(c,r,a,i)},0)}))}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return this.currentNavigation}triggerEvent(t){this.events.next(t)}resetConfig(t){this.config=t.map(bu),this.navigated=!1,this.lastSuccessfulId=-1}ngOnDestroy(){this.dispose()}dispose(){this.transitions.complete(),this.locationSubscription&&(this.locationSubscription.unsubscribe(),this.locationSubscription=void 0),this.disposed=!0}createUrlTree(t,r={}){const{relativeTo:i,queryParams:a,fragment:c,queryParamsHandling:f,preserveFragment:_}=r,w=i||this.routerState.root,S=_?this.currentUrlTree.fragment:c;let x=null;switch(f){case"merge":x={...this.currentUrlTree.queryParams,...a};break;case"preserve":x=this.currentUrlTree.queryParams;break;default:x=a||null}return null!==x&&(x=this.removeEmptyProps(x)),L_(w,this.currentUrlTree,t,x,S??null)}navigateByUrl(t,r={skipLocationChange:!1}){const i=Ja(t)?t:this.parseUrl(t),a=this.urlHandlingStrategy.merge(i,this.rawUrlTree);return this.scheduleNavigation(a,"imperative",null,r)}navigate(t,r={skipLocationChange:!1}){return function kD(n){for(let e=0;e<n.length;e++){if(null==n[e])throw new d.vHH(4008,false)}}(t),this.navigateByUrl(this.createUrlTree(t,r),r)}serializeUrl(t){return this.urlSerializer.serialize(t)}parseUrl(t){let r;try{r=this.urlSerializer.parse(t)}catch(i){r=this.malformedUriErrorHandler(i,this.urlSerializer,t)}return r}isActive(t,r){let i;if(i=!0===r?{...xD}:!1===r?{...D0}:r,Ja(t))return de(this.currentUrlTree,t,i);const a=this.parseUrl(t);return de(this.currentUrlTree,a,i)}removeEmptyProps(t){return Object.keys(t).reduce((r,i)=>{const a=t[i];return null!=a&&(r[i]=a),r},{})}processNavigations(){this.navigations.subscribe(t=>{this.navigated=!0,this.lastSuccessfulId=t.id,this.currentPageId=t.targetPageId,this.events.next(new so(t.id,this.serializeUrl(t.extractedUrl),this.serializeUrl(this.currentUrlTree))),this.lastSuccessfulNavigation=this.currentNavigation,this.titleStrategy?.updateTitle(this.routerState.snapshot),t.resolve(!0)},t=>{this.console.warn(`Unhandled Navigation Error: ${t}`)})}scheduleNavigation(t,r,i,a,c){if(this.disposed)return Promise.resolve(!1);let f,_,w;c?(f=c.resolve,_=c.reject,w=c.promise):w=new Promise((L,U)=>{f=L,_=U});const S=++this.navigationId;let x;return"computed"===this.canceledNavigationResolution?(0===this.currentPageId&&(i=this.location.getState()),x=i&&i.\u0275routerPageId?i.\u0275routerPageId:a.replaceUrl||a.skipLocationChange?this.browserPageId??0:(this.browserPageId??0)+1):x=0,this.setTransition({id:S,targetPageId:x,source:r,restoredState:i,currentUrlTree:this.currentUrlTree,currentRawUrl:this.rawUrlTree,rawUrl:t,extras:a,resolve:f,reject:_,promise:w,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),w.catch(L=>Promise.reject(L))}setBrowserUrl(t,r){const i=this.urlSerializer.serialize(t),a={...r.extras.state,...this.generateNgRouterState(r.id,r.targetPageId)};this.location.isCurrentPathEqualTo(i)||r.extras.replaceUrl?this.location.replaceState(i,"",a):this.location.go(i,"",a)}restoreHistory(t,r=!1){if("computed"===this.canceledNavigationResolution){const i=this.currentPageId-t.targetPageId;"popstate"!==t.source&&"eager"!==this.urlUpdateStrategy&&this.currentUrlTree!==this.currentNavigation?.finalUrl||0===i?this.currentUrlTree===this.currentNavigation?.finalUrl&&0===i&&(this.resetState(t),this.browserUrlTree=t.currentUrlTree,this.resetUrlToCurrentUrlTree()):this.location.historyGo(i)}else"replace"===this.canceledNavigationResolution&&(r&&this.resetState(t),this.resetUrlToCurrentUrlTree())}resetState(t){this.routerState=t.currentRouterState,this.currentUrlTree=t.currentUrlTree,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,t.rawUrl)}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.rawUrlTree),"",this.generateNgRouterState(this.lastSuccessfulId,this.currentPageId))}cancelNavigationTransition(t,r,i){const a=new Bs(t.id,this.serializeUrl(t.extractedUrl),r,i);this.triggerEvent(a),t.resolve(!1)}generateNgRouterState(t,r){return"computed"===this.canceledNavigationResolution?{navigationId:t,\u0275routerPageId:r}:{navigationId:t}}}return n.\u0275fac=function(t){d.$Z()},n.\u0275prov=d.Yz7({token:n,factory:function(){return S0()},providedIn:"root"}),n})();function Q_(n){return"imperative"!==n}class ey{}let ND=(()=>{class n{constructor(t,r,i,a,c){this.router=t,this.injector=i,this.preloadingStrategy=a,this.loader=c}setUpPreloading(){this.subscription=this.router.events.pipe(Wn(t=>t instanceof so),bi(()=>this.preload())).subscribe(()=>{})}preload(){return this.processRoutes(this.injector,this.router.config)}ngOnDestroy(){this.subscription&&this.subscription.unsubscribe()}processRoutes(t,r){const i=[];for(const a of r){a.providers&&!a._injector&&(a._injector=(0,d.MMx)(a.providers,t,`Route: ${a.path}`));const c=a._injector??t,f=a._loadedInjector??c;a.loadChildren&&!a._loadedRoutes&&void 0===a.canLoad||a.loadComponent&&!a._loadedComponent?i.push(this.preloadConfig(c,a)):(a.children||a._loadedRoutes)&&i.push(this.processRoutes(f,a.children??a._loadedRoutes))}return(0,fn.D)(i).pipe((0,na.J)())}preloadConfig(t,r){return this.preloadingStrategy.preload(r,()=>{let i;i=r.loadChildren&&void 0===r.canLoad?this.loader.loadChildren(t,r):nt(null);const a=i.pipe((0,Kn.z)(c=>null===c?nt(void 0):(r._loadedRoutes=c.routes,r._loadedInjector=c.injector,this.processRoutes(c.injector??t,c.routes))));if(r.loadComponent&&!r._loadedComponent){const c=this.loader.loadComponent(r);return(0,fn.D)([a,c]).pipe((0,na.J)())}return a})}}return n.\u0275fac=function(t){return new(t||n)(d.LFG(Rn),d.LFG(d.Sil),d.LFG(d.lqb),d.LFG(ey),d.LFG(E0))},n.\u0275prov=d.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();const $t=new d.OlP("");let ty=(()=>{class n{constructor(t,r,i={}){this.router=t,this.viewportScroller=r,this.options=i,this.lastId=0,this.lastSource="imperative",this.restoredId=0,this.store={},i.scrollPositionRestoration=i.scrollPositionRestoration||"disabled",i.anchorScrolling=i.anchorScrolling||"disabled"}init(){"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.setHistoryScrollRestoration("manual"),this.routerEventsSubscription=this.createScrollEvents(),this.scrollEventsSubscription=this.consumeScrollEvents()}createScrollEvents(){return this.router.events.subscribe(t=>{t instanceof Ud?(this.store[this.lastId]=this.viewportScroller.getScrollPosition(),this.lastSource=t.navigationTrigger,this.restoredId=t.restoredState?t.restoredState.navigationId:0):t instanceof so&&(this.lastId=t.id,this.scheduleScrollEvent(t,this.router.parseUrl(t.urlAfterRedirects).fragment))})}consumeScrollEvents(){return this.router.events.subscribe(t=>{t instanceof jd&&(t.position?"top"===this.options.scrollPositionRestoration?this.viewportScroller.scrollToPosition([0,0]):"enabled"===this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition(t.position):t.anchor&&"enabled"===this.options.anchorScrolling?this.viewportScroller.scrollToAnchor(t.anchor):"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition([0,0]))})}scheduleScrollEvent(t,r){this.router.triggerEvent(new jd(t,"popstate"===this.lastSource?this.store[this.restoredId]:null,r))}ngOnDestroy(){this.routerEventsSubscription&&this.routerEventsSubscription.unsubscribe(),this.scrollEventsSubscription&&this.scrollEventsSubscription.unsubscribe()}}return n.\u0275fac=function(t){d.$Z()},n.\u0275prov=d.Yz7({token:n,factory:n.\u0275fac}),n})();function Jd(n,e){return{\u0275kind:n,\u0275providers:e}}function Kg(n){return[{provide:w0,multi:!0,useValue:n}]}function ny(){const n=(0,d.f3M)(d.zs3);return e=>{const t=n.get(d.z2F);if(e!==t.components[0])return;const r=n.get(Rn),i=n.get(A0);1===n.get(ry)&&r.initialNavigation(),n.get(uc,null,d.XFs.Optional)?.setUpPreloading(),n.get($t,null,d.XFs.Optional)?.init(),r.resetRootComponentType(t.componentTypes[0]),i.closed||(i.next(),i.unsubscribe())}}const A0=new d.OlP("",{factory:()=>new Kt.x}),ry=new d.OlP("",{providedIn:"root",factory:()=>1});const uc=new d.OlP("");function LD(n){return Jd(0,[{provide:uc,useExisting:ND},{provide:ey,useExisting:n}])}const VD=new d.OlP("ROUTER_FORROOT_GUARD"),hO=[Ne,{provide:Jl,useClass:uu},{provide:Rn,useFactory:S0},vu,{provide:$r,useFactory:function T0(n){return n.routerState.root},deps:[Rn]},E0];function fO(){return new d.PXZ("Router",Rn)}let ep=(()=>{class n{constructor(t){}static forRoot(t,r){return{ngModule:n,providers:[hO,[],Kg(t),{provide:VD,useFactory:th,deps:[[Rn,new d.FiY,new d.tp0]]},{provide:Wg,useValue:r||{}},r?.useHash?{provide:be,useClass:St}:{provide:be,useClass:bt},{provide:$t,useFactory:()=>{const n=(0,d.f3M)(Rn),e=(0,d.f3M)(As),t=(0,d.f3M)(Wg);return t.scrollOffset&&e.setOffset(t.scrollOffset),new ty(n,e,t)}},r?.preloadingStrategy?LD(r.preloadingStrategy).\u0275providers:[],{provide:d.PXZ,multi:!0,useFactory:fO},r?.initialNavigation?UD(r):[],[{provide:iy,useFactory:ny},{provide:d.tb,multi:!0,useExisting:iy}]]}}static forChild(t){return{ngModule:n,providers:[Kg(t)]}}}return n.\u0275fac=function(t){return new(t||n)(d.LFG(VD,8))},n.\u0275mod=d.oAB({type:n}),n.\u0275inj=d.cJS({imports:[T]}),n})();function th(n){return"guarded"}function UD(n){return["disabled"===n.initialNavigation?Jd(3,[{provide:d.ip1,multi:!0,useFactory:()=>{const e=(0,d.f3M)(Rn);return()=>{e.setUpLocationChangeListener()}}},{provide:ry,useValue:2}]).\u0275providers:[],"enabledBlocking"===n.initialNavigation?Jd(2,[{provide:ry,useValue:0},{provide:d.ip1,multi:!0,deps:[d.zs3],useFactory:e=>{const t=e.get(z,Promise.resolve());let r=!1;return()=>t.then(()=>new Promise(a=>{const c=e.get(Rn),f=e.get(A0);(function i(a){e.get(Rn).events.pipe(Wn(f=>f instanceof so||f instanceof Bs||f instanceof Of),(0,_t.U)(f=>f instanceof so||f instanceof Bs&&(0===f.code||1===f.code)&&null),Wn(f=>null!==f),zi(1)).subscribe(()=>{a()})})(()=>{a(!0),r=!0}),c.afterPreactivation=()=>(a(!0),r||f.closed?nt(void 0):f),c.initialNavigation()}))}}]).\u0275providers:[]]}const iy=new d.OlP("");let O0=(()=>{class n{constructor(t,r){this._renderer=t,this._elementRef=r,this.onChange=i=>{},this.onTouched=()=>{}}setProperty(t,r){this._renderer.setProperty(this._elementRef.nativeElement,t,r)}registerOnTouched(t){this.onTouched=t}registerOnChange(t){this.onChange=t}setDisabledState(t){this.setProperty("disabled",t)}}return n.\u0275fac=function(t){return new(t||n)(d.Y36(d.Qsj),d.Y36(d.SBq))},n.\u0275dir=d.lG2({type:n}),n})(),Au=(()=>{class n extends O0{}return n.\u0275fac=function(){let e;return function(r){return(e||(e=d.n5z(n)))(r||n)}}(),n.\u0275dir=d.lG2({type:n,features:[d.qOj]}),n})();const da=new d.OlP("NgValueAccessor"),N0={provide:da,useExisting:(0,d.Gpc)(()=>tp),multi:!0},F0=new d.OlP("CompositionEventMode");let tp=(()=>{class n extends O0{constructor(t,r,i){super(t,r),this._compositionMode=i,this._composing=!1,null==this._compositionMode&&(this._compositionMode=!function jD(){const n=P()?P().getUserAgent():"";return/android (\d+)/.test(n.toLowerCase())}())}writeValue(t){this.setProperty("value",t??"")}_handleInput(t){(!this._compositionMode||this._compositionMode&&!this._composing)&&this.onChange(t)}_compositionStart(){this._composing=!0}_compositionEnd(t){this._composing=!1,this._compositionMode&&this.onChange(t)}}return n.\u0275fac=function(t){return new(t||n)(d.Y36(d.Qsj),d.Y36(d.SBq),d.Y36(F0,8))},n.\u0275dir=d.lG2({type:n,selectors:[["input","formControlName","",3,"type","checkbox"],["textarea","formControlName",""],["input","formControl","",3,"type","checkbox"],["textarea","formControl",""],["input","ngModel","",3,"type","checkbox"],["textarea","ngModel",""],["","ngDefaultControl",""]],hostBindings:function(t,r){1&t&&d.NdJ("input",function(a){return r._handleInput(a.target.value)})("blur",function(){return r.onTouched()})("compositionstart",function(){return r._compositionStart()})("compositionend",function(a){return r._compositionEnd(a.target.value)})},features:[d._Bn([N0]),d.qOj]}),n})();function Mu(n){return null==n||("string"==typeof n||Array.isArray(n))&&0===n.length}function Yg(n){return null!=n&&"number"==typeof n.length}const wi=new d.OlP("NgValidators"),xu=new d.OlP("NgAsyncValidators"),nh=/^(?=.{1,254}$)(?=.{1,64}@)[a-zA-Z0-9!#$%&'*+/=?^_`{|}~-]+(?:\.[a-zA-Z0-9!#$%&'*+/=?^_`{|}~-]+)*@[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)*$/;class _s{static min(e){return function ay(n){return e=>{if(Mu(e.value)||Mu(n))return null;const t=parseFloat(e.value);return!isNaN(t)&&t<n?{min:{min:n,actual:e.value}}:null}}(e)}static max(e){return function np(n){return e=>{if(Mu(e.value)||Mu(n))return null;const t=parseFloat(e.value);return!isNaN(t)&&t>n?{max:{max:n,actual:e.value}}:null}}(e)}static required(e){return lo(e)}static requiredTrue(e){return function ly(n){return!0===n.value?null:{required:!0}}(e)}static email(e){return function L0(n){return Mu(n.value)||nh.test(n.value)?null:{email:!0}}(e)}static minLength(e){return function Qg(n){return e=>Mu(e.value)||!Yg(e.value)?null:e.value.length<n?{minlength:{requiredLength:n,actualLength:e.value.length}}:null}(e)}static maxLength(e){return ha(e)}static pattern(e){return Xg(e)}static nullValidator(e){return null}static compose(e){return tm(e)}static composeAsync(e){return nm(e)}}function lo(n){return Mu(n.value)?{required:!0}:null}function ha(n){return e=>Yg(e.value)&&e.value.length>n?{maxlength:{requiredLength:n,actualLength:e.value.length}}:null}function Xg(n){if(!n)return rp;let e,t;return"string"==typeof n?(t="","^"!==n.charAt(0)&&(t+="^"),t+=n,"$"!==n.charAt(n.length-1)&&(t+="$"),e=new RegExp(t)):(t=n.toString(),e=n),r=>{if(Mu(r.value))return null;const i=r.value;return e.test(i)?null:{pattern:{requiredPattern:t,actualValue:i}}}}function rp(n){return null}function Jg(n){return null!=n}function $D(n){return(0,d.QGY)(n)?(0,fn.D)(n):n}function cy(n){let e={};return n.forEach(t=>{e=null!=t?{...e,...t}:e}),0===Object.keys(e).length?null:e}function zD(n,e){return e.map(t=>t(n))}function ip(n){return n.map(e=>function em(n){return!n.validate}(e)?e:t=>e.validate(t))}function tm(n){if(!n)return null;const e=n.filter(Jg);return 0==e.length?null:function(t){return cy(zD(t,e))}}function sp(n){return null!=n?tm(ip(n)):null}function nm(n){if(!n)return null;const e=n.filter(Jg);return 0==e.length?null:function(t){return function sy(...n){const e=(0,$i.jO)(n),{args:t,keys:r}=Wl(n),i=new Xr.y(a=>{const{length:c}=t;if(!c)return void a.complete();const f=new Array(c);let _=c,w=c;for(let S=0;S<c;S++){let x=!1;(0,hs.Xf)(t[S]).subscribe((0,Pn.x)(a,L=>{x||(x=!0,w--),f[S]=L},()=>_--,void 0,()=>{(!_||!x)&&(w||a.next(r?Kl(r,f):f),a.complete())}))}});return e?i.pipe(Ya(e)):i}(zD(t,e).map($D)).pipe((0,_t.U)(cy))}}function V0(n){return null!=n?nm(ip(n)):null}function B0(n,e){return null===n?[e]:Array.isArray(n)?[...n,e]:[n,e]}function U0(n){return n._rawValidators}function H0(n){return n._rawAsyncValidators}function uy(n){return n?Array.isArray(n)?n:[n]:[]}function op(n,e){return Array.isArray(n)?n.includes(e):n===e}function GD(n,e){const t=uy(e);return uy(n).forEach(i=>{op(t,i)||t.push(i)}),t}function j0(n,e){return uy(e).filter(t=>!op(n,t))}class qD{constructor(){this._rawValidators=[],this._rawAsyncValidators=[],this._onDestroyCallbacks=[]}get value(){return this.control?this.control.value:null}get valid(){return this.control?this.control.valid:null}get invalid(){return this.control?this.control.invalid:null}get pending(){return this.control?this.control.pending:null}get disabled(){return this.control?this.control.disabled:null}get enabled(){return this.control?this.control.enabled:null}get errors(){return this.control?this.control.errors:null}get pristine(){return this.control?this.control.pristine:null}get dirty(){return this.control?this.control.dirty:null}get touched(){return this.control?this.control.touched:null}get status(){return this.control?this.control.status:null}get untouched(){return this.control?this.control.untouched:null}get statusChanges(){return this.control?this.control.statusChanges:null}get valueChanges(){return this.control?this.control.valueChanges:null}get path(){return null}_setValidators(e){this._rawValidators=e||[],this._composedValidatorFn=sp(this._rawValidators)}_setAsyncValidators(e){this._rawAsyncValidators=e||[],this._composedAsyncValidatorFn=V0(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn||null}get asyncValidator(){return this._composedAsyncValidatorFn||null}_registerOnDestroy(e){this._onDestroyCallbacks.push(e)}_invokeOnDestroyCallbacks(){this._onDestroyCallbacks.forEach(e=>e()),this._onDestroyCallbacks=[]}reset(e){this.control&&this.control.reset(e)}hasError(e,t){return!!this.control&&this.control.hasError(e,t)}getError(e,t){return this.control?this.control.getError(e,t):null}}class Ei extends qD{get formDirective(){return null}get path(){return null}}class fa extends qD{constructor(){super(...arguments),this._parent=null,this.name=null,this.valueAccessor=null}}class $0{constructor(e){this._cd=e}get isTouched(){return!!this._cd?.control?.touched}get isUntouched(){return!!this._cd?.control?.untouched}get isPristine(){return!!this._cd?.control?.pristine}get isDirty(){return!!this._cd?.control?.dirty}get isValid(){return!!this._cd?.control?.valid}get isInvalid(){return!!this._cd?.control?.invalid}get isPending(){return!!this._cd?.control?.pending}get isSubmitted(){return!!this._cd?.submitted}}let WD=(()=>{class n extends $0{constructor(t){super(t)}}return n.\u0275fac=function(t){return new(t||n)(d.Y36(fa,2))},n.\u0275dir=d.lG2({type:n,selectors:[["","formControlName",""],["","ngModel",""],["","formControl",""]],hostVars:14,hostBindings:function(t,r){2&t&&d.ekj("ng-untouched",r.isUntouched)("ng-touched",r.isTouched)("ng-pristine",r.isPristine)("ng-dirty",r.isDirty)("ng-valid",r.isValid)("ng-invalid",r.isInvalid)("ng-pending",r.isPending)},features:[d.qOj]}),n})(),KD=(()=>{class n extends $0{constructor(t){super(t)}}return n.\u0275fac=function(t){return new(t||n)(d.Y36(Ei,10))},n.\u0275dir=d.lG2({type:n,selectors:[["","formGroupName",""],["","formArrayName",""],["","ngModelGroup",""],["","formGroup",""],["form",3,"ngNoForm",""],["","ngForm",""]],hostVars:16,hostBindings:function(t,r){2&t&&d.ekj("ng-untouched",r.isUntouched)("ng-touched",r.isTouched)("ng-pristine",r.isPristine)("ng-dirty",r.isDirty)("ng-valid",r.isValid)("ng-invalid",r.isInvalid)("ng-pending",r.isPending)("ng-submitted",r.isSubmitted)},features:[d.qOj]}),n})();const ap="VALID",lp="INVALID",rh="PENDING",cp="DISABLED";function ih(n){return(sh(n)?n.validators:n)||null}function ku(n){return Array.isArray(n)?sp(n):n||null}function up(n,e){return(sh(e)?e.asyncValidators:n)||null}function Ou(n){return Array.isArray(n)?V0(n):n||null}function sh(n){return null!=n&&!Array.isArray(n)&&"object"==typeof n}function dp(n,e,t){const r=n.controls;if(!(e?Object.keys(r):r).length)throw new d.vHH(1e3,"");if(!r[t])throw new d.vHH(1001,"")}function fy(n,e,t){n._forEachChild((r,i)=>{if(void 0===t[i])throw new d.vHH(1002,"")})}class hp{constructor(e,t){this._pendingDirty=!1,this._hasOwnPendingAsyncValidator=!1,this._pendingTouched=!1,this._onCollectionChange=()=>{},this._parent=null,this.pristine=!0,this.touched=!1,this._onDisabledChange=[],this._rawValidators=e,this._rawAsyncValidators=t,this._composedValidatorFn=ku(this._rawValidators),this._composedAsyncValidatorFn=Ou(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn}set validator(e){this._rawValidators=this._composedValidatorFn=e}get asyncValidator(){return this._composedAsyncValidatorFn}set asyncValidator(e){this._rawAsyncValidators=this._composedAsyncValidatorFn=e}get parent(){return this._parent}get valid(){return this.status===ap}get invalid(){return this.status===lp}get pending(){return this.status==rh}get disabled(){return this.status===cp}get enabled(){return this.status!==cp}get dirty(){return!this.pristine}get untouched(){return!this.touched}get updateOn(){return this._updateOn?this._updateOn:this.parent?this.parent.updateOn:"change"}setValidators(e){this._rawValidators=e,this._composedValidatorFn=ku(e)}setAsyncValidators(e){this._rawAsyncValidators=e,this._composedAsyncValidatorFn=Ou(e)}addValidators(e){this.setValidators(GD(e,this._rawValidators))}addAsyncValidators(e){this.setAsyncValidators(GD(e,this._rawAsyncValidators))}removeValidators(e){this.setValidators(j0(e,this._rawValidators))}removeAsyncValidators(e){this.setAsyncValidators(j0(e,this._rawAsyncValidators))}hasValidator(e){return op(this._rawValidators,e)}hasAsyncValidator(e){return op(this._rawAsyncValidators,e)}clearValidators(){this.validator=null}clearAsyncValidators(){this.asyncValidator=null}markAsTouched(e={}){this.touched=!0,this._parent&&!e.onlySelf&&this._parent.markAsTouched(e)}markAllAsTouched(){this.markAsTouched({onlySelf:!0}),this._forEachChild(e=>e.markAllAsTouched())}markAsUntouched(e={}){this.touched=!1,this._pendingTouched=!1,this._forEachChild(t=>{t.markAsUntouched({onlySelf:!0})}),this._parent&&!e.onlySelf&&this._parent._updateTouched(e)}markAsDirty(e={}){this.pristine=!1,this._parent&&!e.onlySelf&&this._parent.markAsDirty(e)}markAsPristine(e={}){this.pristine=!0,this._pendingDirty=!1,this._forEachChild(t=>{t.markAsPristine({onlySelf:!0})}),this._parent&&!e.onlySelf&&this._parent._updatePristine(e)}markAsPending(e={}){this.status=rh,!1!==e.emitEvent&&this.statusChanges.emit(this.status),this._parent&&!e.onlySelf&&this._parent.markAsPending(e)}disable(e={}){const t=this._parentMarkedDirty(e.onlySelf);this.status=cp,this.errors=null,this._forEachChild(r=>{r.disable({...e,onlySelf:!0})}),this._updateValue(),!1!==e.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._updateAncestors({...e,skipPristineCheck:t}),this._onDisabledChange.forEach(r=>r(!0))}enable(e={}){const t=this._parentMarkedDirty(e.onlySelf);this.status=ap,this._forEachChild(r=>{r.enable({...e,onlySelf:!0})}),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent}),this._updateAncestors({...e,skipPristineCheck:t}),this._onDisabledChange.forEach(r=>r(!1))}_updateAncestors(e){this._parent&&!e.onlySelf&&(this._parent.updateValueAndValidity(e),e.skipPristineCheck||this._parent._updatePristine(),this._parent._updateTouched())}setParent(e){this._parent=e}getRawValue(){return this.value}updateValueAndValidity(e={}){this._setInitialStatus(),this._updateValue(),this.enabled&&(this._cancelExistingSubscription(),this.errors=this._runValidator(),this.status=this._calculateStatus(),(this.status===ap||this.status===rh)&&this._runAsyncValidator(e.emitEvent)),!1!==e.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._parent&&!e.onlySelf&&this._parent.updateValueAndValidity(e)}_updateTreeValidity(e={emitEvent:!0}){this._forEachChild(t=>t._updateTreeValidity(e)),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent})}_setInitialStatus(){this.status=this._allControlsDisabled()?cp:ap}_runValidator(){return this.validator?this.validator(this):null}_runAsyncValidator(e){if(this.asyncValidator){this.status=rh,this._hasOwnPendingAsyncValidator=!0;const t=$D(this.asyncValidator(this));this._asyncValidationSubscription=t.subscribe(r=>{this._hasOwnPendingAsyncValidator=!1,this.setErrors(r,{emitEvent:e})})}}_cancelExistingSubscription(){this._asyncValidationSubscription&&(this._asyncValidationSubscription.unsubscribe(),this._hasOwnPendingAsyncValidator=!1)}setErrors(e,t={}){this.errors=e,this._updateControlsErrors(!1!==t.emitEvent)}get(e){let t=e;return null==t||(Array.isArray(t)||(t=t.split(".")),0===t.length)?null:t.reduce((r,i)=>r&&r._find(i),this)}getError(e,t){const r=t?this.get(t):this;return r&&r.errors?r.errors[e]:null}hasError(e,t){return!!this.getError(e,t)}get root(){let e=this;for(;e._parent;)e=e._parent;return e}_updateControlsErrors(e){this.status=this._calculateStatus(),e&&this.statusChanges.emit(this.status),this._parent&&this._parent._updateControlsErrors(e)}_initObservables(){this.valueChanges=new d.vpe,this.statusChanges=new d.vpe}_calculateStatus(){return this._allControlsDisabled()?cp:this.errors?lp:this._hasOwnPendingAsyncValidator||this._anyControlsHaveStatus(rh)?rh:this._anyControlsHaveStatus(lp)?lp:ap}_anyControlsHaveStatus(e){return this._anyControls(t=>t.status===e)}_anyControlsDirty(){return this._anyControls(e=>e.dirty)}_anyControlsTouched(){return this._anyControls(e=>e.touched)}_updatePristine(e={}){this.pristine=!this._anyControlsDirty(),this._parent&&!e.onlySelf&&this._parent._updatePristine(e)}_updateTouched(e={}){this.touched=this._anyControlsTouched(),this._parent&&!e.onlySelf&&this._parent._updateTouched(e)}_registerOnCollectionChange(e){this._onCollectionChange=e}_setUpdateStrategy(e){sh(e)&&null!=e.updateOn&&(this._updateOn=e.updateOn)}_parentMarkedDirty(e){return!e&&!(!this._parent||!this._parent.dirty)&&!this._parent._anyControlsDirty()}_find(e){return null}}class Pu extends hp{constructor(e,t,r){super(ih(t),up(r,t)),this.controls=e,this._initObservables(),this._setUpdateStrategy(t),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}registerControl(e,t){return this.controls[e]?this.controls[e]:(this.controls[e]=t,t.setParent(this),t._registerOnCollectionChange(this._onCollectionChange),t)}addControl(e,t,r={}){this.registerControl(e,t),this.updateValueAndValidity({emitEvent:r.emitEvent}),this._onCollectionChange()}removeControl(e,t={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),delete this.controls[e],this.updateValueAndValidity({emitEvent:t.emitEvent}),this._onCollectionChange()}setControl(e,t,r={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),delete this.controls[e],t&&this.registerControl(e,t),this.updateValueAndValidity({emitEvent:r.emitEvent}),this._onCollectionChange()}contains(e){return this.controls.hasOwnProperty(e)&&this.controls[e].enabled}setValue(e,t={}){fy(this,0,e),Object.keys(e).forEach(r=>{dp(this,!0,r),this.controls[r].setValue(e[r],{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t)}patchValue(e,t={}){null!=e&&(Object.keys(e).forEach(r=>{const i=this.controls[r];i&&i.patchValue(e[r],{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t))}reset(e={},t={}){this._forEachChild((r,i)=>{r.reset(e[i],{onlySelf:!0,emitEvent:t.emitEvent})}),this._updatePristine(t),this._updateTouched(t),this.updateValueAndValidity(t)}getRawValue(){return this._reduceChildren({},(e,t,r)=>(e[r]=t.getRawValue(),e))}_syncPendingControls(){let e=this._reduceChildren(!1,(t,r)=>!!r._syncPendingControls()||t);return e&&this.updateValueAndValidity({onlySelf:!0}),e}_forEachChild(e){Object.keys(this.controls).forEach(t=>{const r=this.controls[t];r&&e(r,t)})}_setUpControls(){this._forEachChild(e=>{e.setParent(this),e._registerOnCollectionChange(this._onCollectionChange)})}_updateValue(){this.value=this._reduceValue()}_anyControls(e){for(const[t,r]of Object.entries(this.controls))if(this.contains(t)&&e(r))return!0;return!1}_reduceValue(){return this._reduceChildren({},(t,r,i)=>((r.enabled||this.disabled)&&(t[i]=r.value),t))}_reduceChildren(e,t){let r=e;return this._forEachChild((i,a)=>{r=t(r,i,a)}),r}_allControlsDisabled(){for(const e of Object.keys(this.controls))if(this.controls[e].enabled)return!1;return Object.keys(this.controls).length>0||this.disabled}_find(e){return this.controls.hasOwnProperty(e)?this.controls[e]:null}}class im extends Pu{}function fp(n,e){om(n,e),e.valueAccessor.writeValue(n.value),n.disabled&&e.valueAccessor.setDisabledState?.(!0),function Hs(n,e){e.valueAccessor.registerOnChange(t=>{n._pendingValue=t,n._pendingChange=!0,n._pendingDirty=!0,"change"===n.updateOn&&ew(n,e)})}(n,e),function bO(n,e){const t=(r,i)=>{e.valueAccessor.writeValue(r),i&&e.viewToModelUpdate(r)};n.registerOnChange(t),e._registerOnDestroy(()=>{n._unregisterOnChange(t)})}(n,e),function J0(n,e){e.valueAccessor.registerOnTouched(()=>{n._pendingTouched=!0,"blur"===n.updateOn&&n._pendingChange&&ew(n,e),"submit"!==n.updateOn&&n.markAsTouched()})}(n,e),function X0(n,e){if(e.valueAccessor.setDisabledState){const t=r=>{e.valueAccessor.setDisabledState(r)};n.registerOnDisabledChange(t),e._registerOnDestroy(()=>{n._unregisterOnDisabledChange(t)})}}(n,e)}function pp(n,e,t=!0){const r=()=>{};e.valueAccessor&&(e.valueAccessor.registerOnChange(r),e.valueAccessor.registerOnTouched(r)),am(n,e),n&&(e._invokeOnDestroyCallbacks(),n._registerOnCollectionChange(()=>{}))}function sm(n,e){n.forEach(t=>{t.registerOnValidatorChange&&t.registerOnValidatorChange(e)})}function om(n,e){const t=U0(n);null!==e.validator?n.setValidators(B0(t,e.validator)):"function"==typeof t&&n.setValidators([t]);const r=H0(n);null!==e.asyncValidator?n.setAsyncValidators(B0(r,e.asyncValidator)):"function"==typeof r&&n.setAsyncValidators([r]);const i=()=>n.updateValueAndValidity();sm(e._rawValidators,i),sm(e._rawAsyncValidators,i)}function am(n,e){let t=!1;if(null!==n){if(null!==e.validator){const i=U0(n);if(Array.isArray(i)&&i.length>0){const a=i.filter(c=>c!==e.validator);a.length!==i.length&&(t=!0,n.setValidators(a))}}if(null!==e.asyncValidator){const i=H0(n);if(Array.isArray(i)&&i.length>0){const a=i.filter(c=>c!==e.asyncValidator);a.length!==i.length&&(t=!0,n.setAsyncValidators(a))}}}const r=()=>{};return sm(e._rawValidators,r),sm(e._rawAsyncValidators,r),t}function ew(n,e){n._pendingDirty&&n.markAsDirty(),n.setValue(n._pendingValue,{emitModelToViewChange:!1}),e.viewToModelUpdate(n._pendingValue),n._pendingChange=!1}function tw(n,e){om(n,e)}function my(n,e){n._syncPendingControls(),e.forEach(t=>{const r=t.control;"submit"===r.updateOn&&r._pendingChange&&(t.viewToModelUpdate(r._pendingValue),r._pendingChange=!1)})}const rw={provide:Ei,useExisting:(0,d.Gpc)(()=>js)},gp=(()=>Promise.resolve())();let js=(()=>{class n extends Ei{constructor(t,r){super(),this.submitted=!1,this._directives=new Set,this.ngSubmit=new d.vpe,this.form=new Pu({},sp(t),V0(r))}ngAfterViewInit(){this._setUpdateStrategy()}get formDirective(){return this}get control(){return this.form}get path(){return[]}get controls(){return this.form.controls}addControl(t){gp.then(()=>{const r=this._findContainer(t.path);t.control=r.registerControl(t.name,t.control),fp(t.control,t),t.control.updateValueAndValidity({emitEvent:!1}),this._directives.add(t)})}getControl(t){return this.form.get(t.path)}removeControl(t){gp.then(()=>{const r=this._findContainer(t.path);r&&r.removeControl(t.name),this._directives.delete(t)})}addFormGroup(t){gp.then(()=>{const r=this._findContainer(t.path),i=new Pu({});tw(i,t),r.registerControl(t.name,i),i.updateValueAndValidity({emitEvent:!1})})}removeFormGroup(t){gp.then(()=>{const r=this._findContainer(t.path);r&&r.removeControl(t.name)})}getFormGroup(t){return this.form.get(t.path)}updateModel(t,r){gp.then(()=>{this.form.get(t.path).setValue(r)})}setValue(t){this.control.setValue(t)}onSubmit(t){return this.submitted=!0,my(this.form,this._directives),this.ngSubmit.emit(t),"dialog"===t?.target?.method}onReset(){this.resetForm()}resetForm(t){this.form.reset(t),this.submitted=!1}_setUpdateStrategy(){this.options&&null!=this.options.updateOn&&(this.form._updateOn=this.options.updateOn)}_findContainer(t){return t.pop(),t.length?this.form.get(t):this.form}}return n.\u0275fac=function(t){return new(t||n)(d.Y36(wi,10),d.Y36(xu,10))},n.\u0275dir=d.lG2({type:n,selectors:[["form",3,"ngNoForm","",3,"formGroup",""],["ng-form"],["","ngForm",""]],hostBindings:function(t,r){1&t&&d.NdJ("submit",function(a){return r.onSubmit(a)})("reset",function(){return r.onReset()})},inputs:{options:["ngFormOptions","options"]},outputs:{ngSubmit:"ngSubmit"},exportAs:["ngForm"],features:[d._Bn([rw]),d.qOj]}),n})();function cm(n,e){const t=n.indexOf(e);t>-1&&n.splice(t,1)}function iw(n){return"object"==typeof n&&null!==n&&2===Object.keys(n).length&&"value"in n&&"disabled"in n}const mp=class extends hp{constructor(e=null,t,r){super(ih(t),up(r,t)),this.defaultValue=null,this._onChange=[],this._pendingChange=!1,this._applyFormState(e),this._setUpdateStrategy(t),this._initObservables(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator}),sh(t)&&(t.nonNullable||t.initialValueIsDefault)&&(this.defaultValue=iw(e)?e.value:e)}setValue(e,t={}){this.value=this._pendingValue=e,this._onChange.length&&!1!==t.emitModelToViewChange&&this._onChange.forEach(r=>r(this.value,!1!==t.emitViewToModelChange)),this.updateValueAndValidity(t)}patchValue(e,t={}){this.setValue(e,t)}reset(e=this.defaultValue,t={}){this._applyFormState(e),this.markAsPristine(t),this.markAsUntouched(t),this.setValue(this.value,t),this._pendingChange=!1}_updateValue(){}_anyControls(e){return!1}_allControlsDisabled(){return this.disabled}registerOnChange(e){this._onChange.push(e)}_unregisterOnChange(e){cm(this._onChange,e)}registerOnDisabledChange(e){this._onDisabledChange.push(e)}_unregisterOnDisabledChange(e){cm(this._onDisabledChange,e)}_forEachChild(e){}_syncPendingControls(){return!("submit"!==this.updateOn||(this._pendingDirty&&this.markAsDirty(),this._pendingTouched&&this.markAsTouched(),!this._pendingChange)||(this.setValue(this._pendingValue,{onlySelf:!0,emitModelToViewChange:!1}),0))}_applyFormState(e){iw(e)?(this.value=this._pendingValue=e.value,e.disabled?this.disable({onlySelf:!0,emitEvent:!1}):this.enable({onlySelf:!0,emitEvent:!1})):this.value=this._pendingValue=e}};let um=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275dir=d.lG2({type:n,selectors:[["form",3,"ngNoForm","",3,"ngNativeValidate",""]],hostAttrs:["novalidate",""]}),n})(),by=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=d.oAB({type:n}),n.\u0275inj=d.cJS({}),n})();const Nu=new d.OlP("NgModelWithFormControlWarning"),cw={provide:Ei,useExisting:(0,d.Gpc)(()=>bp)};let bp=(()=>{class n extends Ei{constructor(t,r){super(),this.submitted=!1,this._onCollectionChange=()=>this._updateDomValue(),this.directives=[],this.form=null,this.ngSubmit=new d.vpe,this._setValidators(t),this._setAsyncValidators(r)}ngOnChanges(t){this._checkFormPresent(),t.hasOwnProperty("form")&&(this._updateValidators(),this._updateDomValue(),this._updateRegistrations(),this._oldForm=this.form)}ngOnDestroy(){this.form&&(am(this.form,this),this.form._onCollectionChange===this._onCollectionChange&&this.form._registerOnCollectionChange(()=>{}))}get formDirective(){return this}get control(){return this.form}get path(){return[]}addControl(t){const r=this.form.get(t.path);return fp(r,t),r.updateValueAndValidity({emitEvent:!1}),this.directives.push(t),r}getControl(t){return this.form.get(t.path)}removeControl(t){pp(t.control||null,t,!1),function tS(n,e){const t=n.indexOf(e);t>-1&&n.splice(t,1)}(this.directives,t)}addFormGroup(t){this._setUpFormContainer(t)}removeFormGroup(t){this._cleanUpFormContainer(t)}getFormGroup(t){return this.form.get(t.path)}addFormArray(t){this._setUpFormContainer(t)}removeFormArray(t){this._cleanUpFormContainer(t)}getFormArray(t){return this.form.get(t.path)}updateModel(t,r){this.form.get(t.path).setValue(r)}onSubmit(t){return this.submitted=!0,my(this.form,this.directives),this.ngSubmit.emit(t),"dialog"===t?.target?.method}onReset(){this.resetForm()}resetForm(t){this.form.reset(t),this.submitted=!1}_updateDomValue(){this.directives.forEach(t=>{const r=t.control,i=this.form.get(t.path);r!==i&&(pp(r||null,t),(n=>n instanceof mp)(i)&&(fp(i,t),t.control=i))}),this.form._updateTreeValidity({emitEvent:!1})}_setUpFormContainer(t){const r=this.form.get(t.path);tw(r,t),r.updateValueAndValidity({emitEvent:!1})}_cleanUpFormContainer(t){if(this.form){const r=this.form.get(t.path);r&&function gy(n,e){return am(n,e)}(r,t)&&r.updateValueAndValidity({emitEvent:!1})}}_updateRegistrations(){this.form._registerOnCollectionChange(this._onCollectionChange),this._oldForm&&this._oldForm._registerOnCollectionChange(()=>{})}_updateValidators(){om(this.form,this),this._oldForm&&am(this._oldForm,this)}_checkFormPresent(){}}return n.\u0275fac=function(t){return new(t||n)(d.Y36(wi,10),d.Y36(xu,10))},n.\u0275dir=d.lG2({type:n,selectors:[["","formGroup",""]],hostBindings:function(t,r){1&t&&d.NdJ("submit",function(a){return r.onSubmit(a)})("reset",function(){return r.onReset()})},inputs:{form:["formGroup","form"]},outputs:{ngSubmit:"ngSubmit"},exportAs:["ngForm"],features:[d._Bn([cw]),d.qOj,d.TTD]}),n})();const SO={provide:fa,useExisting:(0,d.Gpc)(()=>Ey)};let Ey=(()=>{class n extends fa{constructor(t,r,i,a,c){super(),this._ngModelWarningConfig=c,this._added=!1,this.update=new d.vpe,this._ngModelWarningSent=!1,this._parent=t,this._setValidators(r),this._setAsyncValidators(i),this.valueAccessor=function _y(n,e){if(!e)return null;let t,r,i;return Array.isArray(e),e.forEach(a=>{a.constructor===tp?t=a:function eS(n){return Object.getPrototypeOf(n.constructor)===Au}(a)?r=a:i=a}),i||r||t||null}(0,a)}set isDisabled(t){}ngOnChanges(t){this._added||this._setUpControl(),function lm(n,e){if(!n.hasOwnProperty("model"))return!1;const t=n.model;return!!t.isFirstChange()||!Object.is(e,t.currentValue)}(t,this.viewModel)&&(this.viewModel=this.model,this.formDirective.updateModel(this,this.model))}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}viewToModelUpdate(t){this.viewModel=t,this.update.emit(t)}get path(){return function py(n,e){return[...e.path,n]}(null==this.name?this.name:this.name.toString(),this._parent)}get formDirective(){return this._parent?this._parent.formDirective:null}_checkParentType(){}_setUpControl(){this._checkParentType(),this.control=this.formDirective.addControl(this),this._added=!0}}return n._ngModelWarningSentOnce=!1,n.\u0275fac=function(t){return new(t||n)(d.Y36(Ei,13),d.Y36(wi,10),d.Y36(xu,10),d.Y36(da,10),d.Y36(Nu,8))},n.\u0275dir=d.lG2({type:n,selectors:[["","formControlName",""]],inputs:{name:["formControlName","name"],isDisabled:["disabled","isDisabled"],model:["ngModel","model"]},outputs:{update:"ngModelChange"},features:[d._Bn([SO]),d.qOj,d.TTD]}),n})();let $s=(()=>{class n{constructor(){this._validator=rp}ngOnChanges(t){if(this.inputName in t){const r=this.normalizeInput(t[this.inputName].currentValue);this._enabled=this.enabled(r),this._validator=this._enabled?this.createValidator(r):rp,this._onChange&&this._onChange()}}validate(t){return this._validator(t)}registerOnValidatorChange(t){this._onChange=t}enabled(t){return null!=t}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275dir=d.lG2({type:n,features:[d.TTD]}),n})();const Dy={provide:wi,useExisting:(0,d.Gpc)(()=>zs),multi:!0};let zs=(()=>{class n extends $s{constructor(){super(...arguments),this.inputName="required",this.normalizeInput=d.D6c,this.createValidator=t=>lo}enabled(t){return t}}return n.\u0275fac=function(){let e;return function(r){return(e||(e=d.n5z(n)))(r||n)}}(),n.\u0275dir=d.lG2({type:n,selectors:[["","required","","formControlName","",3,"type","checkbox"],["","required","","formControl","",3,"type","checkbox"],["","required","","ngModel","",3,"type","checkbox"]],hostVars:1,hostBindings:function(t,r){2&t&&d.uIk("required",r._enabled?"":null)},inputs:{required:"required"},features:[d._Bn([Dy]),d.qOj]}),n})();const Sy={provide:wi,useExisting:(0,d.Gpc)(()=>fc),multi:!0};let fc=(()=>{class n extends $s{constructor(){super(...arguments),this.inputName="maxlength",this.normalizeInput=t=>function gw(n){return"number"==typeof n?n:parseInt(n,10)}(t),this.createValidator=t=>ha(t)}}return n.\u0275fac=function(){let e;return function(r){return(e||(e=d.n5z(n)))(r||n)}}(),n.\u0275dir=d.lG2({type:n,selectors:[["","maxlength","","formControlName",""],["","maxlength","","formControl",""],["","maxlength","","ngModel",""]],hostVars:1,hostBindings:function(t,r){2&t&&d.uIk("maxlength",r._enabled?r.maxlength:null)},inputs:{maxlength:"maxlength"},features:[d._Bn([Sy]),d.qOj]}),n})();const lh={provide:wi,useExisting:(0,d.Gpc)(()=>pc),multi:!0};let pc=(()=>{class n extends $s{constructor(){super(...arguments),this.inputName="pattern",this.normalizeInput=t=>t,this.createValidator=t=>Xg(t)}}return n.\u0275fac=function(){let e;return function(r){return(e||(e=d.n5z(n)))(r||n)}}(),n.\u0275dir=d.lG2({type:n,selectors:[["","pattern","","formControlName",""],["","pattern","","formControl",""],["","pattern","","ngModel",""]],hostVars:1,hostBindings:function(t,r){2&t&&d.uIk("pattern",r._enabled?r.pattern:null)},inputs:{pattern:"pattern"},features:[d._Bn([lh]),d.qOj]}),n})(),Lu=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=d.oAB({type:n}),n.\u0275inj=d.cJS({imports:[by]}),n})(),Vu=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=d.oAB({type:n}),n.\u0275inj=d.cJS({imports:[Lu]}),n})(),al=(()=>{class n{static withConfig(t){return{ngModule:n,providers:[{provide:Nu,useValue:t.warnOnNgModelWithFormControl}]}}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=d.oAB({type:n}),n.\u0275inj=d.cJS({imports:[Lu]}),n})();class Ty extends hp{constructor(e,t,r){super(ih(t),up(r,t)),this.controls=e,this._initObservables(),this._setUpdateStrategy(t),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}at(e){return this.controls[this._adjustIndex(e)]}push(e,t={}){this.controls.push(e),this._registerControl(e),this.updateValueAndValidity({emitEvent:t.emitEvent}),this._onCollectionChange()}insert(e,t,r={}){this.controls.splice(e,0,t),this._registerControl(t),this.updateValueAndValidity({emitEvent:r.emitEvent})}removeAt(e,t={}){let r=this._adjustIndex(e);r<0&&(r=0),this.controls[r]&&this.controls[r]._registerOnCollectionChange(()=>{}),this.controls.splice(r,1),this.updateValueAndValidity({emitEvent:t.emitEvent})}setControl(e,t,r={}){let i=this._adjustIndex(e);i<0&&(i=0),this.controls[i]&&this.controls[i]._registerOnCollectionChange(()=>{}),this.controls.splice(i,1),t&&(this.controls.splice(i,0,t),this._registerControl(t)),this.updateValueAndValidity({emitEvent:r.emitEvent}),this._onCollectionChange()}get length(){return this.controls.length}setValue(e,t={}){fy(this,0,e),e.forEach((r,i)=>{dp(this,!1,i),this.at(i).setValue(r,{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t)}patchValue(e,t={}){null!=e&&(e.forEach((r,i)=>{this.at(i)&&this.at(i).patchValue(r,{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t))}reset(e=[],t={}){this._forEachChild((r,i)=>{r.reset(e[i],{onlySelf:!0,emitEvent:t.emitEvent})}),this._updatePristine(t),this._updateTouched(t),this.updateValueAndValidity(t)}getRawValue(){return this.controls.map(e=>e.getRawValue())}clear(e={}){this.controls.length<1||(this._forEachChild(t=>t._registerOnCollectionChange(()=>{})),this.controls.splice(0),this.updateValueAndValidity({emitEvent:e.emitEvent}))}_adjustIndex(e){return e<0?e+this.length:e}_syncPendingControls(){let e=this.controls.reduce((t,r)=>!!r._syncPendingControls()||t,!1);return e&&this.updateValueAndValidity({onlySelf:!0}),e}_forEachChild(e){this.controls.forEach((t,r)=>{e(t,r)})}_updateValue(){this.value=this.controls.filter(e=>e.enabled||this.disabled).map(e=>e.value)}_anyControls(e){return this.controls.some(t=>t.enabled&&e(t))}_setUpControls(){this._forEachChild(e=>this._registerControl(e))}_allControlsDisabled(){for(const e of this.controls)if(e.enabled)return!1;return this.controls.length>0||this.disabled}_registerControl(e){e.setParent(this),e._registerOnCollectionChange(this._onCollectionChange)}_find(e){return this.at(e)??null}}function Ay(n){return!!n&&(void 0!==n.asyncValidators||void 0!==n.validators||void 0!==n.updateOn)}let _w=(()=>{class n{constructor(){this.useNonNullable=!1}get nonNullable(){const t=new n;return t.useNonNullable=!0,t}group(t,r=null){const i=this._reduceControls(t);let a={};return Ay(r)?a=r:null!==r&&(a.validators=r.validator,a.asyncValidators=r.asyncValidator),new Pu(i,a)}record(t,r=null){const i=this._reduceControls(t);return new im(i,r)}control(t,r,i){let a={};return this.useNonNullable?(Ay(r)?a=r:(a.validators=r,a.asyncValidators=i),new mp(t,{...a,nonNullable:!0})):new mp(t,r,i)}array(t,r,i){const a=t.map(c=>this._createControl(c));return new Ty(a,r,i)}_reduceControls(t){const r={};return Object.keys(t).forEach(i=>{r[i]=this._createControl(t[i])}),r}_createControl(t){return t instanceof mp||t instanceof hp?t:Array.isArray(t)?this.control(t[0],t.length>1?t[1]:null,t.length>2?t[2]:null):this.control(t)}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=d.Yz7({token:n,factory:n.\u0275fac,providedIn:al}),n})();function ch(n){return null!=n&&"false"!=`${n}`}function pm(n,e=0){return function bS(n){return!isNaN(parseFloat(n))&&!isNaN(Number(n))}(n)?Number(n):e}function My(n){return Array.isArray(n)?n:[n]}function Or(n){return null==n?"":"string"==typeof n?n:`${n}px`}function Bu(n){return n instanceof d.SBq?n.nativeElement:n}var xy=F(1144);const wS=["addListener","removeListener"],gm=["addEventListener","removeEventListener"],mm=["on","off"];function uh(n,e,t,r){if((0,fs.m)(t)&&(r=t,t=void 0),r)return uh(n,e,t).pipe(Ya(r));const[i,a]=function bw(n){return(0,fs.m)(n.addEventListener)&&(0,fs.m)(n.removeEventListener)}(n)?gm.map(c=>f=>n[c](e,f,t)):function _m(n){return(0,fs.m)(n.addListener)&&(0,fs.m)(n.removeListener)}(n)?wS.map(vw(n,e)):function ym(n){return(0,fs.m)(n.on)&&(0,fs.m)(n.off)}(n)?mm.map(vw(n,e)):[];if(!i&&(0,xy.z)(n))return(0,Kn.z)(c=>uh(c,e,t))((0,hs.Xf)(n));if(!i)throw new TypeError("Invalid event target");return new Xr.y(c=>{const f=(..._)=>c.next(1<_.length?_:_[0]);return i(f),()=>a(f)})}function vw(n,e){return t=>r=>n[t](e,r)}var Ry=F(4408);const Uu={schedule(n){let e=requestAnimationFrame,t=cancelAnimationFrame;const{delegate:r}=Uu;r&&(e=r.requestAnimationFrame,t=r.cancelAnimationFrame);const i=e(a=>{t=void 0,n(a)});return new ia.w0(()=>t?.(i))},requestAnimationFrame(...n){const{delegate:e}=Uu;return(e?.requestAnimationFrame||requestAnimationFrame)(...n)},cancelAnimationFrame(...n){const{delegate:e}=Uu;return(e?.cancelAnimationFrame||cancelAnimationFrame)(...n)},delegate:void 0};var ky=F(7565);new class Oy extends ky.v{flush(e){this._active=!0;const t=this._scheduled;this._scheduled=void 0;const{actions:r}=this;let i;e=e||r.shift();do{if(i=e.execute(e.state,e.delay))break}while((e=r[0])&&e.id===t&&r.shift());if(this._active=!1,i){for(;(e=r[0])&&e.id===t&&r.shift();)e.unsubscribe();throw i}}}(class ww extends Ry.o{constructor(e,t){super(e,t),this.scheduler=e,this.work=t}requestAsyncId(e,t,r=0){return null!==r&&r>0?super.requestAsyncId(e,t,r):(e.actions.push(this),e._scheduled||(e._scheduled=Uu.requestAnimationFrame(()=>e.flush(void 0))))}recycleAsyncId(e,t,r=0){var i;if(null!=r?r>0:this.delay>0)return super.recycleAsyncId(e,t,r);const{actions:a}=e;null!=t&&(null===(i=a[a.length-1])||void 0===i?void 0:i.id)!==t&&(Uu.cancelAnimationFrame(t),e._scheduled=void 0)}});let vm,Ew=1;const Sp={};function Ny(n){return n in Sp&&(delete Sp[n],!0)}const ES={setImmediate(n){const e=Ew++;return Sp[e]=!0,vm||(vm=Promise.resolve()),vm.then(()=>Ny(e)&&n()),e},clearImmediate(n){Ny(n)}},{setImmediate:Cw,clearImmediate:Iw}=ES,Hu={setImmediate(...n){const{delegate:e}=Hu;return(e?.setImmediate||Cw)(...n)},clearImmediate(n){const{delegate:e}=Hu;return(e?.clearImmediate||Iw)(n)},delegate:void 0};new class Sw extends ky.v{flush(e){this._active=!0;const t=this._scheduled;this._scheduled=void 0;const{actions:r}=this;let i;e=e||r.shift();do{if(i=e.execute(e.state,e.delay))break}while((e=r[0])&&e.id===t&&r.shift());if(this._active=!1,i){for(;(e=r[0])&&e.id===t&&r.shift();)e.unsubscribe();throw i}}}(class Dw extends Ry.o{constructor(e,t){super(e,t),this.scheduler=e,this.work=t}requestAsyncId(e,t,r=0){return null!==r&&r>0?super.requestAsyncId(e,t,r):(e.actions.push(this),e._scheduled||(e._scheduled=Hu.setImmediate(e.flush.bind(e,void 0))))}recycleAsyncId(e,t,r=0){var i;if(null!=r?r>0:this.delay>0)return super.recycleAsyncId(e,t,r);const{actions:a}=e;null!=t&&(null===(i=a[a.length-1])||void 0===i?void 0:i.id)!==t&&(Hu.clearImmediate(t),e._scheduled=void 0)}});var Tp=F(4986),Mw=F(3532);function Rw(n,e=Tp.z){return function Aw(n){return(0,ir.e)((e,t)=>{let r=!1,i=null,a=null,c=!1;const f=()=>{if(a?.unsubscribe(),a=null,r){r=!1;const w=i;i=null,t.next(w)}c&&t.complete()},_=()=>{a=null,c&&t.complete()};e.subscribe((0,Pn.x)(t,w=>{r=!0,i=w,a||(0,hs.Xf)(n(w)).subscribe(a=(0,Pn.x)(t,f,_))},()=>{c=!0,(!r||!a||a.closed)&&t.complete()}))})}(()=>function xO(n=0,e,t=Tp.P){let r=-1;return null!=e&&((0,Mw.K)(e)?t=e:r=e),new Xr.y(i=>{let a=function xw(n){return n instanceof Date&&!isNaN(n)}(n)?+n-t.now():n;a<0&&(a=0);let c=0;return t.schedule(function(){i.closed||(i.next(c++),0<=r?this.schedule(void 0,r):i.complete())},a)})}(n,e))}let Fy;try{Fy=typeof Intl<"u"&&Intl.v8BreakIterator}catch{Fy=!1}let Xn,ys=(()=>{class n{constructor(t){this._platformId=t,this.isBrowser=this._platformId?function Jh(n){return n===vl}(this._platformId):"object"==typeof document&&!!document,this.EDGE=this.isBrowser&&/(edge)/i.test(navigator.userAgent),this.TRIDENT=this.isBrowser&&/(msie|trident)/i.test(navigator.userAgent),this.BLINK=this.isBrowser&&!(!window.chrome&&!Fy)&&typeof CSS<"u"&&!this.EDGE&&!this.TRIDENT,this.WEBKIT=this.isBrowser&&/AppleWebKit/i.test(navigator.userAgent)&&!this.BLINK&&!this.EDGE&&!this.TRIDENT,this.IOS=this.isBrowser&&/iPad|iPhone|iPod/.test(navigator.userAgent)&&!("MSStream"in window),this.FIREFOX=this.isBrowser&&/(firefox|minefield)/i.test(navigator.userAgent),this.ANDROID=this.isBrowser&&/android/i.test(navigator.userAgent)&&!this.TRIDENT,this.SAFARI=this.isBrowser&&/safari/i.test(navigator.userAgent)&&this.WEBKIT}}return n.\u0275fac=function(t){return new(t||n)(d.LFG(d.Lbi))},n.\u0275prov=d.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),Ly=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=d.oAB({type:n}),n.\u0275inj=d.cJS({}),n})();const Vy=["color","button","checkbox","date","datetime-local","email","file","hidden","image","month","number","password","radio","range","reset","search","submit","tel","text","time","url","week"];function kw(){if(Xn)return Xn;if("object"!=typeof document||!document)return Xn=new Set(Vy),Xn;let n=document.createElement("input");return Xn=new Set(Vy.filter(e=>(n.setAttribute("type",e),n.type===e))),Xn}let Ap,gc,By,qs;function bm(n){return function Ow(){if(null==Ap&&typeof window<"u")try{window.addEventListener("test",null,Object.defineProperty({},"passive",{get:()=>Ap=!0}))}finally{Ap=Ap||!1}return Ap}()?n:!!n.capture}function dh(){if(null==gc){if("object"!=typeof document||!document||"function"!=typeof Element||!Element)return gc=!1,gc;if("scrollBehavior"in document.documentElement.style)gc=!0;else{const n=Element.prototype.scrollTo;gc=!!n&&!/\{\s*\[native code\]\s*\}/.test(n.toString())}}return gc}function Nw(n){if(function Pw(){if(null==By){const n=typeof document<"u"?document.head:null;By=!(!n||!n.createShadowRoot&&!n.attachShadow)}return By}()){const e=n.getRootNode?n.getRootNode():null;if(typeof ShadowRoot<"u"&&ShadowRoot&&e instanceof ShadowRoot)return e}return null}function wm(){let n=typeof document<"u"&&document?document.activeElement:null;for(;n&&n.shadowRoot;){const e=n.shadowRoot.activeElement;if(e===n)break;n=e}return n}function hh(n){return n.composedPath?n.composedPath()[0]:n.target}function xp(){return typeof qs.__karma__<"u"&&!!qs.__karma__||typeof qs.jasmine<"u"&&!!qs.jasmine||typeof qs.jest<"u"&&!!qs.jest||typeof qs.Mocha<"u"&&!!qs.Mocha}qs=typeof global<"u"?global:typeof window<"u"?window:{};const ga=new d.OlP("cdk-dir-doc",{providedIn:"root",factory:function DS(){return(0,d.f3M)(se)}});let Em=(()=>{class n{constructor(t){if(this.value="ltr",this.change=new d.vpe,t){const i=t.documentElement?t.documentElement.dir:null,a=(t.body?t.body.dir:null)||i;this.value="ltr"===a||"rtl"===a?a:"ltr"}}ngOnDestroy(){this.change.complete()}}return n.\u0275fac=function(t){return new(t||n)(d.LFG(ga,8))},n.\u0275prov=d.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),Yi=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=d.oAB({type:n}),n.\u0275inj=d.cJS({}),n})(),Uy=(()=>{class n{constructor(t,r,i){this._ngZone=t,this._platform=r,this._scrolled=new Kt.x,this._globalSubscription=null,this._scrolledCount=0,this.scrollContainers=new Map,this._document=i}register(t){this.scrollContainers.has(t)||this.scrollContainers.set(t,t.elementScrolled().subscribe(()=>this._scrolled.next(t)))}deregister(t){const r=this.scrollContainers.get(t);r&&(r.unsubscribe(),this.scrollContainers.delete(t))}scrolled(t=20){return this._platform.isBrowser?new Xr.y(r=>{this._globalSubscription||this._addGlobalListener();const i=t>0?this._scrolled.pipe(Rw(t)).subscribe(r):this._scrolled.subscribe(r);return this._scrolledCount++,()=>{i.unsubscribe(),this._scrolledCount--,this._scrolledCount||this._removeGlobalListener()}}):nt()}ngOnDestroy(){this._removeGlobalListener(),this.scrollContainers.forEach((t,r)=>this.deregister(r)),this._scrolled.complete()}ancestorScrolled(t,r){const i=this.getAncestorScrollContainers(t);return this.scrolled(r).pipe(Wn(a=>!a||i.indexOf(a)>-1))}getAncestorScrollContainers(t){const r=[];return this.scrollContainers.forEach((i,a)=>{this._scrollableContainsElement(a,t)&&r.push(a)}),r}_getWindow(){return this._document.defaultView||window}_scrollableContainsElement(t,r){let i=Bu(r),a=t.getElementRef().nativeElement;do{if(i==a)return!0}while(i=i.parentElement);return!1}_addGlobalListener(){this._globalSubscription=this._ngZone.runOutsideAngular(()=>uh(this._getWindow().document,"scroll").subscribe(()=>this._scrolled.next()))}_removeGlobalListener(){this._globalSubscription&&(this._globalSubscription.unsubscribe(),this._globalSubscription=null)}}return n.\u0275fac=function(t){return new(t||n)(d.LFG(d.R0b),d.LFG(ys),d.LFG(se,8))},n.\u0275prov=d.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),Hy=(()=>{class n{constructor(t,r,i){this._platform=t,this._change=new Kt.x,this._changeListener=a=>{this._change.next(a)},this._document=i,r.runOutsideAngular(()=>{if(t.isBrowser){const a=this._getWindow();a.addEventListener("resize",this._changeListener),a.addEventListener("orientationchange",this._changeListener)}this.change().subscribe(()=>this._viewportSize=null)})}ngOnDestroy(){if(this._platform.isBrowser){const t=this._getWindow();t.removeEventListener("resize",this._changeListener),t.removeEventListener("orientationchange",this._changeListener)}this._change.complete()}getViewportSize(){this._viewportSize||this._updateViewportSize();const t={width:this._viewportSize.width,height:this._viewportSize.height};return this._platform.isBrowser||(this._viewportSize=null),t}getViewportRect(){const t=this.getViewportScrollPosition(),{width:r,height:i}=this.getViewportSize();return{top:t.top,left:t.left,bottom:t.top+i,right:t.left+r,height:i,width:r}}getViewportScrollPosition(){if(!this._platform.isBrowser)return{top:0,left:0};const t=this._document,r=this._getWindow(),i=t.documentElement,a=i.getBoundingClientRect();return{top:-a.top||t.body.scrollTop||r.scrollY||i.scrollTop||0,left:-a.left||t.body.scrollLeft||r.scrollX||i.scrollLeft||0}}change(t=20){return t>0?this._change.pipe(Rw(t)):this._change}_getWindow(){return this._document.defaultView||window}_updateViewportSize(){const t=this._getWindow();this._viewportSize=this._platform.isBrowser?{width:t.innerWidth,height:t.innerHeight}:{width:0,height:0}}}return n.\u0275fac=function(t){return new(t||n)(d.LFG(ys),d.LFG(d.R0b),d.LFG(se,8))},n.\u0275prov=d.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),$y=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=d.oAB({type:n}),n.\u0275inj=d.cJS({}),n})(),zy=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=d.oAB({type:n}),n.\u0275inj=d.cJS({imports:[[Yi,Ly,$y],Yi,$y]}),n})();var Rp=F(655);class Im{attach(e){return this._attachedHost=e,e.attach(this)}detach(){let e=this._attachedHost;null!=e&&(this._attachedHost=null,e.detach())}get isAttached(){return null!=this._attachedHost}setAttachedHost(e){this._attachedHost=e}}class Dm extends Im{constructor(e,t,r,i){super(),this.component=e,this.viewContainerRef=t,this.injector=r,this.componentFactoryResolver=i}}class Gy extends Im{constructor(e,t,r){super(),this.templateRef=e,this.viewContainerRef=t,this.context=r}get origin(){return this.templateRef.elementRef}attach(e,t=this.context){return this.context=t,super.attach(e)}detach(){return this.context=void 0,super.detach()}}class LS extends Im{constructor(e){super(),this.element=e instanceof d.SBq?e.nativeElement:e}}class qy{constructor(){this._isDisposed=!1,this.attachDomPortal=null}hasAttached(){return!!this._attachedPortal}attach(e){return e instanceof Dm?(this._attachedPortal=e,this.attachComponentPortal(e)):e instanceof Gy?(this._attachedPortal=e,this.attachTemplatePortal(e)):this.attachDomPortal&&e instanceof LS?(this._attachedPortal=e,this.attachDomPortal(e)):void 0}detach(){this._attachedPortal&&(this._attachedPortal.setAttachedHost(null),this._attachedPortal=null),this._invokeDisposeFn()}dispose(){this.hasAttached()&&this.detach(),this._invokeDisposeFn(),this._isDisposed=!0}setDisposeFn(e){this._disposeFn=e}_invokeDisposeFn(){this._disposeFn&&(this._disposeFn(),this._disposeFn=null)}}class VS extends qy{constructor(e,t,r,i,a){super(),this.outletElement=e,this._componentFactoryResolver=t,this._appRef=r,this._defaultInjector=i,this.attachDomPortal=c=>{const f=c.element,_=this._document.createComment("dom-portal");f.parentNode.insertBefore(_,f),this.outletElement.appendChild(f),this._attachedPortal=c,super.setDisposeFn(()=>{_.parentNode&&_.parentNode.replaceChild(f,_)})},this._document=a}attachComponentPortal(e){const r=(e.componentFactoryResolver||this._componentFactoryResolver).resolveComponentFactory(e.component);let i;return e.viewContainerRef?(i=e.viewContainerRef.createComponent(r,e.viewContainerRef.length,e.injector||e.viewContainerRef.injector),this.setDisposeFn(()=>i.destroy())):(i=r.create(e.injector||this._defaultInjector),this._appRef.attachView(i.hostView),this.setDisposeFn(()=>{this._appRef.detachView(i.hostView),i.destroy()})),this.outletElement.appendChild(this._getComponentRootNode(i)),this._attachedPortal=e,i}attachTemplatePortal(e){let t=e.viewContainerRef,r=t.createEmbeddedView(e.templateRef,e.context);return r.rootNodes.forEach(i=>this.outletElement.appendChild(i)),r.detectChanges(),this.setDisposeFn(()=>{let i=t.indexOf(r);-1!==i&&t.remove(i)}),this._attachedPortal=e,r}dispose(){super.dispose(),this.outletElement.remove()}_getComponentRootNode(e){return e.hostView.rootNodes[0]}}let Lw=(()=>{class n extends qy{constructor(t,r,i){super(),this._componentFactoryResolver=t,this._viewContainerRef=r,this._isInitialized=!1,this.attached=new d.vpe,this.attachDomPortal=a=>{const c=a.element,f=this._document.createComment("dom-portal");a.setAttachedHost(this),c.parentNode.insertBefore(f,c),this._getRootNode().appendChild(c),this._attachedPortal=a,super.setDisposeFn(()=>{f.parentNode&&f.parentNode.replaceChild(c,f)})},this._document=i}get portal(){return this._attachedPortal}set portal(t){this.hasAttached()&&!t&&!this._isInitialized||(this.hasAttached()&&super.detach(),t&&super.attach(t),this._attachedPortal=t)}get attachedRef(){return this._attachedRef}ngOnInit(){this._isInitialized=!0}ngOnDestroy(){super.dispose(),this._attachedPortal=null,this._attachedRef=null}attachComponentPortal(t){t.setAttachedHost(this);const r=null!=t.viewContainerRef?t.viewContainerRef:this._viewContainerRef,a=(t.componentFactoryResolver||this._componentFactoryResolver).resolveComponentFactory(t.component),c=r.createComponent(a,r.length,t.injector||r.injector);return r!==this._viewContainerRef&&this._getRootNode().appendChild(c.hostView.rootNodes[0]),super.setDisposeFn(()=>c.destroy()),this._attachedPortal=t,this._attachedRef=c,this.attached.emit(c),c}attachTemplatePortal(t){t.setAttachedHost(this);const r=this._viewContainerRef.createEmbeddedView(t.templateRef,t.context);return super.setDisposeFn(()=>this._viewContainerRef.clear()),this._attachedPortal=t,this._attachedRef=r,this.attached.emit(r),r}_getRootNode(){const t=this._viewContainerRef.element.nativeElement;return t.nodeType===t.ELEMENT_NODE?t:t.parentNode}}return n.\u0275fac=function(t){return new(t||n)(d.Y36(d._Vd),d.Y36(d.s_b),d.Y36(se))},n.\u0275dir=d.lG2({type:n,selectors:[["","cdkPortalOutlet",""]],inputs:{portal:["cdkPortalOutlet","portal"]},outputs:{attached:"attached"},exportAs:["cdkPortalOutlet"],features:[d.qOj]}),n})(),Vw=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=d.oAB({type:n}),n.\u0275inj=d.cJS({}),n})();var Wy=F(6451),BS=F(5032);function kp(n){return(0,ir.e)((e,t)=>{(0,hs.Xf)(n).subscribe((0,Pn.x)(t,()=>t.complete(),BS.Z)),!t.closed&&e.subscribe(t)})}const Bw=dh();class US{constructor(e,t){this._viewportRuler=e,this._previousHTMLStyles={top:"",left:""},this._isEnabled=!1,this._document=t}attach(){}enable(){if(this._canBeEnabled()){const e=this._document.documentElement;this._previousScrollPosition=this._viewportRuler.getViewportScrollPosition(),this._previousHTMLStyles.left=e.style.left||"",this._previousHTMLStyles.top=e.style.top||"",e.style.left=Or(-this._previousScrollPosition.left),e.style.top=Or(-this._previousScrollPosition.top),e.classList.add("cdk-global-scrollblock"),this._isEnabled=!0}}disable(){if(this._isEnabled){const e=this._document.documentElement,r=e.style,i=this._document.body.style,a=r.scrollBehavior||"",c=i.scrollBehavior||"";this._isEnabled=!1,r.left=this._previousHTMLStyles.left,r.top=this._previousHTMLStyles.top,e.classList.remove("cdk-global-scrollblock"),Bw&&(r.scrollBehavior=i.scrollBehavior="auto"),window.scroll(this._previousScrollPosition.left,this._previousScrollPosition.top),Bw&&(r.scrollBehavior=a,i.scrollBehavior=c)}}_canBeEnabled(){if(this._document.documentElement.classList.contains("cdk-global-scrollblock")||this._isEnabled)return!1;const t=this._document.body,r=this._viewportRuler.getViewportSize();return t.scrollHeight>r.height||t.scrollWidth>r.width}}class HS{constructor(e,t,r,i){this._scrollDispatcher=e,this._ngZone=t,this._viewportRuler=r,this._config=i,this._scrollSubscription=null,this._detach=()=>{this.disable(),this._overlayRef.hasAttached()&&this._ngZone.run(()=>this._overlayRef.detach())}}attach(e){this._overlayRef=e}enable(){if(this._scrollSubscription)return;const e=this._scrollDispatcher.scrolled(0);this._config&&this._config.threshold&&this._config.threshold>1?(this._initialScrollPosition=this._viewportRuler.getViewportScrollPosition().top,this._scrollSubscription=e.subscribe(()=>{const t=this._viewportRuler.getViewportScrollPosition().top;Math.abs(t-this._initialScrollPosition)>this._config.threshold?this._detach():this._overlayRef.updatePosition()})):this._scrollSubscription=e.subscribe(this._detach)}disable(){this._scrollSubscription&&(this._scrollSubscription.unsubscribe(),this._scrollSubscription=null)}detach(){this.disable(),this._overlayRef=null}}class Ky{enable(){}disable(){}attach(){}}function Sm(n,e){return e.some(t=>n.bottom<t.top||n.top>t.bottom||n.right<t.left||n.left>t.right)}function Zy(n,e){return e.some(t=>n.top<t.top||n.bottom>t.bottom||n.left<t.left||n.right>t.right)}class Uw{constructor(e,t,r,i){this._scrollDispatcher=e,this._viewportRuler=t,this._ngZone=r,this._config=i,this._scrollSubscription=null}attach(e){this._overlayRef=e}enable(){this._scrollSubscription||(this._scrollSubscription=this._scrollDispatcher.scrolled(this._config?this._config.scrollThrottle:0).subscribe(()=>{if(this._overlayRef.updatePosition(),this._config&&this._config.autoClose){const t=this._overlayRef.overlayElement.getBoundingClientRect(),{width:r,height:i}=this._viewportRuler.getViewportSize();Sm(t,[{width:r,height:i,bottom:i,right:r,top:0,left:0}])&&(this.disable(),this._ngZone.run(()=>this._overlayRef.detach()))}}))}disable(){this._scrollSubscription&&(this._scrollSubscription.unsubscribe(),this._scrollSubscription=null)}detach(){this.disable(),this._overlayRef=null}}let Hw=(()=>{class n{constructor(t,r,i,a){this._scrollDispatcher=t,this._viewportRuler=r,this._ngZone=i,this.noop=()=>new Ky,this.close=c=>new HS(this._scrollDispatcher,this._ngZone,this._viewportRuler,c),this.block=()=>new US(this._viewportRuler,this._document),this.reposition=c=>new Uw(this._scrollDispatcher,this._viewportRuler,this._ngZone,c),this._document=a}}return n.\u0275fac=function(t){return new(t||n)(d.LFG(Uy),d.LFG(Hy),d.LFG(d.R0b),d.LFG(se))},n.\u0275prov=d.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();class Yy{constructor(e){if(this.scrollStrategy=new Ky,this.panelClass="",this.hasBackdrop=!1,this.backdropClass="cdk-overlay-dark-backdrop",this.disposeOnNavigation=!1,e){const t=Object.keys(e);for(const r of t)void 0!==e[r]&&(this[r]=e[r])}}}class jw{constructor(e,t,r,i,a){this.offsetX=r,this.offsetY=i,this.panelClass=a,this.originX=e.originX,this.originY=e.originY,this.overlayX=t.overlayX,this.overlayY=t.overlayY}}class $w{}let zw=(()=>{let n=class{constructor(t,r){this.connectionPair=t,this.scrollableViewProperties=r}};return n=(0,Rp.gn)([(0,Rp.fM)(1,(0,d.FiY)()),(0,Rp.w6)("design:paramtypes",[jw,$w])],n),n})(),mc=(()=>{class n{constructor(t){this._attachedOverlays=[],this._document=t}ngOnDestroy(){this.detach()}add(t){this.remove(t),this._attachedOverlays.push(t)}remove(t){const r=this._attachedOverlays.indexOf(t);r>-1&&this._attachedOverlays.splice(r,1),0===this._attachedOverlays.length&&this.detach()}}return n.\u0275fac=function(t){return new(t||n)(d.LFG(se))},n.\u0275prov=d.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),jS=(()=>{class n extends mc{constructor(t){super(t),this._keydownListener=r=>{const i=this._attachedOverlays;for(let a=i.length-1;a>-1;a--)if(i[a]._keydownEvents.observers.length>0){i[a]._keydownEvents.next(r);break}}}add(t){super.add(t),this._isAttached||(this._document.body.addEventListener("keydown",this._keydownListener),this._isAttached=!0)}detach(){this._isAttached&&(this._document.body.removeEventListener("keydown",this._keydownListener),this._isAttached=!1)}}return n.\u0275fac=function(t){return new(t||n)(d.LFG(se))},n.\u0275prov=d.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),$S=(()=>{class n extends mc{constructor(t,r){super(t),this._platform=r,this._cursorStyleIsSet=!1,this._pointerDownListener=i=>{this._pointerDownEventTarget=hh(i)},this._clickListener=i=>{const a=hh(i),c="click"===i.type&&this._pointerDownEventTarget?this._pointerDownEventTarget:a;this._pointerDownEventTarget=null;const f=this._attachedOverlays.slice();for(let _=f.length-1;_>-1;_--){const w=f[_];if(!(w._outsidePointerEvents.observers.length<1)&&w.hasAttached()){if(w.overlayElement.contains(a)||w.overlayElement.contains(c))break;w._outsidePointerEvents.next(i)}}}}add(t){if(super.add(t),!this._isAttached){const r=this._document.body;r.addEventListener("pointerdown",this._pointerDownListener,!0),r.addEventListener("click",this._clickListener,!0),r.addEventListener("auxclick",this._clickListener,!0),r.addEventListener("contextmenu",this._clickListener,!0),this._platform.IOS&&!this._cursorStyleIsSet&&(this._cursorOriginalValue=r.style.cursor,r.style.cursor="pointer",this._cursorStyleIsSet=!0),this._isAttached=!0}}detach(){if(this._isAttached){const t=this._document.body;t.removeEventListener("pointerdown",this._pointerDownListener,!0),t.removeEventListener("click",this._clickListener,!0),t.removeEventListener("auxclick",this._clickListener,!0),t.removeEventListener("contextmenu",this._clickListener,!0),this._platform.IOS&&this._cursorStyleIsSet&&(t.style.cursor=this._cursorOriginalValue,this._cursorStyleIsSet=!1),this._isAttached=!1}}}return n.\u0275fac=function(t){return new(t||n)(d.LFG(se),d.LFG(ys))},n.\u0275prov=d.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),_c=(()=>{class n{constructor(t,r){this._platform=r,this._document=t}ngOnDestroy(){this._containerElement?.remove()}getContainerElement(){return this._containerElement||this._createContainer(),this._containerElement}_createContainer(){const t="cdk-overlay-container";if(this._platform.isBrowser||xp()){const i=this._document.querySelectorAll(`.${t}[platform="server"], .${t}[platform="test"]`);for(let a=0;a<i.length;a++)i[a].remove()}const r=this._document.createElement("div");r.classList.add(t),xp()?r.setAttribute("platform","test"):this._platform.isBrowser||r.setAttribute("platform","server"),this._document.body.appendChild(r),this._containerElement=r}}return n.\u0275fac=function(t){return new(t||n)(d.LFG(se),d.LFG(ys))},n.\u0275prov=d.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();class zO{constructor(e,t,r,i,a,c,f,_,w){this._portalOutlet=e,this._host=t,this._pane=r,this._config=i,this._ngZone=a,this._keyboardDispatcher=c,this._document=f,this._location=_,this._outsideClickDispatcher=w,this._backdropElement=null,this._backdropClick=new Kt.x,this._attachments=new Kt.x,this._detachments=new Kt.x,this._locationChanges=ia.w0.EMPTY,this._backdropClickHandler=S=>this._backdropClick.next(S),this._keydownEvents=new Kt.x,this._outsidePointerEvents=new Kt.x,i.scrollStrategy&&(this._scrollStrategy=i.scrollStrategy,this._scrollStrategy.attach(this)),this._positionStrategy=i.positionStrategy}get overlayElement(){return this._pane}get backdropElement(){return this._backdropElement}get hostElement(){return this._host}attach(e){let t=this._portalOutlet.attach(e);return!this._host.parentElement&&this._previousHostParent&&this._previousHostParent.appendChild(this._host),this._positionStrategy&&this._positionStrategy.attach(this),this._updateStackingOrder(),this._updateElementSize(),this._updateElementDirection(),this._scrollStrategy&&this._scrollStrategy.enable(),this._ngZone.onStable.pipe(zi(1)).subscribe(()=>{this.hasAttached()&&this.updatePosition()}),this._togglePointerEvents(!0),this._config.hasBackdrop&&this._attachBackdrop(),this._config.panelClass&&this._toggleClasses(this._pane,this._config.panelClass,!0),this._attachments.next(),this._keyboardDispatcher.add(this),this._config.disposeOnNavigation&&(this._locationChanges=this._location.subscribe(()=>this.dispose())),this._outsideClickDispatcher.add(this),t}detach(){if(!this.hasAttached())return;this.detachBackdrop(),this._togglePointerEvents(!1),this._positionStrategy&&this._positionStrategy.detach&&this._positionStrategy.detach(),this._scrollStrategy&&this._scrollStrategy.disable();const e=this._portalOutlet.detach();return this._detachments.next(),this._keyboardDispatcher.remove(this),this._detachContentWhenStable(),this._locationChanges.unsubscribe(),this._outsideClickDispatcher.remove(this),e}dispose(){const e=this.hasAttached();this._positionStrategy&&this._positionStrategy.dispose(),this._disposeScrollStrategy(),this._disposeBackdrop(this._backdropElement),this._locationChanges.unsubscribe(),this._keyboardDispatcher.remove(this),this._portalOutlet.dispose(),this._attachments.complete(),this._backdropClick.complete(),this._keydownEvents.complete(),this._outsidePointerEvents.complete(),this._outsideClickDispatcher.remove(this),this._host?.remove(),this._previousHostParent=this._pane=this._host=null,e&&this._detachments.next(),this._detachments.complete()}hasAttached(){return this._portalOutlet.hasAttached()}backdropClick(){return this._backdropClick}attachments(){return this._attachments}detachments(){return this._detachments}keydownEvents(){return this._keydownEvents}outsidePointerEvents(){return this._outsidePointerEvents}getConfig(){return this._config}updatePosition(){this._positionStrategy&&this._positionStrategy.apply()}updatePositionStrategy(e){e!==this._positionStrategy&&(this._positionStrategy&&this._positionStrategy.dispose(),this._positionStrategy=e,this.hasAttached()&&(e.attach(this),this.updatePosition()))}updateSize(e){this._config={...this._config,...e},this._updateElementSize()}setDirection(e){this._config={...this._config,direction:e},this._updateElementDirection()}addPanelClass(e){this._pane&&this._toggleClasses(this._pane,e,!0)}removePanelClass(e){this._pane&&this._toggleClasses(this._pane,e,!1)}getDirection(){const e=this._config.direction;return e?"string"==typeof e?e:e.value:"ltr"}updateScrollStrategy(e){e!==this._scrollStrategy&&(this._disposeScrollStrategy(),this._scrollStrategy=e,this.hasAttached()&&(e.attach(this),e.enable()))}_updateElementDirection(){this._host.setAttribute("dir",this.getDirection())}_updateElementSize(){if(!this._pane)return;const e=this._pane.style;e.width=Or(this._config.width),e.height=Or(this._config.height),e.minWidth=Or(this._config.minWidth),e.minHeight=Or(this._config.minHeight),e.maxWidth=Or(this._config.maxWidth),e.maxHeight=Or(this._config.maxHeight)}_togglePointerEvents(e){this._pane.style.pointerEvents=e?"":"none"}_attachBackdrop(){const e="cdk-overlay-backdrop-showing";this._backdropElement=this._document.createElement("div"),this._backdropElement.classList.add("cdk-overlay-backdrop"),this._config.backdropClass&&this._toggleClasses(this._backdropElement,this._config.backdropClass,!0),this._host.parentElement.insertBefore(this._backdropElement,this._host),this._backdropElement.addEventListener("click",this._backdropClickHandler),typeof requestAnimationFrame<"u"?this._ngZone.runOutsideAngular(()=>{requestAnimationFrame(()=>{this._backdropElement&&this._backdropElement.classList.add(e)})}):this._backdropElement.classList.add(e)}_updateStackingOrder(){this._host.nextSibling&&this._host.parentNode.appendChild(this._host)}detachBackdrop(){const e=this._backdropElement;if(!e)return;let t;const r=()=>{e&&(e.removeEventListener("click",this._backdropClickHandler),e.removeEventListener("transitionend",r),this._disposeBackdrop(e)),this._config.backdropClass&&this._toggleClasses(e,this._config.backdropClass,!1),clearTimeout(t)};e.classList.remove("cdk-overlay-backdrop-showing"),this._ngZone.runOutsideAngular(()=>{e.addEventListener("transitionend",r)}),e.style.pointerEvents="none",t=this._ngZone.runOutsideAngular(()=>setTimeout(r,500))}_toggleClasses(e,t,r){const i=My(t||[]).filter(a=>!!a);i.length&&(r?e.classList.add(...i):e.classList.remove(...i))}_detachContentWhenStable(){this._ngZone.runOutsideAngular(()=>{const e=this._ngZone.onStable.pipe(kp((0,Wy.T)(this._attachments,this._detachments))).subscribe(()=>{(!this._pane||!this._host||0===this._pane.children.length)&&(this._pane&&this._config.panelClass&&this._toggleClasses(this._pane,this._config.panelClass,!1),this._host&&this._host.parentElement&&(this._previousHostParent=this._host.parentElement,this._host.remove()),e.unsubscribe())})})}_disposeScrollStrategy(){const e=this._scrollStrategy;e&&(e.disable(),e.detach&&e.detach())}_disposeBackdrop(e){e&&(e.remove(),this._backdropElement===e&&(this._backdropElement=null))}}const Tm="cdk-overlay-connected-position-bounding-box",GO=/([A-Za-z%]+)$/;class Ww{constructor(e,t,r,i,a){this._viewportRuler=t,this._document=r,this._platform=i,this._overlayContainer=a,this._lastBoundingBoxSize={width:0,height:0},this._isPushed=!1,this._canPush=!0,this._growAfterOpen=!1,this._hasFlexibleDimensions=!0,this._positionLocked=!1,this._viewportMargin=0,this._scrollables=[],this._preferredPositions=[],this._positionChanges=new Kt.x,this._resizeSubscription=ia.w0.EMPTY,this._offsetX=0,this._offsetY=0,this._appliedPanelClasses=[],this.positionChanges=this._positionChanges,this.setOrigin(e)}get positions(){return this._preferredPositions}attach(e){this._validatePositions(),e.hostElement.classList.add(Tm),this._overlayRef=e,this._boundingBox=e.hostElement,this._pane=e.overlayElement,this._isDisposed=!1,this._isInitialRender=!0,this._lastPosition=null,this._resizeSubscription.unsubscribe(),this._resizeSubscription=this._viewportRuler.change().subscribe(()=>{this._isInitialRender=!0,this.apply()})}apply(){if(this._isDisposed||!this._platform.isBrowser)return;if(!this._isInitialRender&&this._positionLocked&&this._lastPosition)return void this.reapplyLastPosition();this._clearPanelClasses(),this._resetOverlayElementStyles(),this._resetBoundingBoxStyles(),this._viewportRect=this._getNarrowedViewportRect(),this._originRect=this._getOriginRect(),this._overlayRect=this._pane.getBoundingClientRect();const e=this._originRect,t=this._overlayRect,r=this._viewportRect,i=[];let a;for(let c of this._preferredPositions){let f=this._getOriginPoint(e,c),_=this._getOverlayPoint(f,t,c),w=this._getOverlayFit(_,t,r,c);if(w.isCompletelyWithinViewport)return this._isPushed=!1,void this._applyPosition(c,f);this._canFitWithFlexibleDimensions(w,_,r)?i.push({position:c,origin:f,overlayRect:t,boundingBoxRect:this._calculateBoundingBoxRect(f,c)}):(!a||a.overlayFit.visibleArea<w.visibleArea)&&(a={overlayFit:w,overlayPoint:_,originPoint:f,position:c,overlayRect:t})}if(i.length){let c=null,f=-1;for(const _ of i){const w=_.boundingBoxRect.width*_.boundingBoxRect.height*(_.position.weight||1);w>f&&(f=w,c=_)}return this._isPushed=!1,void this._applyPosition(c.position,c.origin)}if(this._canPush)return this._isPushed=!0,void this._applyPosition(a.position,a.originPoint);this._applyPosition(a.position,a.originPoint)}detach(){this._clearPanelClasses(),this._lastPosition=null,this._previousPushAmount=null,this._resizeSubscription.unsubscribe()}dispose(){this._isDisposed||(this._boundingBox&&yc(this._boundingBox.style,{top:"",left:"",right:"",bottom:"",height:"",width:"",alignItems:"",justifyContent:""}),this._pane&&this._resetOverlayElementStyles(),this._overlayRef&&this._overlayRef.hostElement.classList.remove(Tm),this.detach(),this._positionChanges.complete(),this._overlayRef=this._boundingBox=null,this._isDisposed=!0)}reapplyLastPosition(){if(!this._isDisposed&&(!this._platform||this._platform.isBrowser)){this._originRect=this._getOriginRect(),this._overlayRect=this._pane.getBoundingClientRect(),this._viewportRect=this._getNarrowedViewportRect();const e=this._lastPosition||this._preferredPositions[0],t=this._getOriginPoint(this._originRect,e);this._applyPosition(e,t)}}withScrollableContainers(e){return this._scrollables=e,this}withPositions(e){return this._preferredPositions=e,-1===e.indexOf(this._lastPosition)&&(this._lastPosition=null),this._validatePositions(),this}withViewportMargin(e){return this._viewportMargin=e,this}withFlexibleDimensions(e=!0){return this._hasFlexibleDimensions=e,this}withGrowAfterOpen(e=!0){return this._growAfterOpen=e,this}withPush(e=!0){return this._canPush=e,this}withLockedPosition(e=!0){return this._positionLocked=e,this}setOrigin(e){return this._origin=e,this}withDefaultOffsetX(e){return this._offsetX=e,this}withDefaultOffsetY(e){return this._offsetY=e,this}withTransformOriginOn(e){return this._transformOriginSelector=e,this}_getOriginPoint(e,t){let r,i;if("center"==t.originX)r=e.left+e.width/2;else{const a=this._isRtl()?e.right:e.left,c=this._isRtl()?e.left:e.right;r="start"==t.originX?a:c}return i="center"==t.originY?e.top+e.height/2:"top"==t.originY?e.top:e.bottom,{x:r,y:i}}_getOverlayPoint(e,t,r){let i,a;return i="center"==r.overlayX?-t.width/2:"start"===r.overlayX?this._isRtl()?-t.width:0:this._isRtl()?0:-t.width,a="center"==r.overlayY?-t.height/2:"top"==r.overlayY?0:-t.height,{x:e.x+i,y:e.y+a}}_getOverlayFit(e,t,r,i){const a=Ot(t);let{x:c,y:f}=e,_=this._getOffset(i,"x"),w=this._getOffset(i,"y");_&&(c+=_),w&&(f+=w);let L=0-f,U=f+a.height-r.height,W=this._subtractOverflows(a.width,0-c,c+a.width-r.width),ie=this._subtractOverflows(a.height,L,U),we=W*ie;return{visibleArea:we,isCompletelyWithinViewport:a.width*a.height===we,fitsInViewportVertically:ie===a.height,fitsInViewportHorizontally:W==a.width}}_canFitWithFlexibleDimensions(e,t,r){if(this._hasFlexibleDimensions){const i=r.bottom-t.y,a=r.right-t.x,c=zS(this._overlayRef.getConfig().minHeight),f=zS(this._overlayRef.getConfig().minWidth),w=e.fitsInViewportHorizontally||null!=f&&f<=a;return(e.fitsInViewportVertically||null!=c&&c<=i)&&w}return!1}_pushOverlayOnScreen(e,t,r){if(this._previousPushAmount&&this._positionLocked)return{x:e.x+this._previousPushAmount.x,y:e.y+this._previousPushAmount.y};const i=Ot(t),a=this._viewportRect,c=Math.max(e.x+i.width-a.width,0),f=Math.max(e.y+i.height-a.height,0),_=Math.max(a.top-r.top-e.y,0),w=Math.max(a.left-r.left-e.x,0);let S=0,x=0;return S=i.width<=a.width?w||-c:e.x<this._viewportMargin?a.left-r.left-e.x:0,x=i.height<=a.height?_||-f:e.y<this._viewportMargin?a.top-r.top-e.y:0,this._previousPushAmount={x:S,y:x},{x:e.x+S,y:e.y+x}}_applyPosition(e,t){if(this._setTransformOrigin(e),this._setOverlayElementStyles(t,e),this._setBoundingBoxStyles(t,e),e.panelClass&&this._addPanelClasses(e.panelClass),this._lastPosition=e,this._positionChanges.observers.length){const r=this._getScrollVisibility(),i=new zw(e,r);this._positionChanges.next(i)}this._isInitialRender=!1}_setTransformOrigin(e){if(!this._transformOriginSelector)return;const t=this._boundingBox.querySelectorAll(this._transformOriginSelector);let r,i=e.overlayY;r="center"===e.overlayX?"center":this._isRtl()?"start"===e.overlayX?"right":"left":"start"===e.overlayX?"left":"right";for(let a=0;a<t.length;a++)t[a].style.transformOrigin=`${r} ${i}`}_calculateBoundingBoxRect(e,t){const r=this._viewportRect,i=this._isRtl();let a,c,f,S,x,L;if("top"===t.overlayY)c=e.y,a=r.height-c+this._viewportMargin;else if("bottom"===t.overlayY)f=r.height-e.y+2*this._viewportMargin,a=r.height-f+this._viewportMargin;else{const U=Math.min(r.bottom-e.y+r.top,e.y),W=this._lastBoundingBoxSize.height;a=2*U,c=e.y-U,a>W&&!this._isInitialRender&&!this._growAfterOpen&&(c=e.y-W/2)}if("end"===t.overlayX&&!i||"start"===t.overlayX&&i)L=r.width-e.x+this._viewportMargin,S=e.x-this._viewportMargin;else if("start"===t.overlayX&&!i||"end"===t.overlayX&&i)x=e.x,S=r.right-e.x;else{const U=Math.min(r.right-e.x+r.left,e.x),W=this._lastBoundingBoxSize.width;S=2*U,x=e.x-U,S>W&&!this._isInitialRender&&!this._growAfterOpen&&(x=e.x-W/2)}return{top:c,left:x,bottom:f,right:L,width:S,height:a}}_setBoundingBoxStyles(e,t){const r=this._calculateBoundingBoxRect(e,t);!this._isInitialRender&&!this._growAfterOpen&&(r.height=Math.min(r.height,this._lastBoundingBoxSize.height),r.width=Math.min(r.width,this._lastBoundingBoxSize.width));const i={};if(this._hasExactPosition())i.top=i.left="0",i.bottom=i.right=i.maxHeight=i.maxWidth="",i.width=i.height="100%";else{const a=this._overlayRef.getConfig().maxHeight,c=this._overlayRef.getConfig().maxWidth;i.height=Or(r.height),i.top=Or(r.top),i.bottom=Or(r.bottom),i.width=Or(r.width),i.left=Or(r.left),i.right=Or(r.right),i.alignItems="center"===t.overlayX?"center":"end"===t.overlayX?"flex-end":"flex-start",i.justifyContent="center"===t.overlayY?"center":"bottom"===t.overlayY?"flex-end":"flex-start",a&&(i.maxHeight=Or(a)),c&&(i.maxWidth=Or(c))}this._lastBoundingBoxSize=r,yc(this._boundingBox.style,i)}_resetBoundingBoxStyles(){yc(this._boundingBox.style,{top:"0",left:"0",right:"0",bottom:"0",height:"",width:"",alignItems:"",justifyContent:""})}_resetOverlayElementStyles(){yc(this._pane.style,{top:"",left:"",bottom:"",right:"",position:"",transform:""})}_setOverlayElementStyles(e,t){const r={},i=this._hasExactPosition(),a=this._hasFlexibleDimensions,c=this._overlayRef.getConfig();if(i){const S=this._viewportRuler.getViewportScrollPosition();yc(r,this._getExactOverlayY(t,e,S)),yc(r,this._getExactOverlayX(t,e,S))}else r.position="static";let f="",_=this._getOffset(t,"x"),w=this._getOffset(t,"y");_&&(f+=`translateX(${_}px) `),w&&(f+=`translateY(${w}px)`),r.transform=f.trim(),c.maxHeight&&(i?r.maxHeight=Or(c.maxHeight):a&&(r.maxHeight="")),c.maxWidth&&(i?r.maxWidth=Or(c.maxWidth):a&&(r.maxWidth="")),yc(this._pane.style,r)}_getExactOverlayY(e,t,r){let i={top:"",bottom:""},a=this._getOverlayPoint(t,this._overlayRect,e);this._isPushed&&(a=this._pushOverlayOnScreen(a,this._overlayRect,r));let c=this._overlayContainer.getContainerElement().getBoundingClientRect().top;return a.y-=c,"bottom"===e.overlayY?i.bottom=this._document.documentElement.clientHeight-(a.y+this._overlayRect.height)+"px":i.top=Or(a.y),i}_getExactOverlayX(e,t,r){let c,i={left:"",right:""},a=this._getOverlayPoint(t,this._overlayRect,e);return this._isPushed&&(a=this._pushOverlayOnScreen(a,this._overlayRect,r)),c=this._isRtl()?"end"===e.overlayX?"left":"right":"end"===e.overlayX?"right":"left","right"===c?i.right=this._document.documentElement.clientWidth-(a.x+this._overlayRect.width)+"px":i.left=Or(a.x),i}_getScrollVisibility(){const e=this._getOriginRect(),t=this._pane.getBoundingClientRect(),r=this._scrollables.map(i=>i.getElementRef().nativeElement.getBoundingClientRect());return{isOriginClipped:Zy(e,r),isOriginOutsideView:Sm(e,r),isOverlayClipped:Zy(t,r),isOverlayOutsideView:Sm(t,r)}}_subtractOverflows(e,...t){return t.reduce((r,i)=>r-Math.max(i,0),e)}_getNarrowedViewportRect(){const e=this._document.documentElement.clientWidth,t=this._document.documentElement.clientHeight,r=this._viewportRuler.getViewportScrollPosition();return{top:r.top+this._viewportMargin,left:r.left+this._viewportMargin,right:r.left+e-this._viewportMargin,bottom:r.top+t-this._viewportMargin,width:e-2*this._viewportMargin,height:t-2*this._viewportMargin}}_isRtl(){return"rtl"===this._overlayRef.getDirection()}_hasExactPosition(){return!this._hasFlexibleDimensions||this._isPushed}_getOffset(e,t){return"x"===t?e.offsetX??this._offsetX:e.offsetY??this._offsetY}_validatePositions(){}_addPanelClasses(e){this._pane&&My(e).forEach(t=>{""!==t&&-1===this._appliedPanelClasses.indexOf(t)&&(this._appliedPanelClasses.push(t),this._pane.classList.add(t))})}_clearPanelClasses(){this._pane&&(this._appliedPanelClasses.forEach(e=>{this._pane.classList.remove(e)}),this._appliedPanelClasses=[])}_getOriginRect(){const e=this._origin;if(e instanceof d.SBq)return e.nativeElement.getBoundingClientRect();if(e instanceof Element)return e.getBoundingClientRect();const t=e.width||0,r=e.height||0;return{top:e.y,bottom:e.y+r,left:e.x,right:e.x+t,height:r,width:t}}}function yc(n,e){for(let t in e)e.hasOwnProperty(t)&&(n[t]=e[t]);return n}function zS(n){if("number"!=typeof n&&null!=n){const[e,t]=n.split(GO);return t&&"px"!==t?null:parseFloat(e)}return n||null}function Ot(n){return{top:Math.floor(n.top),right:Math.floor(n.right),bottom:Math.floor(n.bottom),left:Math.floor(n.left),width:Math.floor(n.width),height:Math.floor(n.height)}}const Kw="cdk-global-overlay-wrapper";class GS{constructor(){this._cssPosition="static",this._topOffset="",this._bottomOffset="",this._leftOffset="",this._rightOffset="",this._alignItems="",this._justifyContent="",this._width="",this._height=""}attach(e){const t=e.getConfig();this._overlayRef=e,this._width&&!t.width&&e.updateSize({width:this._width}),this._height&&!t.height&&e.updateSize({height:this._height}),e.hostElement.classList.add(Kw),this._isDisposed=!1}top(e=""){return this._bottomOffset="",this._topOffset=e,this._alignItems="flex-start",this}left(e=""){return this._rightOffset="",this._leftOffset=e,this._justifyContent="flex-start",this}bottom(e=""){return this._topOffset="",this._bottomOffset=e,this._alignItems="flex-end",this}right(e=""){return this._leftOffset="",this._rightOffset=e,this._justifyContent="flex-end",this}width(e=""){return this._overlayRef?this._overlayRef.updateSize({width:e}):this._width=e,this}height(e=""){return this._overlayRef?this._overlayRef.updateSize({height:e}):this._height=e,this}centerHorizontally(e=""){return this.left(e),this._justifyContent="center",this}centerVertically(e=""){return this.top(e),this._alignItems="center",this}apply(){if(!this._overlayRef||!this._overlayRef.hasAttached())return;const e=this._overlayRef.overlayElement.style,t=this._overlayRef.hostElement.style,r=this._overlayRef.getConfig(),{width:i,height:a,maxWidth:c,maxHeight:f}=r,_=!("100%"!==i&&"100vw"!==i||c&&"100%"!==c&&"100vw"!==c),w=!("100%"!==a&&"100vh"!==a||f&&"100%"!==f&&"100vh"!==f);e.position=this._cssPosition,e.marginLeft=_?"0":this._leftOffset,e.marginTop=w?"0":this._topOffset,e.marginBottom=this._bottomOffset,e.marginRight=this._rightOffset,_?t.justifyContent="flex-start":"center"===this._justifyContent?t.justifyContent="center":"rtl"===this._overlayRef.getConfig().direction?"flex-start"===this._justifyContent?t.justifyContent="flex-end":"flex-end"===this._justifyContent&&(t.justifyContent="flex-start"):t.justifyContent=this._justifyContent,t.alignItems=w?"flex-start":this._alignItems}dispose(){if(this._isDisposed||!this._overlayRef)return;const e=this._overlayRef.overlayElement.style,t=this._overlayRef.hostElement,r=t.style;t.classList.remove(Kw),r.justifyContent=r.alignItems=e.marginTop=e.marginBottom=e.marginLeft=e.marginRight=e.position="",this._overlayRef=null,this._isDisposed=!0}}let qS=(()=>{class n{constructor(t,r,i,a){this._viewportRuler=t,this._document=r,this._platform=i,this._overlayContainer=a}global(){return new GS}flexibleConnectedTo(t){return new Ww(t,this._viewportRuler,this._document,this._platform,this._overlayContainer)}}return n.\u0275fac=function(t){return new(t||n)(d.LFG(Hy),d.LFG(se),d.LFG(ys),d.LFG(_c))},n.\u0275prov=d.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),fh=0,Am=(()=>{class n{constructor(t,r,i,a,c,f,_,w,S,x,L){this.scrollStrategies=t,this._overlayContainer=r,this._componentFactoryResolver=i,this._positionBuilder=a,this._keyboardDispatcher=c,this._injector=f,this._ngZone=_,this._document=w,this._directionality=S,this._location=x,this._outsideClickDispatcher=L}create(t){const r=this._createHostElement(),i=this._createPaneElement(r),a=this._createPortalOutlet(i),c=new Yy(t);return c.direction=c.direction||this._directionality.value,new zO(a,r,i,c,this._ngZone,this._keyboardDispatcher,this._document,this._location,this._outsideClickDispatcher)}position(){return this._positionBuilder}_createPaneElement(t){const r=this._document.createElement("div");return r.id="cdk-overlay-"+fh++,r.classList.add("cdk-overlay-pane"),t.appendChild(r),r}_createHostElement(){const t=this._document.createElement("div");return this._overlayContainer.getContainerElement().appendChild(t),t}_createPortalOutlet(t){return this._appRef||(this._appRef=this._injector.get(d.z2F)),new VS(t,this._componentFactoryResolver,this._appRef,this._injector,this._document)}}return n.\u0275fac=function(t){return new(t||n)(d.LFG(Hw),d.LFG(_c),d.LFG(d._Vd),d.LFG(qS),d.LFG(jS),d.LFG(d.zs3),d.LFG(d.R0b),d.LFG(se),d.LFG(Em),d.LFG(Ne),d.LFG($S))},n.\u0275prov=d.Yz7({token:n,factory:n.\u0275fac}),n})();const Yw={provide:new d.OlP("cdk-connected-overlay-scroll-strategy"),deps:[Am],useFactory:function Zw(n){return()=>n.scrollStrategies.reposition()}};let WS=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=d.oAB({type:n}),n.\u0275inj=d.cJS({providers:[Am,Yw],imports:[[Yi,Vw,zy],zy]}),n})();function oE(n,e=ta.y){return n=n??NT,(0,ir.e)((t,r)=>{let i,a=!0;t.subscribe((0,Pn.x)(r,c=>{const f=e(c);(a||!n(i,f))&&(a=!1,i=f,r.next(c))}))})}function NT(n,e){return n===e}let gh=(()=>{class n{constructor(t){this._platform=t}isDisabled(t){return t.hasAttribute("disabled")}isVisible(t){return function Jy(n){return!!(n.offsetWidth||n.offsetHeight||"function"==typeof n.getClientRects&&n.getClientRects().length)}(t)&&"visible"===getComputedStyle(t).visibility}isTabbable(t){if(!this._platform.isBrowser)return!1;const r=function BT(n){try{return n.frameElement}catch{return null}}(function jT(n){return n.ownerDocument&&n.ownerDocument.defaultView||window}(t));if(r&&(-1===dE(r)||!this.isVisible(r)))return!1;let i=t.nodeName.toLowerCase(),a=dE(t);return t.hasAttribute("contenteditable")?-1!==a:!("iframe"===i||"object"===i||this._platform.WEBKIT&&this._platform.IOS&&!function Nm(n){let e=n.nodeName.toLowerCase(),t="input"===e&&n.type;return"text"===t||"password"===t||"select"===e||"textarea"===e}(t))&&("audio"===i?!!t.hasAttribute("controls")&&-1!==a:"video"===i?-1!==a&&(null!==a||this._platform.FIREFOX||t.hasAttribute("controls")):t.tabIndex>=0)}isFocusable(t,r){return function Fm(n){return!function UT(n){return function Np(n){return"input"==n.nodeName.toLowerCase()}(n)&&"hidden"==n.type}(n)&&(function _a(n){let e=n.nodeName.toLowerCase();return"input"===e||"select"===e||"button"===e||"textarea"===e}(n)||function ev(n){return function HT(n){return"a"==n.nodeName.toLowerCase()}(n)&&n.hasAttribute("href")}(n)||n.hasAttribute("contenteditable")||uE(n))}(t)&&!this.isDisabled(t)&&(r?.ignoreVisibility||this.isVisible(t))}}return n.\u0275fac=function(t){return new(t||n)(d.LFG(ys))},n.\u0275prov=d.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();function uE(n){if(!n.hasAttribute("tabindex")||void 0===n.tabIndex)return!1;let e=n.getAttribute("tabindex");return!(!e||isNaN(parseInt(e,10)))}function dE(n){if(!uE(n))return null;const e=parseInt(n.getAttribute("tabindex")||"",10);return isNaN(e)?-1:e}class $T{constructor(e,t,r,i,a=!1){this._element=e,this._checker=t,this._ngZone=r,this._document=i,this._hasAttached=!1,this.startAnchorListener=()=>this.focusLastTabbableElement(),this.endAnchorListener=()=>this.focusFirstTabbableElement(),this._enabled=!0,a||this.attachAnchors()}get enabled(){return this._enabled}set enabled(e){this._enabled=e,this._startAnchor&&this._endAnchor&&(this._toggleAnchorTabIndex(e,this._startAnchor),this._toggleAnchorTabIndex(e,this._endAnchor))}destroy(){const e=this._startAnchor,t=this._endAnchor;e&&(e.removeEventListener("focus",this.startAnchorListener),e.remove()),t&&(t.removeEventListener("focus",this.endAnchorListener),t.remove()),this._startAnchor=this._endAnchor=null,this._hasAttached=!1}attachAnchors(){return!!this._hasAttached||(this._ngZone.runOutsideAngular(()=>{this._startAnchor||(this._startAnchor=this._createAnchor(),this._startAnchor.addEventListener("focus",this.startAnchorListener)),this._endAnchor||(this._endAnchor=this._createAnchor(),this._endAnchor.addEventListener("focus",this.endAnchorListener))}),this._element.parentNode&&(this._element.parentNode.insertBefore(this._startAnchor,this._element),this._element.parentNode.insertBefore(this._endAnchor,this._element.nextSibling),this._hasAttached=!0),this._hasAttached)}focusInitialElementWhenReady(e){return new Promise(t=>{this._executeOnStable(()=>t(this.focusInitialElement(e)))})}focusFirstTabbableElementWhenReady(e){return new Promise(t=>{this._executeOnStable(()=>t(this.focusFirstTabbableElement(e)))})}focusLastTabbableElementWhenReady(e){return new Promise(t=>{this._executeOnStable(()=>t(this.focusLastTabbableElement(e)))})}_getRegionBoundary(e){let t=this._element.querySelectorAll(`[cdk-focus-region-${e}], [cdkFocusRegion${e}], [cdk-focus-${e}]`);for(let r=0;r<t.length;r++)t[r].hasAttribute(`cdk-focus-${e}`)?console.warn(`Found use of deprecated attribute 'cdk-focus-${e}', use 'cdkFocusRegion${e}' instead. The deprecated attribute will be removed in 8.0.0.`,t[r]):t[r].hasAttribute(`cdk-focus-region-${e}`)&&console.warn(`Found use of deprecated attribute 'cdk-focus-region-${e}', use 'cdkFocusRegion${e}' instead. The deprecated attribute will be removed in 8.0.0.`,t[r]);return"start"==e?t.length?t[0]:this._getFirstTabbableElement(this._element):t.length?t[t.length-1]:this._getLastTabbableElement(this._element)}focusInitialElement(e){const t=this._element.querySelector("[cdk-focus-initial], [cdkFocusInitial]");if(t){if(t.hasAttribute("cdk-focus-initial")&&console.warn("Found use of deprecated attribute 'cdk-focus-initial', use 'cdkFocusInitial' instead. The deprecated attribute will be removed in 8.0.0",t),!this._checker.isFocusable(t)){const r=this._getFirstTabbableElement(t);return r?.focus(e),!!r}return t.focus(e),!0}return this.focusFirstTabbableElement(e)}focusFirstTabbableElement(e){const t=this._getRegionBoundary("start");return t&&t.focus(e),!!t}focusLastTabbableElement(e){const t=this._getRegionBoundary("end");return t&&t.focus(e),!!t}hasAttached(){return this._hasAttached}_getFirstTabbableElement(e){if(this._checker.isFocusable(e)&&this._checker.isTabbable(e))return e;const t=e.children;for(let r=0;r<t.length;r++){const i=t[r].nodeType===this._document.ELEMENT_NODE?this._getFirstTabbableElement(t[r]):null;if(i)return i}return null}_getLastTabbableElement(e){if(this._checker.isFocusable(e)&&this._checker.isTabbable(e))return e;const t=e.children;for(let r=t.length-1;r>=0;r--){const i=t[r].nodeType===this._document.ELEMENT_NODE?this._getLastTabbableElement(t[r]):null;if(i)return i}return null}_createAnchor(){const e=this._document.createElement("div");return this._toggleAnchorTabIndex(this._enabled,e),e.classList.add("cdk-visually-hidden"),e.classList.add("cdk-focus-trap-anchor"),e.setAttribute("aria-hidden","true"),e}_toggleAnchorTabIndex(e,t){e?t.setAttribute("tabindex","0"):t.removeAttribute("tabindex")}toggleAnchors(e){this._startAnchor&&this._endAnchor&&(this._toggleAnchorTabIndex(e,this._startAnchor),this._toggleAnchorTabIndex(e,this._endAnchor))}_executeOnStable(e){this._ngZone.isStable?e():this._ngZone.onStable.pipe(zi(1)).subscribe(e)}}let hE=(()=>{class n{constructor(t,r,i){this._checker=t,this._ngZone=r,this._document=i}create(t,r=!1){return new $T(t,this._checker,this._ngZone,this._document,r)}}return n.\u0275fac=function(t){return new(t||n)(d.LFG(gh),d.LFG(d.R0b),d.LFG(se))},n.\u0275prov=d.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();const pE=new d.OlP("cdk-input-modality-detector-options"),rv={ignoreKeys:[18,17,224,91,16]},mh=bm({passive:!0,capture:!0});let qT=(()=>{class n{constructor(t,r,i,a){this._platform=t,this._mostRecentTarget=null,this._modality=new Qn(null),this._lastTouchMs=0,this._onKeydown=c=>{this._options?.ignoreKeys?.some(f=>f===c.keyCode)||(this._modality.next("keyboard"),this._mostRecentTarget=hh(c))},this._onMousedown=c=>{Date.now()-this._lastTouchMs<650||(this._modality.next(function tv(n){return 0===n.offsetX&&0===n.offsetY}(c)?"keyboard":"mouse"),this._mostRecentTarget=hh(c))},this._onTouchstart=c=>{!function nv(n){const e=n.touches&&n.touches[0]||n.changedTouches&&n.changedTouches[0];return!(!e||-1!==e.identifier||null!=e.radiusX&&1!==e.radiusX||null!=e.radiusY&&1!==e.radiusY)}(c)?(this._lastTouchMs=Date.now(),this._modality.next("touch"),this._mostRecentTarget=hh(c)):this._modality.next("keyboard")},this._options={...rv,...a},this.modalityDetected=this._modality.pipe(function PT(n){return Wn((e,t)=>n<=t)}(1)),this.modalityChanged=this.modalityDetected.pipe(oE()),t.isBrowser&&r.runOutsideAngular(()=>{i.addEventListener("keydown",this._onKeydown,mh),i.addEventListener("mousedown",this._onMousedown,mh),i.addEventListener("touchstart",this._onTouchstart,mh)})}get mostRecentModality(){return this._modality.value}ngOnDestroy(){this._modality.complete(),this._platform.isBrowser&&(document.removeEventListener("keydown",this._onKeydown,mh),document.removeEventListener("mousedown",this._onMousedown,mh),document.removeEventListener("touchstart",this._onTouchstart,mh))}}return n.\u0275fac=function(t){return new(t||n)(d.LFG(ys),d.LFG(d.R0b),d.LFG(se),d.LFG(pE,8))},n.\u0275prov=d.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();const mE=new d.OlP("cdk-focus-monitor-default-options"),Fp=bm({passive:!0,capture:!0});let _E=(()=>{class n{constructor(t,r,i,a,c){this._ngZone=t,this._platform=r,this._inputModalityDetector=i,this._origin=null,this._windowFocused=!1,this._originFromTouchInteraction=!1,this._elementInfo=new Map,this._monitoredElementCount=0,this._rootNodeFocusListenerCount=new Map,this._windowFocusListener=()=>{this._windowFocused=!0,this._windowFocusTimeoutId=setTimeout(()=>this._windowFocused=!1)},this._stopInputModalityDetector=new Kt.x,this._rootNodeFocusAndBlurListener=f=>{const _=hh(f),w="focus"===f.type?this._onFocus:this._onBlur;for(let S=_;S;S=S.parentElement)w.call(this,f,S)},this._document=a,this._detectionMode=c?.detectionMode||0}monitor(t,r=!1){const i=Bu(t);if(!this._platform.isBrowser||1!==i.nodeType)return nt(null);const a=Nw(i)||this._getDocument(),c=this._elementInfo.get(i);if(c)return r&&(c.checkChildren=!0),c.subject;const f={checkChildren:r,subject:new Kt.x,rootNode:a};return this._elementInfo.set(i,f),this._registerGlobalListeners(f),f.subject}stopMonitoring(t){const r=Bu(t),i=this._elementInfo.get(r);i&&(i.subject.complete(),this._setClasses(r),this._elementInfo.delete(r),this._removeGlobalListeners(i))}focusVia(t,r,i){const a=Bu(t);a===this._getDocument().activeElement?this._getClosestElementsInfo(a).forEach(([f,_])=>this._originChanged(f,r,_)):(this._setOrigin(r),"function"==typeof a.focus&&a.focus(i))}ngOnDestroy(){this._elementInfo.forEach((t,r)=>this.stopMonitoring(r))}_getDocument(){return this._document||document}_getWindow(){return this._getDocument().defaultView||window}_getFocusOrigin(t){return this._origin?this._originFromTouchInteraction?this._shouldBeAttributedToTouch(t)?"touch":"program":this._origin:this._windowFocused&&this._lastFocusOrigin?this._lastFocusOrigin:"program"}_shouldBeAttributedToTouch(t){return 1===this._detectionMode||!!t?.contains(this._inputModalityDetector._mostRecentTarget)}_setClasses(t,r){t.classList.toggle("cdk-focused",!!r),t.classList.toggle("cdk-touch-focused","touch"===r),t.classList.toggle("cdk-keyboard-focused","keyboard"===r),t.classList.toggle("cdk-mouse-focused","mouse"===r),t.classList.toggle("cdk-program-focused","program"===r)}_setOrigin(t,r=!1){this._ngZone.runOutsideAngular(()=>{this._origin=t,this._originFromTouchInteraction="touch"===t&&r,0===this._detectionMode&&(clearTimeout(this._originTimeoutId),this._originTimeoutId=setTimeout(()=>this._origin=null,this._originFromTouchInteraction?650:1))})}_onFocus(t,r){const i=this._elementInfo.get(r),a=hh(t);!i||!i.checkChildren&&r!==a||this._originChanged(r,this._getFocusOrigin(a),i)}_onBlur(t,r){const i=this._elementInfo.get(r);!i||i.checkChildren&&t.relatedTarget instanceof Node&&r.contains(t.relatedTarget)||(this._setClasses(r),this._emitOrigin(i.subject,null))}_emitOrigin(t,r){this._ngZone.run(()=>t.next(r))}_registerGlobalListeners(t){if(!this._platform.isBrowser)return;const r=t.rootNode,i=this._rootNodeFocusListenerCount.get(r)||0;i||this._ngZone.runOutsideAngular(()=>{r.addEventListener("focus",this._rootNodeFocusAndBlurListener,Fp),r.addEventListener("blur",this._rootNodeFocusAndBlurListener,Fp)}),this._rootNodeFocusListenerCount.set(r,i+1),1==++this._monitoredElementCount&&(this._ngZone.runOutsideAngular(()=>{this._getWindow().addEventListener("focus",this._windowFocusListener)}),this._inputModalityDetector.modalityDetected.pipe(kp(this._stopInputModalityDetector)).subscribe(a=>{this._setOrigin(a,!0)}))}_removeGlobalListeners(t){const r=t.rootNode;if(this._rootNodeFocusListenerCount.has(r)){const i=this._rootNodeFocusListenerCount.get(r);i>1?this._rootNodeFocusListenerCount.set(r,i-1):(r.removeEventListener("focus",this._rootNodeFocusAndBlurListener,Fp),r.removeEventListener("blur",this._rootNodeFocusAndBlurListener,Fp),this._rootNodeFocusListenerCount.delete(r))}--this._monitoredElementCount||(this._getWindow().removeEventListener("focus",this._windowFocusListener),this._stopInputModalityDetector.next(),clearTimeout(this._windowFocusTimeoutId),clearTimeout(this._originTimeoutId))}_originChanged(t,r,i){this._setClasses(t,r),this._emitOrigin(i.subject,r),this._lastFocusOrigin=r}_getClosestElementsInfo(t){const r=[];return this._elementInfo.forEach((i,a)=>{(a===t||i.checkChildren&&a.contains(t))&&r.push([a,i])}),r}}return n.\u0275fac=function(t){return new(t||n)(d.LFG(d.R0b),d.LFG(ys),d.LFG(qT),d.LFG(se,8),d.LFG(mE,8))},n.\u0275prov=d.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();const iv="cdk-high-contrast-black-on-white",sv="cdk-high-contrast-white-on-black",ov="cdk-high-contrast-active";let yE=(()=>{class n{constructor(t,r){this._platform=t,this._document=r}getHighContrastMode(){if(!this._platform.isBrowser)return 0;const t=this._document.createElement("div");t.style.backgroundColor="rgb(1,2,3)",t.style.position="absolute",this._document.body.appendChild(t);const r=this._document.defaultView||window,i=r&&r.getComputedStyle?r.getComputedStyle(t):null,a=(i&&i.backgroundColor||"").replace(/ /g,"");switch(t.remove(),a){case"rgb(0,0,0)":return 2;case"rgb(255,255,255)":return 1}return 0}_applyBodyHighContrastModeCssClasses(){if(!this._hasCheckedHighContrastMode&&this._platform.isBrowser&&this._document.body){const t=this._document.body.classList;t.remove(ov),t.remove(iv),t.remove(sv),this._hasCheckedHighContrastMode=!0;const r=this.getHighContrastMode();1===r?(t.add(ov),t.add(iv)):2===r&&(t.add(ov),t.add(sv))}}}return n.\u0275fac=function(t){return new(t||n)(d.LFG(ys),d.LFG(se))},n.\u0275prov=d.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();const Ii=new d.GfV("13.0.0"),vE=new d.GfV("13.0.0"),XT=new d.OlP("mat-sanity-checks",{providedIn:"root",factory:function av(){return!0}});let Di=(()=>{class n{constructor(t,r,i){this._hasDoneGlobalChecks=!1,this._document=i,t._applyBodyHighContrastModeCssClasses(),this._sanityChecks=r,this._hasDoneGlobalChecks||(this._checkDoctypeIsDefined(),this._checkThemeIsPresent(),this._checkCdkVersionMatch(),this._hasDoneGlobalChecks=!0)}_checkIsEnabled(t){return!(!(0,d.X6Q)()||xp())&&("boolean"==typeof this._sanityChecks?this._sanityChecks:!!this._sanityChecks[t])}_checkDoctypeIsDefined(){this._checkIsEnabled("doctype")&&!this._document.doctype&&console.warn("Current document does not have a doctype. This may cause some Angular Material components not to behave as expected.")}_checkThemeIsPresent(){if(!this._checkIsEnabled("theme")||!this._document.body||"function"!=typeof getComputedStyle)return;const t=this._document.createElement("div");t.classList.add("mat-theme-loaded-marker"),this._document.body.appendChild(t);const r=getComputedStyle(t);r&&"none"!==r.display&&console.warn("Could not find Angular Material core theme. Most Material components may not work as expected. For more info refer to the theming guide: https://material.angular.io/guide/theming"),t.remove()}_checkCdkVersionMatch(){this._checkIsEnabled("version")&&vE.full!==Ii.full&&console.warn("The Angular Material version ("+vE.full+") does not match the Angular CDK version ("+Ii.full+").\nPlease ensure the versions of these two packages exactly match.")}}return n.\u0275fac=function(t){return new(t||n)(d.LFG(yE),d.LFG(XT,8),d.LFG(se))},n.\u0275mod=d.oAB({type:n}),n.\u0275inj=d.cJS({imports:[[Yi],Yi]}),n})();function bE(n,e){return class extends n{constructor(...t){super(...t),this.defaultColor=e,this.color=e}get color(){return this._color}set color(t){const r=t||this.defaultColor;r!==this._color&&(this._color&&this._elementRef.nativeElement.classList.remove(`mat-${this._color}`),r&&this._elementRef.nativeElement.classList.add(`mat-${r}`),this._color=r)}}}function EE(n){return class extends n{constructor(...e){super(...e),this.stateChanges=new Kt.x,this.errorState=!1}updateErrorState(){const e=this.errorState,a=(this.errorStateMatcher||this._defaultErrorStateMatcher).isErrorState(this.ngControl?this.ngControl.control:null,this._parentFormGroup||this._parentForm);a!==e&&(this.errorState=a,this.stateChanges.next())}}}let IE=(()=>{class n{isErrorState(t,r){return!!(t&&t.invalid&&(t.touched||r&&r.submitted))}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=d.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),AE=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=d.oAB({type:n}),n.\u0275inj=d.cJS({imports:[[Di,Ly],Di]}),n})();class fv{}const ya="*";function pv(n,e){return{type:7,name:n,definitions:e,options:{}}}function ME(n,e=null){return{type:4,styles:e,timings:n}}function gv(n,e=null){return{type:2,steps:n,options:e}}function vc(n){return{type:6,styles:n,offset:null}}function Hm(n,e,t){return{type:0,name:n,styles:e,options:t}}function mv(n,e,t=null){return{type:1,expr:n,animation:e,options:t}}function cA(n){Promise.resolve().then(n)}class jm{constructor(e=0,t=0){this._onDoneFns=[],this._onStartFns=[],this._onDestroyFns=[],this._originalOnDoneFns=[],this._originalOnStartFns=[],this._started=!1,this._destroyed=!1,this._finished=!1,this._position=0,this.parentPlayer=null,this.totalTime=e+t}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(e=>e()),this._onDoneFns=[])}onStart(e){this._originalOnStartFns.push(e),this._onStartFns.push(e)}onDone(e){this._originalOnDoneFns.push(e),this._onDoneFns.push(e)}onDestroy(e){this._onDestroyFns.push(e)}hasStarted(){return this._started}init(){}play(){this.hasStarted()||(this._onStart(),this.triggerMicrotask()),this._started=!0}triggerMicrotask(){cA(()=>this._onFinish())}_onStart(){this._onStartFns.forEach(e=>e()),this._onStartFns=[]}pause(){}restart(){}finish(){this._onFinish()}destroy(){this._destroyed||(this._destroyed=!0,this.hasStarted()||this._onStart(),this.finish(),this._onDestroyFns.forEach(e=>e()),this._onDestroyFns=[])}reset(){this._started=!1,this._finished=!1,this._onStartFns=this._originalOnStartFns,this._onDoneFns=this._originalOnDoneFns}setPosition(e){this._position=this.totalTime?e*this.totalTime:1}getPosition(){return this.totalTime?this._position/this.totalTime:1}triggerCallback(e){const t="start"==e?this._onStartFns:this._onDoneFns;t.forEach(r=>r()),t.length=0}}class RE{constructor(e){this._onDoneFns=[],this._onStartFns=[],this._finished=!1,this._started=!1,this._destroyed=!1,this._onDestroyFns=[],this.parentPlayer=null,this.totalTime=0,this.players=e;let t=0,r=0,i=0;const a=this.players.length;0==a?cA(()=>this._onFinish()):this.players.forEach(c=>{c.onDone(()=>{++t==a&&this._onFinish()}),c.onDestroy(()=>{++r==a&&this._onDestroy()}),c.onStart(()=>{++i==a&&this._onStart()})}),this.totalTime=this.players.reduce((c,f)=>Math.max(c,f.totalTime),0)}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(e=>e()),this._onDoneFns=[])}init(){this.players.forEach(e=>e.init())}onStart(e){this._onStartFns.push(e)}_onStart(){this.hasStarted()||(this._started=!0,this._onStartFns.forEach(e=>e()),this._onStartFns=[])}onDone(e){this._onDoneFns.push(e)}onDestroy(e){this._onDestroyFns.push(e)}hasStarted(){return this._started}play(){this.parentPlayer||this.init(),this._onStart(),this.players.forEach(e=>e.play())}pause(){this.players.forEach(e=>e.pause())}restart(){this.players.forEach(e=>e.restart())}finish(){this._onFinish(),this.players.forEach(e=>e.finish())}destroy(){this._onDestroy()}_onDestroy(){this._destroyed||(this._destroyed=!0,this._onFinish(),this.players.forEach(e=>e.destroy()),this._onDestroyFns.forEach(e=>e()),this._onDestroyFns=[])}reset(){this.players.forEach(e=>e.reset()),this._destroyed=!1,this._finished=!1,this._started=!1}setPosition(e){const t=e*this.totalTime;this.players.forEach(r=>{const i=r.totalTime?Math.min(1,t/r.totalTime):1;r.setPosition(i)})}getPosition(){const e=this.players.reduce((t,r)=>null===t||r.totalTime>t.totalTime?r:t,null);return null!=e?e.getPosition():0}beforeDestroy(){this.players.forEach(e=>{e.beforeDestroy&&e.beforeDestroy()})}triggerCallback(e){const t="start"==e?this._onStartFns:this._onDoneFns;t.forEach(r=>r()),t.length=0}}function uA(n,e){}class kE{constructor(){this.role="dialog",this.panelClass="",this.hasBackdrop=!0,this.backdropClass="",this.disableClose=!1,this.width="",this.height="",this.maxWidth="80vw",this.data=null,this.ariaDescribedBy=null,this.ariaLabelledBy=null,this.ariaLabel=null,this.autoFocus="first-tabbable",this.restoreFocus=!0,this.closeOnNavigation=!0}}const dA={dialogContainer:pv("dialogContainer",[Hm("void, exit",vc({opacity:0,transform:"scale(0.7)"})),Hm("enter",vc({transform:"none"})),mv("* => enter",ME("150ms cubic-bezier(0, 0, 0.2, 1)",vc({transform:"none",opacity:1}))),mv("* => void, * => exit",ME("75ms cubic-bezier(0.4, 0.0, 0.2, 1)",vc({opacity:0})))])};let OE=(()=>{class n extends qy{constructor(t,r,i,a,c,f,_,w){super(),this._elementRef=t,this._focusTrapFactory=r,this._changeDetectorRef=i,this._config=c,this._interactivityChecker=f,this._ngZone=_,this._focusMonitor=w,this._animationStateChanged=new d.vpe,this._elementFocusedBeforeDialogWasOpened=null,this._closeInteractionType=null,this.attachDomPortal=S=>(this._portalOutlet.hasAttached(),this._portalOutlet.attachDomPortal(S)),this._ariaLabelledBy=c.ariaLabelledBy||null,this._document=a}_initializeWithAttachedContent(){this._setupFocusTrap(),this._capturePreviouslyFocusedElement()}attachComponentPortal(t){return this._portalOutlet.hasAttached(),this._portalOutlet.attachComponentPortal(t)}attachTemplatePortal(t){return this._portalOutlet.hasAttached(),this._portalOutlet.attachTemplatePortal(t)}_recaptureFocus(){this._containsFocus()||this._trapFocus()}_forceFocus(t,r){this._interactivityChecker.isFocusable(t)||(t.tabIndex=-1,this._ngZone.runOutsideAngular(()=>{t.addEventListener("blur",()=>t.removeAttribute("tabindex")),t.addEventListener("mousedown",()=>t.removeAttribute("tabindex"))})),t.focus(r)}_focusByCssSelector(t,r){let i=this._elementRef.nativeElement.querySelector(t);i&&this._forceFocus(i,r)}_trapFocus(){const t=this._elementRef.nativeElement;switch(this._config.autoFocus){case!1:case"dialog":this._containsFocus()||t.focus();break;case!0:case"first-tabbable":this._focusTrap.focusInitialElementWhenReady().then(r=>{r||this._focusDialogContainer()});break;case"first-heading":this._focusByCssSelector('h1, h2, h3, h4, h5, h6, [role="heading"]');break;default:this._focusByCssSelector(this._config.autoFocus)}}_restoreFocus(){const t=this._elementFocusedBeforeDialogWasOpened;if(this._config.restoreFocus&&t&&"function"==typeof t.focus){const r=wm(),i=this._elementRef.nativeElement;(!r||r===this._document.body||r===i||i.contains(r))&&(this._focusMonitor?(this._focusMonitor.focusVia(t,this._closeInteractionType),this._closeInteractionType=null):t.focus())}this._focusTrap&&this._focusTrap.destroy()}_setupFocusTrap(){this._focusTrap=this._focusTrapFactory.create(this._elementRef.nativeElement)}_capturePreviouslyFocusedElement(){this._document&&(this._elementFocusedBeforeDialogWasOpened=wm())}_focusDialogContainer(){this._elementRef.nativeElement.focus&&this._elementRef.nativeElement.focus()}_containsFocus(){const t=this._elementRef.nativeElement,r=wm();return t===r||t.contains(r)}}return n.\u0275fac=function(t){return new(t||n)(d.Y36(d.SBq),d.Y36(hE),d.Y36(d.sBO),d.Y36(se,8),d.Y36(kE),d.Y36(gh),d.Y36(d.R0b),d.Y36(_E))},n.\u0275dir=d.lG2({type:n,viewQuery:function(t,r){if(1&t&&d.Gf(Lw,7),2&t){let i;d.iGM(i=d.CRH())&&(r._portalOutlet=i.first)}},features:[d.qOj]}),n})(),C1=(()=>{class n extends OE{constructor(){super(...arguments),this._state="enter"}_onAnimationDone({toState:t,totalTime:r}){"enter"===t?(this._trapFocus(),this._animationStateChanged.next({state:"opened",totalTime:r})):"exit"===t&&(this._restoreFocus(),this._animationStateChanged.next({state:"closed",totalTime:r}))}_onAnimationStart({toState:t,totalTime:r}){"enter"===t?this._animationStateChanged.next({state:"opening",totalTime:r}):("exit"===t||"void"===t)&&this._animationStateChanged.next({state:"closing",totalTime:r})}_startExitAnimation(){this._state="exit",this._changeDetectorRef.markForCheck()}}return n.\u0275fac=function(){let e;return function(r){return(e||(e=d.n5z(n)))(r||n)}}(),n.\u0275cmp=d.Xpm({type:n,selectors:[["mat-dialog-container"]],hostAttrs:["tabindex","-1","aria-modal","true",1,"mat-dialog-container"],hostVars:6,hostBindings:function(t,r){1&t&&d.WFA("@dialogContainer.start",function(a){return r._onAnimationStart(a)})("@dialogContainer.done",function(a){return r._onAnimationDone(a)}),2&t&&(d.Ikx("id",r._id),d.uIk("role",r._config.role)("aria-labelledby",r._config.ariaLabel?null:r._ariaLabelledBy)("aria-label",r._config.ariaLabel)("aria-describedby",r._config.ariaDescribedBy||null),d.d8E("@dialogContainer",r._state))},features:[d.qOj],decls:1,vars:0,consts:[["cdkPortalOutlet",""]],template:function(t,r){1&t&&d.YNc(0,uA,0,0,"ng-template",0)},dependencies:[Lw],styles:[".mat-dialog-container{display:block;padding:24px;border-radius:4px;box-sizing:border-box;overflow:auto;outline:0;width:100%;height:100%;min-height:inherit;max-height:inherit}.cdk-high-contrast-active .mat-dialog-container{outline:solid 1px}.mat-dialog-content{display:block;margin:0 -24px;padding:0 24px;max-height:65vh;overflow:auto;-webkit-overflow-scrolling:touch}.mat-dialog-title{margin:0 0 20px;display:block}.mat-dialog-actions{padding:8px 0;display:flex;flex-wrap:wrap;min-height:52px;align-items:center;box-sizing:content-box;margin-bottom:-24px}.mat-dialog-actions[align=end]{justify-content:flex-end}.mat-dialog-actions[align=center]{justify-content:center}.mat-dialog-actions .mat-button-base+.mat-button-base,.mat-dialog-actions .mat-mdc-button-base+.mat-mdc-button-base{margin-left:8px}[dir=rtl] .mat-dialog-actions .mat-button-base+.mat-button-base,[dir=rtl] .mat-dialog-actions .mat-mdc-button-base+.mat-mdc-button-base{margin-left:0;margin-right:8px}\n"],encapsulation:2,data:{animation:[dA.dialogContainer]}}),n})(),Ro=0;class PE{constructor(e,t,r="mat-dialog-"+Ro++){this._overlayRef=e,this._containerInstance=t,this.id=r,this.disableClose=this._containerInstance._config.disableClose,this._afterOpened=new Kt.x,this._afterClosed=new Kt.x,this._beforeClosed=new Kt.x,this._state=0,t._id=r,t._animationStateChanged.pipe(Wn(i=>"opened"===i.state),zi(1)).subscribe(()=>{this._afterOpened.next(),this._afterOpened.complete()}),t._animationStateChanged.pipe(Wn(i=>"closed"===i.state),zi(1)).subscribe(()=>{clearTimeout(this._closeFallbackTimeout),this._finishDialogClose()}),e.detachments().subscribe(()=>{this._beforeClosed.next(this._result),this._beforeClosed.complete(),this._afterClosed.next(this._result),this._afterClosed.complete(),this.componentInstance=null,this._overlayRef.dispose()}),e.keydownEvents().pipe(Wn(i=>27===i.keyCode&&!this.disableClose&&!function OT(n,...e){return e.length?e.some(t=>n[t]):n.altKey||n.shiftKey||n.ctrlKey||n.metaKey}(i))).subscribe(i=>{i.preventDefault(),$m(this,"keyboard")}),e.backdropClick().subscribe(()=>{this.disableClose?this._containerInstance._recaptureFocus():$m(this,"mouse")})}close(e){this._result=e,this._containerInstance._animationStateChanged.pipe(Wn(t=>"closing"===t.state),zi(1)).subscribe(t=>{this._beforeClosed.next(e),this._beforeClosed.complete(),this._overlayRef.detachBackdrop(),this._closeFallbackTimeout=setTimeout(()=>this._finishDialogClose(),t.totalTime+100)}),this._state=1,this._containerInstance._startExitAnimation()}afterOpened(){return this._afterOpened}afterClosed(){return this._afterClosed}beforeClosed(){return this._beforeClosed}backdropClick(){return this._overlayRef.backdropClick()}keydownEvents(){return this._overlayRef.keydownEvents()}updatePosition(e){let t=this._getPositionStrategy();return e&&(e.left||e.right)?e.left?t.left(e.left):t.right(e.right):t.centerHorizontally(),e&&(e.top||e.bottom)?e.top?t.top(e.top):t.bottom(e.bottom):t.centerVertically(),this._overlayRef.updatePosition(),this}updateSize(e="",t=""){return this._overlayRef.updateSize({width:e,height:t}),this._overlayRef.updatePosition(),this}addPanelClass(e){return this._overlayRef.addPanelClass(e),this}removePanelClass(e){return this._overlayRef.removePanelClass(e),this}getState(){return this._state}_finishDialogClose(){this._state=2,this._overlayRef.dispose()}_getPositionStrategy(){return this._overlayRef.getConfig().positionStrategy}}function $m(n,e,t){return void 0!==n._containerInstance&&(n._containerInstance._closeInteractionType=e),n.close(t)}const fA=new d.OlP("MatDialogData"),co=new d.OlP("mat-dialog-default-options"),NE=new d.OlP("mat-dialog-scroll-strategy"),gA={provide:NE,deps:[Am],useFactory:function pA(n){return()=>n.scrollStrategies.block()}};let vv=(()=>{class n{constructor(t,r,i,a,c,f,_,w,S,x){this._overlay=t,this._injector=r,this._defaultOptions=i,this._parentDialog=a,this._overlayContainer=c,this._dialogRefConstructor=_,this._dialogContainerType=w,this._dialogDataToken=S,this._animationMode=x,this._openDialogsAtThisLevel=[],this._afterAllClosedAtThisLevel=new Kt.x,this._afterOpenedAtThisLevel=new Kt.x,this._ariaHiddenElements=new Map,this._dialogAnimatingOpen=!1,this.afterAllClosed=ra(()=>this.openDialogs.length?this._getAfterAllClosed():this._getAfterAllClosed().pipe(ps(void 0))),this._scrollStrategy=f}get openDialogs(){return this._parentDialog?this._parentDialog.openDialogs:this._openDialogsAtThisLevel}get afterOpened(){return this._parentDialog?this._parentDialog.afterOpened:this._afterOpenedAtThisLevel}_getAfterAllClosed(){const t=this._parentDialog;return t?t._getAfterAllClosed():this._afterAllClosedAtThisLevel}open(t,r){if(r=function LE(n,e){return{...e,...n}}(r,this._defaultOptions||new kE),r.id&&this.getDialogById(r.id),this._dialogAnimatingOpen)return this._lastDialogRef;const i=this._createOverlay(r),a=this._attachDialogContainer(i,r);if("NoopAnimations"!==this._animationMode){const f=a._animationStateChanged.subscribe(_=>{"opening"===_.state&&(this._dialogAnimatingOpen=!0),"opened"===_.state&&(this._dialogAnimatingOpen=!1,f.unsubscribe())});this._animationStateSubscriptions||(this._animationStateSubscriptions=new ia.w0),this._animationStateSubscriptions.add(f)}const c=this._attachDialogContent(t,a,i,r);return this._lastDialogRef=c,this.openDialogs.length||this._hideNonDialogContentFromAssistiveTechnology(),this.openDialogs.push(c),c.afterClosed().subscribe(()=>this._removeOpenDialog(c)),this.afterOpened.next(c),a._initializeWithAttachedContent(),c}closeAll(){this._closeDialogs(this.openDialogs)}getDialogById(t){return this.openDialogs.find(r=>r.id===t)}ngOnDestroy(){this._closeDialogs(this._openDialogsAtThisLevel),this._afterAllClosedAtThisLevel.complete(),this._afterOpenedAtThisLevel.complete(),this._animationStateSubscriptions&&this._animationStateSubscriptions.unsubscribe()}_createOverlay(t){const r=this._getOverlayConfig(t);return this._overlay.create(r)}_getOverlayConfig(t){const r=new Yy({positionStrategy:this._overlay.position().global(),scrollStrategy:t.scrollStrategy||this._scrollStrategy(),panelClass:t.panelClass,hasBackdrop:t.hasBackdrop,direction:t.direction,minWidth:t.minWidth,minHeight:t.minHeight,maxWidth:t.maxWidth,maxHeight:t.maxHeight,disposeOnNavigation:t.closeOnNavigation});return t.backdropClass&&(r.backdropClass=t.backdropClass),r}_attachDialogContainer(t,r){const a=d.zs3.create({parent:r&&r.viewContainerRef&&r.viewContainerRef.injector||this._injector,providers:[{provide:kE,useValue:r}]}),c=new Dm(this._dialogContainerType,r.viewContainerRef,a,r.componentFactoryResolver);return t.attach(c).instance}_attachDialogContent(t,r,i,a){const c=new this._dialogRefConstructor(i,r,a.id);if(t instanceof d.Rgc)r.attachTemplatePortal(new Gy(t,null,{$implicit:a.data,dialogRef:c}));else{const f=this._createInjector(a,c,r),_=r.attachComponentPortal(new Dm(t,a.viewContainerRef,f));c.componentInstance=_.instance}return c.updateSize(a.width,a.height).updatePosition(a.position),c}_createInjector(t,r,i){const a=t&&t.viewContainerRef&&t.viewContainerRef.injector,c=[{provide:this._dialogContainerType,useValue:i},{provide:this._dialogDataToken,useValue:t.data},{provide:this._dialogRefConstructor,useValue:r}];return t.direction&&(!a||!a.get(Em,null,d.XFs.Optional))&&c.push({provide:Em,useValue:{value:t.direction,change:nt()}}),d.zs3.create({parent:a||this._injector,providers:c})}_removeOpenDialog(t){const r=this.openDialogs.indexOf(t);r>-1&&(this.openDialogs.splice(r,1),this.openDialogs.length||(this._ariaHiddenElements.forEach((i,a)=>{i?a.setAttribute("aria-hidden",i):a.removeAttribute("aria-hidden")}),this._ariaHiddenElements.clear(),this._getAfterAllClosed().next()))}_hideNonDialogContentFromAssistiveTechnology(){const t=this._overlayContainer.getContainerElement();if(t.parentElement){const r=t.parentElement.children;for(let i=r.length-1;i>-1;i--){let a=r[i];a!==t&&"SCRIPT"!==a.nodeName&&"STYLE"!==a.nodeName&&!a.hasAttribute("aria-live")&&(this._ariaHiddenElements.set(a,a.getAttribute("aria-hidden")),a.setAttribute("aria-hidden","true"))}}}_closeDialogs(t){let r=t.length;for(;r--;)t[r].close()}}return n.\u0275fac=function(t){d.$Z()},n.\u0275dir=d.lG2({type:n}),n})(),bv=(()=>{class n extends vv{constructor(t,r,i,a,c,f,_,w){super(t,r,a,f,_,c,PE,C1,fA,w)}}return n.\u0275fac=function(t){return new(t||n)(d.LFG(Am),d.LFG(d.zs3),d.LFG(Ne,8),d.LFG(co,8),d.LFG(NE),d.LFG(n,12),d.LFG(_c),d.LFG(d.QbO,8))},n.\u0275prov=d.Yz7({token:n,factory:n.\u0275fac}),n})(),Up=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=d.oAB({type:n}),n.\u0275inj=d.cJS({providers:[bv,gA],imports:[[WS,Vw,Di],Di]}),n})(),wv=(()=>{class n{create(t){return typeof MutationObserver>"u"?null:new MutationObserver(t)}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=d.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),Ev=(()=>{class n{constructor(t){this._mutationObserverFactory=t,this._observedElements=new Map}ngOnDestroy(){this._observedElements.forEach((t,r)=>this._cleanupObserver(r))}observe(t){const r=Bu(t);return new Xr.y(i=>{const c=this._observeElement(r).subscribe(i);return()=>{c.unsubscribe(),this._unobserveElement(r)}})}_observeElement(t){if(this._observedElements.has(t))this._observedElements.get(t).count++;else{const r=new Kt.x,i=this._mutationObserverFactory.create(a=>r.next(a));i&&i.observe(t,{characterData:!0,childList:!0,subtree:!0}),this._observedElements.set(t,{observer:i,stream:r,count:1})}return this._observedElements.get(t).stream}_unobserveElement(t){this._observedElements.has(t)&&(this._observedElements.get(t).count--,this._observedElements.get(t).count||this._cleanupObserver(t))}_cleanupObserver(t){if(this._observedElements.has(t)){const{observer:r,stream:i}=this._observedElements.get(t);r&&r.disconnect(),i.complete(),this._observedElements.delete(t)}}}return n.\u0275fac=function(t){return new(t||n)(d.LFG(wv))},n.\u0275prov=d.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),cl=(()=>{class n{constructor(t,r,i){this._contentObserver=t,this._elementRef=r,this._ngZone=i,this.event=new d.vpe,this._disabled=!1,this._currentSubscription=null}get disabled(){return this._disabled}set disabled(t){this._disabled=ch(t),this._disabled?this._unsubscribe():this._subscribe()}get debounce(){return this._debounce}set debounce(t){this._debounce=pm(t),this._subscribe()}ngAfterContentInit(){!this._currentSubscription&&!this.disabled&&this._subscribe()}ngOnDestroy(){this._unsubscribe()}_subscribe(){this._unsubscribe();const t=this._contentObserver.observe(this._elementRef);this._ngZone.runOutsideAngular(()=>{this._currentSubscription=(this.debounce?t.pipe(function bc(n,e=Tp.z){return(0,ir.e)((t,r)=>{let i=null,a=null,c=null;const f=()=>{if(i){i.unsubscribe(),i=null;const w=a;a=null,r.next(w)}};function _(){const w=c+n,S=e.now();if(S<w)return i=this.schedule(void 0,w-S),void r.add(i);f()}t.subscribe((0,Pn.x)(r,w=>{a=w,c=e.now(),i||(i=e.schedule(_,n),r.add(i))},()=>{f(),r.complete()},void 0,()=>{a=i=null}))})}(this.debounce)):t).subscribe(this.event)})}_unsubscribe(){this._currentSubscription?.unsubscribe()}}return n.\u0275fac=function(t){return new(t||n)(d.Y36(Ev),d.Y36(d.SBq),d.Y36(d.R0b))},n.\u0275dir=d.lG2({type:n,selectors:[["","cdkObserveContent",""]],inputs:{disabled:["cdkObserveContentDisabled","disabled"],debounce:"debounce"},outputs:{event:"cdkObserveContent"},exportAs:["cdkObserveContent"]}),n})(),vA=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=d.oAB({type:n}),n.\u0275inj=d.cJS({providers:[wv]}),n})();const T1=["connectionContainer"],bA=["inputContainer"],wA=["label"];function EA(n,e){1&n&&(d.ynx(0),d.TgZ(1,"div",14),d._UZ(2,"div",15)(3,"div",16)(4,"div",17),d.qZA(),d.TgZ(5,"div",18),d._UZ(6,"div",15)(7,"div",16)(8,"div",17),d.qZA(),d.BQk())}function CA(n,e){1&n&&(d.TgZ(0,"div",19),d.Hsn(1,1),d.qZA())}function VE(n,e){if(1&n&&(d.ynx(0),d.Hsn(1,2),d.TgZ(2,"span"),d._uU(3),d.qZA(),d.BQk()),2&n){const t=d.oxw(2);d.xp6(3),d.Oqu(t._control.placeholder)}}function A1(n,e){1&n&&d.Hsn(0,3,["*ngSwitchCase","true"])}function BE(n,e){1&n&&(d.TgZ(0,"span",23),d._uU(1," *"),d.qZA())}function IA(n,e){if(1&n){const t=d.EpF();d.TgZ(0,"label",20,21),d.NdJ("cdkObserveContent",function(){d.CHM(t);const i=d.oxw();return d.KtG(i.updateOutlineGap())}),d.YNc(2,VE,4,1,"ng-container",12),d.YNc(3,A1,1,0,"ng-content",12),d.YNc(4,BE,2,0,"span",22),d.qZA()}if(2&n){const t=d.oxw();d.ekj("mat-empty",t._control.empty&&!t._shouldAlwaysFloat())("mat-form-field-empty",t._control.empty&&!t._shouldAlwaysFloat())("mat-accent","accent"==t.color)("mat-warn","warn"==t.color),d.Q6J("cdkObserveContentDisabled","outline"!=t.appearance)("id",t._labelId)("ngSwitch",t._hasLabel()),d.uIk("for",t._control.id)("aria-owns",t._control.id),d.xp6(2),d.Q6J("ngSwitchCase",!1),d.xp6(1),d.Q6J("ngSwitchCase",!0),d.xp6(1),d.Q6J("ngIf",!t.hideRequiredMarker&&t._control.required&&!t._control.disabled)}}function UE(n,e){1&n&&(d.TgZ(0,"div",24),d.Hsn(1,4),d.qZA())}function M1(n,e){if(1&n&&(d.TgZ(0,"div",25),d._UZ(1,"span",26),d.qZA()),2&n){const t=d.oxw();d.xp6(1),d.ekj("mat-accent","accent"==t.color)("mat-warn","warn"==t.color)}}function Cv(n,e){if(1&n&&(d.TgZ(0,"div"),d.Hsn(1,5),d.qZA()),2&n){const t=d.oxw();d.Q6J("@transitionMessages",t._subscriptAnimationState)}}function HE(n,e){if(1&n&&(d.TgZ(0,"div",30),d._uU(1),d.qZA()),2&n){const t=d.oxw(2);d.Q6J("id",t._hintLabelId),d.xp6(1),d.Oqu(t.hintLabel)}}function jE(n,e){if(1&n&&(d.TgZ(0,"div",27),d.YNc(1,HE,2,2,"div",28),d.Hsn(2,6),d._UZ(3,"div",29),d.Hsn(4,7),d.qZA()),2&n){const t=d.oxw();d.Q6J("@transitionMessages",t._subscriptAnimationState),d.xp6(1),d.Q6J("ngIf",t.hintLabel)}}const $E=["*",[["","matPrefix",""]],[["mat-placeholder"]],[["mat-label"]],[["","matSuffix",""]],[["mat-error"]],[["mat-hint",3,"align","end"]],[["mat-hint","align","end"]]],zE=["*","[matPrefix]","mat-placeholder","mat-label","[matSuffix]","mat-error","mat-hint:not([align='end'])","mat-hint[align='end']"],zm=new d.OlP("MatError"),GE={transitionMessages:pv("transitionMessages",[Hm("enter",vc({opacity:1,transform:"translateY(0%)"})),mv("void => enter",[vc({opacity:0,transform:"translateY(-5px)"}),ME("300ms cubic-bezier(0.55, 0, 0.55, 0.2)")])])};let Dv=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275dir=d.lG2({type:n}),n})();const k1=new d.OlP("MatHint");let Sv=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275dir=d.lG2({type:n,selectors:[["mat-label"]]}),n})(),AA=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275dir=d.lG2({type:n,selectors:[["mat-placeholder"]]}),n})();const MA=new d.OlP("MatPrefix"),P1=new d.OlP("MatSuffix");let xA=0;const kA=bE(class{constructor(n){this._elementRef=n}},"primary"),Gm=new d.OlP("MAT_FORM_FIELD_DEFAULT_OPTIONS"),qE=new d.OlP("MatFormField");let OA=(()=>{class n extends kA{constructor(t,r,i,a,c,f,_){super(t),this._changeDetectorRef=r,this._dir=i,this._defaults=a,this._platform=c,this._ngZone=f,this._outlineGapCalculationNeededImmediately=!1,this._outlineGapCalculationNeededOnStable=!1,this._destroyed=new Kt.x,this._showAlwaysAnimate=!1,this._subscriptAnimationState="",this._hintLabel="",this._hintLabelId="mat-hint-"+xA++,this._labelId="mat-form-field-label-"+xA++,this.floatLabel=this._getDefaultFloatLabelState(),this._animationsEnabled="NoopAnimations"!==_,this.appearance=a&&a.appearance?a.appearance:"legacy",this._hideRequiredMarker=!(!a||null==a.hideRequiredMarker)&&a.hideRequiredMarker}get appearance(){return this._appearance}set appearance(t){const r=this._appearance;this._appearance=t||this._defaults&&this._defaults.appearance||"legacy","outline"===this._appearance&&r!==t&&(this._outlineGapCalculationNeededOnStable=!0)}get hideRequiredMarker(){return this._hideRequiredMarker}set hideRequiredMarker(t){this._hideRequiredMarker=ch(t)}_shouldAlwaysFloat(){return"always"===this.floatLabel&&!this._showAlwaysAnimate}_canLabelFloat(){return"never"!==this.floatLabel}get hintLabel(){return this._hintLabel}set hintLabel(t){this._hintLabel=t,this._processHints()}get floatLabel(){return"legacy"!==this.appearance&&"never"===this._floatLabel?"auto":this._floatLabel}set floatLabel(t){t!==this._floatLabel&&(this._floatLabel=t||this._getDefaultFloatLabelState(),this._changeDetectorRef.markForCheck())}get _control(){return this._explicitFormFieldControl||this._controlNonStatic||this._controlStatic}set _control(t){this._explicitFormFieldControl=t}getLabelId(){return this._hasFloatingLabel()?this._labelId:null}getConnectedOverlayOrigin(){return this._connectionContainerRef||this._elementRef}ngAfterContentInit(){this._validateControlChild();const t=this._control;t.controlType&&this._elementRef.nativeElement.classList.add(`mat-form-field-type-${t.controlType}`),t.stateChanges.pipe(ps(null)).subscribe(()=>{this._validatePlaceholders(),this._syncDescribedByIds(),this._changeDetectorRef.markForCheck()}),t.ngControl&&t.ngControl.valueChanges&&t.ngControl.valueChanges.pipe(kp(this._destroyed)).subscribe(()=>this._changeDetectorRef.markForCheck()),this._ngZone.runOutsideAngular(()=>{this._ngZone.onStable.pipe(kp(this._destroyed)).subscribe(()=>{this._outlineGapCalculationNeededOnStable&&this.updateOutlineGap()})}),(0,Wy.T)(this._prefixChildren.changes,this._suffixChildren.changes).subscribe(()=>{this._outlineGapCalculationNeededOnStable=!0,this._changeDetectorRef.markForCheck()}),this._hintChildren.changes.pipe(ps(null)).subscribe(()=>{this._processHints(),this._changeDetectorRef.markForCheck()}),this._errorChildren.changes.pipe(ps(null)).subscribe(()=>{this._syncDescribedByIds(),this._changeDetectorRef.markForCheck()}),this._dir&&this._dir.change.pipe(kp(this._destroyed)).subscribe(()=>{"function"==typeof requestAnimationFrame?this._ngZone.runOutsideAngular(()=>{requestAnimationFrame(()=>this.updateOutlineGap())}):this.updateOutlineGap()})}ngAfterContentChecked(){this._validateControlChild(),this._outlineGapCalculationNeededImmediately&&this.updateOutlineGap()}ngAfterViewInit(){this._subscriptAnimationState="enter",this._changeDetectorRef.detectChanges()}ngOnDestroy(){this._destroyed.next(),this._destroyed.complete()}_shouldForward(t){const r=this._control?this._control.ngControl:null;return r&&r[t]}_hasPlaceholder(){return!!(this._control&&this._control.placeholder||this._placeholderChild)}_hasLabel(){return!(!this._labelChildNonStatic&&!this._labelChildStatic)}_shouldLabelFloat(){return this._canLabelFloat()&&(this._control&&this._control.shouldLabelFloat||this._shouldAlwaysFloat())}_hideControlPlaceholder(){return"legacy"===this.appearance&&!this._hasLabel()||this._hasLabel()&&!this._shouldLabelFloat()}_hasFloatingLabel(){return this._hasLabel()||"legacy"===this.appearance&&this._hasPlaceholder()}_getDisplayedMessages(){return this._errorChildren&&this._errorChildren.length>0&&this._control.errorState?"error":"hint"}_animateAndLockLabel(){this._hasFloatingLabel()&&this._canLabelFloat()&&(this._animationsEnabled&&this._label&&(this._showAlwaysAnimate=!0,uh(this._label.nativeElement,"transitionend").pipe(zi(1)).subscribe(()=>{this._showAlwaysAnimate=!1})),this.floatLabel="always",this._changeDetectorRef.markForCheck())}_validatePlaceholders(){}_processHints(){this._validateHints(),this._syncDescribedByIds()}_validateHints(){}_getDefaultFloatLabelState(){return this._defaults&&this._defaults.floatLabel||"auto"}_syncDescribedByIds(){if(this._control){let t=[];if(this._control.userAriaDescribedBy&&"string"==typeof this._control.userAriaDescribedBy&&t.push(...this._control.userAriaDescribedBy.split(" ")),"hint"===this._getDisplayedMessages()){const r=this._hintChildren?this._hintChildren.find(a=>"start"===a.align):null,i=this._hintChildren?this._hintChildren.find(a=>"end"===a.align):null;r?t.push(r.id):this._hintLabel&&t.push(this._hintLabelId),i&&t.push(i.id)}else this._errorChildren&&t.push(...this._errorChildren.map(r=>r.id));this._control.setDescribedByIds(t)}}_validateControlChild(){}updateOutlineGap(){const t=this._label?this._label.nativeElement:null;if(!("outline"===this.appearance&&t&&t.children.length&&t.textContent.trim()&&this._platform.isBrowser))return;if(!this._isAttachedToDOM())return void(this._outlineGapCalculationNeededImmediately=!0);let r=0,i=0;const a=this._connectionContainerRef.nativeElement,c=a.querySelectorAll(".mat-form-field-outline-start"),f=a.querySelectorAll(".mat-form-field-outline-gap");if(this._label&&this._label.nativeElement.children.length){const _=a.getBoundingClientRect();if(0===_.width&&0===_.height)return this._outlineGapCalculationNeededOnStable=!0,void(this._outlineGapCalculationNeededImmediately=!1);const w=this._getStartEnd(_),S=t.children,x=this._getStartEnd(S[0].getBoundingClientRect());let L=0;for(let U=0;U<S.length;U++)L+=S[U].offsetWidth;r=Math.abs(x-w)-5,i=L>0?.75*L+10:0}for(let _=0;_<c.length;_++)c[_].style.width=`${r}px`;for(let _=0;_<f.length;_++)f[_].style.width=`${i}px`;this._outlineGapCalculationNeededOnStable=this._outlineGapCalculationNeededImmediately=!1}_getStartEnd(t){return this._dir&&"rtl"===this._dir.value?t.right:t.left}_isAttachedToDOM(){const t=this._elementRef.nativeElement;if(t.getRootNode){const r=t.getRootNode();return r&&r!==t}return document.documentElement.contains(t)}}return n.\u0275fac=function(t){return new(t||n)(d.Y36(d.SBq),d.Y36(d.sBO),d.Y36(Em,8),d.Y36(Gm,8),d.Y36(ys),d.Y36(d.R0b),d.Y36(d.QbO,8))},n.\u0275cmp=d.Xpm({type:n,selectors:[["mat-form-field"]],contentQueries:function(t,r,i){if(1&t&&(d.Suo(i,Dv,5),d.Suo(i,Dv,7),d.Suo(i,Sv,5),d.Suo(i,Sv,7),d.Suo(i,AA,5),d.Suo(i,zm,5),d.Suo(i,k1,5),d.Suo(i,MA,5),d.Suo(i,P1,5)),2&t){let a;d.iGM(a=d.CRH())&&(r._controlNonStatic=a.first),d.iGM(a=d.CRH())&&(r._controlStatic=a.first),d.iGM(a=d.CRH())&&(r._labelChildNonStatic=a.first),d.iGM(a=d.CRH())&&(r._labelChildStatic=a.first),d.iGM(a=d.CRH())&&(r._placeholderChild=a.first),d.iGM(a=d.CRH())&&(r._errorChildren=a),d.iGM(a=d.CRH())&&(r._hintChildren=a),d.iGM(a=d.CRH())&&(r._prefixChildren=a),d.iGM(a=d.CRH())&&(r._suffixChildren=a)}},viewQuery:function(t,r){if(1&t&&(d.Gf(T1,7),d.Gf(bA,5),d.Gf(wA,5)),2&t){let i;d.iGM(i=d.CRH())&&(r._connectionContainerRef=i.first),d.iGM(i=d.CRH())&&(r._inputContainerRef=i.first),d.iGM(i=d.CRH())&&(r._label=i.first)}},hostAttrs:[1,"mat-form-field"],hostVars:40,hostBindings:function(t,r){2&t&&d.ekj("mat-form-field-appearance-standard","standard"==r.appearance)("mat-form-field-appearance-fill","fill"==r.appearance)("mat-form-field-appearance-outline","outline"==r.appearance)("mat-form-field-appearance-legacy","legacy"==r.appearance)("mat-form-field-invalid",r._control.errorState)("mat-form-field-can-float",r._canLabelFloat())("mat-form-field-should-float",r._shouldLabelFloat())("mat-form-field-has-label",r._hasFloatingLabel())("mat-form-field-hide-placeholder",r._hideControlPlaceholder())("mat-form-field-disabled",r._control.disabled)("mat-form-field-autofilled",r._control.autofilled)("mat-focused",r._control.focused)("ng-untouched",r._shouldForward("untouched"))("ng-touched",r._shouldForward("touched"))("ng-pristine",r._shouldForward("pristine"))("ng-dirty",r._shouldForward("dirty"))("ng-valid",r._shouldForward("valid"))("ng-invalid",r._shouldForward("invalid"))("ng-pending",r._shouldForward("pending"))("_mat-animation-noopable",!r._animationsEnabled)},inputs:{color:"color",appearance:"appearance",hideRequiredMarker:"hideRequiredMarker",hintLabel:"hintLabel",floatLabel:"floatLabel"},exportAs:["matFormField"],features:[d._Bn([{provide:qE,useExisting:n}]),d.qOj],ngContentSelectors:zE,decls:15,vars:8,consts:[[1,"mat-form-field-wrapper"],[1,"mat-form-field-flex",3,"click"],["connectionContainer",""],[4,"ngIf"],["class","mat-form-field-prefix",4,"ngIf"],[1,"mat-form-field-infix"],["inputContainer",""],[1,"mat-form-field-label-wrapper"],["class","mat-form-field-label",3,"cdkObserveContentDisabled","id","mat-empty","mat-form-field-empty","mat-accent","mat-warn","ngSwitch","cdkObserveContent",4,"ngIf"],["class","mat-form-field-suffix",4,"ngIf"],["class","mat-form-field-underline",4,"ngIf"],[1,"mat-form-field-subscript-wrapper",3,"ngSwitch"],[4,"ngSwitchCase"],["class","mat-form-field-hint-wrapper",4,"ngSwitchCase"],[1,"mat-form-field-outline"],[1,"mat-form-field-outline-start"],[1,"mat-form-field-outline-gap"],[1,"mat-form-field-outline-end"],[1,"mat-form-field-outline","mat-form-field-outline-thick"],[1,"mat-form-field-prefix"],[1,"mat-form-field-label",3,"cdkObserveContentDisabled","id","ngSwitch","cdkObserveContent"],["label",""],["class","mat-placeholder-required mat-form-field-required-marker","aria-hidden","true",4,"ngIf"],["aria-hidden","true",1,"mat-placeholder-required","mat-form-field-required-marker"],[1,"mat-form-field-suffix"],[1,"mat-form-field-underline"],[1,"mat-form-field-ripple"],[1,"mat-form-field-hint-wrapper"],["class","mat-hint",3,"id",4,"ngIf"],[1,"mat-form-field-hint-spacer"],[1,"mat-hint",3,"id"]],template:function(t,r){1&t&&(d.F$t($E),d.TgZ(0,"div",0)(1,"div",1,2),d.NdJ("click",function(a){return r._control.onContainerClick&&r._control.onContainerClick(a)}),d.YNc(3,EA,9,0,"ng-container",3),d.YNc(4,CA,2,0,"div",4),d.TgZ(5,"div",5,6),d.Hsn(7),d.TgZ(8,"span",7),d.YNc(9,IA,5,16,"label",8),d.qZA()(),d.YNc(10,UE,2,0,"div",9),d.qZA(),d.YNc(11,M1,2,4,"div",10),d.TgZ(12,"div",11),d.YNc(13,Cv,2,1,"div",12),d.YNc(14,jE,5,2,"div",13),d.qZA()()),2&t&&(d.xp6(3),d.Q6J("ngIf","outline"==r.appearance),d.xp6(1),d.Q6J("ngIf",r._prefixChildren.length),d.xp6(5),d.Q6J("ngIf",r._hasFloatingLabel()),d.xp6(1),d.Q6J("ngIf",r._suffixChildren.length),d.xp6(1),d.Q6J("ngIf","outline"!=r.appearance),d.xp6(1),d.Q6J("ngSwitch",r._getDisplayedMessages()),d.xp6(1),d.Q6J("ngSwitchCase","error"),d.xp6(1),d.Q6J("ngSwitchCase","hint"))},dependencies:[nr,Xs,cl,jo],styles:[".mat-form-field{display:inline-block;position:relative;text-align:left}[dir=rtl] .mat-form-field{text-align:right}.mat-form-field-wrapper{position:relative}.mat-form-field-flex{display:inline-flex;align-items:baseline;box-sizing:border-box;width:100%}.mat-form-field-prefix,.mat-form-field-suffix{white-space:nowrap;flex:none;position:relative}.mat-form-field-infix{display:block;position:relative;flex:auto;min-width:0;width:180px}.cdk-high-contrast-active .mat-form-field-infix{border-image:linear-gradient(transparent, transparent)}.mat-form-field-label-wrapper{position:absolute;left:0;box-sizing:content-box;width:100%;height:100%;overflow:hidden;pointer-events:none}[dir=rtl] .mat-form-field-label-wrapper{left:auto;right:0}.mat-form-field-label{position:absolute;left:0;font:inherit;pointer-events:none;width:100%;white-space:nowrap;text-overflow:ellipsis;overflow:hidden;transform-origin:0 0;transition:transform 400ms cubic-bezier(0.25, 0.8, 0.25, 1),color 400ms cubic-bezier(0.25, 0.8, 0.25, 1),width 400ms cubic-bezier(0.25, 0.8, 0.25, 1);display:none}[dir=rtl] .mat-form-field-label{transform-origin:100% 0;left:auto;right:0}.mat-form-field-empty.mat-form-field-label,.mat-form-field-can-float.mat-form-field-should-float .mat-form-field-label{display:block}.mat-form-field-autofill-control:-webkit-autofill+.mat-form-field-label-wrapper .mat-form-field-label{display:none}.mat-form-field-can-float .mat-form-field-autofill-control:-webkit-autofill+.mat-form-field-label-wrapper .mat-form-field-label{display:block;transition:none}.mat-input-server:focus+.mat-form-field-label-wrapper .mat-form-field-label,.mat-input-server[placeholder]:not(:placeholder-shown)+.mat-form-field-label-wrapper .mat-form-field-label{display:none}.mat-form-field-can-float .mat-input-server:focus+.mat-form-field-label-wrapper .mat-form-field-label,.mat-form-field-can-float .mat-input-server[placeholder]:not(:placeholder-shown)+.mat-form-field-label-wrapper .mat-form-field-label{display:block}.mat-form-field-label:not(.mat-form-field-empty){transition:none}.mat-form-field-underline{position:absolute;width:100%;pointer-events:none;transform:scale3d(1, 1.0001, 1)}.mat-form-field-ripple{position:absolute;left:0;width:100%;transform-origin:50%;transform:scaleX(0.5);opacity:0;transition:background-color 300ms cubic-bezier(0.55, 0, 0.55, 0.2)}.mat-form-field.mat-focused .mat-form-field-ripple,.mat-form-field.mat-form-field-invalid .mat-form-field-ripple{opacity:1;transform:none;transition:transform 300ms cubic-bezier(0.25, 0.8, 0.25, 1),opacity 100ms cubic-bezier(0.25, 0.8, 0.25, 1),background-color 300ms cubic-bezier(0.25, 0.8, 0.25, 1)}.mat-form-field-subscript-wrapper{position:absolute;box-sizing:border-box;width:100%;overflow:hidden}.mat-form-field-subscript-wrapper .mat-icon,.mat-form-field-label-wrapper .mat-icon{width:1em;height:1em;font-size:inherit;vertical-align:baseline}.mat-form-field-hint-wrapper{display:flex}.mat-form-field-hint-spacer{flex:1 0 1em}.mat-error{display:block}.mat-form-field-control-wrapper{position:relative}.mat-form-field-hint-end{order:1}.mat-form-field._mat-animation-noopable .mat-form-field-label,.mat-form-field._mat-animation-noopable .mat-form-field-ripple{transition:none}\n",'.mat-form-field-appearance-fill .mat-form-field-flex{border-radius:4px 4px 0 0;padding:.75em .75em 0 .75em}.cdk-high-contrast-active .mat-form-field-appearance-fill .mat-form-field-flex{outline:solid 1px}.cdk-high-contrast-active .mat-form-field-appearance-fill.mat-focused .mat-form-field-flex{outline:dashed 3px}.mat-form-field-appearance-fill .mat-form-field-underline::before{content:"";display:block;position:absolute;bottom:0;height:1px;width:100%}.mat-form-field-appearance-fill .mat-form-field-ripple{bottom:0;height:2px}.cdk-high-contrast-active .mat-form-field-appearance-fill .mat-form-field-ripple{height:0}.mat-form-field-appearance-fill:not(.mat-form-field-disabled) .mat-form-field-flex:hover~.mat-form-field-underline .mat-form-field-ripple{opacity:1;transform:none;transition:opacity 600ms cubic-bezier(0.25, 0.8, 0.25, 1)}.mat-form-field-appearance-fill._mat-animation-noopable:not(.mat-form-field-disabled) .mat-form-field-flex:hover~.mat-form-field-underline .mat-form-field-ripple{transition:none}.mat-form-field-appearance-fill .mat-form-field-subscript-wrapper{padding:0 1em}\n','.mat-input-element{font:inherit;background:transparent;color:currentColor;border:none;outline:none;padding:0;margin:0;width:100%;max-width:100%;vertical-align:bottom;text-align:inherit;box-sizing:content-box}.mat-input-element:-moz-ui-invalid{box-shadow:none}.mat-input-element,.mat-input-element::-webkit-search-cancel-button,.mat-input-element::-webkit-search-decoration,.mat-input-element::-webkit-search-results-button,.mat-input-element::-webkit-search-results-decoration{-webkit-appearance:none}.mat-input-element::-webkit-contacts-auto-fill-button,.mat-input-element::-webkit-caps-lock-indicator,.mat-input-element:not([type=password])::-webkit-credentials-auto-fill-button{visibility:hidden}.mat-input-element[type=date],.mat-input-element[type=datetime],.mat-input-element[type=datetime-local],.mat-input-element[type=month],.mat-input-element[type=week],.mat-input-element[type=time]{line-height:1}.mat-input-element[type=date]::after,.mat-input-element[type=datetime]::after,.mat-input-element[type=datetime-local]::after,.mat-input-element[type=month]::after,.mat-input-element[type=week]::after,.mat-input-element[type=time]::after{content:" ";white-space:pre;width:1px}.mat-input-element::-webkit-inner-spin-button,.mat-input-element::-webkit-calendar-picker-indicator,.mat-input-element::-webkit-clear-button{font-size:.75em}.mat-input-element::placeholder{-webkit-user-select:none;-moz-user-select:none;user-select:none;transition:color 400ms 133.3333333333ms cubic-bezier(0.25, 0.8, 0.25, 1)}.mat-input-element::-moz-placeholder{-webkit-user-select:none;-moz-user-select:none;user-select:none;transition:color 400ms 133.3333333333ms cubic-bezier(0.25, 0.8, 0.25, 1)}.mat-input-element::-webkit-input-placeholder{-webkit-user-select:none;-moz-user-select:none;user-select:none;transition:color 400ms 133.3333333333ms cubic-bezier(0.25, 0.8, 0.25, 1)}.mat-input-element:-ms-input-placeholder{-webkit-user-select:none;-moz-user-select:none;user-select:none;transition:color 400ms 133.3333333333ms cubic-bezier(0.25, 0.8, 0.25, 1)}.mat-form-field-hide-placeholder .mat-input-element::placeholder{color:transparent !important;-webkit-text-fill-color:transparent;transition:none}.cdk-high-contrast-active .mat-form-field-hide-placeholder .mat-input-element::placeholder{opacity:0}.mat-form-field-hide-placeholder .mat-input-element::-moz-placeholder{color:transparent !important;-webkit-text-fill-color:transparent;transition:none}.cdk-high-contrast-active .mat-form-field-hide-placeholder .mat-input-element::-moz-placeholder{opacity:0}.mat-form-field-hide-placeholder .mat-input-element::-webkit-input-placeholder{color:transparent !important;-webkit-text-fill-color:transparent;transition:none}.cdk-high-contrast-active .mat-form-field-hide-placeholder .mat-input-element::-webkit-input-placeholder{opacity:0}.mat-form-field-hide-placeholder .mat-input-element:-ms-input-placeholder{color:transparent !important;-webkit-text-fill-color:transparent;transition:none}.cdk-high-contrast-active .mat-form-field-hide-placeholder .mat-input-element:-ms-input-placeholder{opacity:0}textarea.mat-input-element{resize:vertical;overflow:auto}textarea.mat-input-element.cdk-textarea-autosize{resize:none}textarea.mat-input-element{padding:2px 0;margin:-2px 0}select.mat-input-element{-moz-appearance:none;-webkit-appearance:none;position:relative;background-color:transparent;display:inline-flex;box-sizing:border-box;padding-top:1em;top:-1em;margin-bottom:-1em}select.mat-input-element::-moz-focus-inner{border:0}select.mat-input-element:not(:disabled){cursor:pointer}.mat-form-field-type-mat-native-select .mat-form-field-infix::after{content:"";width:0;height:0;border-left:5px solid transparent;border-right:5px solid transparent;border-top:5px solid;position:absolute;top:50%;right:0;margin-top:-2.5px;pointer-events:none}[dir=rtl] .mat-form-field-type-mat-native-select .mat-form-field-infix::after{right:auto;left:0}.mat-form-field-type-mat-native-select .mat-input-element{padding-right:15px}[dir=rtl] .mat-form-field-type-mat-native-select .mat-input-element{padding-right:0;padding-left:15px}.mat-form-field-type-mat-native-select .mat-form-field-label-wrapper{max-width:calc(100% - 10px)}.mat-form-field-type-mat-native-select.mat-form-field-appearance-outline .mat-form-field-infix::after{margin-top:-5px}.mat-form-field-type-mat-native-select.mat-form-field-appearance-fill .mat-form-field-infix::after{margin-top:-10px}\n',".mat-form-field-appearance-legacy .mat-form-field-label{transform:perspective(100px)}.mat-form-field-appearance-legacy .mat-form-field-prefix .mat-icon,.mat-form-field-appearance-legacy .mat-form-field-suffix .mat-icon{width:1em}.mat-form-field-appearance-legacy .mat-form-field-prefix .mat-icon-button,.mat-form-field-appearance-legacy .mat-form-field-suffix .mat-icon-button{font:inherit;vertical-align:baseline}.mat-form-field-appearance-legacy .mat-form-field-prefix .mat-icon-button .mat-icon,.mat-form-field-appearance-legacy .mat-form-field-suffix .mat-icon-button .mat-icon{font-size:inherit}.mat-form-field-appearance-legacy .mat-form-field-underline{height:1px}.cdk-high-contrast-active .mat-form-field-appearance-legacy .mat-form-field-underline{height:0;border-top:solid 1px}.mat-form-field-appearance-legacy .mat-form-field-ripple{top:0;height:2px;overflow:hidden}.cdk-high-contrast-active .mat-form-field-appearance-legacy .mat-form-field-ripple{height:0;border-top:solid 2px}.mat-form-field-appearance-legacy.mat-form-field-disabled .mat-form-field-underline{background-position:0;background-color:transparent}.cdk-high-contrast-active .mat-form-field-appearance-legacy.mat-form-field-disabled .mat-form-field-underline{border-top-style:dotted;border-top-width:2px}.mat-form-field-appearance-legacy.mat-form-field-invalid:not(.mat-focused) .mat-form-field-ripple{height:1px}\n",".mat-form-field-appearance-outline .mat-form-field-wrapper{margin:.25em 0}.mat-form-field-appearance-outline .mat-form-field-flex{padding:0 .75em 0 .75em;margin-top:-0.25em;position:relative}.mat-form-field-appearance-outline .mat-form-field-prefix,.mat-form-field-appearance-outline .mat-form-field-suffix{top:.25em}.mat-form-field-appearance-outline .mat-form-field-outline{display:flex;position:absolute;top:.25em;left:0;right:0;bottom:0;pointer-events:none}.mat-form-field-appearance-outline .mat-form-field-outline-start,.mat-form-field-appearance-outline .mat-form-field-outline-end{border:1px solid currentColor;min-width:5px}.mat-form-field-appearance-outline .mat-form-field-outline-start{border-radius:5px 0 0 5px;border-right-style:none}[dir=rtl] .mat-form-field-appearance-outline .mat-form-field-outline-start{border-right-style:solid;border-left-style:none;border-radius:0 5px 5px 0}.mat-form-field-appearance-outline .mat-form-field-outline-end{border-radius:0 5px 5px 0;border-left-style:none;flex-grow:1}[dir=rtl] .mat-form-field-appearance-outline .mat-form-field-outline-end{border-left-style:solid;border-right-style:none;border-radius:5px 0 0 5px}.mat-form-field-appearance-outline .mat-form-field-outline-gap{border-radius:.000001px;border:1px solid currentColor;border-left-style:none;border-right-style:none}.mat-form-field-appearance-outline.mat-form-field-can-float.mat-form-field-should-float .mat-form-field-outline-gap{border-top-color:transparent}.mat-form-field-appearance-outline .mat-form-field-outline-thick{opacity:0}.mat-form-field-appearance-outline .mat-form-field-outline-thick .mat-form-field-outline-start,.mat-form-field-appearance-outline .mat-form-field-outline-thick .mat-form-field-outline-end,.mat-form-field-appearance-outline .mat-form-field-outline-thick .mat-form-field-outline-gap{border-width:2px}.mat-form-field-appearance-outline.mat-focused .mat-form-field-outline,.mat-form-field-appearance-outline.mat-form-field-invalid .mat-form-field-outline{opacity:0;transition:opacity 100ms cubic-bezier(0.25, 0.8, 0.25, 1)}.mat-form-field-appearance-outline.mat-focused .mat-form-field-outline-thick,.mat-form-field-appearance-outline.mat-form-field-invalid .mat-form-field-outline-thick{opacity:1}.cdk-high-contrast-active .mat-form-field-appearance-outline.mat-focused .mat-form-field-outline-thick{border:3px dashed}.mat-form-field-appearance-outline:not(.mat-form-field-disabled) .mat-form-field-flex:hover .mat-form-field-outline{opacity:0;transition:opacity 600ms cubic-bezier(0.25, 0.8, 0.25, 1)}.mat-form-field-appearance-outline:not(.mat-form-field-disabled) .mat-form-field-flex:hover .mat-form-field-outline-thick{opacity:1}.mat-form-field-appearance-outline .mat-form-field-subscript-wrapper{padding:0 1em}.mat-form-field-appearance-outline._mat-animation-noopable:not(.mat-form-field-disabled) .mat-form-field-flex:hover~.mat-form-field-outline,.mat-form-field-appearance-outline._mat-animation-noopable .mat-form-field-outline,.mat-form-field-appearance-outline._mat-animation-noopable .mat-form-field-outline-start,.mat-form-field-appearance-outline._mat-animation-noopable .mat-form-field-outline-end,.mat-form-field-appearance-outline._mat-animation-noopable .mat-form-field-outline-gap{transition:none}\n",".mat-form-field-appearance-standard .mat-form-field-flex{padding-top:.75em}.mat-form-field-appearance-standard .mat-form-field-underline{height:1px}.cdk-high-contrast-active .mat-form-field-appearance-standard .mat-form-field-underline{height:0;border-top:solid 1px}.mat-form-field-appearance-standard .mat-form-field-ripple{bottom:0;height:2px}.cdk-high-contrast-active .mat-form-field-appearance-standard .mat-form-field-ripple{height:0;border-top:solid 2px}.mat-form-field-appearance-standard.mat-form-field-disabled .mat-form-field-underline{background-position:0;background-color:transparent}.cdk-high-contrast-active .mat-form-field-appearance-standard.mat-form-field-disabled .mat-form-field-underline{border-top-style:dotted;border-top-width:2px}.mat-form-field-appearance-standard:not(.mat-form-field-disabled) .mat-form-field-flex:hover~.mat-form-field-underline .mat-form-field-ripple{opacity:1;transform:none;transition:opacity 600ms cubic-bezier(0.25, 0.8, 0.25, 1)}.mat-form-field-appearance-standard._mat-animation-noopable:not(.mat-form-field-disabled) .mat-form-field-flex:hover~.mat-form-field-underline .mat-form-field-ripple{transition:none}\n"],encapsulation:2,data:{animation:[GE.transitionMessages]},changeDetection:0}),n})(),_h=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=d.oAB({type:n}),n.\u0275inj=d.cJS({imports:[[Ts,Di,vA],Di]}),n})();const wc=bm({passive:!0});let WE=(()=>{class n{constructor(t,r){this._platform=t,this._ngZone=r,this._monitoredElements=new Map}monitor(t){if(!this._platform.isBrowser)return vi.E;const r=Bu(t),i=this._monitoredElements.get(r);if(i)return i.subject;const a=new Kt.x,c="cdk-text-field-autofilled",f=_=>{"cdk-text-field-autofill-start"!==_.animationName||r.classList.contains(c)?"cdk-text-field-autofill-end"===_.animationName&&r.classList.contains(c)&&(r.classList.remove(c),this._ngZone.run(()=>a.next({target:_.target,isAutofilled:!1}))):(r.classList.add(c),this._ngZone.run(()=>a.next({target:_.target,isAutofilled:!0})))};return this._ngZone.runOutsideAngular(()=>{r.addEventListener("animationstart",f,wc),r.classList.add("cdk-text-field-autofill-monitored")}),this._monitoredElements.set(r,{subject:a,unlisten:()=>{r.removeEventListener("animationstart",f,wc)}}),a}stopMonitoring(t){const r=Bu(t),i=this._monitoredElements.get(r);i&&(i.unlisten(),i.subject.complete(),r.classList.remove("cdk-text-field-autofill-monitored"),r.classList.remove("cdk-text-field-autofilled"),this._monitoredElements.delete(r))}ngOnDestroy(){this._monitoredElements.forEach((t,r)=>this.stopMonitoring(r))}}return n.\u0275fac=function(t){return new(t||n)(d.LFG(ys),d.LFG(d.R0b))},n.\u0275prov=d.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),YE=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=d.oAB({type:n}),n.\u0275inj=d.cJS({imports:[[Ly]]}),n})();const Tv=new d.OlP("MAT_INPUT_VALUE_ACCESSOR"),qm=["button","checkbox","file","hidden","image","radio","range","reset","submit"];let F1=0;const L1=EE(class{constructor(n,e,t,r){this._defaultErrorStateMatcher=n,this._parentForm=e,this._parentFormGroup=t,this.ngControl=r}});let V1=(()=>{class n extends L1{constructor(t,r,i,a,c,f,_,w,S,x){super(f,a,c,i),this._elementRef=t,this._platform=r,this._autofillMonitor=w,this._formField=x,this._uid="mat-input-"+F1++,this.focused=!1,this.stateChanges=new Kt.x,this.controlType="mat-input",this.autofilled=!1,this._disabled=!1,this._type="text",this._readonly=!1,this._neverEmptyInputTypes=["date","datetime","datetime-local","month","time","week"].filter(W=>kw().has(W));const L=this._elementRef.nativeElement,U=L.nodeName.toLowerCase();this._inputValueAccessor=_||L,this._previousNativeValue=this.value,this.id=this.id,r.IOS&&S.runOutsideAngular(()=>{t.nativeElement.addEventListener("keyup",W=>{const ie=W.target;!ie.value&&0===ie.selectionStart&&0===ie.selectionEnd&&(ie.setSelectionRange(1,1),ie.setSelectionRange(0,0))})}),this._isServer=!this._platform.isBrowser,this._isNativeSelect="select"===U,this._isTextarea="textarea"===U,this._isInFormField=!!x,this._isNativeSelect&&(this.controlType=L.multiple?"mat-native-select-multiple":"mat-native-select")}get disabled(){return this.ngControl&&null!==this.ngControl.disabled?this.ngControl.disabled:this._disabled}set disabled(t){this._disabled=ch(t),this.focused&&(this.focused=!1,this.stateChanges.next())}get id(){return this._id}set id(t){this._id=t||this._uid}get required(){return this._required??this.ngControl?.control?.hasValidator(_s.required)??!1}set required(t){this._required=ch(t)}get type(){return this._type}set type(t){this._type=t||"text",this._validateType(),!this._isTextarea&&kw().has(this._type)&&(this._elementRef.nativeElement.type=this._type)}get value(){return this._inputValueAccessor.value}set value(t){t!==this.value&&(this._inputValueAccessor.value=t,this.stateChanges.next())}get readonly(){return this._readonly}set readonly(t){this._readonly=ch(t)}ngAfterViewInit(){this._platform.isBrowser&&this._autofillMonitor.monitor(this._elementRef.nativeElement).subscribe(t=>{this.autofilled=t.isAutofilled,this.stateChanges.next()})}ngOnChanges(){this.stateChanges.next()}ngOnDestroy(){this.stateChanges.complete(),this._platform.isBrowser&&this._autofillMonitor.stopMonitoring(this._elementRef.nativeElement)}ngDoCheck(){this.ngControl&&this.updateErrorState(),this._dirtyCheckNativeValue(),this._dirtyCheckPlaceholder()}focus(t){this._elementRef.nativeElement.focus(t)}_focusChanged(t){t!==this.focused&&(this.focused=t,this.stateChanges.next())}_onInput(){}_dirtyCheckPlaceholder(){const t=this._formField?._hideControlPlaceholder?.()?null:this.placeholder;if(t!==this._previousPlaceholder){const r=this._elementRef.nativeElement;this._previousPlaceholder=t,t?r.setAttribute("placeholder",t):r.removeAttribute("placeholder")}}_dirtyCheckNativeValue(){const t=this._elementRef.nativeElement.value;this._previousNativeValue!==t&&(this._previousNativeValue=t,this.stateChanges.next())}_validateType(){qm.indexOf(this._type)}_isNeverEmpty(){return this._neverEmptyInputTypes.indexOf(this._type)>-1}_isBadInput(){let t=this._elementRef.nativeElement.validity;return t&&t.badInput}get empty(){return!(this._isNeverEmpty()||this._elementRef.nativeElement.value||this._isBadInput()||this.autofilled)}get shouldLabelFloat(){if(this._isNativeSelect){const t=this._elementRef.nativeElement,r=t.options[0];return this.focused||t.multiple||!this.empty||!!(t.selectedIndex>-1&&r&&r.label)}return this.focused||!this.empty}setDescribedByIds(t){t.length?this._elementRef.nativeElement.setAttribute("aria-describedby",t.join(" ")):this._elementRef.nativeElement.removeAttribute("aria-describedby")}onContainerClick(){this.focused||this.focus()}_isInlineSelect(){const t=this._elementRef.nativeElement;return this._isNativeSelect&&(t.multiple||t.size>1)}}return n.\u0275fac=function(t){return new(t||n)(d.Y36(d.SBq),d.Y36(ys),d.Y36(fa,10),d.Y36(js,8),d.Y36(bp,8),d.Y36(IE),d.Y36(Tv,10),d.Y36(WE),d.Y36(d.R0b),d.Y36(qE,8))},n.\u0275dir=d.lG2({type:n,selectors:[["input","matInput",""],["textarea","matInput",""],["select","matNativeControl",""],["input","matNativeControl",""],["textarea","matNativeControl",""]],hostAttrs:[1,"mat-input-element","mat-form-field-autofill-control"],hostVars:11,hostBindings:function(t,r){1&t&&d.NdJ("focus",function(){return r._focusChanged(!0)})("blur",function(){return r._focusChanged(!1)})("input",function(){return r._onInput()}),2&t&&(d.Ikx("disabled",r.disabled)("required",r.required),d.uIk("id",r.id)("data-placeholder",r.placeholder)("readonly",r.readonly&&!r._isNativeSelect||null)("aria-invalid",r.empty&&r.required?null:r.errorState)("aria-required",r.required),d.ekj("mat-input-server",r._isServer)("mat-native-select-inline",r._isInlineSelect()))},inputs:{disabled:"disabled",id:"id",placeholder:"placeholder",required:"required",type:"type",errorStateMatcher:"errorStateMatcher",userAriaDescribedBy:["aria-describedby","userAriaDescribedBy"],value:"value",readonly:"readonly"},exportAs:["matInput"],features:[d._Bn([{provide:Dv,useExisting:n}]),d.qOj,d.TTD]}),n})(),XE=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=d.oAB({type:n}),n.\u0275inj=d.cJS({providers:[IE],imports:[[YE,_h,Di],YE,_h]}),n})();const JE=function(n){return{"cancel-button":n}},PA=["*"];let eC=(()=>{class n{constructor(){this.width=277,this.height=44,this.disabled=!1,this.buttonType=""}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=d.Xpm({type:n,selectors:[["app-custom-button"]],inputs:{width:"width",height:"height",disabled:"disabled",buttonType:"buttonType"},ngContentSelectors:PA,decls:2,vars:10,consts:[[1,"custom-button",3,"ngClass","disabled"]],template:function(t,r){1&t&&(d.F$t(),d.TgZ(0,"button",0),d.Hsn(1),d.qZA()),2&t&&(d.Udp("width",r.width,"px")("height",r.height,"px"),d.ekj("disabled",r.disabled),d.Q6J("ngClass",d.VKq(8,JE,"cancel-button"===r.buttonType))("disabled",r.disabled))},dependencies:[gn],styles:[".custom-button[_ngcontent-%COMP%]{box-sizing:border-box;font-family:Inter,Raleway,sans-serif;font-size:18px;background:#ecf3fc;border:1px solid #4388dd;box-shadow:0 4px 180px #00000040;border-radius:6px;cursor:pointer;transition:all .3s ease}.custom-button[_ngcontent-%COMP%]:hover{background:#4388dd;border-color:#4388dd;color:#fff;box-shadow:0 6px 180px #00000059;transform:translateY(-2px)}.custom-button[_ngcontent-%COMP%]:active{transform:translateY(0);box-shadow:0 4px 180px #00000040}.custom-button.disabled[_ngcontent-%COMP%]{opacity:.5;pointer-events:none}.custom-button.cancel-button[_ngcontent-%COMP%]{background:#f44336;border:1px solid #f44336;color:#fff}.custom-button.cancel-button[_ngcontent-%COMP%]:hover{background:#d32f2f;border:1px solid #d32f2f;color:#fff;box-shadow:0 6px 180px #00000059;transform:translateY(-2px)}@media (max-width: 767px){.custom-button[_ngcontent-%COMP%]{font-size:16px}}"]}),n})();const NA=["inputElem"];function FA(n,e){if(1&n){const t=d.EpF();d.TgZ(0,"mat-form-field",11)(1,"input",12,13),d.NdJ("input",function(i){const c=d.CHM(t).index,f=d.oxw();return d.KtG(f.onInput(i,c))})("keyup",function(i){const c=d.CHM(t).index,f=d.oxw();return d.KtG(f.onKeyUp(i,c))}),d.qZA()()}if(2&n){const t=e.index;d.xp6(1),d.MGl("formControlName","roadmapCode",t,"")}}function tC(n,e){1&n&&(d.TgZ(0,"div",14),d._uU(1," Only digits are accepted. "),d.qZA())}let nC=(()=>{class n{constructor(t,r){this.formBuilder=t,this.dialogRef=r,this.controlsArray=[],this.invalidInput=!1}ngOnInit(){this.roadmapCodeForm=this.formBuilder.group({roadmapCode0:["",[_s.required,_s.pattern("\\d")]],roadmapCode1:["",[_s.required,_s.pattern("\\d")]],roadmapCode2:["",[_s.required,_s.pattern("\\d")]],roadmapCode3:["",[_s.required,_s.pattern("\\d")]],roadmapCode4:["",[_s.required,_s.pattern("\\d")]],roadmapCode5:["",[_s.required,_s.pattern("\\d")]]}),this.controlsArray=Object.values(this.roadmapCodeForm.controls)}onInput(t,r){const i=t.target,a=i.value;a.length>1&&(i.value=a.slice(0,1)),/\d/.test(a)?(this.invalidInput=!1,r<this.controlsArray.length-1&&this.controlsArray[r+1].enable()):""===a?this.invalidInput=!1:(i.value="",this.invalidInput=!0)}onKeyUp(t,r){if(1!==t.key.length||isNaN(Number(t.key))){if("Backspace"===t.key||"Delete"===t.key){this.invalidInput=!1;const i=r-1;i>=0&&this.inputElements.toArray()[i].nativeElement.focus()}}else{const i=r+1;i<this.inputElements.length&&setTimeout(()=>{this.inputElements.toArray()[i].nativeElement.focus()},50)}}onSubmit(){const t=this.controlsArray.map(r=>r.value).join("");console.log("Submitted 6-digit code:",t)}onCancel(){this.dialogRef.close()}}return n.\u0275fac=function(t){return new(t||n)(d.Y36(_w),d.Y36(PE))},n.\u0275cmp=d.Xpm({type:n,selectors:[["app-roadmap-popup"]],viewQuery:function(t,r){if(1&t&&d.Gf(NA,5),2&t){let i;d.iGM(i=d.CRH())&&(r.inputElements=i)}},decls:16,vars:4,consts:[[1,"popup-container"],[1,"setup-title"],[1,"content-container"],[1,"title"],[1,"description"],[1,"pin-code-form",3,"formGroup"],["class","pin-input",4,"ngFor","ngForOf"],["class","error-message",4,"ngIf"],[1,"popup-actions"],[3,"disabled","click"],["buttonType","cancel-button",3,"click"],[1,"pin-input"],["matInput","","type","password","maxlength","1","pattern","\\d","required","",3,"formControlName","input","keyup"],["inputElem",""],[1,"error-message"]],template:function(t,r){1&t&&(d.TgZ(0,"div",0)(1,"div",1),d._uU(2,"Setup a Pin Code"),d.qZA(),d.TgZ(3,"div",2)(4,"h2",3),d._uU(5,"To obtain editor rights"),d.qZA(),d.TgZ(6,"p",4),d._uU(7,"Please enter the 6 digit code pin that will ensure your admin rights:"),d.qZA(),d.TgZ(8,"form",5),d.YNc(9,FA,3,1,"mat-form-field",6),d.qZA(),d.YNc(10,tC,2,0,"div",7),d.qZA(),d.TgZ(11,"div",8)(12,"app-custom-button",9),d.NdJ("click",function(){return r.onSubmit()}),d._uU(13,"Validate"),d.qZA(),d.TgZ(14,"app-custom-button",10),d.NdJ("click",function(){return r.onCancel()}),d._uU(15,"Cancel"),d.qZA()()()),2&t&&(d.xp6(8),d.Q6J("formGroup",r.roadmapCodeForm),d.xp6(1),d.Q6J("ngForOf",r.controlsArray),d.xp6(1),d.Q6J("ngIf",r.invalidInput),d.xp6(2),d.Q6J("disabled",!r.roadmapCodeForm.valid))},dependencies:[In,nr,um,tp,WD,KD,zs,fc,pc,bp,Ey,OA,V1,eC],styles:[".popup-container[_ngcontent-%COMP%]{box-sizing:border-box;background:#323232;border:1px solid #323232;box-shadow:0 4px 20px #0009;border-radius:5px;padding:20px;height:100%;width:100%}.setup-title[_ngcontent-%COMP%]{width:100%;height:50px;font-size:18px;line-height:24px;color:#fff}.content-container[_ngcontent-%COMP%]{background:#e8f0fb;border-radius:5px;padding:20px;position:relative}.title[_ngcontent-%COMP%]{font-family:Roboto;font-style:normal;font-weight:700;font-size:20px;line-height:150%;color:#000;margin-bottom:20px}.description[_ngcontent-%COMP%]{width:250px;height:39px;font-family:Roboto;font-style:normal;font-weight:400;font-size:16px;line-height:19px;color:#000}.pin-code-form[_ngcontent-%COMP%]{display:flex;justify-content:space-between;width:100%}.pin-input[_ngcontent-%COMP%]{width:42px}.pin-input[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{height:55px;margin:0;padding:0;background:#ecf3fc;border:1px solid #000000;border-radius:10px;display:flex;justify-content:center;align-items:center}@media (max-width: 480px){.pin-input[_ngcontent-%COMP%]{width:35px}.pin-input[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{height:40px}}input[type=password][_ngcontent-%COMP%]{text-align:center;font-size:62px}input[type=password][_ngcontent-%COMP%]::-webkit-text-security{font-size:66px}.popup-actions[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;gap:10px;padding:20px}.error-message[_ngcontent-%COMP%]{color:red;font-size:14px;text-align:center;margin-top:8px}"]}),n})();function rC(n,e){if(1&n&&(d.O4$(),d._UZ(0,"circle",3)),2&n){const t=d.oxw();d.Udp("animation-name","mat-progress-spinner-stroke-rotate-"+t._spinnerAnimationLabel)("stroke-dashoffset",t._getStrokeDashOffset(),"px")("stroke-dasharray",t._getStrokeCircumference(),"px")("stroke-width",t._getCircleStrokeWidth(),"%"),d.uIk("r",t._getCircleRadius())}}function LA(n,e){if(1&n&&(d.O4$(),d._UZ(0,"circle",3)),2&n){const t=d.oxw();d.Udp("stroke-dashoffset",t._getStrokeDashOffset(),"px")("stroke-dasharray",t._getStrokeCircumference(),"px")("stroke-width",t._getCircleStrokeWidth(),"%"),d.uIk("r",t._getCircleRadius())}}const Av=bE(class{constructor(n){this._elementRef=n}},"primary"),BA=new d.OlP("mat-progress-spinner-default-options",{providedIn:"root",factory:function UA(){return{diameter:100}}});class Ec extends Av{constructor(e,t,r,i,a){super(e),this._document=r,this._diameter=100,this._value=0,this.mode="determinate";const c=Ec._diameters;this._spinnerAnimationLabel=this._getSpinnerAnimationLabel(),c.has(r.head)||c.set(r.head,new Set([100])),this._noopAnimations="NoopAnimations"===i&&!!a&&!a._forceAnimations,a&&(a.diameter&&(this.diameter=a.diameter),a.strokeWidth&&(this.strokeWidth=a.strokeWidth))}get diameter(){return this._diameter}set diameter(e){this._diameter=pm(e),this._spinnerAnimationLabel=this._getSpinnerAnimationLabel(),this._styleRoot&&this._attachStyleNode()}get strokeWidth(){return this._strokeWidth||this.diameter/10}set strokeWidth(e){this._strokeWidth=pm(e)}get value(){return"determinate"===this.mode?this._value:0}set value(e){this._value=Math.max(0,Math.min(100,pm(e)))}ngOnInit(){const e=this._elementRef.nativeElement;this._styleRoot=Nw(e)||this._document.head,this._attachStyleNode(),e.classList.add("mat-progress-spinner-indeterminate-animation")}_getCircleRadius(){return(this.diameter-10)/2}_getViewBox(){const e=2*this._getCircleRadius()+this.strokeWidth;return`0 0 ${e} ${e}`}_getStrokeCircumference(){return 2*Math.PI*this._getCircleRadius()}_getStrokeDashOffset(){return"determinate"===this.mode?this._getStrokeCircumference()*(100-this._value)/100:null}_getCircleStrokeWidth(){return this.strokeWidth/this.diameter*100}_attachStyleNode(){const e=this._styleRoot,t=this._diameter,r=Ec._diameters;let i=r.get(e);if(!i||!i.has(t)){const a=this._document.createElement("style");a.setAttribute("mat-spinner-animation",this._spinnerAnimationLabel),a.textContent=this._getAnimationText(),e.appendChild(a),i||(i=new Set,r.set(e,i)),i.add(t)}}_getAnimationText(){const e=this._getStrokeCircumference();return"\n @keyframes mat-progress-spinner-stroke-rotate-DIAMETER {\n    0%      { stroke-dashoffset: START_VALUE;  transform: rotate(0); }\n    12.5%   { stroke-dashoffset: END_VALUE;    transform: rotate(0); }\n    12.5001%  { stroke-dashoffset: END_VALUE;    transform: rotateX(180deg) rotate(72.5deg); }\n    25%     { stroke-dashoffset: START_VALUE;  transform: rotateX(180deg) rotate(72.5deg); }\n\n    25.0001%   { stroke-dashoffset: START_VALUE;  transform: rotate(270deg); }\n    37.5%   { stroke-dashoffset: END_VALUE;    transform: rotate(270deg); }\n    37.5001%  { stroke-dashoffset: END_VALUE;    transform: rotateX(180deg) rotate(161.5deg); }\n    50%     { stroke-dashoffset: START_VALUE;  transform: rotateX(180deg) rotate(161.5deg); }\n\n    50.0001%  { stroke-dashoffset: START_VALUE;  transform: rotate(180deg); }\n    62.5%   { stroke-dashoffset: END_VALUE;    transform: rotate(180deg); }\n    62.5001%  { stroke-dashoffset: END_VALUE;    transform: rotateX(180deg) rotate(251.5deg); }\n    75%     { stroke-dashoffset: START_VALUE;  transform: rotateX(180deg) rotate(251.5deg); }\n\n    75.0001%  { stroke-dashoffset: START_VALUE;  transform: rotate(90deg); }\n    87.5%   { stroke-dashoffset: END_VALUE;    transform: rotate(90deg); }\n    87.5001%  { stroke-dashoffset: END_VALUE;    transform: rotateX(180deg) rotate(341.5deg); }\n    100%    { stroke-dashoffset: START_VALUE;  transform: rotateX(180deg) rotate(341.5deg); }\n  }\n".replace(/START_VALUE/g,""+.95*e).replace(/END_VALUE/g,""+.2*e).replace(/DIAMETER/g,`${this._spinnerAnimationLabel}`)}_getSpinnerAnimationLabel(){return this.diameter.toString().replace(".","_")}}Ec._diameters=new WeakMap,Ec.\u0275fac=function(e){return new(e||Ec)(d.Y36(d.SBq),d.Y36(ys),d.Y36(se,8),d.Y36(d.QbO,8),d.Y36(BA))},Ec.\u0275cmp=d.Xpm({type:Ec,selectors:[["mat-progress-spinner"]],hostAttrs:["role","progressbar","tabindex","-1",1,"mat-progress-spinner"],hostVars:10,hostBindings:function(e,t){2&e&&(d.uIk("aria-valuemin","determinate"===t.mode?0:null)("aria-valuemax","determinate"===t.mode?100:null)("aria-valuenow","determinate"===t.mode?t.value:null)("mode",t.mode),d.Udp("width",t.diameter,"px")("height",t.diameter,"px"),d.ekj("_mat-animation-noopable",t._noopAnimations))},inputs:{color:"color",diameter:"diameter",strokeWidth:"strokeWidth",mode:"mode",value:"value"},exportAs:["matProgressSpinner"],features:[d.qOj],decls:3,vars:8,consts:[["preserveAspectRatio","xMidYMid meet","focusable","false","aria-hidden","true",3,"ngSwitch"],["cx","50%","cy","50%",3,"animation-name","stroke-dashoffset","stroke-dasharray","stroke-width",4,"ngSwitchCase"],["cx","50%","cy","50%",3,"stroke-dashoffset","stroke-dasharray","stroke-width",4,"ngSwitchCase"],["cx","50%","cy","50%"]],template:function(e,t){1&e&&(d.O4$(),d.TgZ(0,"svg",0),d.YNc(1,rC,1,9,"circle",1),d.YNc(2,LA,1,7,"circle",2),d.qZA()),2&e&&(d.Udp("width",t.diameter,"px")("height",t.diameter,"px"),d.Q6J("ngSwitch","indeterminate"===t.mode),d.uIk("viewBox",t._getViewBox()),d.xp6(1),d.Q6J("ngSwitchCase",!0),d.xp6(1),d.Q6J("ngSwitchCase",!1))},dependencies:[Xs,jo],styles:[".mat-progress-spinner{display:block;position:relative;overflow:hidden}.mat-progress-spinner svg{position:absolute;transform:rotate(-90deg);top:0;left:0;transform-origin:center;overflow:visible}.mat-progress-spinner circle{fill:transparent;transform-origin:center;transition:stroke-dashoffset 225ms linear}._mat-animation-noopable.mat-progress-spinner circle{transition:none;animation:none}.cdk-high-contrast-active .mat-progress-spinner circle{stroke:CanvasText}.mat-progress-spinner.mat-progress-spinner-indeterminate-animation[mode=indeterminate] svg{animation:mat-progress-spinner-linear-rotate 2000ms linear infinite}._mat-animation-noopable.mat-progress-spinner.mat-progress-spinner-indeterminate-animation[mode=indeterminate] svg{transition:none;animation:none}.mat-progress-spinner.mat-progress-spinner-indeterminate-animation[mode=indeterminate] circle{transition-property:stroke;animation-duration:4000ms;animation-timing-function:cubic-bezier(0.35, 0, 0.25, 1);animation-iteration-count:infinite}._mat-animation-noopable.mat-progress-spinner.mat-progress-spinner-indeterminate-animation[mode=indeterminate] circle{transition:none;animation:none}@keyframes mat-progress-spinner-linear-rotate{0%{transform:rotate(0deg)}100%{transform:rotate(360deg)}}@keyframes mat-progress-spinner-stroke-rotate-100{0%{stroke-dashoffset:268.606171575px;transform:rotate(0)}12.5%{stroke-dashoffset:56.5486677px;transform:rotate(0)}12.5001%{stroke-dashoffset:56.5486677px;transform:rotateX(180deg) rotate(72.5deg)}25%{stroke-dashoffset:268.606171575px;transform:rotateX(180deg) rotate(72.5deg)}25.0001%{stroke-dashoffset:268.606171575px;transform:rotate(270deg)}37.5%{stroke-dashoffset:56.5486677px;transform:rotate(270deg)}37.5001%{stroke-dashoffset:56.5486677px;transform:rotateX(180deg) rotate(161.5deg)}50%{stroke-dashoffset:268.606171575px;transform:rotateX(180deg) rotate(161.5deg)}50.0001%{stroke-dashoffset:268.606171575px;transform:rotate(180deg)}62.5%{stroke-dashoffset:56.5486677px;transform:rotate(180deg)}62.5001%{stroke-dashoffset:56.5486677px;transform:rotateX(180deg) rotate(251.5deg)}75%{stroke-dashoffset:268.606171575px;transform:rotateX(180deg) rotate(251.5deg)}75.0001%{stroke-dashoffset:268.606171575px;transform:rotate(90deg)}87.5%{stroke-dashoffset:56.5486677px;transform:rotate(90deg)}87.5001%{stroke-dashoffset:56.5486677px;transform:rotateX(180deg) rotate(341.5deg)}100%{stroke-dashoffset:268.606171575px;transform:rotateX(180deg) rotate(341.5deg)}}\n"],encapsulation:2,changeDetection:0});let aC=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=d.oAB({type:n}),n.\u0275inj=d.cJS({imports:[[Di,Ts],Di]}),n})(),HA=(()=>{class n{constructor(){this.diameter=50,this.strokeWidth=5}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=d.Xpm({type:n,selectors:[["app-circle-loader"]],inputs:{diameter:"diameter",strokeWidth:"strokeWidth"},decls:2,vars:2,consts:[[1,"loader-container"],["mode","indeterminate","color","accent",1,"circle-loader",3,"diameter","strokeWidth"]],template:function(t,r){1&t&&(d.TgZ(0,"div",0),d._UZ(1,"mat-progress-spinner",1),d.qZA()),2&t&&(d.xp6(1),d.Q6J("diameter",r.diameter)("strokeWidth",r.strokeWidth))},dependencies:[Ec],styles:[".loader-container[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:center}.circle-loader[_ngcontent-%COMP%]{transform-origin:center;animation:rotation 2s linear infinite}@keyframes rotation{0%{transform:rotate(0)}to{transform:rotate(360deg)}}"]}),n})();function j1(n,e){1&n&&d._UZ(0,"app-circle-loader",7)}let $1=(()=>{class n{constructor(t){this.dialog=t,this.loading=!1}openPopup(){this.dialog.open(nC,{width:"374px",height:"502px",panelClass:"custom-popup"})}}return n.\u0275fac=function(t){return new(t||n)(d.Y36(bv))},n.\u0275cmp=d.Xpm({type:n,selectors:[["app-landing"]],decls:11,vars:3,consts:[["class","loading",4,"ngIf"],[1,"landing-page","page"],[1,"landing-page__welcome"],[1,"landing-page__button",3,"width","height","click"],[1,"hexagon-container"],[1,"hexagon"],[1,"hexagon-2"],[1,"loading"]],template:function(t,r){1&t&&(d.YNc(0,j1,1,0,"app-circle-loader",0),d.TgZ(1,"div",1)(2,"div",2),d._uU(3," Welcome to ROR, the easiest roadmap builder to really"),d._UZ(4,"br"),d._uU(5," Get Sh!t Done "),d.qZA(),d.TgZ(6,"app-custom-button",3),d.NdJ("click",function(){return r.openPopup()}),d._uU(7,"Create a roadmap"),d.qZA(),d.TgZ(8,"div",4),d._UZ(9,"div",5)(10,"div",6),d.qZA()()),2&t&&(d.Q6J("ngIf",r.loading),d.xp6(6),d.Q6J("width",277)("height",44))},dependencies:[nr,HA,eC],styles:[".landing-page[_ngcontent-%COMP%]{display:flex;flex-direction:column;justify-content:center;align-items:center;text-align:center;background-color:#2f80ed1a;height:100%}.landing-page__welcome[_ngcontent-%COMP%]{max-width:730px;font-family:Inter,sans-serif;font-style:normal;font-weight:600;font-size:40px;line-height:44px;color:#373f41}.landing-page__button[_ngcontent-%COMP%]{margin-top:4.18rem}.loading[_ngcontent-%COMP%]{height:60vh;display:flex;justify-content:center;align-items:center}.popup[_ngcontent-%COMP%]{box-sizing:border-box;position:absolute;left:50%;top:50%;transform:translate(-50%,-50%);background:#323232;border:1px solid #323232;box-shadow:0 4px 20px #0009;border-radius:5px}.hexagon-container[_ngcontent-%COMP%]{position:absolute;bottom:0;left:0;right:0;height:50%;overflow:hidden;z-index:-99}.hexagon[_ngcontent-%COMP%]{position:absolute;width:232.72px;height:201.58px;left:-16.12px;bottom:0;transform:matrix(0,1,1,0,0,0);clip-path:polygon(25% 0%,75% 0%,100% 50%,75% 100%,25% 100%,0% 50%);background:linear-gradient(49.11deg,rgba(67,136,221,.09) 12.62%,rgba(67,136,221,.084) 16.08%,rgba(67,136,221,.063) 29.29%,rgba(67,136,221,.045) 42.43%,rgba(67,136,221,.021) 55.37%,rgba(67,136,221,0) 67.87%)}.hexagon-2[_ngcontent-%COMP%]{position:absolute;width:232.72px;height:201.57px;left:-48px;bottom:0;transform:matrix(0,1,1,0,0,0);clip-path:polygon(25% 0%,75% 0%,100% 50%,75% 100%,25% 100%,0% 50%);background:linear-gradient(49.11deg,rgba(67,136,221,.09) 12.62%,rgba(67,136,221,.075) 16.07%,rgba(67,136,221,.045) 29.29%,rgba(67,136,221,.0405) 42.43%,rgba(67,136,221,.021) 55.37%,rgba(67,136,221,0) 67.87%)}@media screen and (max-width: 767px){.landing-page__welcome[_ngcontent-%COMP%]{font-size:28px;line-height:32px}.landing-page__button[_ngcontent-%COMP%]{margin-top:2rem}}@media screen and (max-width: 480px){.landing-page__welcome[_ngcontent-%COMP%]{font-size:24px;line-height:28px}.popup[_ngcontent-%COMP%]{width:90%;height:auto}}"]}),n})();function z1(n,e){if(1&n){const t=d.EpF();d.TgZ(0,"div")(1,"button",1),d.NdJ("click",function(){d.CHM(t);const i=d.oxw();return d.KtG(i.toggleEditorView())}),d._uU(2,"Editor View"),d.qZA()()}}function G1(n,e){if(1&n){const t=d.EpF();d.TgZ(0,"div")(1,"button",1),d.NdJ("click",function(){d.CHM(t);const i=d.oxw();return d.KtG(i.toggleEditorView())}),d._uU(2,"Read-only View"),d.qZA()()}}let lC=(()=>{class n{constructor(t,r){this.route=t,this.router=r,this.editorView=!1}ngOnInit(){this.route.url.subscribe(t=>{this.editorView=t.some(r=>"editor"===r.path)})}toggleEditorView(){this.router.navigate(this.editorView?["/board"]:["/board/editor"])}}return n.\u0275fac=function(t){return new(t||n)(d.Y36($r),d.Y36(Rn))},n.\u0275cmp=d.Xpm({type:n,selectors:[["app-board"]],decls:2,vars:2,consts:[[4,"ngIf"],[3,"click"]],template:function(t,r){1&t&&(d.YNc(0,z1,3,0,"div",0),d.YNc(1,G1,3,0,"div",0)),2&t&&(d.Q6J("ngIf",!r.editorView),d.xp6(1),d.Q6J("ngIf",r.editorView))},dependencies:[nr]}),n})();const jA=[{path:"",component:$1},{path:"board",component:lC},{path:"roadmap",component:lC},{path:"board/editor",component:lC}];let q1=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=d.oAB({type:n}),n.\u0275inj=d.cJS({imports:[ep.forRoot(jA),ep]}),n})(),W1=(()=>{class n{constructor(){this.title="Azera "}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=d.Xpm({type:n,selectors:[["app-root"]],decls:1,vars:0,template:function(t,r){1&t&&d._UZ(0,"router-outlet")},dependencies:[p]}),n})();var va=F(2011),Mv=F(5363),K1=F(6063);class Z1 extends Kt.x{constructor(e=1/0,t=1/0,r=K1.l){super(),this._bufferSize=e,this._windowTime=t,this._timestampProvider=r,this._buffer=[],this._infiniteTimeWindow=!0,this._infiniteTimeWindow=t===1/0,this._bufferSize=Math.max(1,e),this._windowTime=Math.max(1,t)}next(e){const{isStopped:t,_buffer:r,_infiniteTimeWindow:i,_timestampProvider:a,_windowTime:c}=this;t||(r.push(e),!i&&r.push(a.now()+c)),this._trimBuffer(),super.next(e)}_subscribe(e){this._throwIfClosed(),this._trimBuffer();const t=this._innerSubscribe(e),{_infiniteTimeWindow:r,_buffer:i}=this,a=i.slice();for(let c=0;c<a.length&&!e.closed;c+=r?1:2)e.next(a[c]);return this._checkFinalizedStatuses(e),t}_trimBuffer(){const{_bufferSize:e,_timestampProvider:t,_buffer:r,_infiniteTimeWindow:i}=this,a=(i?1:2)*e;if(e<1/0&&a<r.length&&r.splice(0,r.length-a),!i){const c=t.now();let f=0;for(let _=1;_<r.length&&r[_]<=c;_+=2)f=_;f&&r.splice(0,f+1)}}}var s=F(3099);function o(n,e,t){let r,i=!1;return n&&"object"==typeof n?({bufferSize:r=1/0,windowTime:e=1/0,refCount:i=!1,scheduler:t}=n):r=n??1/0,(0,s.B)({connector:()=>new Z1(r,e,t),resetOnError:!0,resetOnComplete:!1,resetOnRefCountZero:i})}function l(n,e){return(0,fs.m)(e)?sr(()=>n,e):sr(()=>n)}var u=F(9468),h=F(4976);F(259);var ye=F(5861),ul=F(6881),yh=F(4859),cn=F(2090),ba=F(1877);const Hp=new Map,Wm={activated:!1,tokenObservers:[]},xv={initialized:!1,enabled:!1};function Jn(n){return Hp.get(n)||Object.assign({},Wm)}function cC(){return xv}class aH{constructor(e,t,r,i,a){if(this.operation=e,this.retryPolicy=t,this.getWaitDuration=r,this.lowerBound=i,this.upperBound=a,this.pending=null,this.nextErrorWaitInterval=i,i>a)throw new Error("Proactive refresh lower bound greater than upper bound!")}start(){this.nextErrorWaitInterval=this.lowerBound,this.process(!0).catch(()=>{})}stop(){this.pending&&(this.pending.reject("cancelled"),this.pending=null)}isRunning(){return!!this.pending}process(e){var t=this;return(0,ye.Z)(function*(){t.stop();try{t.pending=new cn.BH,yield function lH(n){return new Promise(e=>{setTimeout(e,n)})}(t.getNextRun(e)),t.pending.resolve(),yield t.pending.promise,t.pending=new cn.BH,yield t.operation(),t.pending.resolve(),yield t.pending.promise,t.process(!0).catch(()=>{})}catch(r){t.retryPolicy(r)?t.process(!1).catch(()=>{}):t.stop()}})()}getNextRun(e){if(e)return this.nextErrorWaitInterval=this.lowerBound,this.getWaitDuration();{const t=this.nextErrorWaitInterval;return this.nextErrorWaitInterval*=2,this.nextErrorWaitInterval>this.upperBound&&(this.nextErrorWaitInterval=this.upperBound),t}}}const Qi=new cn.LL("appCheck","AppCheck",{"already-initialized":"You have already called initializeAppCheck() for FirebaseApp {$appName} with different options. To avoid this error, call initializeAppCheck() with the same options as when it was originally called. This will return the already initialized instance.","use-before-activation":"App Check is being used before initializeAppCheck() is called for FirebaseApp {$appName}. Call initializeAppCheck() before instantiating other Firebase services.","fetch-network-error":"Fetch failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.","fetch-parse-error":"Fetch client could not parse response. Original error: {$originalErrorMessage}.","fetch-status-error":"Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","recaptcha-error":"ReCAPTCHA error.",throttled:"Requests throttled due to {$httpStatus} error. Attempts allowed again after {$time}"});function zA(n){if(!Jn(n).activated)throw Qi.create("use-before-activation",{appName:n.name})}function hC(n,e){return qA.apply(this,arguments)}function qA(){return(qA=(0,ye.Z)(function*({url:n,body:e},t){const r={"Content-Type":"application/json"},i=t.getImmediate({optional:!0});if(i){const x=yield i.getHeartbeatsHeader();x&&(r["X-Firebase-Client"]=x)}const a={method:"POST",body:JSON.stringify(e),headers:r};let c,f;try{c=yield fetch(n,a)}catch(x){throw Qi.create("fetch-network-error",{originalErrorMessage:x?.message})}if(200!==c.status)throw Qi.create("fetch-status-error",{httpStatus:c.status});try{f=yield c.json()}catch(x){throw Qi.create("fetch-parse-error",{originalErrorMessage:x?.message})}const _=f.ttl.match(/^([\d.]+)(s)$/);if(!_||!_[2]||isNaN(Number(_[1])))throw Qi.create("fetch-parse-error",{originalErrorMessage:`ttl field (timeToLive) is not in standard Protobuf Duration format: ${f.ttl}`});const w=1e3*Number(_[1]),S=Date.now();return{token:f.token,expireTimeMillis:S+w,issuedAtTimeMillis:S}})).apply(this,arguments)}function Q1(n,e){const{projectId:t,appId:r,apiKey:i}=n.options;return{url:`https://content-firebaseappcheck.googleapis.com/v1/projects/${t}/apps/${r}:exchangeDebugToken?key=${i}`,body:{debug_token:e}}}const kv="firebase-app-check-store";let fC=null;function J1(){return fC||(fC=new Promise((n,e)=>{try{const t=indexedDB.open("firebase-app-check-database",1);t.onsuccess=r=>{n(r.target.result)},t.onerror=r=>{var i;e(Qi.create("storage-open",{originalErrorMessage:null===(i=r.target.error)||void 0===i?void 0:i.message}))},t.onupgradeneeded=r=>{0===r.oldVersion&&r.target.result.createObjectStore(kv,{keyPath:"compositeKey"})}}catch(t){e(Qi.create("storage-open",{originalErrorMessage:t?.message}))}}),fC)}function WA(){return(WA=(0,ye.Z)(function*(n,e){const r=(yield J1()).transaction(kv,"readwrite"),a=r.objectStore(kv).put({compositeKey:n,value:e});return new Promise((c,f)=>{a.onsuccess=_=>{c()},r.onerror=_=>{var w;f(Qi.create("storage-set",{originalErrorMessage:null===(w=_.target.error)||void 0===w?void 0:w.message}))}})})).apply(this,arguments)}const Ov=new ba.Yd("@firebase/app-check");function YA(n,e){return(0,cn.hl)()?function gH(n,e){return function eN(n,e){return WA.apply(this,arguments)}(function nN(n){return`${n.options.appId}-${n.name}`}(n),e)}(n,e).catch(t=>{Ov.warn(`Failed to write token to IndexedDB. Error: ${t}`)}):Promise.resolve()}function XA(){return cC().enabled}function JA(){return eM.apply(this,arguments)}function eM(){return(eM=(0,ye.Z)(function*(){const n=cC();if(n.enabled&&n.token)return n.token.promise;throw Error("\n            Can't get debug token in production mode.\n        ")})).apply(this,arguments)}const wH={error:"UNKNOWN_ERROR"};function EH(n){return cn.US.encodeString(JSON.stringify(n),!1)}function pC(n){return tM.apply(this,arguments)}function tM(){return(tM=(0,ye.Z)(function*(n,e=!1){const t=n.app;zA(t);const r=Jn(t);let a,i=r.token;if(i&&!Km(i)&&(r.token=void 0,i=void 0),!i){const _=yield r.cachedTokenPromise;_&&(Km(_)?i=_:yield YA(t,void 0))}if(!e&&i&&Km(i))return{token:i.token};let f,c=!1;if(XA()){r.exchangeTokenPromise||(r.exchangeTokenPromise=hC(Q1(t,yield JA()),n.heartbeatServiceProvider).finally(()=>{r.exchangeTokenPromise=void 0}),c=!0);const _=yield r.exchangeTokenPromise;return yield YA(t,_),r.token=_,{token:_.token}}try{r.exchangeTokenPromise||(r.exchangeTokenPromise=r.provider.getToken().finally(()=>{r.exchangeTokenPromise=void 0}),c=!0),i=yield Jn(t).exchangeTokenPromise}catch(_){"appCheck/throttled"===_.code?Ov.warn(_.message):Ov.error(_),a=_}return i?a?f=Km(i)?{token:i.token,internalError:a}:sN(a):(f={token:i.token},r.token=i,yield YA(t,i)):f=sN(a),c&&iN(t,f),f})).apply(this,arguments)}function iM(n,e){const t=Jn(n),r=t.tokenObservers.filter(i=>i.next!==e);0===r.length&&t.tokenRefresher&&t.tokenRefresher.isRunning()&&t.tokenRefresher.stop(),t.tokenObservers=r}function rN(n){const{app:e}=n,t=Jn(e);let r=t.tokenRefresher;r||(r=function IH(n){const{app:e}=n;return new aH((0,ye.Z)(function*(){let r;if(r=Jn(e).token?yield pC(n,!0):yield pC(n),r.error)throw r.error;if(r.internalError)throw r.internalError}),()=>!0,()=>{const t=Jn(e);if(t.token){let r=t.token.issuedAtTimeMillis+.5*(t.token.expireTimeMillis-t.token.issuedAtTimeMillis)+3e5;return r=Math.min(r,t.token.expireTimeMillis-3e5),Math.max(0,r-Date.now())}return 0},3e4,96e4)}(n),t.tokenRefresher=r),!r.isRunning()&&t.isTokenAutoRefreshEnabled&&r.start()}function iN(n,e){const t=Jn(n).tokenObservers;for(const r of t)try{"EXTERNAL"===r.type&&null!=e.error?r.error(e.error):r.next(e)}catch{}}function Km(n){return n.expireTimeMillis-Date.now()>0}function sN(n){return{token:EH(wH),error:n}}class DH{constructor(e,t){this.app=e,this.heartbeatServiceProvider=t}_delete(){const{tokenObservers:e}=Jn(this.app);for(const t of e)iM(this.app,t.next);return Promise.resolve()}}const fN="app-check-internal";!function BH(){(0,ul._registerComponent)(new yh.wA("app-check",n=>function SH(n,e){return new DH(n,e)}(n.getProvider("app").getImmediate(),n.getProvider("heartbeat")),"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((n,e,t)=>{n.getProvider(fN).initialize()})),(0,ul._registerComponent)(new yh.wA(fN,n=>function TH(n){return{getToken:e=>pC(n,e),addTokenListener:e=>function rM(n,e,t,r){const{app:i}=n,a=Jn(i);if(a.tokenObservers=[...a.tokenObservers,{next:t,error:r,type:e}],a.token&&Km(a.token)){const f=a.token;Promise.resolve().then(()=>{t({token:f.token}),rN(n)}).catch(()=>{})}a.cachedTokenPromise.then(()=>rN(n))}(n,"INTERNAL",e),removeTokenListener:e=>iM(n.app,e)}}(n.getProvider("app-check").getImmediate()),"PUBLIC").setInstantiationMode("EXPLICIT")),(0,ul.registerVersion)("@firebase/app-check","0.7.0")}();class lM{constructor(){return(0,h.vb)("app-check")}}typeof window<"u"&&window;var gN=F(9260);const mN=new d.OlP("angularfire2.auth.use-emulator"),_N=new d.OlP("angularfire2.auth.settings"),yN=new d.OlP("angularfire2.auth.tenant-id"),vN=new d.OlP("angularfire2.auth.langugage-code"),bN=new d.OlP("angularfire2.auth.use-device-language"),wN=new d.OlP("angularfire.auth.persistence"),EN=(n,e,t,r,i,a,c,f)=>(0,va.cc)(`${n.name}.auth`,"AngularFireAuth",n.name,()=>{const _=e.runOutsideAngular(()=>n.auth());if(t&&_.useEmulator(...t),r&&(_.tenantId=r),_.languageCode=i,a&&_.useDeviceLanguage(),c)for(const[w,S]of Object.entries(c))_.settings[w]=S;return f&&_.setPersistence(f),_},[t,r,i,a,c,f]);let uM=(()=>{class n{constructor(t,r,i,a,c,f,_,w,S,x,L,U){const W=new Kt.x,ie=nt(void 0).pipe((0,Mv.Q)(c.outsideAngular),sr(()=>a.runOutsideAngular(()=>Promise.resolve().then(F.bind(F,3042)))),(0,_t.U)(()=>(0,va.on)(t,a,r)),(0,_t.U)(we=>EN(we,a,f,w,S,x,_,L)),o({bufferSize:1,refCount:!1}));if(bl(i))this.authState=this.user=this.idToken=this.idTokenResult=this.credential=nt(null);else{ie.pipe(Gi()).subscribe();const qe=ie.pipe(sr(Dt=>Dt.getRedirectResult().then(zt=>zt,()=>null)),h.iC,o({bufferSize:1,refCount:!1})),ot=ie.pipe(sr(Dt=>new Xr.y(zt=>({unsubscribe:a.runOutsideAngular(()=>Dt.onAuthStateChanged(Yt=>zt.next(Yt),Yt=>zt.error(Yt),()=>zt.complete()))})))),tt=ie.pipe(sr(Dt=>new Xr.y(zt=>({unsubscribe:a.runOutsideAngular(()=>Dt.onIdTokenChanged(Yt=>zt.next(Yt),Yt=>zt.error(Yt),()=>zt.complete()))}))));this.authState=qe.pipe(l(ot),(0,u.R)(c.outsideAngular),(0,Mv.Q)(c.insideAngular)),this.user=qe.pipe(l(tt),(0,u.R)(c.outsideAngular),(0,Mv.Q)(c.insideAngular)),this.idToken=this.user.pipe(sr(Dt=>Dt?(0,fn.D)(Dt.getIdToken()):nt(null))),this.idTokenResult=this.user.pipe(sr(Dt=>Dt?(0,fn.D)(Dt.getIdTokenResult()):nt(null))),this.credential=(0,Wy.T)(qe,W,this.authState.pipe(Wn(Dt=>!Dt))).pipe((0,_t.U)(Dt=>Dt?.user?Dt:null),(0,u.R)(c.outsideAngular),(0,Mv.Q)(c.insideAngular))}return(0,va.pX)(this,ie,a,{spy:{apply:(we,qe,ot)=>{(we.startsWith("signIn")||we.startsWith("createUser"))&&ot.then(tt=>W.next(tt))}}})}}return n.\u0275fac=function(t){return new(t||n)(d.LFG(va.Dh),d.LFG(va.xv,8),d.LFG(d.Lbi),d.LFG(d.R0b),d.LFG(h.HU),d.LFG(mN,8),d.LFG(_N,8),d.LFG(yN,8),d.LFG(vN,8),d.LFG(bN,8),d.LFG(wN,8),d.LFG(lM,8))},n.\u0275prov=d.Yz7({token:n,factory:n.\u0275fac,providedIn:"any"}),n})(),GH=(()=>{class n{constructor(){gN.Z.registerVersion("angularfire",h.q4.full,"auth-compat")}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=d.oAB({type:n}),n.\u0275inj=d.cJS({providers:[uM]}),n})();function dM(){return(0,ir.e)((n,e)=>{let t,r=!1;n.subscribe((0,Pn.x)(e,i=>{const a=t;t=i,r&&e.next([a,i]),r=!0}))})}F(3042);var st,qH=F(3942),WH=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},dl={},hM=hM||{},Zt=WH||self;function mC(){}function _C(n){var e=typeof n;return"array"==(e="object"!=e?e:n?Array.isArray(n)?"array":e:"null")||"object"==e&&"number"==typeof n.length}function Pv(n){var e=typeof n;return"object"==e&&null!=n||"function"==e}var fM="closure_uid_"+(1e9*Math.random()>>>0),ZH=0;function YH(n,e,t){return n.call.apply(n.bind,arguments)}function QH(n,e,t){if(!n)throw Error();if(2<arguments.length){var r=Array.prototype.slice.call(arguments,2);return function(){var i=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(i,r),n.apply(e,i)}}return function(){return n.apply(e,arguments)}}function vs(n,e,t){return(vs=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?YH:QH).apply(null,arguments)}function yC(n,e){var t=Array.prototype.slice.call(arguments,1);return function(){var r=t.slice();return r.push.apply(r,arguments),n.apply(this,r)}}function Si(n,e){function t(){}t.prototype=e.prototype,n.$=e.prototype,n.prototype=new t,n.prototype.constructor=n,n.ac=function(r,i,a){for(var c=Array(arguments.length-2),f=2;f<arguments.length;f++)c[f-2]=arguments[f];return e.prototype[i].apply(r,c)}}function vh(){this.s=this.s,this.o=this.o}vh.prototype.s=!1,vh.prototype.ra=function(){!this.s&&(this.s=!0,this.N(),0)&&function KH(n){Object.prototype.hasOwnProperty.call(n,fM)&&n[fM]||(n[fM]=++ZH)}(this)},vh.prototype.N=function(){if(this.o)for(;this.o.length;)this.o.shift()()};const CN=Array.prototype.indexOf?function(n,e){return Array.prototype.indexOf.call(n,e,void 0)}:function(n,e){if("string"==typeof n)return"string"!=typeof e||1!=e.length?-1:n.indexOf(e,0);for(let t=0;t<n.length;t++)if(t in n&&n[t]===e)return t;return-1};function pM(n){const e=n.length;if(0<e){const t=Array(e);for(let r=0;r<e;r++)t[r]=n[r];return t}return[]}function IN(n,e){for(let t=1;t<arguments.length;t++){const r=arguments[t];if(_C(r)){const i=n.length||0,a=r.length||0;n.length=i+a;for(let c=0;c<a;c++)n[i+c]=r[c]}else n.push(r)}}function bs(n,e){this.type=n,this.g=this.target=e,this.defaultPrevented=!1}bs.prototype.h=function(){this.defaultPrevented=!0};var JH=function(){if(!Zt.addEventListener||!Object.defineProperty)return!1;var n=!1,e=Object.defineProperty({},"passive",{get:function(){n=!0}});try{Zt.addEventListener("test",mC,e),Zt.removeEventListener("test",mC,e)}catch{}return n}();function vC(n){return/^[\s\xa0]*$/.test(n)}var DN=String.prototype.trim?function(n){return n.trim()}:function(n){return/^[\s\xa0]*([\s\S]*?)[\s\xa0]*$/.exec(n)[1]};function gM(n,e){return n<e?-1:n>e?1:0}function bC(){var n=Zt.navigator;return n&&(n=n.userAgent)?n:""}function Cc(n){return-1!=bC().indexOf(n)}function mM(n){return mM[" "](n),n}function SN(n,e,t){return Object.prototype.hasOwnProperty.call(n,e)?n[e]:n[e]=t(e)}mM[" "]=mC;var wC,n,ej=Cc("Opera"),Zm=Cc("Trident")||Cc("MSIE"),TN=Cc("Edge"),_M=TN||Zm,AN=Cc("Gecko")&&!(-1!=bC().toLowerCase().indexOf("webkit")&&!Cc("Edge"))&&!(Cc("Trident")||Cc("MSIE"))&&!Cc("Edge"),tj=-1!=bC().toLowerCase().indexOf("webkit")&&!Cc("Edge");function MN(){var n=Zt.document;return n?n.documentMode:void 0}e:{var yM="",vM=(n=bC(),AN?/rv:([^\);]+)(\)|;)/.exec(n):TN?/Edge\/([\d\.]+)/.exec(n):Zm?/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(n):tj?/WebKit\/(\S+)/.exec(n):ej?/(?:Version)[ \/]?(\S+)/.exec(n):void 0);if(vM&&(yM=vM?vM[1]:""),Zm){var bM=MN();if(null!=bM&&bM>parseFloat(yM)){wC=String(bM);break e}}wC=yM}var nj={},ij=Zt.document&&Zm&&(MN()||parseInt(wC,10))||void 0;function Nv(n,e){if(bs.call(this,n?n.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,n){var t=this.type=n.type,r=n.changedTouches&&n.changedTouches.length?n.changedTouches[0]:null;if(this.target=n.target||n.srcElement,this.g=e,e=n.relatedTarget){if(AN){e:{try{mM(e.nodeName);var i=!0;break e}catch{}i=!1}i||(e=null)}}else"mouseover"==t?e=n.fromElement:"mouseout"==t&&(e=n.toElement);this.relatedTarget=e,r?(this.clientX=void 0!==r.clientX?r.clientX:r.pageX,this.clientY=void 0!==r.clientY?r.clientY:r.pageY,this.screenX=r.screenX||0,this.screenY=r.screenY||0):(this.clientX=void 0!==n.clientX?n.clientX:n.pageX,this.clientY=void 0!==n.clientY?n.clientY:n.pageY,this.screenX=n.screenX||0,this.screenY=n.screenY||0),this.button=n.button,this.key=n.key||"",this.ctrlKey=n.ctrlKey,this.altKey=n.altKey,this.shiftKey=n.shiftKey,this.metaKey=n.metaKey,this.pointerId=n.pointerId||0,this.pointerType="string"==typeof n.pointerType?n.pointerType:sj[n.pointerType]||"",this.state=n.state,this.i=n,n.defaultPrevented&&Nv.$.h.call(this)}}Si(Nv,bs);var sj={2:"touch",3:"pen",4:"mouse"};Nv.prototype.h=function(){Nv.$.h.call(this);var n=this.i;n.preventDefault?n.preventDefault():n.returnValue=!1};var Fv="closure_listenable_"+(1e6*Math.random()|0),oj=0;function aj(n,e,t,r,i){this.listener=n,this.proxy=null,this.src=e,this.type=t,this.capture=!!r,this.la=i,this.key=++oj,this.fa=this.ia=!1}function EC(n){n.fa=!0,n.listener=null,n.proxy=null,n.src=null,n.la=null}function EM(n,e,t){for(const r in n)e.call(t,n[r],r,n)}function RN(n){const e={};for(const t in n)e[t]=n[t];return e}const kN="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function ON(n,e){let t,r;for(let i=1;i<arguments.length;i++){for(t in r=arguments[i],r)n[t]=r[t];for(let a=0;a<kN.length;a++)t=kN[a],Object.prototype.hasOwnProperty.call(r,t)&&(n[t]=r[t])}}function CC(n){this.src=n,this.g={},this.h=0}function CM(n,e){var t=e.type;if(t in n.g){var a,r=n.g[t],i=CN(r,e);(a=0<=i)&&Array.prototype.splice.call(r,i,1),a&&(EC(e),0==n.g[t].length&&(delete n.g[t],n.h--))}}function IM(n,e,t,r){for(var i=0;i<n.length;++i){var a=n[i];if(!a.fa&&a.listener==e&&a.capture==!!t&&a.la==r)return i}return-1}CC.prototype.add=function(n,e,t,r,i){var a=n.toString();(n=this.g[a])||(n=this.g[a]=[],this.h++);var c=IM(n,e,r,i);return-1<c?(e=n[c],t||(e.ia=!1)):((e=new aj(e,this.src,a,!!r,i)).ia=t,n.push(e)),e};var DM="closure_lm_"+(1e6*Math.random()|0),SM={};function PN(n,e,t,r,i){if(r&&r.once)return FN(n,e,t,r,i);if(Array.isArray(e)){for(var a=0;a<e.length;a++)PN(n,e[a],t,r,i);return null}return t=xM(t),n&&n[Fv]?n.O(e,t,Pv(r)?!!r.capture:!!r,i):NN(n,e,t,!1,r,i)}function NN(n,e,t,r,i,a){if(!e)throw Error("Invalid event type");var c=Pv(i)?!!i.capture:!!i,f=AM(n);if(f||(n[DM]=f=new CC(n)),(t=f.add(e,t,r,c,a)).proxy)return t;if(r=function lj(){const e=cj;return function n(t){return e.call(n.src,n.listener,t)}}(),t.proxy=r,r.src=n,r.listener=t,n.addEventListener)JH||(i=c),void 0===i&&(i=!1),n.addEventListener(e.toString(),r,i);else if(n.attachEvent)n.attachEvent(VN(e.toString()),r);else{if(!n.addListener||!n.removeListener)throw Error("addEventListener and attachEvent are unavailable.");n.addListener(r)}return t}function FN(n,e,t,r,i){if(Array.isArray(e)){for(var a=0;a<e.length;a++)FN(n,e[a],t,r,i);return null}return t=xM(t),n&&n[Fv]?n.P(e,t,Pv(r)?!!r.capture:!!r,i):NN(n,e,t,!0,r,i)}function LN(n,e,t,r,i){if(Array.isArray(e))for(var a=0;a<e.length;a++)LN(n,e[a],t,r,i);else r=Pv(r)?!!r.capture:!!r,t=xM(t),n&&n[Fv]?(n=n.i,(e=String(e).toString())in n.g&&-1<(t=IM(a=n.g[e],t,r,i))&&(EC(a[t]),Array.prototype.splice.call(a,t,1),0==a.length&&(delete n.g[e],n.h--))):n&&(n=AM(n))&&(e=n.g[e.toString()],n=-1,e&&(n=IM(e,t,r,i)),(t=-1<n?e[n]:null)&&TM(t))}function TM(n){if("number"!=typeof n&&n&&!n.fa){var e=n.src;if(e&&e[Fv])CM(e.i,n);else{var t=n.type,r=n.proxy;e.removeEventListener?e.removeEventListener(t,r,n.capture):e.detachEvent?e.detachEvent(VN(t),r):e.addListener&&e.removeListener&&e.removeListener(r),(t=AM(e))?(CM(t,n),0==t.h&&(t.src=null,e[DM]=null)):EC(n)}}}function VN(n){return n in SM?SM[n]:SM[n]="on"+n}function cj(n,e){if(n.fa)n=!0;else{e=new Nv(e,this);var t=n.listener,r=n.la||n.src;n.ia&&TM(n),n=t.call(r,e)}return n}function AM(n){return(n=n[DM])instanceof CC?n:null}var MM="__closure_events_fn_"+(1e9*Math.random()>>>0);function xM(n){return"function"==typeof n?n:(n[MM]||(n[MM]=function(e){return n.handleEvent(e)}),n[MM])}function Ti(){vh.call(this),this.i=new CC(this),this.S=this,this.J=null}function Xi(n,e){var t,r=n.J;if(r)for(t=[];r;r=r.J)t.push(r);if(n=n.S,r=e.type||e,"string"==typeof e)e=new bs(e,n);else if(e instanceof bs)e.target=e.target||n;else{var i=e;ON(e=new bs(r,n),i)}if(i=!0,t)for(var a=t.length-1;0<=a;a--){var c=e.g=t[a];i=IC(c,r,!0,e)&&i}if(i=IC(c=e.g=n,r,!0,e)&&i,i=IC(c,r,!1,e)&&i,t)for(a=0;a<t.length;a++)i=IC(c=e.g=t[a],r,!1,e)&&i}function IC(n,e,t,r){if(!(e=n.i.g[String(e)]))return!0;e=e.concat();for(var i=!0,a=0;a<e.length;++a){var c=e[a];if(c&&!c.fa&&c.capture==t){var f=c.listener,_=c.la||c.src;c.ia&&CM(n.i,c),i=!1!==f.call(_,r)&&i}}return i&&!r.defaultPrevented}Si(Ti,vh),Ti.prototype[Fv]=!0,Ti.prototype.removeEventListener=function(n,e,t,r){LN(this,n,e,t,r)},Ti.prototype.N=function(){if(Ti.$.N.call(this),this.i){var e,n=this.i;for(e in n.g){for(var t=n.g[e],r=0;r<t.length;r++)EC(t[r]);delete n.g[e],n.h--}}this.J=null},Ti.prototype.O=function(n,e,t,r){return this.i.add(String(n),e,!1,t,r)},Ti.prototype.P=function(n,e,t,r){return this.i.add(String(n),e,!0,t,r)};var RM=Zt.JSON.stringify;function uj(){var n=HN;let e=null;return n.g&&(e=n.g,n.g=n.g.next,n.g||(n.h=null),e.next=null),e}var kM,BN=new class{constructor(n,e){this.i=n,this.j=e,this.h=0,this.g=null}get(){let n;return 0<this.h?(this.h--,n=this.g,this.g=n.next,n.next=null):n=this.i(),n}}(()=>new hj,n=>n.reset());class hj{constructor(){this.next=this.g=this.h=null}set(e,t){this.h=e,this.g=t,this.next=null}reset(){this.next=this.g=this.h=null}}function fj(n){Zt.setTimeout(()=>{throw n},0)}function UN(n,e){kM||function pj(){var n=Zt.Promise.resolve(void 0);kM=function(){n.then(gj)}}(),OM||(kM(),OM=!0),HN.add(n,e)}var OM=!1,HN=new class dj{constructor(){this.h=this.g=null}add(e,t){const r=BN.get();r.set(e,t),this.h?this.h.next=r:this.g=r,this.h=r}};function gj(){for(var n;n=uj();){try{n.h.call(n.g)}catch(t){fj(t)}var e=BN;e.j(n),100>e.h&&(e.h++,n.next=e.g,e.g=n)}OM=!1}function DC(n,e){Ti.call(this),this.h=n||1,this.g=e||Zt,this.j=vs(this.qb,this),this.l=Date.now()}function PM(n){n.ga=!1,n.T&&(n.g.clearTimeout(n.T),n.T=null)}function NM(n,e,t){if("function"==typeof n)t&&(n=vs(n,t));else{if(!n||"function"!=typeof n.handleEvent)throw Error("Invalid listener argument");n=vs(n.handleEvent,n)}return 2147483647<Number(e)?-1:Zt.setTimeout(n,e||0)}function jN(n){n.g=NM(()=>{n.g=null,n.i&&(n.i=!1,jN(n))},n.j);const e=n.h;n.h=null,n.m.apply(null,e)}Si(DC,Ti),(st=DC.prototype).ga=!1,st.T=null,st.qb=function(){if(this.ga){var n=Date.now()-this.l;0<n&&n<.8*this.h?this.T=this.g.setTimeout(this.j,this.h-n):(this.T&&(this.g.clearTimeout(this.T),this.T=null),Xi(this,"tick"),this.ga&&(PM(this),this.start()))}},st.start=function(){this.ga=!0,this.T||(this.T=this.g.setTimeout(this.j,this.h),this.l=Date.now())},st.N=function(){DC.$.N.call(this),PM(this),delete this.g};class mj extends vh{constructor(e,t){super(),this.m=e,this.j=t,this.h=null,this.i=!1,this.g=null}l(e){this.h=arguments,this.g?this.i=!0:jN(this)}N(){super.N(),this.g&&(Zt.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Lv(n){vh.call(this),this.h=n,this.g={}}Si(Lv,vh);var $N=[];function zN(n,e,t,r){Array.isArray(t)||(t&&($N[0]=t.toString()),t=$N);for(var i=0;i<t.length;i++){var a=PN(e,t[i],r||n.handleEvent,!1,n.h||n);if(!a)break;n.g[a.key]=a}}function GN(n){EM(n.g,function(e,t){this.g.hasOwnProperty(t)&&TM(e)},n),n.g={}}function SC(){this.g=!0}function Ym(n,e,t,r){n.info(function(){return"XMLHTTP TEXT ("+e+"): "+function bj(n,e){if(!n.g)return e;if(!e)return null;try{var t=JSON.parse(e);if(t)for(n=0;n<t.length;n++)if(Array.isArray(t[n])){var r=t[n];if(!(2>r.length)){var i=r[1];if(Array.isArray(i)&&!(1>i.length)){var a=i[0];if("noop"!=a&&"stop"!=a&&"close"!=a)for(var c=1;c<i.length;c++)i[c]=""}}}return RM(t)}catch{return e}}(n,t)+(r?" "+r:"")})}Lv.prototype.N=function(){Lv.$.N.call(this),GN(this)},Lv.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")},SC.prototype.Ea=function(){this.g=!1},SC.prototype.info=function(){};var jp={},qN=null;function TC(){return qN=qN||new Ti}function WN(n){bs.call(this,jp.Ta,n)}function Vv(n){const e=TC();Xi(e,new WN(e))}function KN(n,e){bs.call(this,jp.STAT_EVENT,n),this.stat=e}function Ws(n){const e=TC();Xi(e,new KN(e,n))}function ZN(n,e){bs.call(this,jp.Ua,n),this.size=e}function Bv(n,e){if("function"!=typeof n)throw Error("Fn must not be null and must be a function");return Zt.setTimeout(function(){n()},e)}jp.Ta="serverreachability",Si(WN,bs),jp.STAT_EVENT="statevent",Si(KN,bs),jp.Ua="timingevent",Si(ZN,bs);var AC={NO_ERROR:0,rb:1,Eb:2,Db:3,yb:4,Cb:5,Fb:6,Qa:7,TIMEOUT:8,Ib:9},YN={wb:"complete",Sb:"success",Ra:"error",Qa:"abort",Kb:"ready",Lb:"readystatechange",TIMEOUT:"timeout",Gb:"incrementaldata",Jb:"progress",zb:"downloadprogress",$b:"uploadprogress"};function FM(){}function XN(){}FM.prototype.h=null;var BM,Uv={OPEN:"a",vb:"b",Ra:"c",Hb:"d"};function LM(){bs.call(this,"d")}function VM(){bs.call(this,"c")}function MC(){}function Hv(n,e,t,r){this.l=n,this.j=e,this.m=t,this.W=r||1,this.U=new Lv(this),this.P=wj,this.V=new DC(n=_M?125:void 0),this.I=null,this.i=!1,this.s=this.A=this.v=this.L=this.G=this.Y=this.B=null,this.F=[],this.g=null,this.C=0,this.o=this.u=null,this.aa=-1,this.J=!1,this.O=0,this.M=null,this.ca=this.K=this.ba=this.S=!1,this.h=new JN}function JN(){this.i=null,this.g="",this.h=!1}Si(LM,bs),Si(VM,bs),Si(MC,FM),MC.prototype.g=function(){return new XMLHttpRequest},MC.prototype.i=function(){return{}},BM=new MC;var wj=45e3,UM={},xC={};function HM(n,e,t){n.L=1,n.v=PC(ju(e)),n.s=t,n.S=!0,eF(n,null)}function eF(n,e){n.G=Date.now(),jv(n),n.A=ju(n.v);var t=n.A,r=n.W;Array.isArray(r)||(r=[String(r)]),uF(t.i,"t",r),n.C=0,t=n.l.I,n.h=new JN,n.g=PF(n.l,t?e:null,!n.s),0<n.O&&(n.M=new mj(vs(n.Pa,n,n.g),n.O)),zN(n.U,n.g,"readystatechange",n.nb),e=n.I?RN(n.I):{},n.s?(n.u||(n.u="POST"),e["Content-Type"]="application/x-www-form-urlencoded",n.g.ha(n.A,n.u,n.s,e)):(n.u="GET",n.g.ha(n.A,n.u,null,e)),Vv(),function _j(n,e,t,r,i,a){n.info(function(){if(n.g)if(a)for(var c="",f=a.split("&"),_=0;_<f.length;_++){var w=f[_].split("=");if(1<w.length){var S=w[0];w=w[1];var x=S.split("_");c=2<=x.length&&"type"==x[1]?c+(S+"=")+w+"&":c+(S+"=redacted&")}}else c=null;else c=a;return"XMLHTTP REQ ("+r+") [attempt "+i+"]: "+e+"\n"+t+"\n"+c})}(n.j,n.u,n.A,n.m,n.W,n.s)}function tF(n){return!!n.g&&"GET"==n.u&&2!=n.L&&n.l.Ha}function nF(n,e,t){let i,r=!0;for(;!n.J&&n.C<t.length;){if(i=Ej(n,t),i==xC){4==e&&(n.o=4,Ws(14),r=!1),Ym(n.j,n.m,null,"[Incomplete Response]");break}if(i==UM){n.o=4,Ws(15),Ym(n.j,n.m,t,"[Invalid Chunk]"),r=!1;break}Ym(n.j,n.m,i,null),jM(n,i)}tF(n)&&i!=xC&&i!=UM&&(n.h.g="",n.C=0),4!=e||0!=t.length||n.h.h||(n.o=1,Ws(16),r=!1),n.i=n.i&&r,r?0<t.length&&!n.ca&&(n.ca=!0,(e=n.l).g==n&&e.ca&&!e.L&&(e.j.info("Great, no buffering proxy detected. Bytes received: "+t.length),YM(e),e.L=!0,Ws(11))):(Ym(n.j,n.m,t,"[Invalid Chunked Response]"),$p(n),$v(n))}function Ej(n,e){var t=n.C,r=e.indexOf("\n",t);return-1==r?xC:(t=Number(e.substring(t,r)),isNaN(t)?UM:(r+=1)+t>e.length?xC:(e=e.substr(r,t),n.C=r+t,e))}function jv(n){n.Y=Date.now()+n.P,rF(n,n.P)}function rF(n,e){if(null!=n.B)throw Error("WatchDog timer not null");n.B=Bv(vs(n.lb,n),e)}function RC(n){n.B&&(Zt.clearTimeout(n.B),n.B=null)}function $v(n){0==n.l.H||n.J||xF(n.l,n)}function $p(n){RC(n);var e=n.M;e&&"function"==typeof e.ra&&e.ra(),n.M=null,PM(n.V),GN(n.U),n.g&&(e=n.g,n.g=null,e.abort(),e.ra())}function jM(n,e){try{var t=n.l;if(0!=t.H&&(t.g==n||$M(t.h,n)))if(!n.K&&$M(t.h,n)&&3==t.H){try{var r=t.Ja.g.parse(e)}catch{r=null}if(Array.isArray(r)&&3==r.length){var i=r;if(0==i[0]){e:if(!t.u){if(t.g){if(!(t.g.G+3e3<n.G))break e;UC(t),VC(t)}ZM(t),Ws(18)}}else t.Fa=i[1],0<t.Fa-t.V&&37500>i[2]&&t.M&&0==t.A&&!t.v&&(t.v=Bv(vs(t.ib,t),6e3));if(1>=fF(t.h)&&t.na){try{t.na()}catch{}t.na=void 0}}else Gp(t,11)}else if((n.K||t.g==n)&&UC(t),!vC(e))for(i=t.Ja.g.parse(e),e=0;e<i.length;e++){let w=i[e];if(t.V=w[0],w=w[1],2==t.H)if("c"==w[0]){t.J=w[1],t.oa=w[2];const S=w[3];null!=S&&(t.qa=S,t.j.info("VER="+t.qa));const x=w[4];null!=x&&(t.Ga=x,t.j.info("SVER="+t.Ga));const L=w[5];null!=L&&"number"==typeof L&&0<L&&(t.K=r=1.5*L,t.j.info("backChannelRequestTimeoutMs_="+r)),r=t;const U=n.g;if(U){const W=U.g?U.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(W){var a=r.h;a.g||-1==W.indexOf("spdy")&&-1==W.indexOf("quic")&&-1==W.indexOf("h2")||(a.j=a.l,a.g=new Set,a.h&&(zM(a,a.h),a.h=null))}if(r.F){const ie=U.g?U.g.getResponseHeader("X-HTTP-Session-Id"):null;ie&&(r.Da=ie,mr(r.G,r.F,ie))}}t.H=3,t.l&&t.l.Ba(),t.ca&&(t.S=Date.now()-n.G,t.j.info("Handshake RTT: "+t.S+"ms"));var c=n;if((r=t).wa=OF(r,r.I?r.oa:null,r.Y),c.K){pF(r.h,c);var f=c,_=r.K;_&&f.setTimeout(_),f.B&&(RC(f),jv(f)),r.g=c}else AF(r);0<t.i.length&&BC(t)}else"stop"!=w[0]&&"close"!=w[0]||Gp(t,7);else 3==t.H&&("stop"==w[0]||"close"==w[0]?"stop"==w[0]?Gp(t,7):KM(t):"noop"!=w[0]&&t.l&&t.l.Aa(w),t.A=0)}Vv()}catch{}}function iF(n,e){if(n.forEach&&"function"==typeof n.forEach)n.forEach(e,void 0);else if(_C(n)||"string"==typeof n)Array.prototype.forEach.call(n,e,void 0);else for(var t=function Ij(n){if(n.sa&&"function"==typeof n.sa)return n.sa();if(!n.Z||"function"!=typeof n.Z){if(typeof Map<"u"&&n instanceof Map)return Array.from(n.keys());if(!(typeof Set<"u"&&n instanceof Set)){if(_C(n)||"string"==typeof n){var e=[];n=n.length;for(var t=0;t<n;t++)e.push(t);return e}e=[],t=0;for(const r in n)e[t++]=r;return e}}}(n),r=function Cj(n){if(n.Z&&"function"==typeof n.Z)return n.Z();if(typeof Map<"u"&&n instanceof Map||typeof Set<"u"&&n instanceof Set)return Array.from(n.values());if("string"==typeof n)return n.split("");if(_C(n)){for(var e=[],t=n.length,r=0;r<t;r++)e.push(n[r]);return e}for(r in e=[],t=0,n)e[t++]=n[r];return e}(n),i=r.length,a=0;a<i;a++)e.call(void 0,r[a],t&&t[a],n)}(st=Hv.prototype).setTimeout=function(n){this.P=n},st.nb=function(n){n=n.target;const e=this.M;e&&3==$u(n)?e.l():this.Pa(n)},st.Pa=function(n){try{if(n==this.g)e:{const S=$u(this.g);var e=this.g.Ia();if(this.g.da(),!(3>S)&&(3!=S||_M||this.g&&(this.h.h||this.g.ja()||EF(this.g)))){this.J||4!=S||7==e||Vv(),RC(this);var t=this.g.da();this.aa=t;t:if(tF(this)){var r=EF(this.g);n="";var i=r.length,a=4==$u(this.g);if(!this.h.i){if(typeof TextDecoder>"u"){$p(this),$v(this);var c="";break t}this.h.i=new Zt.TextDecoder}for(e=0;e<i;e++)this.h.h=!0,n+=this.h.i.decode(r[e],{stream:a&&e==i-1});r.splice(0,i),this.h.g+=n,this.C=0,c=this.h.g}else c=this.g.ja();if(this.i=200==t,function yj(n,e,t,r,i,a,c){n.info(function(){return"XMLHTTP RESP ("+r+") [ attempt "+i+"]: "+e+"\n"+t+"\n"+a+" "+c})}(this.j,this.u,this.A,this.m,this.W,S,t),this.i){if(this.ba&&!this.K){t:{if(this.g){var f,_=this.g;if((f=_.g?_.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!vC(f)){var w=f;break t}}w=null}if(!(t=w)){this.i=!1,this.o=3,Ws(12),$p(this),$v(this);break e}Ym(this.j,this.m,t,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,jM(this,t)}this.S?(nF(this,S,c),_M&&this.i&&3==S&&(zN(this.U,this.V,"tick",this.mb),this.V.start())):(Ym(this.j,this.m,c,null),jM(this,c)),4==S&&$p(this),this.i&&!this.J&&(4==S?xF(this.l,this):(this.i=!1,jv(this)))}else 400==t&&0<c.indexOf("Unknown SID")?(this.o=3,Ws(12)):(this.o=0,Ws(13)),$p(this),$v(this)}}}catch{}},st.mb=function(){if(this.g){var n=$u(this.g),e=this.g.ja();this.C<e.length&&(RC(this),nF(this,n,e),this.i&&4!=n&&jv(this))}},st.cancel=function(){this.J=!0,$p(this)},st.lb=function(){this.B=null;const n=Date.now();0<=n-this.Y?(function vj(n,e){n.info(function(){return"TIMEOUT: "+e})}(this.j,this.A),2!=this.L&&(Vv(),Ws(17)),$p(this),this.o=2,$v(this)):rF(this,this.Y-n)};var sF=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function zp(n,e){if(this.g=this.s=this.j="",this.m=null,this.o=this.l="",this.h=!1,n instanceof zp){this.h=void 0!==e?e:n.h,kC(this,n.j),this.s=n.s,this.g=n.g,OC(this,n.m),this.l=n.l,e=n.i;var t=new qv;t.i=e.i,e.g&&(t.g=new Map(e.g),t.h=e.h),oF(this,t),this.o=n.o}else n&&(t=String(n).match(sF))?(this.h=!!e,kC(this,t[1]||"",!0),this.s=zv(t[2]||""),this.g=zv(t[3]||"",!0),OC(this,t[4]),this.l=zv(t[5]||"",!0),oF(this,t[6]||"",!0),this.o=zv(t[7]||"")):(this.h=!!e,this.i=new qv(null,this.h))}function ju(n){return new zp(n)}function kC(n,e,t){n.j=t?zv(e,!0):e,n.j&&(n.j=n.j.replace(/:$/,""))}function OC(n,e){if(e){if(e=Number(e),isNaN(e)||0>e)throw Error("Bad port number "+e);n.m=e}else n.m=null}function oF(n,e,t){e instanceof qv?(n.i=e,function Rj(n,e){e&&!n.j&&(bh(n),n.i=null,n.g.forEach(function(t,r){var i=r.toLowerCase();r!=i&&(lF(this,r),uF(this,i,t))},n)),n.j=e}(n.i,n.h)):(t||(e=Gv(e,Mj)),n.i=new qv(e,n.h))}function mr(n,e,t){n.i.set(e,t)}function PC(n){return mr(n,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),n}function zv(n,e){return n?e?decodeURI(n.replace(/%25/g,"%2525")):decodeURIComponent(n):""}function Gv(n,e,t){return"string"==typeof n?(n=encodeURI(n).replace(e,Sj),t&&(n=n.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),n):null}function Sj(n){return"%"+((n=n.charCodeAt(0))>>4&15).toString(16)+(15&n).toString(16)}zp.prototype.toString=function(){var n=[],e=this.j;e&&n.push(Gv(e,aF,!0),":");var t=this.g;return(t||"file"==e)&&(n.push("//"),(e=this.s)&&n.push(Gv(e,aF,!0),"@"),n.push(encodeURIComponent(String(t)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(t=this.m)&&n.push(":",String(t))),(t=this.l)&&(this.g&&"/"!=t.charAt(0)&&n.push("/"),n.push(Gv(t,"/"==t.charAt(0)?Aj:Tj,!0))),(t=this.i.toString())&&n.push("?",t),(t=this.o)&&n.push("#",Gv(t,xj)),n.join("")};var aF=/[#\/\?@]/g,Tj=/[#\?:]/g,Aj=/[#\?]/g,Mj=/[#\?@]/g,xj=/#/g;function qv(n,e){this.h=this.g=null,this.i=n||null,this.j=!!e}function bh(n){n.g||(n.g=new Map,n.h=0,n.i&&function Dj(n,e){if(n){n=n.split("&");for(var t=0;t<n.length;t++){var r=n[t].indexOf("="),i=null;if(0<=r){var a=n[t].substring(0,r);i=n[t].substring(r+1)}else a=n[t];e(a,i?decodeURIComponent(i.replace(/\+/g," ")):"")}}}(n.i,function(e,t){n.add(decodeURIComponent(e.replace(/\+/g," ")),t)}))}function lF(n,e){bh(n),e=Qm(n,e),n.g.has(e)&&(n.i=null,n.h-=n.g.get(e).length,n.g.delete(e))}function cF(n,e){return bh(n),e=Qm(n,e),n.g.has(e)}function uF(n,e,t){lF(n,e),0<t.length&&(n.i=null,n.g.set(Qm(n,e),pM(t)),n.h+=t.length)}function Qm(n,e){return e=String(e),n.j&&(e=e.toLowerCase()),e}function dF(n){this.l=n||Oj,n=Zt.PerformanceNavigationTiming?0<(n=Zt.performance.getEntriesByType("navigation")).length&&("hq"==n[0].nextHopProtocol||"h2"==n[0].nextHopProtocol):!!(Zt.g&&Zt.g.Ka&&Zt.g.Ka()&&Zt.g.Ka().ec),this.j=n?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}(st=qv.prototype).add=function(n,e){bh(this),this.i=null,n=Qm(this,n);var t=this.g.get(n);return t||this.g.set(n,t=[]),t.push(e),this.h+=1,this},st.forEach=function(n,e){bh(this),this.g.forEach(function(t,r){t.forEach(function(i){n.call(e,i,r,this)},this)},this)},st.sa=function(){bh(this);const n=Array.from(this.g.values()),e=Array.from(this.g.keys()),t=[];for(let r=0;r<e.length;r++){const i=n[r];for(let a=0;a<i.length;a++)t.push(e[r])}return t},st.Z=function(n){bh(this);let e=[];if("string"==typeof n)cF(this,n)&&(e=e.concat(this.g.get(Qm(this,n))));else{n=Array.from(this.g.values());for(let t=0;t<n.length;t++)e=e.concat(n[t])}return e},st.set=function(n,e){return bh(this),this.i=null,cF(this,n=Qm(this,n))&&(this.h-=this.g.get(n).length),this.g.set(n,[e]),this.h+=1,this},st.get=function(n,e){return n&&0<(n=this.Z(n)).length?String(n[0]):e},st.toString=function(){if(this.i)return this.i;if(!this.g)return"";const n=[],e=Array.from(this.g.keys());for(var t=0;t<e.length;t++){var r=e[t];const a=encodeURIComponent(String(r)),c=this.Z(r);for(r=0;r<c.length;r++){var i=a;""!==c[r]&&(i+="="+encodeURIComponent(String(c[r]))),n.push(i)}}return this.i=n.join("&")};var Oj=10;function hF(n){return!!n.h||!!n.g&&n.g.size>=n.j}function fF(n){return n.h?1:n.g?n.g.size:0}function $M(n,e){return n.h?n.h==e:!!n.g&&n.g.has(e)}function zM(n,e){n.g?n.g.add(e):n.h=e}function pF(n,e){n.h&&n.h==e?n.h=null:n.g&&n.g.has(e)&&n.g.delete(e)}function gF(n){if(null!=n.h)return n.i.concat(n.h.F);if(null!=n.g&&0!==n.g.size){let e=n.i;for(const t of n.g.values())e=e.concat(t.F);return e}return pM(n.i)}function GM(){}function Pj(){this.g=new GM}function Nj(n,e,t){const r=t||"";try{iF(n,function(i,a){let c=i;Pv(i)&&(c=RM(i)),e.push(r+a+"="+encodeURIComponent(c))})}catch(i){throw e.push(r+"type="+encodeURIComponent("_badmap")),i}}function NC(n,e,t,r,i){try{e.onload=null,e.onerror=null,e.onabort=null,e.ontimeout=null,i(r)}catch{}}function Wv(n){this.l=n.fc||null,this.j=n.ob||!1}function FC(n,e){Ti.call(this),this.F=n,this.u=e,this.m=void 0,this.readyState=qM,this.status=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.v=new Headers,this.h=null,this.C="GET",this.B="",this.g=!1,this.A=this.j=this.l=null}dF.prototype.cancel=function(){if(this.i=gF(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&0!==this.g.size){for(const n of this.g.values())n.cancel();this.g.clear()}},GM.prototype.stringify=function(n){return Zt.JSON.stringify(n,void 0)},GM.prototype.parse=function(n){return Zt.JSON.parse(n,void 0)},Si(Wv,FM),Wv.prototype.g=function(){return new FC(this.l,this.j)},Wv.prototype.i=function(n){return function(){return n}}({}),Si(FC,Ti);var qM=0;function mF(n){n.j.read().then(n.Xa.bind(n)).catch(n.ka.bind(n))}function Kv(n){n.readyState=4,n.l=null,n.j=null,n.A=null,Zv(n)}function Zv(n){n.onreadystatechange&&n.onreadystatechange.call(n)}(st=FC.prototype).open=function(n,e){if(this.readyState!=qM)throw this.abort(),Error("Error reopening a connection");this.C=n,this.B=e,this.readyState=1,Zv(this)},st.send=function(n){if(1!=this.readyState)throw this.abort(),Error("need to call open() first. ");this.g=!0;const e={headers:this.v,method:this.C,credentials:this.m,cache:void 0};n&&(e.body=n),(this.F||Zt).fetch(new Request(this.B,e)).then(this.$a.bind(this),this.ka.bind(this))},st.abort=function(){this.response=this.responseText="",this.v=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&4!=this.readyState&&(this.g=!1,Kv(this)),this.readyState=qM},st.$a=function(n){if(this.g&&(this.l=n,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=n.headers,this.readyState=2,Zv(this)),this.g&&(this.readyState=3,Zv(this),this.g)))if("arraybuffer"===this.responseType)n.arrayBuffer().then(this.Ya.bind(this),this.ka.bind(this));else if(typeof Zt.ReadableStream<"u"&&"body"in n){if(this.j=n.body.getReader(),this.u){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.A=new TextDecoder;mF(this)}else n.text().then(this.Za.bind(this),this.ka.bind(this))},st.Xa=function(n){if(this.g){if(this.u&&n.value)this.response.push(n.value);else if(!this.u){var e=n.value?n.value:new Uint8Array(0);(e=this.A.decode(e,{stream:!n.done}))&&(this.response=this.responseText+=e)}n.done?Kv(this):Zv(this),3==this.readyState&&mF(this)}},st.Za=function(n){this.g&&(this.response=this.responseText=n,Kv(this))},st.Ya=function(n){this.g&&(this.response=n,Kv(this))},st.ka=function(){this.g&&Kv(this)},st.setRequestHeader=function(n,e){this.v.append(n,e)},st.getResponseHeader=function(n){return this.h&&this.h.get(n.toLowerCase())||""},st.getAllResponseHeaders=function(){if(!this.h)return"";const n=[],e=this.h.entries();for(var t=e.next();!t.done;)n.push((t=t.value)[0]+": "+t[1]),t=e.next();return n.join("\r\n")},Object.defineProperty(FC.prototype,"withCredentials",{get:function(){return"include"===this.m},set:function(n){this.m=n?"include":"same-origin"}});var Lj=Zt.JSON.parse;function Pr(n){Ti.call(this),this.headers=new Map,this.u=n||null,this.h=!1,this.C=this.g=null,this.I="",this.m=0,this.j="",this.l=this.G=this.v=this.F=!1,this.B=0,this.A=null,this.K=_F,this.L=this.M=!1}Si(Pr,Ti);var _F="",Vj=/^https?$/i,Bj=["POST","PUT"];function yF(n,e){n.h=!1,n.g&&(n.l=!0,n.g.abort(),n.l=!1),n.j=e,n.m=5,vF(n),LC(n)}function vF(n){n.F||(n.F=!0,Xi(n,"complete"),Xi(n,"error"))}function bF(n){if(n.h&&typeof hM<"u"&&(!n.C[1]||4!=$u(n)||2!=n.da()))if(n.v&&4==$u(n))NM(n.La,0,n);else if(Xi(n,"readystatechange"),4==$u(n)){n.h=!1;try{const f=n.da();e:switch(f){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var e=!0;break e;default:e=!1}var t;if(!(t=e)){var r;if(r=0===f){var i=String(n.I).match(sF)[1]||null;if(!i&&Zt.self&&Zt.self.location){var a=Zt.self.location.protocol;i=a.substr(0,a.length-1)}r=!Vj.test(i?i.toLowerCase():"")}t=r}if(t)Xi(n,"complete"),Xi(n,"success");else{n.m=6;try{var c=2<$u(n)?n.g.statusText:""}catch{c=""}n.j=c+" ["+n.da()+"]",vF(n)}}finally{LC(n)}}}function LC(n,e){if(n.g){wF(n);const t=n.g,r=n.C[0]?mC:null;n.g=null,n.C=null,e||Xi(n,"ready");try{t.onreadystatechange=r}catch{}}}function wF(n){n.g&&n.L&&(n.g.ontimeout=null),n.A&&(Zt.clearTimeout(n.A),n.A=null)}function $u(n){return n.g?n.g.readyState:0}function EF(n){try{if(!n.g)return null;if("response"in n.g)return n.g.response;switch(n.K){case _F:case"text":return n.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in n.g)return n.g.mozResponseArrayBuffer}return null}catch{return null}}function CF(n){let e="";return EM(n,function(t,r){e+=r,e+=":",e+=t,e+="\r\n"}),e}function WM(n,e,t){e:{for(r in t){var r=!1;break e}r=!0}r||(t=CF(t),"string"==typeof n?null!=t&&encodeURIComponent(String(t)):mr(n,e,t))}function Yv(n,e,t){return t&&t.internalChannelParams&&t.internalChannelParams[n]||e}function IF(n){this.Ga=0,this.i=[],this.j=new SC,this.oa=this.wa=this.G=this.Y=this.g=this.Da=this.F=this.ma=this.o=this.U=this.s=null,this.fb=this.W=0,this.cb=Yv("failFast",!1,n),this.M=this.v=this.u=this.m=this.l=null,this.aa=!0,this.ta=this.Fa=this.V=-1,this.ba=this.A=this.C=0,this.ab=Yv("baseRetryDelayMs",5e3,n),this.hb=Yv("retryDelaySeedMs",1e4,n),this.eb=Yv("forwardChannelMaxRetries",2,n),this.xa=Yv("forwardChannelRequestTimeoutMs",2e4,n),this.va=n&&n.xmlHttpFactory||void 0,this.Ha=n&&n.dc||!1,this.K=void 0,this.I=n&&n.supportsCrossDomainXhr||!1,this.J="",this.h=new dF(n&&n.concurrentRequestLimit),this.Ja=new Pj,this.P=n&&n.fastHandshake||!1,this.O=n&&n.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.bb=n&&n.bc||!1,n&&n.Ea&&this.j.Ea(),n&&n.forceLongPolling&&(this.aa=!1),this.ca=!this.P&&this.aa&&n&&n.detectBufferingProxy||!1,this.na=void 0,this.S=0,this.L=!1,this.pa=this.B=null}function KM(n){if(DF(n),3==n.H){var e=n.W++,t=ju(n.G);mr(t,"SID",n.J),mr(t,"RID",e),mr(t,"TYPE","terminate"),Qv(n,t),(e=new Hv(n,n.j,e,void 0)).L=2,e.v=PC(ju(t)),t=!1,Zt.navigator&&Zt.navigator.sendBeacon&&(t=Zt.navigator.sendBeacon(e.v.toString(),"")),!t&&Zt.Image&&((new Image).src=e.v,t=!0),t||(e.g=PF(e.l,null),e.g.ha(e.v)),e.G=Date.now(),jv(e)}kF(n)}function VC(n){n.g&&(YM(n),n.g.cancel(),n.g=null)}function DF(n){VC(n),n.u&&(Zt.clearTimeout(n.u),n.u=null),UC(n),n.h.cancel(),n.m&&("number"==typeof n.m&&Zt.clearTimeout(n.m),n.m=null)}function BC(n){hF(n.h)||n.m||(n.m=!0,UN(n.Na,n),n.C=0)}function SF(n,e){var t;t=e?e.m:n.W++;const r=ju(n.G);mr(r,"SID",n.J),mr(r,"RID",t),mr(r,"AID",n.V),Qv(n,r),n.o&&n.s&&WM(r,n.o,n.s),t=new Hv(n,n.j,t,n.C+1),null===n.o&&(t.I=n.s),e&&(n.i=e.F.concat(n.i)),e=TF(n,t,1e3),t.setTimeout(Math.round(.5*n.xa)+Math.round(.5*n.xa*Math.random())),zM(n.h,t),HM(t,r,e)}function Qv(n,e){n.ma&&EM(n.ma,function(t,r){mr(e,r,t)}),n.l&&iF({},function(t,r){mr(e,r,t)})}function TF(n,e,t){t=Math.min(n.i.length,t);var r=n.l?vs(n.l.Va,n.l,n):null;e:{var i=n.i;let a=-1;for(;;){const c=["count="+t];-1==a?0<t?(a=i[0].h,c.push("ofs="+a)):a=0:c.push("ofs="+a);let f=!0;for(let _=0;_<t;_++){let w=i[_].h;const S=i[_].g;if(w-=a,0>w)a=Math.max(0,i[_].h-100),f=!1;else try{Nj(S,c,"req"+w+"_")}catch{r&&r(S)}}if(f){r=c.join("&");break e}}}return n=n.i.splice(0,t),e.F=n,r}function AF(n){n.g||n.u||(n.ba=1,UN(n.Ma,n),n.A=0)}function ZM(n){return!(n.g||n.u||3<=n.A||(n.ba++,n.u=Bv(vs(n.Ma,n),RF(n,n.A)),n.A++,0))}function YM(n){null!=n.B&&(Zt.clearTimeout(n.B),n.B=null)}function MF(n){n.g=new Hv(n,n.j,"rpc",n.ba),null===n.o&&(n.g.I=n.s),n.g.O=0;var e=ju(n.wa);mr(e,"RID","rpc"),mr(e,"SID",n.J),mr(e,"CI",n.M?"0":"1"),mr(e,"AID",n.V),mr(e,"TYPE","xmlhttp"),Qv(n,e),n.o&&n.s&&WM(e,n.o,n.s),n.K&&n.g.setTimeout(n.K);var t=n.g;n=n.oa,t.L=1,t.v=PC(ju(e)),t.s=null,t.S=!0,eF(t,n)}function UC(n){null!=n.v&&(Zt.clearTimeout(n.v),n.v=null)}function xF(n,e){var t=null;if(n.g==e){UC(n),YM(n),n.g=null;var r=2}else{if(!$M(n.h,e))return;t=e.F,pF(n.h,e),r=1}if(0!=n.H)if(n.ta=e.aa,e.i)if(1==r){t=e.s?e.s.length:0,e=Date.now()-e.G;var i=n.C;Xi(r=TC(),new ZN(r,t)),BC(n)}else AF(n);else if(3==(i=e.o)||0==i&&0<n.ta||!(1==r&&function Hj(n,e){return!(fF(n.h)>=n.h.j-(n.m?1:0)||(n.m?(n.i=e.F.concat(n.i),0):1==n.H||2==n.H||n.C>=(n.cb?0:n.eb)||(n.m=Bv(vs(n.Na,n,e),RF(n,n.C)),n.C++,0)))}(n,e)||2==r&&ZM(n)))switch(t&&0<t.length&&(e=n.h,e.i=e.i.concat(t)),i){case 1:Gp(n,5);break;case 4:Gp(n,10);break;case 3:Gp(n,6);break;default:Gp(n,2)}}function RF(n,e){let t=n.ab+Math.floor(Math.random()*n.hb);return n.l||(t*=2),t*e}function Gp(n,e){if(n.j.info("Error code "+e),2==e){var t=null;n.l&&(t=null);var r=vs(n.pb,n);t||(t=new zp("//www.google.com/images/cleardot.gif"),Zt.location&&"http"==Zt.location.protocol||kC(t,"https"),PC(t)),function Fj(n,e){const t=new SC;if(Zt.Image){const r=new Image;r.onload=yC(NC,t,r,"TestLoadImage: loaded",!0,e),r.onerror=yC(NC,t,r,"TestLoadImage: error",!1,e),r.onabort=yC(NC,t,r,"TestLoadImage: abort",!1,e),r.ontimeout=yC(NC,t,r,"TestLoadImage: timeout",!1,e),Zt.setTimeout(function(){r.ontimeout&&r.ontimeout()},1e4),r.src=n}else e(!1)}(t.toString(),r)}else Ws(2);n.H=0,n.l&&n.l.za(e),kF(n),DF(n)}function kF(n){if(n.H=0,n.pa=[],n.l){const e=gF(n.h);(0!=e.length||0!=n.i.length)&&(IN(n.pa,e),IN(n.pa,n.i),n.h.i.length=0,pM(n.i),n.i.length=0),n.l.ya()}}function OF(n,e,t){var r=t instanceof zp?ju(t):new zp(t,void 0);if(""!=r.g)e&&(r.g=e+"."+r.g),OC(r,r.m);else{var i=Zt.location;r=i.protocol,e=e?e+"."+i.hostname:i.hostname,i=+i.port;var a=new zp(null,void 0);r&&kC(a,r),e&&(a.g=e),i&&OC(a,i),t&&(a.l=t),r=a}return e=n.Da,(t=n.F)&&e&&mr(r,t,e),mr(r,"VER",n.qa),Qv(n,r),r}function PF(n,e,t){if(e&&!n.I)throw Error("Can't create secondary domain capable XhrIo object.");return(e=new Pr(t&&n.Ha&&!n.va?new Wv({ob:!0}):n.va)).Oa(n.I),e}function NF(){}function HC(){if(Zm&&!(10<=Number(ij)))throw Error("Environmental error: no available transport.")}function ko(n,e){Ti.call(this),this.g=new IF(e),this.l=n,this.h=e&&e.messageUrlParams||null,n=e&&e.messageHeaders||null,e&&e.clientProtocolHeaderRequired&&(n?n["X-Client-Protocol"]="webchannel":n={"X-Client-Protocol":"webchannel"}),this.g.s=n,n=e&&e.initMessageHeaders||null,e&&e.messageContentType&&(n?n["X-WebChannel-Content-Type"]=e.messageContentType:n={"X-WebChannel-Content-Type":e.messageContentType}),e&&e.Ca&&(n?n["X-WebChannel-Client-Profile"]=e.Ca:n={"X-WebChannel-Client-Profile":e.Ca}),this.g.U=n,(n=e&&e.cc)&&!vC(n)&&(this.g.o=n),this.A=e&&e.supportsCrossDomainXhr||!1,this.v=e&&e.sendRawJson||!1,(e=e&&e.httpSessionIdParam)&&!vC(e)&&(this.g.F=e,null!==(n=this.h)&&e in n&&e in(n=this.h)&&delete n[e]),this.j=new Xm(this)}function FF(n){LM.call(this);var e=n.__sm__;if(e){e:{for(const t in e){n=t;break e}n=void 0}(this.i=n)&&(n=this.i,e=null!==e&&n in e?e[n]:void 0),this.data=e}else this.data=n}function LF(){VM.call(this),this.status=1}function Xm(n){this.g=n}function hl(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.m=Array(this.blockSize),this.i=this.h=0,this.reset()}function QM(n,e,t){t||(t=0);var r=Array(16);if("string"==typeof e)for(var i=0;16>i;++i)r[i]=e.charCodeAt(t++)|e.charCodeAt(t++)<<8|e.charCodeAt(t++)<<16|e.charCodeAt(t++)<<24;else for(i=0;16>i;++i)r[i]=e[t++]|e[t++]<<8|e[t++]<<16|e[t++]<<24;var a=n.g[3],c=(e=n.g[0])+(a^(t=n.g[1])&((i=n.g[2])^a))+r[0]+3614090360&4294967295;c=(t=(i=(a=(e=(t=(i=(a=(e=(t=(i=(a=(e=(t=(i=(a=(e=(t=(i=(a=(e=(t=(i=(a=(e=(t=(i=(a=(e=(t=(i=(a=(e=(t=(i=(a=(e=(t=(i=(a=(e=(t=(i=(a=(e=(t=(i=(a=(e=(t=(i=(a=(e=(t=(i=(a=(e=(t=(i=(a=(e=t+(c<<7&4294967295|c>>>25))+((c=a+(i^e&(t^i))+r[1]+3905402710&4294967295)<<12&4294967295|c>>>20))+((c=i+(t^a&(e^t))+r[2]+606105819&4294967295)<<17&4294967295|c>>>15))+((c=t+(e^i&(a^e))+r[3]+3250441966&4294967295)<<22&4294967295|c>>>10))+((c=e+(a^t&(i^a))+r[4]+4118548399&4294967295)<<7&4294967295|c>>>25))+((c=a+(i^e&(t^i))+r[5]+1200080426&4294967295)<<12&4294967295|c>>>20))+((c=i+(t^a&(e^t))+r[6]+2821735955&4294967295)<<17&4294967295|c>>>15))+((c=t+(e^i&(a^e))+r[7]+4249261313&4294967295)<<22&4294967295|c>>>10))+((c=e+(a^t&(i^a))+r[8]+1770035416&4294967295)<<7&4294967295|c>>>25))+((c=a+(i^e&(t^i))+r[9]+2336552879&4294967295)<<12&4294967295|c>>>20))+((c=i+(t^a&(e^t))+r[10]+4294925233&4294967295)<<17&4294967295|c>>>15))+((c=t+(e^i&(a^e))+r[11]+2304563134&4294967295)<<22&4294967295|c>>>10))+((c=e+(a^t&(i^a))+r[12]+1804603682&4294967295)<<7&4294967295|c>>>25))+((c=a+(i^e&(t^i))+r[13]+4254626195&4294967295)<<12&4294967295|c>>>20))+((c=i+(t^a&(e^t))+r[14]+2792965006&4294967295)<<17&4294967295|c>>>15))+((c=t+(e^i&(a^e))+r[15]+1236535329&4294967295)<<22&4294967295|c>>>10))+((c=e+(i^a&(t^i))+r[1]+4129170786&4294967295)<<5&4294967295|c>>>27))+((c=a+(t^i&(e^t))+r[6]+3225465664&4294967295)<<9&4294967295|c>>>23))+((c=i+(e^t&(a^e))+r[11]+643717713&4294967295)<<14&4294967295|c>>>18))+((c=t+(a^e&(i^a))+r[0]+3921069994&4294967295)<<20&4294967295|c>>>12))+((c=e+(i^a&(t^i))+r[5]+3593408605&4294967295)<<5&4294967295|c>>>27))+((c=a+(t^i&(e^t))+r[10]+38016083&4294967295)<<9&4294967295|c>>>23))+((c=i+(e^t&(a^e))+r[15]+3634488961&4294967295)<<14&4294967295|c>>>18))+((c=t+(a^e&(i^a))+r[4]+3889429448&4294967295)<<20&4294967295|c>>>12))+((c=e+(i^a&(t^i))+r[9]+568446438&4294967295)<<5&4294967295|c>>>27))+((c=a+(t^i&(e^t))+r[14]+3275163606&4294967295)<<9&4294967295|c>>>23))+((c=i+(e^t&(a^e))+r[3]+4107603335&4294967295)<<14&4294967295|c>>>18))+((c=t+(a^e&(i^a))+r[8]+1163531501&4294967295)<<20&4294967295|c>>>12))+((c=e+(i^a&(t^i))+r[13]+2850285829&4294967295)<<5&4294967295|c>>>27))+((c=a+(t^i&(e^t))+r[2]+4243563512&4294967295)<<9&4294967295|c>>>23))+((c=i+(e^t&(a^e))+r[7]+1735328473&4294967295)<<14&4294967295|c>>>18))+((c=t+(a^e&(i^a))+r[12]+2368359562&4294967295)<<20&4294967295|c>>>12))+((c=e+(t^i^a)+r[5]+4294588738&4294967295)<<4&4294967295|c>>>28))+((c=a+(e^t^i)+r[8]+2272392833&4294967295)<<11&4294967295|c>>>21))+((c=i+(a^e^t)+r[11]+1839030562&4294967295)<<16&4294967295|c>>>16))+((c=t+(i^a^e)+r[14]+4259657740&4294967295)<<23&4294967295|c>>>9))+((c=e+(t^i^a)+r[1]+2763975236&4294967295)<<4&4294967295|c>>>28))+((c=a+(e^t^i)+r[4]+1272893353&4294967295)<<11&4294967295|c>>>21))+((c=i+(a^e^t)+r[7]+4139469664&4294967295)<<16&4294967295|c>>>16))+((c=t+(i^a^e)+r[10]+3200236656&4294967295)<<23&4294967295|c>>>9))+((c=e+(t^i^a)+r[13]+681279174&4294967295)<<4&4294967295|c>>>28))+((c=a+(e^t^i)+r[0]+3936430074&4294967295)<<11&4294967295|c>>>21))+((c=i+(a^e^t)+r[3]+3572445317&4294967295)<<16&4294967295|c>>>16))+((c=t+(i^a^e)+r[6]+76029189&4294967295)<<23&4294967295|c>>>9))+((c=e+(t^i^a)+r[9]+3654602809&4294967295)<<4&4294967295|c>>>28))+((c=a+(e^t^i)+r[12]+3873151461&4294967295)<<11&4294967295|c>>>21))+((c=i+(a^e^t)+r[15]+530742520&4294967295)<<16&4294967295|c>>>16))+((c=t+(i^a^e)+r[2]+3299628645&4294967295)<<23&4294967295|c>>>9))+((c=e+(i^(t|~a))+r[0]+4096336452&4294967295)<<6&4294967295|c>>>26))+((c=a+(t^(e|~i))+r[7]+1126891415&4294967295)<<10&4294967295|c>>>22))+((c=i+(e^(a|~t))+r[14]+2878612391&4294967295)<<15&4294967295|c>>>17))+((c=t+(a^(i|~e))+r[5]+4237533241&4294967295)<<21&4294967295|c>>>11))+((c=e+(i^(t|~a))+r[12]+1700485571&4294967295)<<6&4294967295|c>>>26))+((c=a+(t^(e|~i))+r[3]+2399980690&4294967295)<<10&4294967295|c>>>22))+((c=i+(e^(a|~t))+r[10]+4293915773&4294967295)<<15&4294967295|c>>>17))+((c=t+(a^(i|~e))+r[1]+2240044497&4294967295)<<21&4294967295|c>>>11))+((c=e+(i^(t|~a))+r[8]+1873313359&4294967295)<<6&4294967295|c>>>26))+((c=a+(t^(e|~i))+r[15]+4264355552&4294967295)<<10&4294967295|c>>>22))+((c=i+(e^(a|~t))+r[6]+2734768916&4294967295)<<15&4294967295|c>>>17))+((c=t+(a^(i|~e))+r[13]+1309151649&4294967295)<<21&4294967295|c>>>11))+((a=(e=t+((c=e+(i^(t|~a))+r[4]+4149444226&4294967295)<<6&4294967295|c>>>26))+((c=a+(t^(e|~i))+r[11]+3174756917&4294967295)<<10&4294967295|c>>>22))^((i=a+((c=i+(e^(a|~t))+r[2]+718787259&4294967295)<<15&4294967295|c>>>17))|~e))+r[9]+3951481745&4294967295,n.g[0]=n.g[0]+e&4294967295,n.g[1]=n.g[1]+(i+(c<<21&4294967295|c>>>11))&4294967295,n.g[2]=n.g[2]+i&4294967295,n.g[3]=n.g[3]+a&4294967295}function Fn(n,e){this.h=e;for(var t=[],r=!0,i=n.length-1;0<=i;i--){var a=0|n[i];r&&a==e||(t[i]=a,r=!1)}this.g=t}(st=Pr.prototype).Oa=function(n){this.M=n},st.ha=function(n,e,t,r){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.I+"; newUri="+n);e=e?e.toUpperCase():"GET",this.I=n,this.j="",this.m=0,this.F=!1,this.h=!0,this.g=this.u?this.u.g():BM.g(),this.C=function QN(n){return n.h||(n.h=n.i())}(this.u?this.u:BM),this.g.onreadystatechange=vs(this.La,this);try{this.G=!0,this.g.open(e,String(n),!0),this.G=!1}catch(a){return void yF(this,a)}if(n=t||"",t=new Map(this.headers),r)if(Object.getPrototypeOf(r)===Object.prototype)for(var i in r)t.set(i,r[i]);else{if("function"!=typeof r.keys||"function"!=typeof r.get)throw Error("Unknown input type for opt_headers: "+String(r));for(const a of r.keys())t.set(a,r.get(a))}r=Array.from(t.keys()).find(a=>"content-type"==a.toLowerCase()),i=Zt.FormData&&n instanceof Zt.FormData,!(0<=CN(Bj,e))||r||i||t.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[a,c]of t)this.g.setRequestHeader(a,c);this.K&&(this.g.responseType=this.K),"withCredentials"in this.g&&this.g.withCredentials!==this.M&&(this.g.withCredentials=this.M);try{wF(this),0<this.B&&((this.L=function Uj(n){return Zm&&function rj(){return SN(nj,9,function(){let n=0;const e=DN(String(wC)).split("."),t=DN("9").split("."),r=Math.max(e.length,t.length);for(let c=0;0==n&&c<r;c++){var i=e[c]||"",a=t[c]||"";do{if(i=/(\d*)(\D*)(.*)/.exec(i)||["","","",""],a=/(\d*)(\D*)(.*)/.exec(a)||["","","",""],0==i[0].length&&0==a[0].length)break;n=gM(0==i[1].length?0:parseInt(i[1],10),0==a[1].length?0:parseInt(a[1],10))||gM(0==i[2].length,0==a[2].length)||gM(i[2],a[2]),i=i[3],a=a[3]}while(0==n)}return 0<=n})}()&&"number"==typeof n.timeout&&void 0!==n.ontimeout}(this.g))?(this.g.timeout=this.B,this.g.ontimeout=vs(this.ua,this)):this.A=NM(this.ua,this.B,this)),this.v=!0,this.g.send(n),this.v=!1}catch(a){yF(this,a)}},st.ua=function(){typeof hM<"u"&&this.g&&(this.j="Timed out after "+this.B+"ms, aborting",this.m=8,Xi(this,"timeout"),this.abort(8))},st.abort=function(n){this.g&&this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1,this.m=n||7,Xi(this,"complete"),Xi(this,"abort"),LC(this))},st.N=function(){this.g&&(this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1),LC(this,!0)),Pr.$.N.call(this)},st.La=function(){this.s||(this.G||this.v||this.l?bF(this):this.kb())},st.kb=function(){bF(this)},st.da=function(){try{return 2<$u(this)?this.g.status:-1}catch{return-1}},st.ja=function(){try{return this.g?this.g.responseText:""}catch{return""}},st.Wa=function(n){if(this.g){var e=this.g.responseText;return n&&0==e.indexOf(n)&&(e=e.substring(n.length)),Lj(e)}},st.Ia=function(){return this.m},st.Sa=function(){return"string"==typeof this.j?this.j:String(this.j)},(st=IF.prototype).qa=8,st.H=1,st.Na=function(n){if(this.m)if(this.m=null,1==this.H){if(!n){this.W=Math.floor(1e5*Math.random()),n=this.W++;const i=new Hv(this,this.j,n,void 0);let a=this.s;if(this.U&&(a?(a=RN(a),ON(a,this.U)):a=this.U),null!==this.o||this.O||(i.I=a,a=null),this.P)e:{for(var e=0,t=0;t<this.i.length;t++){var r=this.i[t];if(void 0===(r="__data__"in r.g&&"string"==typeof(r=r.g.__data__)?r.length:void 0))break;if(4096<(e+=r)){e=t;break e}if(4096===e||t===this.i.length-1){e=t+1;break e}}e=1e3}else e=1e3;e=TF(this,i,e),mr(t=ju(this.G),"RID",n),mr(t,"CVER",22),this.F&&mr(t,"X-HTTP-Session-Id",this.F),Qv(this,t),a&&(this.O?e="headers="+encodeURIComponent(String(CF(a)))+"&"+e:this.o&&WM(t,this.o,a)),zM(this.h,i),this.bb&&mr(t,"TYPE","init"),this.P?(mr(t,"$req",e),mr(t,"SID","null"),i.ba=!0,HM(i,t,null)):HM(i,t,e),this.H=2}}else 3==this.H&&(n?SF(this,n):0==this.i.length||hF(this.h)||SF(this))},st.Ma=function(){if(this.u=null,MF(this),this.ca&&!(this.L||null==this.g||0>=this.S)){var n=2*this.S;this.j.info("BP detection timer enabled: "+n),this.B=Bv(vs(this.jb,this),n)}},st.jb=function(){this.B&&(this.B=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.M=!1,this.L=!0,Ws(10),VC(this),MF(this))},st.ib=function(){null!=this.v&&(this.v=null,VC(this),ZM(this),Ws(19))},st.pb=function(n){n?(this.j.info("Successfully pinged google.com"),Ws(2)):(this.j.info("Failed to ping google.com"),Ws(1))},(st=NF.prototype).Ba=function(){},st.Aa=function(){},st.za=function(){},st.ya=function(){},st.Va=function(){},HC.prototype.g=function(n,e){return new ko(n,e)},Si(ko,Ti),ko.prototype.m=function(){this.g.l=this.j,this.A&&(this.g.I=!0);var n=this.g,e=this.l,t=this.h||void 0;Ws(0),n.Y=e,n.ma=t||{},n.M=n.aa,n.G=OF(n,null,n.Y),BC(n)},ko.prototype.close=function(){KM(this.g)},ko.prototype.u=function(n){var e=this.g;if("string"==typeof n){var t={};t.__data__=n,n=t}else this.v&&((t={}).__data__=RM(n),n=t);e.i.push(new class{constructor(n,e){this.h=n,this.g=e}}(e.fb++,n)),3==e.H&&BC(e)},ko.prototype.N=function(){this.g.l=null,delete this.j,KM(this.g),delete this.g,ko.$.N.call(this)},Si(FF,LM),Si(LF,VM),Si(Xm,NF),Xm.prototype.Ba=function(){Xi(this.g,"a")},Xm.prototype.Aa=function(n){Xi(this.g,new FF(n))},Xm.prototype.za=function(n){Xi(this.g,new LF)},Xm.prototype.ya=function(){Xi(this.g,"b")},Si(hl,function jj(){this.blockSize=-1}),hl.prototype.reset=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.i=this.h=0},hl.prototype.j=function(n,e){void 0===e&&(e=n.length);for(var t=e-this.blockSize,r=this.m,i=this.h,a=0;a<e;){if(0==i)for(;a<=t;)QM(this,n,a),a+=this.blockSize;if("string"==typeof n){for(;a<e;)if(r[i++]=n.charCodeAt(a++),i==this.blockSize){QM(this,r),i=0;break}}else for(;a<e;)if(r[i++]=n[a++],i==this.blockSize){QM(this,r),i=0;break}}this.h=i,this.i+=e},hl.prototype.l=function(){var n=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);n[0]=128;for(var e=1;e<n.length-8;++e)n[e]=0;var t=8*this.i;for(e=n.length-8;e<n.length;++e)n[e]=255&t,t/=256;for(this.j(n),n=Array(16),e=t=0;4>e;++e)for(var r=0;32>r;r+=8)n[t++]=this.g[e]>>>r&255;return n};var $j={};function XM(n){return-128<=n&&128>n?SN($j,n,function(e){return new Fn([0|e],0>e?-1:0)}):new Fn([0|n],0>n?-1:0)}function Ic(n){if(isNaN(n)||!isFinite(n))return Jm;if(0>n)return Ji(Ic(-n));for(var e=[],t=1,r=0;n>=t;r++)e[r]=n/t|0,t*=JM;return new Fn(e,0)}var JM=4294967296,Jm=XM(0),ex=XM(1),BF=XM(16777216);function zu(n){if(0!=n.h)return!1;for(var e=0;e<n.g.length;e++)if(0!=n.g[e])return!1;return!0}function wa(n){return-1==n.h}function Ji(n){for(var e=n.g.length,t=[],r=0;r<e;r++)t[r]=~n.g[r];return new Fn(t,~n.h).add(ex)}function jC(n,e){return n.add(Ji(e))}function $C(n,e){for(;(65535&n[e])!=n[e];)n[e+1]+=n[e]>>>16,n[e]&=65535,e++}function Xv(n,e){this.g=n,this.h=e}function zC(n,e){if(zu(e))throw Error("division by zero");if(zu(n))return new Xv(Jm,Jm);if(wa(n))return e=zC(Ji(n),e),new Xv(Ji(e.g),Ji(e.h));if(wa(e))return e=zC(n,Ji(e)),new Xv(Ji(e.g),e.h);if(30<n.g.length){if(wa(n)||wa(e))throw Error("slowDivide_ only works with positive integers.");for(var t=ex,r=e;0>=r.X(n);)t=UF(t),r=UF(r);var i=e_(t,1),a=e_(r,1);for(r=e_(r,2),t=e_(t,2);!zu(r);){var c=a.add(r);0>=c.X(n)&&(i=i.add(t),a=c),r=e_(r,1),t=e_(t,1)}return e=jC(n,i.R(e)),new Xv(i,e)}for(i=Jm;0<=n.X(e);){for(t=Math.max(1,Math.floor(n.ea()/e.ea())),r=48>=(r=Math.ceil(Math.log(t)/Math.LN2))?1:Math.pow(2,r-48),c=(a=Ic(t)).R(e);wa(c)||0<c.X(n);)c=(a=Ic(t-=r)).R(e);zu(a)&&(a=ex),i=i.add(a),n=jC(n,c)}return new Xv(i,n)}function UF(n){for(var e=n.g.length+1,t=[],r=0;r<e;r++)t[r]=n.D(r)<<1|n.D(r-1)>>>31;return new Fn(t,n.h)}function e_(n,e){var t=e>>5;e%=32;for(var r=n.g.length-t,i=[],a=0;a<r;a++)i[a]=0<e?n.D(a+t)>>>e|n.D(a+t+1)<<32-e:n.D(a+t);return new Fn(i,n.h)}(st=Fn.prototype).ea=function(){if(wa(this))return-Ji(this).ea();for(var n=0,e=1,t=0;t<this.g.length;t++){var r=this.D(t);n+=(0<=r?r:JM+r)*e,e*=JM}return n},st.toString=function(n){if(2>(n=n||10)||36<n)throw Error("radix out of range: "+n);if(zu(this))return"0";if(wa(this))return"-"+Ji(this).toString(n);for(var e=Ic(Math.pow(n,6)),t=this,r="";;){var i=zC(t,e).g,a=((0<(t=jC(t,i.R(e))).g.length?t.g[0]:t.h)>>>0).toString(n);if(zu(t=i))return a+r;for(;6>a.length;)a="0"+a;r=a+r}},st.D=function(n){return 0>n?0:n<this.g.length?this.g[n]:this.h},st.X=function(n){return wa(n=jC(this,n))?-1:zu(n)?0:1},st.abs=function(){return wa(this)?Ji(this):this},st.add=function(n){for(var e=Math.max(this.g.length,n.g.length),t=[],r=0,i=0;i<=e;i++){var a=r+(65535&this.D(i))+(65535&n.D(i)),c=(a>>>16)+(this.D(i)>>>16)+(n.D(i)>>>16);r=c>>>16,t[i]=(c&=65535)<<16|(a&=65535)}return new Fn(t,-2147483648&t[t.length-1]?-1:0)},st.R=function(n){if(zu(this)||zu(n))return Jm;if(wa(this))return wa(n)?Ji(this).R(Ji(n)):Ji(Ji(this).R(n));if(wa(n))return Ji(this.R(Ji(n)));if(0>this.X(BF)&&0>n.X(BF))return Ic(this.ea()*n.ea());for(var e=this.g.length+n.g.length,t=[],r=0;r<2*e;r++)t[r]=0;for(r=0;r<this.g.length;r++)for(var i=0;i<n.g.length;i++){var a=this.D(r)>>>16,c=65535&this.D(r),f=n.D(i)>>>16,_=65535&n.D(i);t[2*r+2*i]+=c*_,$C(t,2*r+2*i),t[2*r+2*i+1]+=a*_,$C(t,2*r+2*i+1),t[2*r+2*i+1]+=c*f,$C(t,2*r+2*i+1),t[2*r+2*i+2]+=a*f,$C(t,2*r+2*i+2)}for(r=0;r<e;r++)t[r]=t[2*r+1]<<16|t[2*r];for(r=e;r<2*e;r++)t[r]=0;return new Fn(t,0)},st.gb=function(n){return zC(this,n).h},st.and=function(n){for(var e=Math.max(this.g.length,n.g.length),t=[],r=0;r<e;r++)t[r]=this.D(r)&n.D(r);return new Fn(t,this.h&n.h)},st.or=function(n){for(var e=Math.max(this.g.length,n.g.length),t=[],r=0;r<e;r++)t[r]=this.D(r)|n.D(r);return new Fn(t,this.h|n.h)},st.xor=function(n){for(var e=Math.max(this.g.length,n.g.length),t=[],r=0;r<e;r++)t[r]=this.D(r)^n.D(r);return new Fn(t,this.h^n.h)},HC.prototype.createWebChannel=HC.prototype.g,ko.prototype.send=ko.prototype.u,ko.prototype.open=ko.prototype.m,ko.prototype.close=ko.prototype.close,AC.NO_ERROR=0,AC.TIMEOUT=8,AC.HTTP_ERROR=6,YN.COMPLETE="complete",XN.EventType=Uv,Uv.OPEN="a",Uv.CLOSE="b",Uv.ERROR="c",Uv.MESSAGE="d",Ti.prototype.listen=Ti.prototype.O,Pr.prototype.listenOnce=Pr.prototype.P,Pr.prototype.getLastError=Pr.prototype.Sa,Pr.prototype.getLastErrorCode=Pr.prototype.Ia,Pr.prototype.getStatus=Pr.prototype.da,Pr.prototype.getResponseJson=Pr.prototype.Wa,Pr.prototype.getResponseText=Pr.prototype.ja,Pr.prototype.send=Pr.prototype.ha,Pr.prototype.setWithCredentials=Pr.prototype.Oa,hl.prototype.digest=hl.prototype.l,hl.prototype.reset=hl.prototype.reset,hl.prototype.update=hl.prototype.j,Fn.prototype.add=Fn.prototype.add,Fn.prototype.multiply=Fn.prototype.R,Fn.prototype.modulo=Fn.prototype.gb,Fn.prototype.compare=Fn.prototype.X,Fn.prototype.toNumber=Fn.prototype.ea,Fn.prototype.toString=Fn.prototype.toString,Fn.prototype.getBits=Fn.prototype.D,Fn.fromNumber=Ic,Fn.fromString=function VF(n,e){if(0==n.length)throw Error("number format error: empty string");if(2>(e=e||10)||36<e)throw Error("radix out of range: "+e);if("-"==n.charAt(0))return Ji(VF(n.substring(1),e));if(0<=n.indexOf("-"))throw Error('number format error: interior "-" character');for(var t=Ic(Math.pow(e,8)),r=Jm,i=0;i<n.length;i+=8){var a=Math.min(8,n.length-i),c=parseInt(n.substring(i,i+a),e);8>a?(a=Ic(Math.pow(e,a)),r=r.R(a).add(Ic(c))):r=(r=r.R(t)).add(Ic(c))}return r};var zj=dl.createWebChannelTransport=function(){return new HC},Gj=dl.getStatEventTarget=function(){return TC()},tx=dl.ErrorCode=AC,qj=dl.EventType=YN,Wj=dl.Event=jp,HF=dl.Stat={xb:0,Ab:1,Bb:2,Ub:3,Zb:4,Wb:5,Xb:6,Vb:7,Tb:8,Yb:9,PROXY:10,NOPROXY:11,Rb:12,Nb:13,Ob:14,Mb:15,Pb:16,Qb:17,tb:18,sb:19,ub:20},Kj=dl.FetchXmlHttpFactory=Wv,GC=dl.WebChannel=XN,Zj=dl.XhrIo=Pr,Yj=dl.Md5=hl,t_=dl.Integer=Fn;const jF="@firebase/firestore";class Ai{constructor(e){this.uid=e}isAuthenticated(){return null!=this.uid}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}Ai.UNAUTHENTICATED=new Ai(null),Ai.GOOGLE_CREDENTIALS=new Ai("google-credentials-uid"),Ai.FIRST_PARTY=new Ai("first-party-uid"),Ai.MOCK_USER=new Ai("mock-user");let n_="9.21.0";const wh=new ba.Yd("@firebase/firestore");function nx(){return wh.logLevel}function Ue(n,...e){if(wh.logLevel<=ba.in.DEBUG){const t=e.map(rx);wh.debug(`Firestore (${n_}): ${n}`,...t)}}function zr(n,...e){if(wh.logLevel<=ba.in.ERROR){const t=e.map(rx);wh.error(`Firestore (${n_}): ${n}`,...t)}}function Ea(n,...e){if(wh.logLevel<=ba.in.WARN){const t=e.map(rx);wh.warn(`Firestore (${n_}): ${n}`,...t)}}function rx(n){if("string"==typeof n)return n;try{return JSON.stringify(n)}catch{return n}}function ct(n="Unexpected state"){const e=`FIRESTORE (${n_}) INTERNAL ASSERTION FAILED: `+n;throw zr(e),new Error(e)}function It(n,e){n||ct()}function Je(n,e){return n}const he={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class Pe extends cn.ZR{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}class di{constructor(){this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}}class $F{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class Jj{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable(()=>t(Ai.UNAUTHENTICATED))}shutdown(){}}class e${constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable(()=>t(this.token.user))}shutdown(){this.changeListener=null}}class t${constructor(e){this.t=e,this.currentUser=Ai.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){var r=this;let i=this.i;const a=w=>this.i!==i?(i=this.i,t(w)):Promise.resolve();let c=new di;this.o=()=>{this.i++,this.currentUser=this.u(),c.resolve(),c=new di,e.enqueueRetryable(()=>a(this.currentUser))};const f=()=>{const w=c;e.enqueueRetryable((0,ye.Z)(function*(){yield w.promise,yield a(r.currentUser)}))},_=w=>{Ue("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=w,this.auth.addAuthTokenListener(this.o),f()};this.t.onInit(w=>_(w)),setTimeout(()=>{if(!this.auth){const w=this.t.getImmediate({optional:!0});w?_(w):(Ue("FirebaseAuthCredentialsProvider","Auth not yet detected"),c.resolve(),c=new di)}},0),f()}getToken(){const e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then(r=>this.i!==e?(Ue("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(It("string"==typeof r.accessToken),new $F(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.auth.removeAuthTokenListener(this.o)}u(){const e=this.auth&&this.auth.getUid();return It(null===e||"string"==typeof e),new Ai(e)}}class n${constructor(e,t,r){this.h=e,this.l=t,this.m=r,this.type="FirstParty",this.user=Ai.FIRST_PARTY,this.g=new Map}p(){return this.m?this.m():null}get headers(){this.g.set("X-Goog-AuthUser",this.h);const e=this.p();return e&&this.g.set("Authorization",e),this.l&&this.g.set("X-Goog-Iam-Authorization-Token",this.l),this.g}}class r${constructor(e,t,r){this.h=e,this.l=t,this.m=r}getToken(){return Promise.resolve(new n$(this.h,this.l,this.m))}start(e,t){e.enqueueRetryable(()=>t(Ai.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class zF{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class i${constructor(e){this.I=e,this.forceRefresh=!1,this.appCheck=null,this.T=null}start(e,t){const r=a=>{null!=a.error&&Ue("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${a.error.message}`);const c=a.token!==this.T;return this.T=a.token,Ue("FirebaseAppCheckTokenProvider",`Received ${c?"new":"existing"} token.`),c?t(a.token):Promise.resolve()};this.o=a=>{e.enqueueRetryable(()=>r(a))};const i=a=>{Ue("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=a,this.appCheck.addTokenListener(this.o)};this.I.onInit(a=>i(a)),setTimeout(()=>{if(!this.appCheck){const a=this.I.getImmediate({optional:!0});a?i(a):Ue("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(t=>t?(It("string"==typeof t.token),this.T=t.token,new zF(t.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.appCheck.removeTokenListener(this.o)}}function s$(n){const e=typeof self<"u"&&(self.crypto||self.msCrypto),t=new Uint8Array(n);if(e&&"function"==typeof e.getRandomValues)e.getRandomValues(t);else for(let r=0;r<n;r++)t[r]=Math.floor(256*Math.random());return t}class GF{static A(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=Math.floor(256/e.length)*e.length;let r="";for(;r.length<20;){const i=s$(40);for(let a=0;a<i.length;++a)r.length<20&&i[a]<t&&(r+=e.charAt(i[a]%e.length))}return r}}function Gt(n,e){return n<e?-1:n>e?1:0}function r_(n,e,t){return n.length===e.length&&n.every((r,i)=>t(r,e[i]))}function qF(n){return n+"\0"}class _r{constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new Pe(he.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new Pe(he.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<-62135596800)throw new Pe(he.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new Pe(he.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return _r.fromMillis(Date.now())}static fromDate(e){return _r.fromMillis(e.getTime())}static fromMillis(e){const t=Math.floor(e/1e3),r=Math.floor(1e6*(e-1e3*t));return new _r(t,r)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?Gt(this.nanoseconds,e.nanoseconds):Gt(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){return String(this.seconds- -62135596800).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}class At{constructor(e){this.timestamp=e}static fromTimestamp(e){return new At(e)}static min(){return new At(new _r(0,0))}static max(){return new At(new _r(253402300799,999999999))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}class Jv{constructor(e,t,r){void 0===t?t=0:t>e.length&&ct(),void 0===r?r=e.length-t:r>e.length-t&&ct(),this.segments=e,this.offset=t,this.len=r}get length(){return this.len}isEqual(e){return 0===Jv.comparator(this,e)}child(e){const t=this.segments.slice(this.offset,this.limit());return e instanceof Jv?e.forEach(r=>{t.push(r)}):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return this.construct(this.segments,this.offset+(e=void 0===e?1:e),this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return 0===this.length}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,r=this.limit();t<r;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){const r=Math.min(e.length,t.length);for(let i=0;i<r;i++){const a=e.get(i),c=t.get(i);if(a<c)return-1;if(a>c)return 1}return e.length<t.length?-1:e.length>t.length?1:0}}class _n extends Jv{construct(e,t,r){return new _n(e,t,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}static fromString(...e){const t=[];for(const r of e){if(r.indexOf("//")>=0)throw new Pe(he.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);t.push(...r.split("/").filter(i=>i.length>0))}return new _n(t)}static emptyPath(){return new _n([])}}const o$=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class Nr extends Jv{construct(e,t,r){return new Nr(e,t,r)}static isValidIdentifier(e){return o$.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),Nr.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return 1===this.length&&"__name__"===this.get(0)}static keyField(){return new Nr(["__name__"])}static fromServerFormat(e){const t=[];let r="",i=0;const a=()=>{if(0===r.length)throw new Pe(he.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(r),r=""};let c=!1;for(;i<e.length;){const f=e[i];if("\\"===f){if(i+1===e.length)throw new Pe(he.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const _=e[i+1];if("\\"!==_&&"."!==_&&"`"!==_)throw new Pe(he.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=_,i+=2}else"`"===f?(c=!c,i++):"."!==f||c?(r+=f,i++):(a(),i++)}if(a(),c)throw new Pe(he.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new Nr(t)}static emptyPath(){return new Nr([])}}class Xe{constructor(e){this.path=e}static fromPath(e){return new Xe(_n.fromString(e))}static fromName(e){return new Xe(_n.fromString(e).popFirst(5))}static empty(){return new Xe(_n.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return null!==e&&0===_n.comparator(this.path,e.path)}toString(){return this.path.toString()}static comparator(e,t){return _n.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new Xe(new _n(e.slice()))}}class qC{constructor(e,t,r,i){this.indexId=e,this.collectionGroup=t,this.fields=r,this.indexState=i}}function ix(n){return n.fields.find(e=>2===e.kind)}function qp(n){return n.fields.filter(e=>2!==e.kind)}qC.UNKNOWN_ID=-1;class WC{constructor(e,t){this.fieldPath=e,this.kind=t}}class eb{constructor(e,t){this.sequenceNumber=e,this.offset=t}static empty(){return new eb(0,Oo.min())}}function WF(n,e){const t=n.toTimestamp().seconds,r=n.toTimestamp().nanoseconds+1,i=At.fromTimestamp(1e9===r?new _r(t+1,0):new _r(t,r));return new Oo(i,Xe.empty(),e)}function KF(n){return new Oo(n.readTime,n.key,-1)}class Oo{constructor(e,t,r){this.readTime=e,this.documentKey=t,this.largestBatchId=r}static min(){return new Oo(At.min(),Xe.empty(),-1)}static max(){return new Oo(At.max(),Xe.empty(),-1)}}function sx(n,e){let t=n.readTime.compareTo(e.readTime);return 0!==t?t:(t=Xe.comparator(n.documentKey,e.documentKey),0!==t?t:Gt(n.largestBatchId,e.largestBatchId))}const ZF="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class YF{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}function Eh(n){return ox.apply(this,arguments)}function ox(){return ox=(0,ye.Z)(function*(n){if(n.code!==he.FAILED_PRECONDITION||n.message!==ZF)throw n;Ue("LocalStore","Unexpectedly lost primary lease")}),ox.apply(this,arguments)}class ae{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(t=>{this.isDone=!0,this.result=t,this.nextCallback&&this.nextCallback(t)},t=>{this.isDone=!0,this.error=t,this.catchCallback&&this.catchCallback(t)})}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&ct(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new ae((r,i)=>{this.nextCallback=a=>{this.wrapSuccess(e,a).next(r,i)},this.catchCallback=a=>{this.wrapFailure(t,a).next(r,i)}})}toPromise(){return new Promise((e,t)=>{this.next(e,t)})}wrapUserFunction(e){try{const t=e();return t instanceof ae?t:ae.resolve(t)}catch(t){return ae.reject(t)}}wrapSuccess(e,t){return e?this.wrapUserFunction(()=>e(t)):ae.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction(()=>e(t)):ae.reject(t)}static resolve(e){return new ae((t,r)=>{t(e)})}static reject(e){return new ae((t,r)=>{r(e)})}static waitFor(e){return new ae((t,r)=>{let i=0,a=0,c=!1;e.forEach(f=>{++i,f.next(()=>{++a,c&&a===i&&t()},_=>r(_))}),c=!0,a===i&&t()})}static or(e){let t=ae.resolve(!1);for(const r of e)t=t.next(i=>i?ae.resolve(i):r());return t}static forEach(e,t){const r=[];return e.forEach((i,a)=>{r.push(t.call(this,i,a))}),this.waitFor(r)}static mapArray(e,t){return new ae((r,i)=>{const a=e.length,c=new Array(a);let f=0;for(let _=0;_<a;_++){const w=_;t(e[w]).next(S=>{c[w]=S,++f,f===a&&r(c)},S=>i(S))}})}static doWhile(e,t){return new ae((r,i)=>{const a=()=>{!0===e()?t().next(()=>{a()},i):r()};a()})}}class KC{constructor(e,t){this.action=e,this.transaction=t,this.aborted=!1,this.R=new di,this.transaction.oncomplete=()=>{this.R.resolve()},this.transaction.onabort=()=>{t.error?this.R.reject(new tb(e,t.error)):this.R.resolve()},this.transaction.onerror=r=>{const i=ax(r.target.error);this.R.reject(new tb(e,i))}}static open(e,t,r,i){try{return new KC(t,e.transaction(i,r))}catch(a){throw new tb(t,a)}}get v(){return this.R.promise}abort(e){e&&this.R.reject(e),this.aborted||(Ue("SimpleDb","Aborting transaction:",e?e.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())}P(){const e=this.transaction;this.aborted||"function"!=typeof e.commit||e.commit()}store(e){const t=this.transaction.objectStore(e);return new u$(t)}}class fl{constructor(e,t,r){this.name=e,this.version=t,this.V=r,12.2===fl.S((0,cn.z$)())&&zr("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}static delete(e){return Ue("SimpleDb","Removing database:",e),Wp(window.indexedDB.deleteDatabase(e)).toPromise()}static D(){if(!(0,cn.hl)())return!1;if(fl.C())return!0;const e=(0,cn.z$)(),t=fl.S(e),r=0<t&&t<10,i=fl.N(e),a=0<i&&i<4.5;return!(e.indexOf("MSIE ")>0||e.indexOf("Trident/")>0||e.indexOf("Edge/")>0||r||a)}static C(){var e;return typeof process<"u"&&"YES"===(null===(e=process.env)||void 0===e?void 0:e.k)}static M(e,t){return e.store(t)}static S(e){const t=e.match(/i(?:phone|pad|pod) os ([\d_]+)/i),r=t?t[1].split("_").slice(0,2).join("."):"-1";return Number(r)}static N(e){const t=e.match(/Android ([\d.]+)/i),r=t?t[1].split(".").slice(0,2).join("."):"-1";return Number(r)}O(e){var t=this;return(0,ye.Z)(function*(){return t.db||(Ue("SimpleDb","Opening database:",t.name),t.db=yield new Promise((r,i)=>{const a=indexedDB.open(t.name,t.version);a.onsuccess=c=>{r(c.target.result)},a.onblocked=()=>{i(new tb(e,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},a.onerror=c=>{const f=c.target.error;i("VersionError"===f.name?new Pe(he.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh."):"InvalidStateError"===f.name?new Pe(he.FAILED_PRECONDITION,"Unable to open an IndexedDB connection. This could be due to running in a private browsing session on a browser whose private browsing sessions do not support IndexedDB: "+f):new tb(e,f))},a.onupgradeneeded=c=>{Ue("SimpleDb",'Database "'+t.name+'" requires upgrade from version:',c.oldVersion),t.V.$(c.target.result,a.transaction,c.oldVersion,t.version).next(()=>{Ue("SimpleDb","Database upgrade to version "+t.version+" complete")})}})),t.F&&(t.db.onversionchange=r=>t.F(r)),t.db})()}B(e){this.F=e,this.db&&(this.db.onversionchange=t=>e(t))}runTransaction(e,t,r,i){var a=this;return(0,ye.Z)(function*(){const c="readonly"===t;let f=0;for(;;){++f;try{a.db=yield a.O(e);const _=KC.open(a.db,e,c?"readonly":"readwrite",r),w=i(_).next(S=>(_.P(),S)).catch(S=>(_.abort(S),ae.reject(S))).toPromise();return w.catch(()=>{}),yield _.v,w}catch(_){const w=_,S="FirebaseError"!==w.name&&f<3;if(Ue("SimpleDb","Transaction failed with error:",w.message,"Retrying:",S),a.close(),!S)return Promise.reject(w)}}})()}close(){this.db&&this.db.close(),this.db=void 0}}class c${constructor(e){this.L=e,this.q=!1,this.U=null}get isDone(){return this.q}get K(){return this.U}set cursor(e){this.L=e}done(){this.q=!0}G(e){this.U=e}delete(){return Wp(this.L.delete())}}class tb extends Pe{constructor(e,t){super(he.UNAVAILABLE,`IndexedDB transaction '${e}' failed: ${t}`),this.name="IndexedDbTransactionError"}}function Ch(n){return"IndexedDbTransactionError"===n.name}class u${constructor(e){this.store=e}put(e,t){let r;return void 0!==t?(Ue("SimpleDb","PUT",this.store.name,e,t),r=this.store.put(t,e)):(Ue("SimpleDb","PUT",this.store.name,"<auto-key>",e),r=this.store.put(e)),Wp(r)}add(e){return Ue("SimpleDb","ADD",this.store.name,e,e),Wp(this.store.add(e))}get(e){return Wp(this.store.get(e)).next(t=>(void 0===t&&(t=null),Ue("SimpleDb","GET",this.store.name,e,t),t))}delete(e){return Ue("SimpleDb","DELETE",this.store.name,e),Wp(this.store.delete(e))}count(){return Ue("SimpleDb","COUNT",this.store.name),Wp(this.store.count())}j(e,t){const r=this.options(e,t);if(r.index||"function"!=typeof this.store.getAll){const i=this.cursor(r),a=[];return this.W(i,(c,f)=>{a.push(f)}).next(()=>a)}{const i=this.store.getAll(r.range);return new ae((a,c)=>{i.onerror=f=>{c(f.target.error)},i.onsuccess=f=>{a(f.target.result)}})}}H(e,t){const r=this.store.getAll(e,null===t?void 0:t);return new ae((i,a)=>{r.onerror=c=>{a(c.target.error)},r.onsuccess=c=>{i(c.target.result)}})}J(e,t){Ue("SimpleDb","DELETE ALL",this.store.name);const r=this.options(e,t);r.Y=!1;const i=this.cursor(r);return this.W(i,(a,c,f)=>f.delete())}X(e,t){let r;t?r=e:(r={},t=e);const i=this.cursor(r);return this.W(i,t)}Z(e){const t=this.cursor({});return new ae((r,i)=>{t.onerror=a=>{const c=ax(a.target.error);i(c)},t.onsuccess=a=>{const c=a.target.result;c?e(c.primaryKey,c.value).next(f=>{f?c.continue():r()}):r()}})}W(e,t){const r=[];return new ae((i,a)=>{e.onerror=c=>{a(c.target.error)},e.onsuccess=c=>{const f=c.target.result;if(!f)return void i();const _=new c$(f),w=t(f.primaryKey,f.value,_);if(w instanceof ae){const S=w.catch(x=>(_.done(),ae.reject(x)));r.push(S)}_.isDone?i():null===_.K?f.continue():f.continue(_.K)}}).next(()=>ae.waitFor(r))}options(e,t){let r;return void 0!==e&&("string"==typeof e?r=e:t=e),{index:r,range:t}}cursor(e){let t="next";if(e.reverse&&(t="prev"),e.index){const r=this.store.index(e.index);return e.Y?r.openKeyCursor(e.range,t):r.openCursor(e.range,t)}return this.store.openCursor(e.range,t)}}function Wp(n){return new ae((e,t)=>{n.onsuccess=r=>{e(r.target.result)},n.onerror=r=>{const i=ax(r.target.error);t(i)}})}let QF=!1;function ax(n){const e=fl.S((0,cn.z$)());if(e>=12.2&&e<13){const t="An internal error was encountered in the Indexed Database server";if(n.message.indexOf(t)>=0){const r=new Pe("internal",`IOS_INDEXEDDB_BUG1: IndexedDb has thrown '${t}'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.`);return QF||(QF=!0,setTimeout(()=>{throw r},0)),r}}return n}class d${constructor(e,t){this.asyncQueue=e,this.tt=t,this.task=null}start(){this.et(15e3)}stop(){this.task&&(this.task.cancel(),this.task=null)}get started(){return null!==this.task}et(e){var t=this;Ue("IndexBackiller",`Scheduled in ${e}ms`),this.task=this.asyncQueue.enqueueAfterDelay("index_backfill",e,(0,ye.Z)(function*(){t.task=null;try{Ue("IndexBackiller",`Documents written: ${yield t.tt.nt()}`)}catch(r){Ch(r)?Ue("IndexBackiller","Ignoring IndexedDB error during index backfill: ",r):yield Eh(r)}yield t.et(6e4)}))}}class h${constructor(e,t){this.localStore=e,this.persistence=t}nt(e=50){var t=this;return(0,ye.Z)(function*(){return t.persistence.runTransaction("Backfill Indexes","readwrite-primary",r=>t.st(r,e))})()}st(e,t){const r=new Set;let i=t,a=!0;return ae.doWhile(()=>!0===a&&i>0,()=>this.localStore.indexManager.getNextCollectionGroupToUpdate(e).next(c=>{if(null!==c&&!r.has(c))return Ue("IndexBackiller",`Processing collection: ${c}`),this.it(e,c,i).next(f=>{i-=f,r.add(c)});a=!1})).next(()=>t-i)}it(e,t,r){return this.localStore.indexManager.getMinOffsetFromCollectionGroup(e,t).next(i=>this.localStore.localDocuments.getNextDocuments(e,t,i,r).next(a=>{const c=a.changes;return this.localStore.indexManager.updateIndexEntries(e,c).next(()=>this.rt(i,a)).next(f=>(Ue("IndexBackiller",`Updating offset: ${f}`),this.localStore.indexManager.updateCollectionGroup(e,t,f))).next(()=>c.size)}))}rt(e,t){let r=e;return t.changes.forEach((i,a)=>{const c=KF(a);sx(c,r)>0&&(r=c)}),new Oo(r.readTime,r.documentKey,Math.max(t.batchId,e.largestBatchId))}}let Po=(()=>{class n{constructor(t,r){this.previousValue=t,r&&(r.sequenceNumberHandler=i=>this.ot(i),this.ut=i=>r.writeSequenceNumber(i))}ot(t){return this.previousValue=Math.max(t,this.previousValue),this.previousValue}next(){const t=++this.previousValue;return this.ut&&this.ut(t),t}}return n.ct=-1,n})();function nb(n){return null==n}function rb(n){return 0===n&&1/n==-1/0}function XF(n){return"number"==typeof n&&Number.isInteger(n)&&!rb(n)&&n<=Number.MAX_SAFE_INTEGER&&n>=Number.MIN_SAFE_INTEGER}function ws(n){let e="";for(let t=0;t<n.length;t++)e.length>0&&(e=JF(e)),e=f$(n.get(t),e);return JF(e)}function f$(n,e){let t=e;const r=n.length;for(let i=0;i<r;i++){const a=n.charAt(i);switch(a){case"\0":t+="\x01\x10";break;case"\x01":t+="\x01\x11";break;default:t+=a}}return t}function JF(n){return n+"\x01\x01"}function Dc(n){const e=n.length;if(It(e>=2),2===e)return It("\x01"===n.charAt(0)&&"\x01"===n.charAt(1)),_n.emptyPath();const t=e-2,r=[];let i="";for(let a=0;a<e;){const c=n.indexOf("\x01",a);switch((c<0||c>t)&&ct(),n.charAt(c+1)){case"\x01":const f=n.substring(a,c);let _;0===i.length?_=f:(i+=f,_=i,i=""),r.push(_);break;case"\x10":i+=n.substring(a,c),i+="\0";break;case"\x11":i+=n.substring(a,c+1);break;default:ct()}a=c+2}return new _n(r)}const eL=["userId","batchId"];function ZC(n,e){return[n,ws(e)]}function tL(n,e,t){return[n,ws(e),t]}const p$={},g$=["prefixPath","collectionGroup","readTime","documentId"],m$=["prefixPath","collectionGroup","documentId"],_$=["collectionGroup","readTime","prefixPath","documentId"],y$=["canonicalId","targetId"],v$=["targetId","path"],b$=["path","targetId"],w$=["collectionId","parent"],E$=["indexId","uid"],C$=["uid","sequenceNumber"],I$=["indexId","uid","arrayValue","directionalValue","orderedDocumentKey","documentKey"],D$=["indexId","uid","orderedDocumentKey"],S$=["userId","collectionPath","documentId"],T$=["userId","collectionPath","largestBatchId"],A$=["userId","collectionGroup","largestBatchId"],nL=["mutationQueues","mutations","documentMutations","remoteDocuments","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries"],M$=[...nL,"documentOverlays"],rL=["mutationQueues","mutations","documentMutations","remoteDocumentsV14","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries","documentOverlays"],iL=rL,x$=[...iL,"indexConfiguration","indexState","indexEntries"];class lx extends YF{constructor(e,t){super(),this.at=e,this.currentSequenceNumber=t}}function Mi(n,e){const t=Je(n);return fl.M(t.at,e)}function sL(n){let e=0;for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e++;return e}function Ih(n,e){for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e(t,n[t])}function oL(n){for(const e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}class er{constructor(e,t){this.comparator=e,this.root=t||es.EMPTY}insert(e,t){return new er(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,es.BLACK,null,null))}remove(e){return new er(this.comparator,this.root.remove(e,this.comparator).copy(null,null,es.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){const r=this.comparator(e,t.key);if(0===r)return t.value;r<0?t=t.left:r>0&&(t=t.right)}return null}indexOf(e){let t=0,r=this.root;for(;!r.isEmpty();){const i=this.comparator(e,r.key);if(0===i)return t+r.left.size;i<0?r=r.left:(t+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((t,r)=>(e(t,r),!1))}toString(){const e=[];return this.inorderTraversal((t,r)=>(e.push(`${t}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new YC(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new YC(this.root,e,this.comparator,!1)}getReverseIterator(){return new YC(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new YC(this.root,e,this.comparator,!0)}}class YC{constructor(e,t,r,i){this.isReverse=i,this.nodeStack=[];let a=1;for(;!e.isEmpty();)if(a=t?r(e.key,t):1,t&&i&&(a*=-1),a<0)e=this.isReverse?e.left:e.right;else{if(0===a){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(0===this.nodeStack.length)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class es{constructor(e,t,r,i,a){this.key=e,this.value=t,this.color=r??es.RED,this.left=i??es.EMPTY,this.right=a??es.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,r,i,a){return new es(e??this.key,t??this.value,r??this.color,i??this.left,a??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,r){let i=this;const a=r(e,i.key);return i=a<0?i.copy(null,null,null,i.left.insert(e,t,r),null):0===a?i.copy(null,t,null,null,null):i.copy(null,null,null,null,i.right.insert(e,t,r)),i.fixUp()}removeMin(){if(this.left.isEmpty())return es.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let r,i=this;if(t(e,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(e,t),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),0===t(e,i.key)){if(i.right.isEmpty())return es.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(e,t))}return i.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,es.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,es.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw ct();const e=this.left.check();if(e!==this.right.check())throw ct();return e+(this.isRed()?0:1)}}es.EMPTY=null,es.RED=!0,es.BLACK=!1,es.EMPTY=new class{constructor(){this.size=0}get key(){throw ct()}get value(){throw ct()}get color(){throw ct()}get left(){throw ct()}get right(){throw ct()}copy(n,e,t,r,i){return this}insert(n,e,t){return new es(n,e)}remove(n,e){return this}isEmpty(){return!0}inorderTraversal(n){return!1}reverseTraversal(n){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};class cr{constructor(e){this.comparator=e,this.data=new er(this.comparator)}has(e){return null!==this.data.get(e)}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((t,r)=>(e(t),!1))}forEachInRange(e,t){const r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){const i=r.getNext();if(this.comparator(i.key,e[1])>=0)return;t(i.key)}}forEachWhile(e,t){let r;for(r=void 0!==t?this.data.getIteratorFrom(t):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){const t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new aL(this.data.getIterator())}getIteratorFrom(e){return new aL(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach(r=>{t=t.add(r)}),t}isEqual(e){if(!(e instanceof cr)||this.size!==e.size)return!1;const t=this.data.getIterator(),r=e.data.getIterator();for(;t.hasNext();){const i=t.getNext().key,a=r.getNext().key;if(0!==this.comparator(i,a))return!1}return!0}toArray(){const e=[];return this.forEach(t=>{e.push(t)}),e}toString(){const e=[];return this.forEach(t=>e.push(t)),"SortedSet("+e.toString()+")"}copy(e){const t=new cr(this.comparator);return t.data=e,t}}class aL{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}function i_(n){return n.hasNext()?n.getNext():void 0}class uo{constructor(e){this.fields=e,e.sort(Nr.comparator)}static empty(){return new uo([])}unionWith(e){let t=new cr(Nr.comparator);for(const r of this.fields)t=t.add(r);for(const r of e)t=t.add(r);return new uo(t.toArray())}covers(e){for(const t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return r_(this.fields,e.fields,(t,r)=>t.isEqual(r))}}class lL extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}class hi{constructor(e){this.binaryString=e}static fromBase64String(e){const t=function(r){try{return atob(r)}catch(i){throw typeof DOMException<"u"&&i instanceof DOMException?new lL("Invalid base64 string: "+i):i}}(e);return new hi(t)}static fromUint8Array(e){const t=function(r){let i="";for(let a=0;a<r.length;++a)i+=String.fromCharCode(r[a]);return i}(e);return new hi(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return btoa(this.binaryString)}toUint8Array(){return function(e){const t=new Uint8Array(e.length);for(let r=0;r<e.length;r++)t[r]=e.charCodeAt(r);return t}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return Gt(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}hi.EMPTY_BYTE_STRING=new hi("");const k$=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Dh(n){if(It(!!n),"string"==typeof n){let e=0;const t=k$.exec(n);if(It(!!t),t[1]){let i=t[1];i=(i+"000000000").substr(0,9),e=Number(i)}const r=new Date(n);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:Fr(n.seconds),nanos:Fr(n.nanos)}}function Fr(n){return"number"==typeof n?n:"string"==typeof n?Number(n):0}function Gu(n){return"string"==typeof n?hi.fromBase64String(n):hi.fromUint8Array(n)}function QC(n){var e,t;return"server_timestamp"===(null===(t=((null===(e=n?.mapValue)||void 0===e?void 0:e.fields)||{}).__type__)||void 0===t?void 0:t.stringValue)}function XC(n){const e=n.mapValue.fields.__previous_value__;return QC(e)?XC(e):e}function ib(n){const e=Dh(n.mapValue.fields.__local_write_time__.timestampValue);return new _r(e.seconds,e.nanos)}class O${constructor(e,t,r,i,a,c,f,_){this.databaseId=e,this.appId=t,this.persistenceKey=r,this.host=i,this.ssl=a,this.forceLongPolling=c,this.autoDetectLongPolling=f,this.useFetchStreams=_}}class Sh{constructor(e,t){this.projectId=e,this.database=t||"(default)"}static empty(){return new Sh("","")}get isDefaultDatabase(){return"(default)"===this.database}isEqual(e){return e instanceof Sh&&e.projectId===this.projectId&&e.database===this.database}}const Th={mapValue:{fields:{__type__:{stringValue:"__max__"}}}},JC={nullValue:"NULL_VALUE"};function Ah(n){return"nullValue"in n?0:"booleanValue"in n?1:"integerValue"in n||"doubleValue"in n?2:"timestampValue"in n?3:"stringValue"in n?5:"bytesValue"in n?6:"referenceValue"in n?7:"geoPointValue"in n?8:"arrayValue"in n?9:"mapValue"in n?QC(n)?4:hL(n)?9007199254740991:10:ct()}function Sc(n,e){if(n===e)return!0;const t=Ah(n);if(t!==Ah(e))return!1;switch(t){case 0:case 9007199254740991:return!0;case 1:return n.booleanValue===e.booleanValue;case 4:return ib(n).isEqual(ib(e));case 3:return function(r,i){if("string"==typeof r.timestampValue&&"string"==typeof i.timestampValue&&r.timestampValue.length===i.timestampValue.length)return r.timestampValue===i.timestampValue;const a=Dh(r.timestampValue),c=Dh(i.timestampValue);return a.seconds===c.seconds&&a.nanos===c.nanos}(n,e);case 5:return n.stringValue===e.stringValue;case 6:return i=e,Gu(n.bytesValue).isEqual(Gu(i.bytesValue));case 7:return n.referenceValue===e.referenceValue;case 8:return function(r,i){return Fr(r.geoPointValue.latitude)===Fr(i.geoPointValue.latitude)&&Fr(r.geoPointValue.longitude)===Fr(i.geoPointValue.longitude)}(n,e);case 2:return function(r,i){if("integerValue"in r&&"integerValue"in i)return Fr(r.integerValue)===Fr(i.integerValue);if("doubleValue"in r&&"doubleValue"in i){const a=Fr(r.doubleValue),c=Fr(i.doubleValue);return a===c?rb(a)===rb(c):isNaN(a)&&isNaN(c)}return!1}(n,e);case 9:return r_(n.arrayValue.values||[],e.arrayValue.values||[],Sc);case 10:return function(r,i){const a=r.mapValue.fields||{},c=i.mapValue.fields||{};if(sL(a)!==sL(c))return!1;for(const f in a)if(a.hasOwnProperty(f)&&(void 0===c[f]||!Sc(a[f],c[f])))return!1;return!0}(n,e);default:return ct()}var i}function sb(n,e){return void 0!==(n.values||[]).find(t=>Sc(t,e))}function Mh(n,e){if(n===e)return 0;const t=Ah(n),r=Ah(e);if(t!==r)return Gt(t,r);switch(t){case 0:case 9007199254740991:return 0;case 1:return Gt(n.booleanValue,e.booleanValue);case 2:return function(i,a){const c=Fr(i.integerValue||i.doubleValue),f=Fr(a.integerValue||a.doubleValue);return c<f?-1:c>f?1:c===f?0:isNaN(c)?isNaN(f)?0:-1:1}(n,e);case 3:return cL(n.timestampValue,e.timestampValue);case 4:return cL(ib(n),ib(e));case 5:return Gt(n.stringValue,e.stringValue);case 6:return function(i,a){const c=Gu(i),f=Gu(a);return c.compareTo(f)}(n.bytesValue,e.bytesValue);case 7:return function(i,a){const c=i.split("/"),f=a.split("/");for(let _=0;_<c.length&&_<f.length;_++){const w=Gt(c[_],f[_]);if(0!==w)return w}return Gt(c.length,f.length)}(n.referenceValue,e.referenceValue);case 8:return function(i,a){const c=Gt(Fr(i.latitude),Fr(a.latitude));return 0!==c?c:Gt(Fr(i.longitude),Fr(a.longitude))}(n.geoPointValue,e.geoPointValue);case 9:return function(i,a){const c=i.values||[],f=a.values||[];for(let _=0;_<c.length&&_<f.length;++_){const w=Mh(c[_],f[_]);if(w)return w}return Gt(c.length,f.length)}(n.arrayValue,e.arrayValue);case 10:return function(i,a){if(i===Th.mapValue&&a===Th.mapValue)return 0;if(i===Th.mapValue)return 1;if(a===Th.mapValue)return-1;const c=i.fields||{},f=Object.keys(c),_=a.fields||{},w=Object.keys(_);f.sort(),w.sort();for(let S=0;S<f.length&&S<w.length;++S){const x=Gt(f[S],w[S]);if(0!==x)return x;const L=Mh(c[f[S]],_[w[S]]);if(0!==L)return L}return Gt(f.length,w.length)}(n.mapValue,e.mapValue);default:throw ct()}}function cL(n,e){if("string"==typeof n&&"string"==typeof e&&n.length===e.length)return Gt(n,e);const t=Dh(n),r=Dh(e),i=Gt(t.seconds,r.seconds);return 0!==i?i:Gt(t.nanos,r.nanos)}function s_(n){return cx(n)}function cx(n){return"nullValue"in n?"null":"booleanValue"in n?""+n.booleanValue:"integerValue"in n?""+n.integerValue:"doubleValue"in n?""+n.doubleValue:"timestampValue"in n?function(r){const i=Dh(r);return`time(${i.seconds},${i.nanos})`}(n.timestampValue):"stringValue"in n?n.stringValue:"bytesValue"in n?Gu(n.bytesValue).toBase64():"referenceValue"in n?Xe.fromName(n.referenceValue).toString():"geoPointValue"in n?`geo(${(e=n.geoPointValue).latitude},${e.longitude})`:"arrayValue"in n?function(r){let i="[",a=!0;for(const c of r.values||[])a?a=!1:i+=",",i+=cx(c);return i+"]"}(n.arrayValue):"mapValue"in n?function(r){const i=Object.keys(r.fields||{}).sort();let a="{",c=!0;for(const f of i)c?c=!1:a+=",",a+=`${f}:${cx(r.fields[f])}`;return a+"}"}(n.mapValue):ct();var e}function Kp(n,e){return{referenceValue:`projects/${n.projectId}/databases/${n.database}/documents/${e.path.canonicalString()}`}}function ux(n){return!!n&&"integerValue"in n}function ob(n){return!!n&&"arrayValue"in n}function uL(n){return!!n&&"nullValue"in n}function dL(n){return!!n&&"doubleValue"in n&&isNaN(Number(n.doubleValue))}function tI(n){return!!n&&"mapValue"in n}function ab(n){if(n.geoPointValue)return{geoPointValue:Object.assign({},n.geoPointValue)};if(n.timestampValue&&"object"==typeof n.timestampValue)return{timestampValue:Object.assign({},n.timestampValue)};if(n.mapValue){const e={mapValue:{fields:{}}};return Ih(n.mapValue.fields,(t,r)=>e.mapValue.fields[t]=ab(r)),e}if(n.arrayValue){const e={arrayValue:{values:[]}};for(let t=0;t<(n.arrayValue.values||[]).length;++t)e.arrayValue.values[t]=ab(n.arrayValue.values[t]);return e}return Object.assign({},n)}function hL(n){return"__max__"===(((n.mapValue||{}).fields||{}).__type__||{}).stringValue}function P$(n){return"nullValue"in n?JC:"booleanValue"in n?{booleanValue:!1}:"integerValue"in n||"doubleValue"in n?{doubleValue:NaN}:"timestampValue"in n?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"stringValue"in n?{stringValue:""}:"bytesValue"in n?{bytesValue:""}:"referenceValue"in n?Kp(Sh.empty(),Xe.empty()):"geoPointValue"in n?{geoPointValue:{latitude:-90,longitude:-180}}:"arrayValue"in n?{arrayValue:{}}:"mapValue"in n?{mapValue:{}}:ct()}function N$(n){return"nullValue"in n?{booleanValue:!1}:"booleanValue"in n?{doubleValue:NaN}:"integerValue"in n||"doubleValue"in n?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"timestampValue"in n?{stringValue:""}:"stringValue"in n?{bytesValue:""}:"bytesValue"in n?Kp(Sh.empty(),Xe.empty()):"referenceValue"in n?{geoPointValue:{latitude:-90,longitude:-180}}:"geoPointValue"in n?{arrayValue:{}}:"arrayValue"in n?{mapValue:{}}:"mapValue"in n?Th:ct()}function fL(n,e){const t=Mh(n.value,e.value);return 0!==t?t:n.inclusive&&!e.inclusive?-1:!n.inclusive&&e.inclusive?1:0}function pL(n,e){const t=Mh(n.value,e.value);return 0!==t?t:n.inclusive&&!e.inclusive?1:!n.inclusive&&e.inclusive?-1:0}class ts{constructor(e){this.value=e}static empty(){return new ts({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let r=0;r<e.length-1;++r)if(t=(t.mapValue.fields||{})[e.get(r)],!tI(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=ab(t)}setAll(e){let t=Nr.emptyPath(),r={},i=[];e.forEach((c,f)=>{if(!t.isImmediateParentOf(f)){const _=this.getFieldsMap(t);this.applyChanges(_,r,i),r={},i=[],t=f.popLast()}c?r[f.lastSegment()]=ab(c):i.push(f.lastSegment())});const a=this.getFieldsMap(t);this.applyChanges(a,r,i)}delete(e){const t=this.field(e.popLast());tI(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return Sc(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let r=0;r<e.length;++r){let i=t.mapValue.fields[e.get(r)];tI(i)&&i.mapValue.fields||(i={mapValue:{fields:{}}},t.mapValue.fields[e.get(r)]=i),t=i}return t.mapValue.fields}applyChanges(e,t,r){Ih(t,(i,a)=>e[i]=a);for(const i of r)delete e[i]}clone(){return new ts(ab(this.value))}}function gL(n){const e=[];return Ih(n.fields,(t,r)=>{const i=new Nr([t]);if(tI(r)){const a=gL(r.mapValue).fields;if(0===a.length)e.push(i);else for(const c of a)e.push(i.child(c))}else e.push(i)}),new uo(e)}class ur{constructor(e,t,r,i,a,c,f){this.key=e,this.documentType=t,this.version=r,this.readTime=i,this.createTime=a,this.data=c,this.documentState=f}static newInvalidDocument(e){return new ur(e,0,At.min(),At.min(),At.min(),ts.empty(),0)}static newFoundDocument(e,t,r,i){return new ur(e,1,t,At.min(),r,i,0)}static newNoDocument(e,t){return new ur(e,2,t,At.min(),At.min(),ts.empty(),0)}static newUnknownDocument(e,t){return new ur(e,3,t,At.min(),At.min(),ts.empty(),2)}convertToFoundDocument(e,t){return!this.createTime.isEqual(At.min())||2!==this.documentType&&0!==this.documentType||(this.createTime=e),this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=ts.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=ts.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=At.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return 1===this.documentState}get hasCommittedMutations(){return 2===this.documentState}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return 0!==this.documentType}isFoundDocument(){return 1===this.documentType}isNoDocument(){return 2===this.documentType}isUnknownDocument(){return 3===this.documentType}isEqual(e){return e instanceof ur&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new ur(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}class xh{constructor(e,t){this.position=e,this.inclusive=t}}function mL(n,e,t){let r=0;for(let i=0;i<n.position.length;i++){const a=e[i],c=n.position[i];if(r=a.field.isKeyField()?Xe.comparator(Xe.fromName(c.referenceValue),t.key):Mh(c,t.data.field(a.field)),"desc"===a.dir&&(r*=-1),0!==r)break}return r}function _L(n,e){if(null===n)return null===e;if(null===e||n.inclusive!==e.inclusive||n.position.length!==e.position.length)return!1;for(let t=0;t<n.position.length;t++)if(!Sc(n.position[t],e.position[t]))return!1;return!0}class o_{constructor(e,t="asc"){this.field=e,this.dir=t}}function F$(n,e){return n.dir===e.dir&&n.field.isEqual(e.field)}class yL{}class un extends yL{constructor(e,t,r){super(),this.field=e,this.op=t,this.value=r}static create(e,t,r){return e.isKeyField()?"in"===t||"not-in"===t?this.createKeyFieldInFilter(e,t,r):new L$(e,t,r):"array-contains"===t?new U$(e,r):"in"===t?new IL(e,r):"not-in"===t?new H$(e,r):"array-contains-any"===t?new j$(e,r):new un(e,t,r)}static createKeyFieldInFilter(e,t,r){return"in"===t?new V$(e,r):new B$(e,r)}matches(e){const t=e.data.field(this.field);return"!="===this.op?null!==t&&this.matchesComparison(Mh(t,this.value)):null!==t&&Ah(this.value)===Ah(t)&&this.matchesComparison(Mh(t,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return 0===e;case"!=":return 0!==e;case">":return e>0;case">=":return e>=0;default:return ct()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}getFirstInequalityField(){return this.isInequality()?this.field:null}}class Ln extends yL{constructor(e,t){super(),this.filters=e,this.op=t,this.ht=null}static create(e,t){return new Ln(e,t)}matches(e){return a_(this)?void 0===this.filters.find(t=>!t.matches(e)):void 0!==this.filters.find(t=>t.matches(e))}getFlattenedFilters(){return null!==this.ht||(this.ht=this.filters.reduce((e,t)=>e.concat(t.getFlattenedFilters()),[])),this.ht}getFilters(){return Object.assign([],this.filters)}getFirstInequalityField(){const e=this.lt(t=>t.isInequality());return null!==e?e.field:null}lt(e){for(const t of this.getFlattenedFilters())if(e(t))return t;return null}}function a_(n){return"and"===n.op}function dx(n){return"or"===n.op}function hx(n){return vL(n)&&a_(n)}function vL(n){for(const e of n.filters)if(e instanceof Ln)return!1;return!0}function fx(n){if(n instanceof un)return n.field.canonicalString()+n.op.toString()+s_(n.value);if(hx(n))return n.filters.map(e=>fx(e)).join(",");{const e=n.filters.map(t=>fx(t)).join(",");return`${n.op}(${e})`}}function bL(n,e){return n instanceof un?(t=n,(r=e)instanceof un&&t.op===r.op&&t.field.isEqual(r.field)&&Sc(t.value,r.value)):n instanceof Ln?function(t,r){return r instanceof Ln&&t.op===r.op&&t.filters.length===r.filters.length&&t.filters.reduce((i,a,c)=>i&&bL(a,r.filters[c]),!0)}(n,e):void ct();var t,r}function wL(n,e){const t=n.filters.concat(e);return Ln.create(t,n.op)}function EL(n){return n instanceof un?`${(e=n).field.canonicalString()} ${e.op} ${s_(e.value)}`:n instanceof Ln?function(e){return e.op.toString()+" {"+e.getFilters().map(EL).join(" ,")+"}"}(n):"Filter";var e}class L$ extends un{constructor(e,t,r){super(e,t,r),this.key=Xe.fromName(r.referenceValue)}matches(e){const t=Xe.comparator(e.key,this.key);return this.matchesComparison(t)}}class V$ extends un{constructor(e,t){super(e,"in",t),this.keys=CL(0,t)}matches(e){return this.keys.some(t=>t.isEqual(e.key))}}class B$ extends un{constructor(e,t){super(e,"not-in",t),this.keys=CL(0,t)}matches(e){return!this.keys.some(t=>t.isEqual(e.key))}}function CL(n,e){var t;return((null===(t=e.arrayValue)||void 0===t?void 0:t.values)||[]).map(r=>Xe.fromName(r.referenceValue))}class U$ extends un{constructor(e,t){super(e,"array-contains",t)}matches(e){const t=e.data.field(this.field);return ob(t)&&sb(t.arrayValue,this.value)}}class IL extends un{constructor(e,t){super(e,"in",t)}matches(e){const t=e.data.field(this.field);return null!==t&&sb(this.value.arrayValue,t)}}class H$ extends un{constructor(e,t){super(e,"not-in",t)}matches(e){if(sb(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const t=e.data.field(this.field);return null!==t&&!sb(this.value.arrayValue,t)}}class j$ extends un{constructor(e,t){super(e,"array-contains-any",t)}matches(e){const t=e.data.field(this.field);return!(!ob(t)||!t.arrayValue.values)&&t.arrayValue.values.some(r=>sb(this.value.arrayValue,r))}}class $${constructor(e,t=null,r=[],i=[],a=null,c=null,f=null){this.path=e,this.collectionGroup=t,this.orderBy=r,this.filters=i,this.limit=a,this.startAt=c,this.endAt=f,this.ft=null}}function px(n,e=null,t=[],r=[],i=null,a=null,c=null){return new $$(n,e,t,r,i,a,c)}function Zp(n){const e=Je(n);if(null===e.ft){let t=e.path.canonicalString();null!==e.collectionGroup&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map(r=>fx(r)).join(","),t+="|ob:",t+=e.orderBy.map(r=>{return(i=r).field.canonicalString()+i.dir;var i}).join(","),nb(e.limit)||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map(r=>s_(r)).join(",")),e.endAt&&(t+="|ub:",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map(r=>s_(r)).join(",")),e.ft=t}return e.ft}function lb(n,e){if(n.limit!==e.limit||n.orderBy.length!==e.orderBy.length)return!1;for(let t=0;t<n.orderBy.length;t++)if(!F$(n.orderBy[t],e.orderBy[t]))return!1;if(n.filters.length!==e.filters.length)return!1;for(let t=0;t<n.filters.length;t++)if(!bL(n.filters[t],e.filters[t]))return!1;return n.collectionGroup===e.collectionGroup&&!!n.path.isEqual(e.path)&&!!_L(n.startAt,e.startAt)&&_L(n.endAt,e.endAt)}function nI(n){return Xe.isDocumentKey(n.path)&&null===n.collectionGroup&&0===n.filters.length}function rI(n,e){return n.filters.filter(t=>t instanceof un&&t.field.isEqual(e))}function DL(n,e,t){let r=JC,i=!0;for(const a of rI(n,e)){let c=JC,f=!0;switch(a.op){case"<":case"<=":c=P$(a.value);break;case"==":case"in":case">=":c=a.value;break;case">":c=a.value,f=!1;break;case"!=":case"not-in":c=JC}fL({value:r,inclusive:i},{value:c,inclusive:f})<0&&(r=c,i=f)}if(null!==t)for(let a=0;a<n.orderBy.length;++a)if(n.orderBy[a].field.isEqual(e)){const c=t.position[a];fL({value:r,inclusive:i},{value:c,inclusive:t.inclusive})<0&&(r=c,i=t.inclusive);break}return{value:r,inclusive:i}}function SL(n,e,t){let r=Th,i=!0;for(const a of rI(n,e)){let c=Th,f=!0;switch(a.op){case">=":case">":c=N$(a.value),f=!1;break;case"==":case"in":case"<=":c=a.value;break;case"<":c=a.value,f=!1;break;case"!=":case"not-in":c=Th}pL({value:r,inclusive:i},{value:c,inclusive:f})>0&&(r=c,i=f)}if(null!==t)for(let a=0;a<n.orderBy.length;++a)if(n.orderBy[a].field.isEqual(e)){const c=t.position[a];pL({value:r,inclusive:i},{value:c,inclusive:t.inclusive})>0&&(r=c,i=t.inclusive);break}return{value:r,inclusive:i}}class qu{constructor(e,t=null,r=[],i=[],a=null,c="F",f=null,_=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=r,this.filters=i,this.limit=a,this.limitType=c,this.startAt=f,this.endAt=_,this.dt=null,this._t=null}}function TL(n,e,t,r,i,a,c,f){return new qu(n,e,t,r,i,a,c,f)}function l_(n){return new qu(n)}function AL(n){return 0===n.filters.length&&null===n.limit&&null==n.startAt&&null==n.endAt&&(0===n.explicitOrderBy.length||1===n.explicitOrderBy.length&&n.explicitOrderBy[0].field.isKeyField())}function gx(n){return n.explicitOrderBy.length>0?n.explicitOrderBy[0].field:null}function iI(n){for(const e of n.filters){const t=e.getFirstInequalityField();if(null!==t)return t}return null}function mx(n){return null!==n.collectionGroup}function Yp(n){const e=Je(n);if(null===e.dt){e.dt=[];const t=iI(e),r=gx(e);if(null!==t&&null===r)t.isKeyField()||e.dt.push(new o_(t)),e.dt.push(new o_(Nr.keyField(),"asc"));else{let i=!1;for(const a of e.explicitOrderBy)e.dt.push(a),a.field.isKeyField()&&(i=!0);if(!i){const a=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";e.dt.push(new o_(Nr.keyField(),a))}}}return e.dt}function Ks(n){const e=Je(n);if(!e._t)if("F"===e.limitType)e._t=px(e.path,e.collectionGroup,Yp(e),e.filters,e.limit,e.startAt,e.endAt);else{const t=[];for(const a of Yp(e))t.push(new o_(a.field,"desc"===a.dir?"asc":"desc"));const r=e.endAt?new xh(e.endAt.position,e.endAt.inclusive):null,i=e.startAt?new xh(e.startAt.position,e.startAt.inclusive):null;e._t=px(e.path,e.collectionGroup,t,e.filters,e.limit,r,i)}return e._t}function _x(n,e){e.getFirstInequalityField(),iI(n);const t=n.filters.concat([e]);return new qu(n.path,n.collectionGroup,n.explicitOrderBy.slice(),t,n.limit,n.limitType,n.startAt,n.endAt)}function sI(n,e,t){return new qu(n.path,n.collectionGroup,n.explicitOrderBy.slice(),n.filters.slice(),e,t,n.startAt,n.endAt)}function cb(n,e){return lb(Ks(n),Ks(e))&&n.limitType===e.limitType}function ML(n){return`${Zp(Ks(n))}|lt:${n.limitType}`}function yx(n){return`Query(target=${function(e){let t=e.path.canonicalString();return null!==e.collectionGroup&&(t+=" collectionGroup="+e.collectionGroup),e.filters.length>0&&(t+=`, filters: [${e.filters.map(r=>EL(r)).join(", ")}]`),nb(e.limit)||(t+=", limit: "+e.limit),e.orderBy.length>0&&(t+=`, orderBy: [${e.orderBy.map(r=>{return`${(i=r).field.canonicalString()} (${i.dir})`;var i}).join(", ")}]`),e.startAt&&(t+=", startAt: ",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map(r=>s_(r)).join(",")),e.endAt&&(t+=", endAt: ",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map(r=>s_(r)).join(",")),`Target(${t})`}(Ks(n))}; limitType=${n.limitType})`}function ub(n,e){return e.isFoundDocument()&&function(t,r){const i=r.key.path;return null!==t.collectionGroup?r.key.hasCollectionId(t.collectionGroup)&&t.path.isPrefixOf(i):Xe.isDocumentKey(t.path)?t.path.isEqual(i):t.path.isImmediateParentOf(i)}(n,e)&&function(t,r){for(const i of Yp(t))if(!i.field.isKeyField()&&null===r.data.field(i.field))return!1;return!0}(n,e)&&function(t,r){for(const i of t.filters)if(!i.matches(r))return!1;return!0}(n,e)&&(r=e,!((t=n).startAt&&!function(i,a,c){const f=mL(i,a,c);return i.inclusive?f<=0:f<0}(t.startAt,Yp(t),r)||t.endAt&&!function(i,a,c){const f=mL(i,a,c);return i.inclusive?f>=0:f>0}(t.endAt,Yp(t),r)));var t,r}function xL(n){return n.collectionGroup||(n.path.length%2==1?n.path.lastSegment():n.path.get(n.path.length-2))}function RL(n){return(e,t)=>{let r=!1;for(const i of Yp(n)){const a=z$(i,e,t);if(0!==a)return a;r=r||i.field.isKeyField()}return 0}}function z$(n,e,t){const r=n.field.isKeyField()?Xe.comparator(e.key,t.key):function(i,a,c){const f=a.data.field(i),_=c.data.field(i);return null!==f&&null!==_?Mh(f,_):ct()}(n.field,e,t);switch(n.dir){case"asc":return r;case"desc":return-1*r;default:return ct()}}class Wu{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){const t=this.mapKeyFn(e),r=this.inner[t];if(void 0!==r)for(const[i,a]of r)if(this.equalsFn(i,e))return a}has(e){return void 0!==this.get(e)}set(e,t){const r=this.mapKeyFn(e),i=this.inner[r];if(void 0===i)return this.inner[r]=[[e,t]],void this.innerSize++;for(let a=0;a<i.length;a++)if(this.equalsFn(i[a][0],e))return void(i[a]=[e,t]);i.push([e,t]),this.innerSize++}delete(e){const t=this.mapKeyFn(e),r=this.inner[t];if(void 0===r)return!1;for(let i=0;i<r.length;i++)if(this.equalsFn(r[i][0],e))return 1===r.length?delete this.inner[t]:r.splice(i,1),this.innerSize--,!0;return!1}forEach(e){Ih(this.inner,(t,r)=>{for(const[i,a]of r)e(i,a)})}isEmpty(){return oL(this.inner)}size(){return this.innerSize}}const G$=new er(Xe.comparator);function ho(){return G$}const kL=new er(Xe.comparator);function db(...n){let e=kL;for(const t of n)e=e.insert(t.key,t);return e}function OL(n){let e=kL;return n.forEach((t,r)=>e=e.insert(t,r.overlayedDocument)),e}function Tc(){return hb()}function PL(){return hb()}function hb(){return new Wu(n=>n.toString(),(n,e)=>n.isEqual(e))}const q$=new er(Xe.comparator),W$=new cr(Xe.comparator);function tn(...n){let e=W$;for(const t of n)e=e.add(t);return e}const K$=new cr(Gt);function vx(){return K$}function NL(n,e){if(n.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:rb(e)?"-0":e}}function FL(n){return{integerValue:""+n}}function LL(n,e){return XF(e)?FL(e):NL(n,e)}class oI{constructor(){this._=void 0}}function Z$(n,e,t){return n instanceof c_?function(r,i){const a={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:r.seconds,nanos:r.nanoseconds}}}};return i&&QC(i)&&(i=XC(i)),i&&(a.fields.__previous_value__=i),{mapValue:a}}(t,e):n instanceof Qp?BL(n,e):n instanceof Xp?UL(n,e):function(r,i){const a=VL(r,i),c=HL(a)+HL(r.wt);return ux(a)&&ux(r.wt)?FL(c):NL(r.serializer,c)}(n,e)}function Y$(n,e,t){return n instanceof Qp?BL(n,e):n instanceof Xp?UL(n,e):t}function VL(n,e){return n instanceof u_?ux(t=e)||(r=t)&&"doubleValue"in r?e:{integerValue:0}:null;var r,t}class c_ extends oI{}class Qp extends oI{constructor(e){super(),this.elements=e}}function BL(n,e){const t=jL(e);for(const r of n.elements)t.some(i=>Sc(i,r))||t.push(r);return{arrayValue:{values:t}}}class Xp extends oI{constructor(e){super(),this.elements=e}}function UL(n,e){let t=jL(e);for(const r of n.elements)t=t.filter(i=>!Sc(i,r));return{arrayValue:{values:t}}}class u_ extends oI{constructor(e,t){super(),this.serializer=e,this.wt=t}}function HL(n){return Fr(n.integerValue||n.doubleValue)}function jL(n){return ob(n)&&n.arrayValue.values?n.arrayValue.values.slice():[]}class fb{constructor(e,t){this.field=e,this.transform=t}}class X${constructor(e,t){this.version=e,this.transformResults=t}}class yr{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new yr}static exists(e){return new yr(void 0,e)}static updateTime(e){return new yr(e)}get isNone(){return void 0===this.updateTime&&void 0===this.exists}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function aI(n,e){return void 0!==n.updateTime?e.isFoundDocument()&&e.version.isEqual(n.updateTime):void 0===n.exists||n.exists===e.isFoundDocument()}class lI{}function $L(n,e){if(!n.hasLocalMutations||e&&0===e.fields.length)return null;if(null===e)return n.isNoDocument()?new h_(n.key,yr.none()):new d_(n.key,n.data,yr.none());{const t=n.data,r=ts.empty();let i=new cr(Nr.comparator);for(let a of e.fields)if(!i.has(a)){let c=t.field(a);null===c&&a.length>1&&(a=a.popLast(),c=t.field(a)),null===c?r.delete(a):r.set(a,c),i=i.add(a)}return new Ku(n.key,r,new uo(i.toArray()),yr.none())}}function J$(n,e,t){n instanceof d_?function(r,i,a){const c=r.value.clone(),f=qL(r.fieldTransforms,i,a.transformResults);c.setAll(f),i.convertToFoundDocument(a.version,c).setHasCommittedMutations()}(n,e,t):n instanceof Ku?function(r,i,a){if(!aI(r.precondition,i))return void i.convertToUnknownDocument(a.version);const c=qL(r.fieldTransforms,i,a.transformResults),f=i.data;f.setAll(GL(r)),f.setAll(c),i.convertToFoundDocument(a.version,f).setHasCommittedMutations()}(n,e,t):e.convertToNoDocument(t.version).setHasCommittedMutations()}function pb(n,e,t,r){return n instanceof d_?function(i,a,c,f){if(!aI(i.precondition,a))return c;const _=i.value.clone(),w=WL(i.fieldTransforms,f,a);return _.setAll(w),a.convertToFoundDocument(a.version,_).setHasLocalMutations(),null}(n,e,t,r):n instanceof Ku?function(i,a,c,f){if(!aI(i.precondition,a))return c;const _=WL(i.fieldTransforms,f,a),w=a.data;return w.setAll(GL(i)),w.setAll(_),a.convertToFoundDocument(a.version,w).setHasLocalMutations(),null===c?null:c.unionWith(i.fieldMask.fields).unionWith(i.fieldTransforms.map(S=>S.field))}(n,e,t,r):(c=t,aI(n.precondition,a=e)?(a.convertToNoDocument(a.version).setHasLocalMutations(),null):c);var a,c}function ez(n,e){let t=null;for(const r of n.fieldTransforms){const i=e.data.field(r.field),a=VL(r.transform,i||null);null!=a&&(null===t&&(t=ts.empty()),t.set(r.field,a))}return t||null}function zL(n,e){return n.type===e.type&&!!n.key.isEqual(e.key)&&!!n.precondition.isEqual(e.precondition)&&(r=e.fieldTransforms,!!(void 0===(t=n.fieldTransforms)&&void 0===r||t&&r&&r_(t,r,(i,a)=>function Q$(n,e){return n.field.isEqual(e.field)&&(r=e.transform,(t=n.transform)instanceof Qp&&r instanceof Qp||t instanceof Xp&&r instanceof Xp?r_(t.elements,r.elements,Sc):t instanceof u_&&r instanceof u_?Sc(t.wt,r.wt):t instanceof c_&&r instanceof c_);var t,r}(i,a))))&&(0===n.type?n.value.isEqual(e.value):1!==n.type||n.data.isEqual(e.data)&&n.fieldMask.isEqual(e.fieldMask));var t,r}class d_ extends lI{constructor(e,t,r,i=[]){super(),this.key=e,this.value=t,this.precondition=r,this.fieldTransforms=i,this.type=0}getFieldMask(){return null}}class Ku extends lI{constructor(e,t,r,i,a=[]){super(),this.key=e,this.data=t,this.fieldMask=r,this.precondition=i,this.fieldTransforms=a,this.type=1}getFieldMask(){return this.fieldMask}}function GL(n){const e=new Map;return n.fieldMask.fields.forEach(t=>{if(!t.isEmpty()){const r=n.data.field(t);e.set(t,r)}}),e}function qL(n,e,t){const r=new Map;It(n.length===t.length);for(let i=0;i<t.length;i++){const a=n[i],c=a.transform,f=e.data.field(a.field);r.set(a.field,Y$(c,f,t[i]))}return r}function WL(n,e,t){const r=new Map;for(const i of n){const a=i.transform,c=t.data.field(i.field);r.set(i.field,Z$(a,c,e))}return r}class h_ extends lI{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class bx extends lI{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}class wx{constructor(e,t,r,i){this.batchId=e,this.localWriteTime=t,this.baseMutations=r,this.mutations=i}applyToRemoteDocument(e,t){const r=t.mutationResults;for(let i=0;i<this.mutations.length;i++){const a=this.mutations[i];a.key.isEqual(e.key)&&J$(a,e,r[i])}}applyToLocalView(e,t){for(const r of this.baseMutations)r.key.isEqual(e.key)&&(t=pb(r,e,t,this.localWriteTime));for(const r of this.mutations)r.key.isEqual(e.key)&&(t=pb(r,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){const r=PL();return this.mutations.forEach(i=>{const a=e.get(i.key),c=a.overlayedDocument;let f=this.applyToLocalView(c,a.mutatedFields);f=t.has(i.key)?null:f;const _=$L(c,f);null!==_&&r.set(i.key,_),c.isValidDocument()||c.convertToNoDocument(At.min())}),r}keys(){return this.mutations.reduce((e,t)=>e.add(t.key),tn())}isEqual(e){return this.batchId===e.batchId&&r_(this.mutations,e.mutations,(t,r)=>zL(t,r))&&r_(this.baseMutations,e.baseMutations,(t,r)=>zL(t,r))}}class Ex{constructor(e,t,r,i){this.batch=e,this.commitVersion=t,this.mutationResults=r,this.docVersions=i}static from(e,t,r){It(e.mutations.length===r.length);let i=q$;const a=e.mutations;for(let c=0;c<a.length;c++)i=i.insert(a[c].key,r[c].version);return new Ex(e,t,r,i)}}class Cx{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return null!==e&&this.mutation===e.mutation}toString(){return`Overlay{\n      largestBatchId: ${this.largestBatchId},\n      mutation: ${this.mutation.toString()}\n    }`}}class nz{constructor(e,t){this.count=e,this.unchangedNames=t}}var Jr,yn;function KL(n){switch(n){default:return ct();case he.CANCELLED:case he.UNKNOWN:case he.DEADLINE_EXCEEDED:case he.RESOURCE_EXHAUSTED:case he.INTERNAL:case he.UNAVAILABLE:case he.UNAUTHENTICATED:return!1;case he.INVALID_ARGUMENT:case he.NOT_FOUND:case he.ALREADY_EXISTS:case he.PERMISSION_DENIED:case he.FAILED_PRECONDITION:case he.ABORTED:case he.OUT_OF_RANGE:case he.UNIMPLEMENTED:case he.DATA_LOSS:return!0}}function ZL(n){if(void 0===n)return zr("GRPC error has no .code"),he.UNKNOWN;switch(n){case Jr.OK:return he.OK;case Jr.CANCELLED:return he.CANCELLED;case Jr.UNKNOWN:return he.UNKNOWN;case Jr.DEADLINE_EXCEEDED:return he.DEADLINE_EXCEEDED;case Jr.RESOURCE_EXHAUSTED:return he.RESOURCE_EXHAUSTED;case Jr.INTERNAL:return he.INTERNAL;case Jr.UNAVAILABLE:return he.UNAVAILABLE;case Jr.UNAUTHENTICATED:return he.UNAUTHENTICATED;case Jr.INVALID_ARGUMENT:return he.INVALID_ARGUMENT;case Jr.NOT_FOUND:return he.NOT_FOUND;case Jr.ALREADY_EXISTS:return he.ALREADY_EXISTS;case Jr.PERMISSION_DENIED:return he.PERMISSION_DENIED;case Jr.FAILED_PRECONDITION:return he.FAILED_PRECONDITION;case Jr.ABORTED:return he.ABORTED;case Jr.OUT_OF_RANGE:return he.OUT_OF_RANGE;case Jr.UNIMPLEMENTED:return he.UNIMPLEMENTED;case Jr.DATA_LOSS:return he.DATA_LOSS;default:return ct()}}(yn=Jr||(Jr={}))[yn.OK=0]="OK",yn[yn.CANCELLED=1]="CANCELLED",yn[yn.UNKNOWN=2]="UNKNOWN",yn[yn.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",yn[yn.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",yn[yn.NOT_FOUND=5]="NOT_FOUND",yn[yn.ALREADY_EXISTS=6]="ALREADY_EXISTS",yn[yn.PERMISSION_DENIED=7]="PERMISSION_DENIED",yn[yn.UNAUTHENTICATED=16]="UNAUTHENTICATED",yn[yn.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",yn[yn.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",yn[yn.ABORTED=10]="ABORTED",yn[yn.OUT_OF_RANGE=11]="OUT_OF_RANGE",yn[yn.UNIMPLEMENTED=12]="UNIMPLEMENTED",yn[yn.INTERNAL=13]="INTERNAL",yn[yn.UNAVAILABLE=14]="UNAVAILABLE",yn[yn.DATA_LOSS=15]="DATA_LOSS";class Ix{constructor(){this.onExistenceFilterMismatchCallbacks=new Map}static get instance(){return cI}static getOrCreateInstance(){return null===cI&&(cI=new Ix),cI}onExistenceFilterMismatch(e){const t=Symbol();return this.onExistenceFilterMismatchCallbacks.set(t,e),()=>this.onExistenceFilterMismatchCallbacks.delete(t)}notifyOnExistenceFilterMismatch(e){this.onExistenceFilterMismatchCallbacks.forEach(t=>t(e))}}let cI=null;function YL(){return new TextEncoder}const rz=new t_([4294967295,4294967295],0);function QL(n){const e=YL().encode(n),t=new Yj;return t.update(e),new Uint8Array(t.digest())}function XL(n){const e=new DataView(n.buffer),t=e.getUint32(0,!0),r=e.getUint32(4,!0),i=e.getUint32(8,!0),a=e.getUint32(12,!0);return[new t_([t,r],0),new t_([i,a],0)]}class Dx{constructor(e,t,r){if(this.bitmap=e,this.padding=t,this.hashCount=r,t<0||t>=8)throw new gb(`Invalid padding: ${t}`);if(r<0)throw new gb(`Invalid hash count: ${r}`);if(e.length>0&&0===this.hashCount)throw new gb(`Invalid hash count: ${r}`);if(0===e.length&&0!==t)throw new gb(`Invalid padding when bitmap length is 0: ${t}`);this.yt=8*e.length-t,this.It=t_.fromNumber(this.yt)}Tt(e,t,r){let i=e.add(t.multiply(t_.fromNumber(r)));return 1===i.compare(rz)&&(i=new t_([i.getBits(0),i.getBits(1)],0)),i.modulo(this.It).toNumber()}Et(e){return 0!=(this.bitmap[Math.floor(e/8)]&1<<e%8)}At(e){if(0===this.yt)return!1;const t=QL(e),[r,i]=XL(t);for(let a=0;a<this.hashCount;a++){const c=this.Tt(r,i,a);if(!this.Et(c))return!1}return!0}static create(e,t,r){const i=e%8==0?0:8-e%8,a=new Uint8Array(Math.ceil(e/8)),c=new Dx(a,i,t);return r.forEach(f=>c.insert(f)),c}insert(e){if(0===this.yt)return;const t=QL(e),[r,i]=XL(t);for(let a=0;a<this.hashCount;a++){const c=this.Tt(r,i,a);this.Rt(c)}}Rt(e){const t=Math.floor(e/8);this.bitmap[t]|=1<<e%8}}class gb extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}class mb{constructor(e,t,r,i,a){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=r,this.documentUpdates=i,this.resolvedLimboDocuments=a}static createSynthesizedRemoteEventForCurrentChange(e,t,r){const i=new Map;return i.set(e,_b.createSynthesizedTargetChangeForCurrentChange(e,t,r)),new mb(At.min(),i,new er(Gt),ho(),tn())}}class _b{constructor(e,t,r,i,a){this.resumeToken=e,this.current=t,this.addedDocuments=r,this.modifiedDocuments=i,this.removedDocuments=a}static createSynthesizedTargetChangeForCurrentChange(e,t,r){return new _b(r,t,tn(),tn(),tn())}}class uI{constructor(e,t,r,i){this.vt=e,this.removedTargetIds=t,this.key=r,this.Pt=i}}class JL{constructor(e,t){this.targetId=e,this.bt=t}}class e2{constructor(e,t,r=hi.EMPTY_BYTE_STRING,i=null){this.state=e,this.targetIds=t,this.resumeToken=r,this.cause=i}}class t2{constructor(){this.Vt=0,this.St=r2(),this.Dt=hi.EMPTY_BYTE_STRING,this.Ct=!1,this.xt=!0}get current(){return this.Ct}get resumeToken(){return this.Dt}get Nt(){return 0!==this.Vt}get kt(){return this.xt}Mt(e){e.approximateByteSize()>0&&(this.xt=!0,this.Dt=e)}Ot(){let e=tn(),t=tn(),r=tn();return this.St.forEach((i,a)=>{switch(a){case 0:e=e.add(i);break;case 2:t=t.add(i);break;case 1:r=r.add(i);break;default:ct()}}),new _b(this.Dt,this.Ct,e,t,r)}$t(){this.xt=!1,this.St=r2()}Ft(e,t){this.xt=!0,this.St=this.St.insert(e,t)}Bt(e){this.xt=!0,this.St=this.St.remove(e)}Lt(){this.Vt+=1}qt(){this.Vt-=1}Ut(){this.xt=!0,this.Ct=!0}}class iz{constructor(e){this.Kt=e,this.Gt=new Map,this.Qt=ho(),this.jt=n2(),this.zt=new er(Gt)}Wt(e){for(const t of e.vt)e.Pt&&e.Pt.isFoundDocument()?this.Ht(t,e.Pt):this.Jt(t,e.key,e.Pt);for(const t of e.removedTargetIds)this.Jt(t,e.key,e.Pt)}Yt(e){this.forEachTarget(e,t=>{const r=this.Xt(t);switch(e.state){case 0:this.Zt(t)&&r.Mt(e.resumeToken);break;case 1:r.qt(),r.Nt||r.$t(),r.Mt(e.resumeToken);break;case 2:r.qt(),r.Nt||this.removeTarget(t);break;case 3:this.Zt(t)&&(r.Ut(),r.Mt(e.resumeToken));break;case 4:this.Zt(t)&&(this.te(t),r.Mt(e.resumeToken));break;default:ct()}})}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.Gt.forEach((r,i)=>{this.Zt(i)&&t(i)})}ee(e){var t;const r=e.targetId,i=e.bt.count,a=this.ne(r);if(a){const c=a.target;if(nI(c))if(0===i){const f=new Xe(c.path);this.Jt(r,f,ur.newNoDocument(f,At.min()))}else It(1===i);else{const f=this.se(r);if(f!==i){const _=this.ie(e,f);0!==_&&(this.te(r),this.zt=this.zt.insert(r,2===_?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch")),null===(t=Ix.instance)||void 0===t||t.notifyOnExistenceFilterMismatch(function(w,S,x){var L,U,W,ie,we,qe;const ot={localCacheCount:S,existenceFilterCount:x.count},tt=x.unchangedNames;return tt&&(ot.bloomFilter={applied:0===w,hashCount:null!==(L=tt?.hashCount)&&void 0!==L?L:0,bitmapLength:null!==(ie=null===(W=null===(U=tt?.bits)||void 0===U?void 0:U.bitmap)||void 0===W?void 0:W.length)&&void 0!==ie?ie:0,padding:null!==(qe=null===(we=tt?.bits)||void 0===we?void 0:we.padding)&&void 0!==qe?qe:0}),ot}(_,f,e.bt))}}}}ie(e,t){const{unchangedNames:r,count:i}=e.bt;if(!r||!r.bits)return 1;const{bits:{bitmap:a="",padding:c=0},hashCount:f=0}=r;let _,w;try{_=Gu(a).toUint8Array()}catch(S){if(S instanceof lL)return Ea("Decoding the base64 bloom filter in existence filter failed ("+S.message+"); ignoring the bloom filter and falling back to full re-query."),1;throw S}try{w=new Dx(_,c,f)}catch(S){return Ea(S instanceof gb?"BloomFilter error: ":"Applying bloom filter failed: ",S),1}return 0===w.yt?1:i!==t-this.re(e.targetId,w)?2:0}re(e,t){const r=this.Kt.getRemoteKeysForTarget(e);let i=0;return r.forEach(a=>{const c=this.Kt.oe(),f=`projects/${c.projectId}/databases/${c.database}/documents/${a.path.canonicalString()}`;t.At(f)||(this.Jt(e,a,null),i++)}),i}ue(e){const t=new Map;this.Gt.forEach((a,c)=>{const f=this.ne(c);if(f){if(a.current&&nI(f.target)){const _=new Xe(f.target.path);null!==this.Qt.get(_)||this.ce(c,_)||this.Jt(c,_,ur.newNoDocument(_,e))}a.kt&&(t.set(c,a.Ot()),a.$t())}});let r=tn();this.jt.forEach((a,c)=>{let f=!0;c.forEachWhile(_=>{const w=this.ne(_);return!w||"TargetPurposeLimboResolution"===w.purpose||(f=!1,!1)}),f&&(r=r.add(a))}),this.Qt.forEach((a,c)=>c.setReadTime(e));const i=new mb(e,t,this.zt,this.Qt,r);return this.Qt=ho(),this.jt=n2(),this.zt=new er(Gt),i}Ht(e,t){if(!this.Zt(e))return;const r=this.ce(e,t.key)?2:0;this.Xt(e).Ft(t.key,r),this.Qt=this.Qt.insert(t.key,t),this.jt=this.jt.insert(t.key,this.ae(t.key).add(e))}Jt(e,t,r){if(!this.Zt(e))return;const i=this.Xt(e);this.ce(e,t)?i.Ft(t,1):i.Bt(t),this.jt=this.jt.insert(t,this.ae(t).delete(e)),r&&(this.Qt=this.Qt.insert(t,r))}removeTarget(e){this.Gt.delete(e)}se(e){const t=this.Xt(e).Ot();return this.Kt.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}Lt(e){this.Xt(e).Lt()}Xt(e){let t=this.Gt.get(e);return t||(t=new t2,this.Gt.set(e,t)),t}ae(e){let t=this.jt.get(e);return t||(t=new cr(Gt),this.jt=this.jt.insert(e,t)),t}Zt(e){const t=null!==this.ne(e);return t||Ue("WatchChangeAggregator","Detected inactive target",e),t}ne(e){const t=this.Gt.get(e);return t&&t.Nt?null:this.Kt.he(e)}te(e){this.Gt.set(e,new t2),this.Kt.getRemoteKeysForTarget(e).forEach(t=>{this.Jt(e,t,null)})}ce(e,t){return this.Kt.getRemoteKeysForTarget(e).has(t)}}function n2(){return new er(Xe.comparator)}function r2(){return new er(Xe.comparator)}const sz={asc:"ASCENDING",desc:"DESCENDING"},oz={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},az={and:"AND",or:"OR"};class lz{constructor(e,t){this.databaseId=e,this.useProto3Json=t}}function Sx(n,e){return n.useProto3Json||nb(e)?e:{value:e}}function f_(n,e){return n.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function s2(n,e){return n.useProto3Json?e.toBase64():e.toUint8Array()}function cz(n,e){return f_(n,e.toTimestamp())}function Gr(n){return It(!!n),At.fromTimestamp(function(e){const t=Dh(e);return new _r(t.seconds,t.nanos)}(n))}function Tx(n,e){return(t=n,new _n(["projects",t.projectId,"databases",t.database])).child("documents").child(e).canonicalString();var t}function o2(n){const e=_n.fromString(n);return It(g2(e)),e}function yb(n,e){return Tx(n.databaseId,e.path)}function Ac(n,e){const t=o2(e);if(t.get(1)!==n.databaseId.projectId)throw new Pe(he.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+t.get(1)+" vs "+n.databaseId.projectId);if(t.get(3)!==n.databaseId.database)throw new Pe(he.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+t.get(3)+" vs "+n.databaseId.database);return new Xe(l2(t))}function Ax(n,e){return Tx(n.databaseId,e)}function a2(n){const e=o2(n);return 4===e.length?_n.emptyPath():l2(e)}function vb(n){return new _n(["projects",n.databaseId.projectId,"databases",n.databaseId.database]).canonicalString()}function l2(n){return It(n.length>4&&"documents"===n.get(4)),n.popFirst(5)}function c2(n,e,t){return{name:yb(n,e),fields:t.value.mapValue.fields}}function u2(n,e,t){const r=Ac(n,e.name),i=Gr(e.updateTime),a=e.createTime?Gr(e.createTime):At.min(),c=new ts({mapValue:{fields:e.fields}}),f=ur.newFoundDocument(r,i,a,c);return t&&f.setHasCommittedMutations(),t?f.setHasCommittedMutations():f}function bb(n,e){let t;if(e instanceof d_)t={update:c2(n,e.key,e.value)};else if(e instanceof h_)t={delete:yb(n,e.key)};else if(e instanceof Ku)t={update:c2(n,e.key,e.data),updateMask:_z(e.fieldMask)};else{if(!(e instanceof bx))return ct();t={verify:yb(n,e.key)}}return e.fieldTransforms.length>0&&(t.updateTransforms=e.fieldTransforms.map(r=>function(i,a){const c=a.transform;if(c instanceof c_)return{fieldPath:a.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(c instanceof Qp)return{fieldPath:a.field.canonicalString(),appendMissingElements:{values:c.elements}};if(c instanceof Xp)return{fieldPath:a.field.canonicalString(),removeAllFromArray:{values:c.elements}};if(c instanceof u_)return{fieldPath:a.field.canonicalString(),increment:c.wt};throw ct()}(0,r))),e.precondition.isNone||(t.currentDocument=void 0!==(i=e.precondition).updateTime?{updateTime:cz(n,i.updateTime)}:void 0!==i.exists?{exists:i.exists}:ct()),t;var i}function Mx(n,e){const t=e.currentDocument?void 0!==(i=e.currentDocument).updateTime?yr.updateTime(Gr(i.updateTime)):void 0!==i.exists?yr.exists(i.exists):yr.none():yr.none(),r=e.updateTransforms?e.updateTransforms.map(i=>function(a,c){let f=null;"setToServerValue"in c?(It("REQUEST_TIME"===c.setToServerValue),f=new c_):"appendMissingElements"in c?f=new Qp(c.appendMissingElements.values||[]):"removeAllFromArray"in c?f=new Xp(c.removeAllFromArray.values||[]):"increment"in c?f=new u_(a,c.increment):ct();const _=Nr.fromServerFormat(c.fieldPath);return new fb(_,f)}(n,i)):[];var i;if(e.update){const i=Ac(n,e.update.name),a=new ts({mapValue:{fields:e.update.fields}});if(e.updateMask){const c=new uo((e.updateMask.fieldPaths||[]).map(w=>Nr.fromServerFormat(w)));return new Ku(i,a,c,t,r)}return new d_(i,a,t,r)}if(e.delete){const i=Ac(n,e.delete);return new h_(i,t)}if(e.verify){const i=Ac(n,e.verify);return new bx(i,t)}return ct()}function d2(n,e){return{documents:[Ax(n,e.path)]}}function xx(n,e){const t={structuredQuery:{}},r=e.path;null!==e.collectionGroup?(t.parent=Ax(n,r),t.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(t.parent=Ax(n,r.popLast()),t.structuredQuery.from=[{collectionId:r.lastSegment()}]);const i=function(_){if(0!==_.length)return p2(Ln.create(_,"and"))}(e.filters);i&&(t.structuredQuery.where=i);const a=function(_){if(0!==_.length)return _.map(w=>{return{field:Rh((S=w).field),direction:pz(S.dir)};var S})}(e.orderBy);a&&(t.structuredQuery.orderBy=a);const c=Sx(n,e.limit);var f,_;return null!==c&&(t.structuredQuery.limit=c),e.startAt&&(t.structuredQuery.startAt={before:(f=e.startAt).inclusive,values:f.position}),e.endAt&&(t.structuredQuery.endAt={before:!(_=e.endAt).inclusive,values:_.position}),t}function h2(n){let e=a2(n.parent);const t=n.structuredQuery,r=t.from?t.from.length:0;let i=null;if(r>0){It(1===r);const S=t.from[0];S.allDescendants?i=S.collectionId:e=e.child(S.collectionId)}let a=[];t.where&&(a=function(S){const x=f2(S);return x instanceof Ln&&hx(x)?x.getFilters():[x]}(t.where));let c=[];t.orderBy&&(c=t.orderBy.map(S=>{return new o_(p_((x=S).field),function(L){switch(L){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(x.direction));var x}));let f=null;t.limit&&(f=function(S){let x;return x="object"==typeof S?S.value:S,nb(x)?null:x}(t.limit));let _=null;var S;t.startAt&&(_=new xh((S=t.startAt).values||[],!!S.before));let w=null;return t.endAt&&(w=function(S){return new xh(S.values||[],!S.before)}(t.endAt)),TL(e,i,c,a,f,"F",_,w)}function f2(n){return void 0!==n.unaryFilter?function(e){switch(e.unaryFilter.op){case"IS_NAN":const t=p_(e.unaryFilter.field);return un.create(t,"==",{doubleValue:NaN});case"IS_NULL":const r=p_(e.unaryFilter.field);return un.create(r,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const i=p_(e.unaryFilter.field);return un.create(i,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const a=p_(e.unaryFilter.field);return un.create(a,"!=",{nullValue:"NULL_VALUE"});default:return ct()}}(n):void 0!==n.fieldFilter?un.create(p_((e=n).fieldFilter.field),function(t){switch(t){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return ct()}}(e.fieldFilter.op),e.fieldFilter.value):void 0!==n.compositeFilter?function(e){return Ln.create(e.compositeFilter.filters.map(t=>f2(t)),function(t){switch(t){case"AND":return"and";case"OR":return"or";default:return ct()}}(e.compositeFilter.op))}(n):ct();var e}function pz(n){return sz[n]}function gz(n){return oz[n]}function mz(n){return az[n]}function Rh(n){return{fieldPath:n.canonicalString()}}function p_(n){return Nr.fromServerFormat(n.fieldPath)}function p2(n){return n instanceof un?function(e){if("=="===e.op){if(dL(e.value))return{unaryFilter:{field:Rh(e.field),op:"IS_NAN"}};if(uL(e.value))return{unaryFilter:{field:Rh(e.field),op:"IS_NULL"}}}else if("!="===e.op){if(dL(e.value))return{unaryFilter:{field:Rh(e.field),op:"IS_NOT_NAN"}};if(uL(e.value))return{unaryFilter:{field:Rh(e.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Rh(e.field),op:gz(e.op),value:e.value}}}(n):n instanceof Ln?function(e){const t=e.getFilters().map(r=>p2(r));return 1===t.length?t[0]:{compositeFilter:{op:mz(e.op),filters:t}}}(n):ct()}function _z(n){const e=[];return n.fields.forEach(t=>e.push(t.canonicalString())),{fieldPaths:e}}function g2(n){return n.length>=4&&"projects"===n.get(0)&&"databases"===n.get(2)}class Zu{constructor(e,t,r,i,a=At.min(),c=At.min(),f=hi.EMPTY_BYTE_STRING,_=null){this.target=e,this.targetId=t,this.purpose=r,this.sequenceNumber=i,this.snapshotVersion=a,this.lastLimboFreeSnapshotVersion=c,this.resumeToken=f,this.expectedCount=_}withSequenceNumber(e){return new Zu(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,t){return new Zu(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new Zu(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new Zu(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}class m2{constructor(e){this.le=e}}function _2(n,e){const t=e.key,r={prefixPath:t.getCollectionPath().popLast().toArray(),collectionGroup:t.collectionGroup,documentId:t.path.lastSegment(),readTime:dI(e.readTime),hasCommittedMutations:e.hasCommittedMutations};if(e.isFoundDocument())r.document={name:yb(i=n.le,(a=e).key),fields:a.data.value.mapValue.fields,updateTime:f_(i,a.version.toTimestamp()),createTime:f_(i,a.createTime.toTimestamp())};else if(e.isNoDocument())r.noDocument={path:t.path.toArray(),readTime:Jp(e.version)};else{if(!e.isUnknownDocument())return ct();r.unknownDocument={path:t.path.toArray(),version:Jp(e.version)}}var i,a;return r}function dI(n){const e=n.toTimestamp();return[e.seconds,e.nanoseconds]}function Jp(n){const e=n.toTimestamp();return{seconds:e.seconds,nanoseconds:e.nanoseconds}}function eg(n){const e=new _r(n.seconds,n.nanoseconds);return At.fromTimestamp(e)}function tg(n,e){const t=(e.baseMutations||[]).map(a=>Mx(n.le,a));for(let a=0;a<e.mutations.length-1;++a){const c=e.mutations[a];a+1<e.mutations.length&&void 0!==e.mutations[a+1].transform&&(c.updateTransforms=e.mutations[a+1].transform.fieldTransforms,e.mutations.splice(a+1,1),++a)}const r=e.mutations.map(a=>Mx(n.le,a)),i=_r.fromMillis(e.localWriteTimeMs);return new wx(e.batchId,i,t,r)}function wb(n){const e=eg(n.readTime),t=void 0!==n.lastLimboFreeSnapshotVersion?eg(n.lastLimboFreeSnapshotVersion):At.min();let r;var i;return void 0!==n.query.documents?(It(1===(i=n.query).documents.length),r=Ks(l_(a2(i.documents[0])))):r=Ks(h2(n.query)),new Zu(r,n.targetId,"TargetPurposeListen",n.lastListenSequenceNumber,e,t,hi.fromBase64String(n.resumeToken))}function y2(n,e){const t=Jp(e.snapshotVersion),r=Jp(e.lastLimboFreeSnapshotVersion);let i;i=nI(e.target)?d2(n.le,e.target):xx(n.le,e.target);const a=e.resumeToken.toBase64();return{targetId:e.targetId,canonicalId:Zp(e.target),readTime:t,resumeToken:a,lastListenSequenceNumber:e.sequenceNumber,lastLimboFreeSnapshotVersion:r,query:i}}function Rx(n){const e=h2({parent:n.parent,structuredQuery:n.structuredQuery});return"LAST"===n.limitType?sI(e,e.limit,"L"):e}function kx(n,e){return new Cx(e.largestBatchId,Mx(n.le,e.overlayMutation))}function v2(n,e){const t=e.path.lastSegment();return[n,ws(e.path.popLast()),t]}function b2(n,e,t,r){return{indexId:n,uid:e.uid||"",sequenceNumber:t,readTime:Jp(r.readTime),documentKey:ws(r.documentKey.path),largestBatchId:r.largestBatchId}}class vz{getBundleMetadata(e,t){return w2(e).get(t).next(r=>{if(r)return{id:(i=r).bundleId,createTime:eg(i.createTime),version:i.version};var i})}saveBundleMetadata(e,t){return w2(e).put({bundleId:(r=t).id,createTime:Jp(Gr(r.createTime)),version:r.version});var r}getNamedQuery(e,t){return E2(e).get(t).next(r=>{if(r)return{name:(i=r).name,query:Rx(i.bundledQuery),readTime:eg(i.readTime)};var i})}saveNamedQuery(e,t){return E2(e).put({name:(r=t).name,readTime:Jp(Gr(r.readTime)),bundledQuery:r.bundledQuery});var r}}function w2(n){return Mi(n,"bundles")}function E2(n){return Mi(n,"namedQueries")}class hI{constructor(e,t){this.serializer=e,this.userId=t}static fe(e,t){return new hI(e,t.uid||"")}getOverlay(e,t){return Eb(e).get(v2(this.userId,t)).next(r=>r?kx(this.serializer,r):null)}getOverlays(e,t){const r=Tc();return ae.forEach(t,i=>this.getOverlay(e,i).next(a=>{null!==a&&r.set(i,a)})).next(()=>r)}saveOverlays(e,t,r){const i=[];return r.forEach((a,c)=>{const f=new Cx(t,c);i.push(this.de(e,f))}),ae.waitFor(i)}removeOverlaysForBatchId(e,t,r){const i=new Set;t.forEach(c=>i.add(ws(c.getCollectionPath())));const a=[];return i.forEach(c=>{const f=IDBKeyRange.bound([this.userId,c,r],[this.userId,c,r+1],!1,!0);a.push(Eb(e).J("collectionPathOverlayIndex",f))}),ae.waitFor(a)}getOverlaysForCollection(e,t,r){const i=Tc(),a=ws(t),c=IDBKeyRange.bound([this.userId,a,r],[this.userId,a,Number.POSITIVE_INFINITY],!0);return Eb(e).j("collectionPathOverlayIndex",c).next(f=>{for(const _ of f){const w=kx(this.serializer,_);i.set(w.getKey(),w)}return i})}getOverlaysForCollectionGroup(e,t,r,i){const a=Tc();let c;const f=IDBKeyRange.bound([this.userId,t,r],[this.userId,t,Number.POSITIVE_INFINITY],!0);return Eb(e).X({index:"collectionGroupOverlayIndex",range:f},(_,w,S)=>{const x=kx(this.serializer,w);a.size()<i||x.largestBatchId===c?(a.set(x.getKey(),x),c=x.largestBatchId):S.done()}).next(()=>a)}de(e,t){return Eb(e).put(function(r,i,a){const[c,f,_]=v2(i,a.mutation.key);return{userId:i,collectionPath:f,documentId:_,collectionGroup:a.mutation.key.getCollectionGroup(),largestBatchId:a.largestBatchId,overlayMutation:bb(r.le,a.mutation)}}(this.serializer,this.userId,t))}}function Eb(n){return Mi(n,"documentOverlays")}class ng{constructor(){}_e(e,t){this.we(e,t),t.me()}we(e,t){if("nullValue"in e)this.ge(t,5);else if("booleanValue"in e)this.ge(t,10),t.ye(e.booleanValue?1:0);else if("integerValue"in e)this.ge(t,15),t.ye(Fr(e.integerValue));else if("doubleValue"in e){const r=Fr(e.doubleValue);isNaN(r)?this.ge(t,13):(this.ge(t,15),rb(r)?t.ye(0):t.ye(r))}else if("timestampValue"in e){const r=e.timestampValue;this.ge(t,20),"string"==typeof r?t.pe(r):(t.pe(`${r.seconds||""}`),t.ye(r.nanos||0))}else if("stringValue"in e)this.Ie(e.stringValue,t),this.Te(t);else if("bytesValue"in e)this.ge(t,30),t.Ee(Gu(e.bytesValue)),this.Te(t);else if("referenceValue"in e)this.Ae(e.referenceValue,t);else if("geoPointValue"in e){const r=e.geoPointValue;this.ge(t,45),t.ye(r.latitude||0),t.ye(r.longitude||0)}else"mapValue"in e?hL(e)?this.ge(t,Number.MAX_SAFE_INTEGER):(this.Re(e.mapValue,t),this.Te(t)):"arrayValue"in e?(this.ve(e.arrayValue,t),this.Te(t)):ct()}Ie(e,t){this.ge(t,25),this.Pe(e,t)}Pe(e,t){t.pe(e)}Re(e,t){const r=e.fields||{};this.ge(t,55);for(const i of Object.keys(r))this.Ie(i,t),this.we(r[i],t)}ve(e,t){const r=e.values||[];this.ge(t,50);for(const i of r)this.we(i,t)}Ae(e,t){this.ge(t,37),Xe.fromName(e).path.forEach(r=>{this.ge(t,60),this.Pe(r,t)})}ge(e,t){e.ye(t)}Te(e){e.ye(2)}}function bz(n){if(0===n)return 8;let e=0;return n>>4==0&&(e+=4,n<<=4),n>>6==0&&(e+=2,n<<=2),n>>7==0&&(e+=1),e}function C2(n){const e=64-function(t){let r=0;for(let i=0;i<8;++i){const a=bz(255&t[i]);if(r+=a,8!==a)break}return r}(n);return Math.ceil(e/8)}ng.be=new ng;class wz{constructor(){this.buffer=new Uint8Array(1024),this.position=0}Ve(e){const t=e[Symbol.iterator]();let r=t.next();for(;!r.done;)this.Se(r.value),r=t.next();this.De()}Ce(e){const t=e[Symbol.iterator]();let r=t.next();for(;!r.done;)this.xe(r.value),r=t.next();this.Ne()}ke(e){for(const t of e){const r=t.charCodeAt(0);if(r<128)this.Se(r);else if(r<2048)this.Se(960|r>>>6),this.Se(128|63&r);else if(t<"\ud800"||"\udbff"<t)this.Se(480|r>>>12),this.Se(128|63&r>>>6),this.Se(128|63&r);else{const i=t.codePointAt(0);this.Se(240|i>>>18),this.Se(128|63&i>>>12),this.Se(128|63&i>>>6),this.Se(128|63&i)}}this.De()}Me(e){for(const t of e){const r=t.charCodeAt(0);if(r<128)this.xe(r);else if(r<2048)this.xe(960|r>>>6),this.xe(128|63&r);else if(t<"\ud800"||"\udbff"<t)this.xe(480|r>>>12),this.xe(128|63&r>>>6),this.xe(128|63&r);else{const i=t.codePointAt(0);this.xe(240|i>>>18),this.xe(128|63&i>>>12),this.xe(128|63&i>>>6),this.xe(128|63&i)}}this.Ne()}Oe(e){const t=this.$e(e),r=C2(t);this.Fe(1+r),this.buffer[this.position++]=255&r;for(let i=t.length-r;i<t.length;++i)this.buffer[this.position++]=255&t[i]}Be(e){const t=this.$e(e),r=C2(t);this.Fe(1+r),this.buffer[this.position++]=~(255&r);for(let i=t.length-r;i<t.length;++i)this.buffer[this.position++]=~(255&t[i])}Le(){this.qe(255),this.qe(255)}Ue(){this.Ke(255),this.Ke(255)}reset(){this.position=0}seed(e){this.Fe(e.length),this.buffer.set(e,this.position),this.position+=e.length}Ge(){return this.buffer.slice(0,this.position)}$e(e){const t=function(i){const a=new DataView(new ArrayBuffer(8));return a.setFloat64(0,i,!1),new Uint8Array(a.buffer)}(e),r=0!=(128&t[0]);t[0]^=r?255:128;for(let i=1;i<t.length;++i)t[i]^=r?255:0;return t}Se(e){const t=255&e;0===t?(this.qe(0),this.qe(255)):255===t?(this.qe(255),this.qe(0)):this.qe(t)}xe(e){const t=255&e;0===t?(this.Ke(0),this.Ke(255)):255===t?(this.Ke(255),this.Ke(0)):this.Ke(e)}De(){this.qe(0),this.qe(1)}Ne(){this.Ke(0),this.Ke(1)}qe(e){this.Fe(1),this.buffer[this.position++]=e}Ke(e){this.Fe(1),this.buffer[this.position++]=~e}Fe(e){const t=e+this.position;if(t<=this.buffer.length)return;let r=2*this.buffer.length;r<t&&(r=t);const i=new Uint8Array(r);i.set(this.buffer),this.buffer=i}}class Ez{constructor(e){this.Qe=e}Ee(e){this.Qe.Ve(e)}pe(e){this.Qe.ke(e)}ye(e){this.Qe.Oe(e)}me(){this.Qe.Le()}}class Cz{constructor(e){this.Qe=e}Ee(e){this.Qe.Ce(e)}pe(e){this.Qe.Me(e)}ye(e){this.Qe.Be(e)}me(){this.Qe.Ue()}}class Cb{constructor(){this.Qe=new wz,this.je=new Ez(this.Qe),this.ze=new Cz(this.Qe)}seed(e){this.Qe.seed(e)}We(e){return 0===e?this.je:this.ze}Ge(){return this.Qe.Ge()}reset(){this.Qe.reset()}}class rg{constructor(e,t,r,i){this.indexId=e,this.documentKey=t,this.arrayValue=r,this.directionalValue=i}He(){const e=this.directionalValue.length,t=0===e||255===this.directionalValue[e-1]?e+1:e,r=new Uint8Array(t);return r.set(this.directionalValue,0),t!==e?r.set([0],this.directionalValue.length):++r[r.length-1],new rg(this.indexId,this.documentKey,this.arrayValue,r)}}function kh(n,e){let t=n.indexId-e.indexId;return 0!==t?t:(t=I2(n.arrayValue,e.arrayValue),0!==t?t:(t=I2(n.directionalValue,e.directionalValue),0!==t?t:Xe.comparator(n.documentKey,e.documentKey)))}function I2(n,e){for(let t=0;t<n.length&&t<e.length;++t){const r=n[t]-e[t];if(0!==r)return r}return n.length-e.length}class Iz{constructor(e){this.collectionId=null!=e.collectionGroup?e.collectionGroup:e.path.lastSegment(),this.Je=e.orderBy,this.Ye=[];for(const t of e.filters){const r=t;r.isInequality()?this.Xe=r:this.Ye.push(r)}}Ze(e){It(e.collectionGroup===this.collectionId);const t=ix(e);if(void 0!==t&&!this.tn(t))return!1;const r=qp(e);let i=0,a=0;for(;i<r.length&&this.tn(r[i]);++i);if(i===r.length)return!0;if(void 0!==this.Xe){const c=r[i];if(!this.en(this.Xe,c)||!this.nn(this.Je[a++],c))return!1;++i}for(;i<r.length;++i){const c=r[i];if(a>=this.Je.length||!this.nn(this.Je[a++],c))return!1}return!0}tn(e){for(const t of this.Ye)if(this.en(t,e))return!0;return!1}en(e,t){return!(void 0===e||!e.field.isEqual(t.fieldPath))&&2===t.kind==("array-contains"===e.op||"array-contains-any"===e.op)}nn(e,t){return!!e.field.isEqual(t.fieldPath)&&(0===t.kind&&"asc"===e.dir||1===t.kind&&"desc"===e.dir)}}function D2(n){var e,t;if(It(n instanceof un||n instanceof Ln),n instanceof un){if(n instanceof IL){const i=(null===(t=null===(e=n.value.arrayValue)||void 0===e?void 0:e.values)||void 0===t?void 0:t.map(a=>un.create(n.field,"==",a)))||[];return Ln.create(i,"or")}return n}const r=n.filters.map(i=>D2(i));return Ln.create(r,n.op)}function Dz(n){if(0===n.getFilters().length)return[];const e=Nx(D2(n));return It(S2(e)),Ox(e)||Px(e)?[e]:e.getFilters()}function Ox(n){return n instanceof un}function Px(n){return n instanceof Ln&&hx(n)}function S2(n){return Ox(n)||Px(n)||function(e){if(e instanceof Ln&&dx(e)){for(const t of e.getFilters())if(!Ox(t)&&!Px(t))return!1;return!0}return!1}(n)}function Nx(n){if(It(n instanceof un||n instanceof Ln),n instanceof un)return n;if(1===n.filters.length)return Nx(n.filters[0]);const e=n.filters.map(r=>Nx(r));let t=Ln.create(e,n.op);return t=fI(t),S2(t)?t:(It(t instanceof Ln),It(a_(t)),It(t.filters.length>1),t.filters.reduce((r,i)=>Fx(r,i)))}function Fx(n,e){let t;return It(n instanceof un||n instanceof Ln),It(e instanceof un||e instanceof Ln),t=n instanceof un?e instanceof un?Ln.create([n,e],"and"):T2(n,e):e instanceof un?T2(e,n):function(r,i){if(It(r.filters.length>0&&i.filters.length>0),a_(r)&&a_(i))return wL(r,i.getFilters());const a=dx(r)?r:i,c=dx(r)?i:r,f=a.filters.map(_=>Fx(_,c));return Ln.create(f,"or")}(n,e),fI(t)}function T2(n,e){if(a_(e))return wL(e,n.getFilters());{const t=e.filters.map(r=>Fx(n,r));return Ln.create(t,"or")}}function fI(n){if(It(n instanceof un||n instanceof Ln),n instanceof un)return n;const e=n.getFilters();if(1===e.length)return fI(e[0]);if(vL(n))return n;const t=e.map(i=>fI(i)),r=[];return t.forEach(i=>{i instanceof un?r.push(i):i instanceof Ln&&(i.op===n.op?r.push(...i.filters):r.push(i))}),1===r.length?r[0]:Ln.create(r,n.op)}class Sz{constructor(){this.sn=new Lx}addToCollectionParentIndex(e,t){return this.sn.add(t),ae.resolve()}getCollectionParents(e,t){return ae.resolve(this.sn.getEntries(t))}addFieldIndex(e,t){return ae.resolve()}deleteFieldIndex(e,t){return ae.resolve()}getDocumentsMatchingTarget(e,t){return ae.resolve(null)}getIndexType(e,t){return ae.resolve(0)}getFieldIndexes(e,t){return ae.resolve([])}getNextCollectionGroupToUpdate(e){return ae.resolve(null)}getMinOffset(e,t){return ae.resolve(Oo.min())}getMinOffsetFromCollectionGroup(e,t){return ae.resolve(Oo.min())}updateCollectionGroup(e,t,r){return ae.resolve()}updateIndexEntries(e,t){return ae.resolve()}}class Lx{constructor(){this.index={}}add(e){const t=e.lastSegment(),r=e.popLast(),i=this.index[t]||new cr(_n.comparator),a=!i.has(r);return this.index[t]=i.add(r),a}has(e){const t=e.lastSegment(),r=e.popLast(),i=this.index[t];return i&&i.has(r)}getEntries(e){return(this.index[e]||new cr(_n.comparator)).toArray()}}const pI=new Uint8Array(0);class Tz{constructor(e,t){this.user=e,this.databaseId=t,this.rn=new Lx,this.on=new Wu(r=>Zp(r),(r,i)=>lb(r,i)),this.uid=e.uid||""}addToCollectionParentIndex(e,t){if(!this.rn.has(t)){const r=t.lastSegment(),i=t.popLast();e.addOnCommittedListener(()=>{this.rn.add(t)});const a={collectionId:r,parent:ws(i)};return A2(e).put(a)}return ae.resolve()}getCollectionParents(e,t){const r=[],i=IDBKeyRange.bound([t,""],[qF(t),""],!1,!0);return A2(e).j(i).next(a=>{for(const c of a){if(c.collectionId!==t)break;r.push(Dc(c.parent))}return r})}addFieldIndex(e,t){const r=gI(e),i={indexId:(c=t).indexId,collectionGroup:c.collectionGroup,fields:c.fields.map(f=>[f.fieldPath.canonicalString(),f.kind])};var c;delete i.indexId;const a=r.add(i);if(t.indexState){const c=Db(e);return a.next(f=>{c.put(b2(f,this.user,t.indexState.sequenceNumber,t.indexState.offset))})}return a.next()}deleteFieldIndex(e,t){const r=gI(e),i=Db(e),a=Ib(e);return r.delete(t.indexId).next(()=>i.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0))).next(()=>a.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0)))}getDocumentsMatchingTarget(e,t){const r=Ib(e);let i=!0;const a=new Map;return ae.forEach(this.un(t),c=>this.cn(e,c).next(f=>{i&&(i=!!f),a.set(c,f)})).next(()=>{if(i){let c=tn();const f=[];return ae.forEach(a,(_,w)=>{var S;Ue("IndexedDbIndexManager",`Using index ${S=_,`id=${S.indexId}|cg=${S.collectionGroup}|f=${S.fields.map(tt=>`${tt.fieldPath}:${tt.kind}`).join(",")}`} to execute ${Zp(t)}`);const x=function(tt,Dt){const zt=ix(Dt);if(void 0===zt)return null;for(const Yt of rI(tt,zt.fieldPath))switch(Yt.op){case"array-contains-any":return Yt.value.arrayValue.values||[];case"array-contains":return[Yt.value]}return null}(w,_),L=function(tt,Dt){const zt=new Map;for(const Yt of qp(Dt))for(const Tn of rI(tt,Yt.fieldPath))switch(Tn.op){case"==":case"in":zt.set(Yt.fieldPath.canonicalString(),Tn.value);break;case"not-in":case"!=":return zt.set(Yt.fieldPath.canonicalString(),Tn.value),Array.from(zt.values())}return null}(w,_),U=function(tt,Dt){const zt=[];let Yt=!0;for(const Tn of qp(Dt)){const Ri=0===Tn.kind?DL(tt,Tn.fieldPath,tt.startAt):SL(tt,Tn.fieldPath,tt.startAt);zt.push(Ri.value),Yt&&(Yt=Ri.inclusive)}return new xh(zt,Yt)}(w,_),W=function(tt,Dt){const zt=[];let Yt=!0;for(const Tn of qp(Dt)){const Ri=0===Tn.kind?SL(tt,Tn.fieldPath,tt.endAt):DL(tt,Tn.fieldPath,tt.endAt);zt.push(Ri.value),Yt&&(Yt=Ri.inclusive)}return new xh(zt,Yt)}(w,_),ie=this.an(_,w,U),we=this.an(_,w,W),qe=this.hn(_,w,L),ot=this.ln(_.indexId,x,ie,U.inclusive,we,W.inclusive,qe);return ae.forEach(ot,tt=>r.H(tt,t.limit).next(Dt=>{Dt.forEach(zt=>{const Yt=Xe.fromSegments(zt.documentKey);c.has(Yt)||(c=c.add(Yt),f.push(Yt))})}))}).next(()=>f)}return ae.resolve(null)})}un(e){let t=this.on.get(e);return t||(t=0===e.filters.length?[e]:Dz(Ln.create(e.filters,"and")).map(r=>px(e.path,e.collectionGroup,e.orderBy,r.getFilters(),e.limit,e.startAt,e.endAt)),this.on.set(e,t),t)}ln(e,t,r,i,a,c,f){const _=(null!=t?t.length:1)*Math.max(r.length,a.length),w=_/(null!=t?t.length:1),S=[];for(let x=0;x<_;++x){const L=t?this.fn(t[x/w]):pI,U=this.dn(e,L,r[x%w],i),W=this._n(e,L,a[x%w],c),ie=f.map(we=>this.dn(e,L,we,!0));S.push(...this.createRange(U,W,ie))}return S}dn(e,t,r,i){const a=new rg(e,Xe.empty(),t,r);return i?a:a.He()}_n(e,t,r,i){const a=new rg(e,Xe.empty(),t,r);return i?a.He():a}cn(e,t){const r=new Iz(t),i=null!=t.collectionGroup?t.collectionGroup:t.path.lastSegment();return this.getFieldIndexes(e,i).next(a=>{let c=null;for(const f of a)r.Ze(f)&&(!c||f.fields.length>c.fields.length)&&(c=f);return c})}getIndexType(e,t){let r=2;const i=this.un(t);return ae.forEach(i,a=>this.cn(e,a).next(c=>{c?0!==r&&c.fields.length<function(f){let _=new cr(Nr.comparator),w=!1;for(const S of f.filters)for(const x of S.getFlattenedFilters())x.field.isKeyField()||("array-contains"===x.op||"array-contains-any"===x.op?w=!0:_=_.add(x.field));for(const S of f.orderBy)S.field.isKeyField()||(_=_.add(S.field));return _.size+(w?1:0)}(a)&&(r=1):r=0})).next(()=>null!==t.limit&&i.length>1&&2===r?1:r)}wn(e,t){const r=new Cb;for(const i of qp(e)){const a=t.data.field(i.fieldPath);if(null==a)return null;const c=r.We(i.kind);ng.be._e(a,c)}return r.Ge()}fn(e){const t=new Cb;return ng.be._e(e,t.We(0)),t.Ge()}mn(e,t){const r=new Cb;return ng.be._e(Kp(this.databaseId,t),r.We(function(i){const a=qp(i);return 0===a.length?0:a[a.length-1].kind}(e))),r.Ge()}hn(e,t,r){if(null===r)return[];let i=[];i.push(new Cb);let a=0;for(const c of qp(e)){const f=r[a++];for(const _ of i)if(this.gn(t,c.fieldPath)&&ob(f))i=this.yn(i,c,f);else{const w=_.We(c.kind);ng.be._e(f,w)}}return this.pn(i)}an(e,t,r){return this.hn(e,t,r.position)}pn(e){const t=[];for(let r=0;r<e.length;++r)t[r]=e[r].Ge();return t}yn(e,t,r){const i=[...e],a=[];for(const c of r.arrayValue.values||[])for(const f of i){const _=new Cb;_.seed(f.Ge()),ng.be._e(c,_.We(t.kind)),a.push(_)}return a}gn(e,t){return!!e.filters.find(r=>r instanceof un&&r.field.isEqual(t)&&("in"===r.op||"not-in"===r.op))}getFieldIndexes(e,t){const r=gI(e),i=Db(e);return(t?r.j("collectionGroupIndex",IDBKeyRange.bound(t,t)):r.j()).next(a=>{const c=[];return ae.forEach(a,f=>i.get([f.indexId,this.uid]).next(_=>{c.push(function(w,S){const x=S?new eb(S.sequenceNumber,new Oo(eg(S.readTime),new Xe(Dc(S.documentKey)),S.largestBatchId)):eb.empty(),L=w.fields.map(([U,W])=>new WC(Nr.fromServerFormat(U),W));return new qC(w.indexId,w.collectionGroup,L,x)}(f,_))})).next(()=>c)})}getNextCollectionGroupToUpdate(e){return this.getFieldIndexes(e).next(t=>0===t.length?null:(t.sort((r,i)=>{const a=r.indexState.sequenceNumber-i.indexState.sequenceNumber;return 0!==a?a:Gt(r.collectionGroup,i.collectionGroup)}),t[0].collectionGroup))}updateCollectionGroup(e,t,r){const i=gI(e),a=Db(e);return this.In(e).next(c=>i.j("collectionGroupIndex",IDBKeyRange.bound(t,t)).next(f=>ae.forEach(f,_=>a.put(b2(_.indexId,this.user,c,r)))))}updateIndexEntries(e,t){const r=new Map;return ae.forEach(t,(i,a)=>{const c=r.get(i.collectionGroup);return(c?ae.resolve(c):this.getFieldIndexes(e,i.collectionGroup)).next(f=>(r.set(i.collectionGroup,f),ae.forEach(f,_=>this.Tn(e,i,_).next(w=>{const S=this.En(a,_);return w.isEqual(S)?ae.resolve():this.An(e,a,_,w,S)}))))})}Rn(e,t,r,i){return Ib(e).put({indexId:i.indexId,uid:this.uid,arrayValue:i.arrayValue,directionalValue:i.directionalValue,orderedDocumentKey:this.mn(r,t.key),documentKey:t.key.path.toArray()})}vn(e,t,r,i){return Ib(e).delete([i.indexId,this.uid,i.arrayValue,i.directionalValue,this.mn(r,t.key),t.key.path.toArray()])}Tn(e,t,r){const i=Ib(e);let a=new cr(kh);return i.X({index:"documentKeyIndex",range:IDBKeyRange.only([r.indexId,this.uid,this.mn(r,t)])},(c,f)=>{a=a.add(new rg(r.indexId,t,f.arrayValue,f.directionalValue))}).next(()=>a)}En(e,t){let r=new cr(kh);const i=this.wn(t,e);if(null==i)return r;const a=ix(t);if(null!=a){const c=e.data.field(a.fieldPath);if(ob(c))for(const f of c.arrayValue.values||[])r=r.add(new rg(t.indexId,e.key,this.fn(f),i))}else r=r.add(new rg(t.indexId,e.key,pI,i));return r}An(e,t,r,i,a){Ue("IndexedDbIndexManager","Updating index entries for document '%s'",t.key);const c=[];return function(f,_,w,S,x){const L=f.getIterator(),U=_.getIterator();let W=i_(L),ie=i_(U);for(;W||ie;){let we=!1,qe=!1;if(W&&ie){const ot=w(W,ie);ot<0?qe=!0:ot>0&&(we=!0)}else null!=W?qe=!0:we=!0;we?(S(ie),ie=i_(U)):qe?(x(W),W=i_(L)):(W=i_(L),ie=i_(U))}}(i,a,kh,f=>{c.push(this.Rn(e,t,r,f))},f=>{c.push(this.vn(e,t,r,f))}),ae.waitFor(c)}In(e){let t=1;return Db(e).X({index:"sequenceNumberIndex",reverse:!0,range:IDBKeyRange.upperBound([this.uid,Number.MAX_SAFE_INTEGER])},(r,i,a)=>{a.done(),t=i.sequenceNumber+1}).next(()=>t)}createRange(e,t,r){r=r.sort((c,f)=>kh(c,f)).filter((c,f,_)=>!f||0!==kh(c,_[f-1]));const i=[];i.push(e);for(const c of r){const f=kh(c,e),_=kh(c,t);if(0===f)i[0]=e.He();else if(f>0&&_<0)i.push(c),i.push(c.He());else if(_>0)break}i.push(t);const a=[];for(let c=0;c<i.length;c+=2){if(this.Pn(i[c],i[c+1]))return[];a.push(IDBKeyRange.bound([i[c].indexId,this.uid,i[c].arrayValue,i[c].directionalValue,pI,[]],[i[c+1].indexId,this.uid,i[c+1].arrayValue,i[c+1].directionalValue,pI,[]]))}return a}Pn(e,t){return kh(e,t)>0}getMinOffsetFromCollectionGroup(e,t){return this.getFieldIndexes(e,t).next(M2)}getMinOffset(e,t){return ae.mapArray(this.un(t),r=>this.cn(e,r).next(i=>i||ct())).next(M2)}}function A2(n){return Mi(n,"collectionParents")}function Ib(n){return Mi(n,"indexEntries")}function gI(n){return Mi(n,"indexConfiguration")}function Db(n){return Mi(n,"indexState")}function M2(n){It(0!==n.length);let e=n[0].indexState.offset,t=e.largestBatchId;for(let r=1;r<n.length;r++){const i=n[r].indexState.offset;sx(i,e)<0&&(e=i),t<i.largestBatchId&&(t=i.largestBatchId)}return new Oo(e.readTime,e.documentKey,t)}const x2={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0};class Es{constructor(e,t,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=r}static withCacheSize(e){return new Es(e,Es.DEFAULT_COLLECTION_PERCENTILE,Es.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}}function R2(n,e,t){const r=n.store("mutations"),i=n.store("documentMutations"),a=[],c=IDBKeyRange.only(t.batchId);let f=0;const _=r.X({range:c},(S,x,L)=>(f++,L.delete()));a.push(_.next(()=>{It(1===f)}));const w=[];for(const S of t.mutations){const x=tL(e,S.key.path,t.batchId);a.push(i.delete(x)),w.push(S.key)}return ae.waitFor(a).next(()=>w)}function mI(n){if(!n)return 0;let e;if(n.document)e=n.document;else if(n.unknownDocument)e=n.unknownDocument;else{if(!n.noDocument)throw ct();e=n.noDocument}return JSON.stringify(e).length}Es.DEFAULT_COLLECTION_PERCENTILE=10,Es.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,Es.DEFAULT=new Es(41943040,Es.DEFAULT_COLLECTION_PERCENTILE,Es.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),Es.DISABLED=new Es(-1,0,0);class _I{constructor(e,t,r,i){this.userId=e,this.serializer=t,this.indexManager=r,this.referenceDelegate=i,this.bn={}}static fe(e,t,r,i){It(""!==e.uid);const a=e.isAuthenticated()?e.uid:"";return new _I(a,t,r,i)}checkEmpty(e){let t=!0;const r=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return Oh(e).X({index:"userMutationsIndex",range:r},(i,a,c)=>{t=!1,c.done()}).next(()=>t)}addMutationBatch(e,t,r,i){const a=g_(e),c=Oh(e);return c.add({}).next(f=>{It("number"==typeof f);const _=new wx(f,t,r,i),w=function(L,U,W){const ie=W.baseMutations.map(qe=>bb(L.le,qe)),we=W.mutations.map(qe=>bb(L.le,qe));return{userId:U,batchId:W.batchId,localWriteTimeMs:W.localWriteTime.toMillis(),baseMutations:ie,mutations:we}}(this.serializer,this.userId,_),S=[];let x=new cr((L,U)=>Gt(L.canonicalString(),U.canonicalString()));for(const L of i){const U=tL(this.userId,L.key.path,f);x=x.add(L.key.path.popLast()),S.push(c.put(w)),S.push(a.put(U,p$))}return x.forEach(L=>{S.push(this.indexManager.addToCollectionParentIndex(e,L))}),e.addOnCommittedListener(()=>{this.bn[f]=_.keys()}),ae.waitFor(S).next(()=>_)})}lookupMutationBatch(e,t){return Oh(e).get(t).next(r=>r?(It(r.userId===this.userId),tg(this.serializer,r)):null)}Vn(e,t){return this.bn[t]?ae.resolve(this.bn[t]):this.lookupMutationBatch(e,t).next(r=>{if(r){const i=r.keys();return this.bn[t]=i,i}return null})}getNextMutationBatchAfterBatchId(e,t){const r=t+1,i=IDBKeyRange.lowerBound([this.userId,r]);let a=null;return Oh(e).X({index:"userMutationsIndex",range:i},(c,f,_)=>{f.userId===this.userId&&(It(f.batchId>=r),a=tg(this.serializer,f)),_.done()}).next(()=>a)}getHighestUnacknowledgedBatchId(e){const t=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]);let r=-1;return Oh(e).X({index:"userMutationsIndex",range:t,reverse:!0},(i,a,c)=>{r=a.batchId,c.done()}).next(()=>r)}getAllMutationBatches(e){const t=IDBKeyRange.bound([this.userId,-1],[this.userId,Number.POSITIVE_INFINITY]);return Oh(e).j("userMutationsIndex",t).next(r=>r.map(i=>tg(this.serializer,i)))}getAllMutationBatchesAffectingDocumentKey(e,t){const r=ZC(this.userId,t.path),i=IDBKeyRange.lowerBound(r),a=[];return g_(e).X({range:i},(c,f,_)=>{const[w,S,x]=c,L=Dc(S);if(w===this.userId&&t.path.isEqual(L))return Oh(e).get(x).next(U=>{if(!U)throw ct();It(U.userId===this.userId),a.push(tg(this.serializer,U))});_.done()}).next(()=>a)}getAllMutationBatchesAffectingDocumentKeys(e,t){let r=new cr(Gt);const i=[];return t.forEach(a=>{const c=ZC(this.userId,a.path),f=IDBKeyRange.lowerBound(c),_=g_(e).X({range:f},(w,S,x)=>{const[L,U,W]=w,ie=Dc(U);L===this.userId&&a.path.isEqual(ie)?r=r.add(W):x.done()});i.push(_)}),ae.waitFor(i).next(()=>this.Sn(e,r))}getAllMutationBatchesAffectingQuery(e,t){const r=t.path,i=r.length+1,a=ZC(this.userId,r),c=IDBKeyRange.lowerBound(a);let f=new cr(Gt);return g_(e).X({range:c},(_,w,S)=>{const[x,L,U]=_,W=Dc(L);x===this.userId&&r.isPrefixOf(W)?W.length===i&&(f=f.add(U)):S.done()}).next(()=>this.Sn(e,f))}Sn(e,t){const r=[],i=[];return t.forEach(a=>{i.push(Oh(e).get(a).next(c=>{if(null===c)throw ct();It(c.userId===this.userId),r.push(tg(this.serializer,c))}))}),ae.waitFor(i).next(()=>r)}removeMutationBatch(e,t){return R2(e.at,this.userId,t).next(r=>(e.addOnCommittedListener(()=>{this.Dn(t.batchId)}),ae.forEach(r,i=>this.referenceDelegate.markPotentiallyOrphaned(e,i))))}Dn(e){delete this.bn[e]}performConsistencyCheck(e){return this.checkEmpty(e).next(t=>{if(!t)return ae.resolve();const r=IDBKeyRange.lowerBound([this.userId]),i=[];return g_(e).X({range:r},(a,c,f)=>{if(a[0]===this.userId){const _=Dc(a[1]);i.push(_)}else f.done()}).next(()=>{It(0===i.length)})})}containsKey(e,t){return k2(e,this.userId,t)}Cn(e){return O2(e).get(this.userId).next(t=>t||{userId:this.userId,lastAcknowledgedBatchId:-1,lastStreamToken:""})}}function k2(n,e,t){const r=ZC(e,t.path),i=r[1],a=IDBKeyRange.lowerBound(r);let c=!1;return g_(n).X({range:a,Y:!0},(f,_,w)=>{const[S,x,L]=f;S===e&&x===i&&(c=!0),w.done()}).next(()=>c)}function Oh(n){return Mi(n,"mutations")}function g_(n){return Mi(n,"documentMutations")}function O2(n){return Mi(n,"mutationQueues")}class ig{constructor(e){this.xn=e}next(){return this.xn+=2,this.xn}static Nn(){return new ig(0)}static kn(){return new ig(-1)}}class Az{constructor(e,t){this.referenceDelegate=e,this.serializer=t}allocateTargetId(e){return this.Mn(e).next(t=>{const r=new ig(t.highestTargetId);return t.highestTargetId=r.next(),this.On(e,t).next(()=>t.highestTargetId)})}getLastRemoteSnapshotVersion(e){return this.Mn(e).next(t=>At.fromTimestamp(new _r(t.lastRemoteSnapshotVersion.seconds,t.lastRemoteSnapshotVersion.nanoseconds)))}getHighestSequenceNumber(e){return this.Mn(e).next(t=>t.highestListenSequenceNumber)}setTargetsMetadata(e,t,r){return this.Mn(e).next(i=>(i.highestListenSequenceNumber=t,r&&(i.lastRemoteSnapshotVersion=r.toTimestamp()),t>i.highestListenSequenceNumber&&(i.highestListenSequenceNumber=t),this.On(e,i)))}addTargetData(e,t){return this.$n(e,t).next(()=>this.Mn(e).next(r=>(r.targetCount+=1,this.Fn(t,r),this.On(e,r))))}updateTargetData(e,t){return this.$n(e,t)}removeTargetData(e,t){return this.removeMatchingKeysForTargetId(e,t.targetId).next(()=>m_(e).delete(t.targetId)).next(()=>this.Mn(e)).next(r=>(It(r.targetCount>0),r.targetCount-=1,this.On(e,r)))}removeTargets(e,t,r){let i=0;const a=[];return m_(e).X((c,f)=>{const _=wb(f);_.sequenceNumber<=t&&null===r.get(_.targetId)&&(i++,a.push(this.removeTargetData(e,_)))}).next(()=>ae.waitFor(a)).next(()=>i)}forEachTarget(e,t){return m_(e).X((r,i)=>{const a=wb(i);t(a)})}Mn(e){return P2(e).get("targetGlobalKey").next(t=>(It(null!==t),t))}On(e,t){return P2(e).put("targetGlobalKey",t)}$n(e,t){return m_(e).put(y2(this.serializer,t))}Fn(e,t){let r=!1;return e.targetId>t.highestTargetId&&(t.highestTargetId=e.targetId,r=!0),e.sequenceNumber>t.highestListenSequenceNumber&&(t.highestListenSequenceNumber=e.sequenceNumber,r=!0),r}getTargetCount(e){return this.Mn(e).next(t=>t.targetCount)}getTargetData(e,t){const r=Zp(t),i=IDBKeyRange.bound([r,Number.NEGATIVE_INFINITY],[r,Number.POSITIVE_INFINITY]);let a=null;return m_(e).X({range:i,index:"queryTargetsIndex"},(c,f,_)=>{const w=wb(f);lb(t,w.target)&&(a=w,_.done())}).next(()=>a)}addMatchingKeys(e,t,r){const i=[],a=Ph(e);return t.forEach(c=>{const f=ws(c.path);i.push(a.put({targetId:r,path:f})),i.push(this.referenceDelegate.addReference(e,r,c))}),ae.waitFor(i)}removeMatchingKeys(e,t,r){const i=Ph(e);return ae.forEach(t,a=>{const c=ws(a.path);return ae.waitFor([i.delete([r,c]),this.referenceDelegate.removeReference(e,r,a)])})}removeMatchingKeysForTargetId(e,t){const r=Ph(e),i=IDBKeyRange.bound([t],[t+1],!1,!0);return r.delete(i)}getMatchingKeysForTargetId(e,t){const r=IDBKeyRange.bound([t],[t+1],!1,!0),i=Ph(e);let a=tn();return i.X({range:r,Y:!0},(c,f,_)=>{const w=Dc(c[1]),S=new Xe(w);a=a.add(S)}).next(()=>a)}containsKey(e,t){const r=ws(t.path),i=IDBKeyRange.bound([r],[qF(r)],!1,!0);let a=0;return Ph(e).X({index:"documentTargetsIndex",Y:!0,range:i},([c,f],_,w)=>{0!==c&&(a++,w.done())}).next(()=>a>0)}he(e,t){return m_(e).get(t).next(r=>r?wb(r):null)}}function m_(n){return Mi(n,"targets")}function P2(n){return Mi(n,"targetGlobal")}function Ph(n){return Mi(n,"targetDocuments")}function N2([n,e],[t,r]){const i=Gt(n,t);return 0===i?Gt(e,r):i}class Mz{constructor(e){this.Bn=e,this.buffer=new cr(N2),this.Ln=0}qn(){return++this.Ln}Un(e){const t=[e,this.qn()];if(this.buffer.size<this.Bn)this.buffer=this.buffer.add(t);else{const r=this.buffer.last();N2(t,r)<0&&(this.buffer=this.buffer.delete(r).add(t))}}get maxValue(){return this.buffer.last()[0]}}class F2{constructor(e,t,r){this.garbageCollector=e,this.asyncQueue=t,this.localStore=r,this.Kn=null}start(){-1!==this.garbageCollector.params.cacheSizeCollectionThreshold&&this.Gn(6e4)}stop(){this.Kn&&(this.Kn.cancel(),this.Kn=null)}get started(){return null!==this.Kn}Gn(e){var t=this;Ue("LruGarbageCollector",`Garbage collection scheduled in ${e}ms`),this.Kn=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,(0,ye.Z)(function*(){t.Kn=null;try{yield t.localStore.collectGarbage(t.garbageCollector)}catch(r){Ch(r)?Ue("LruGarbageCollector","Ignoring IndexedDB error during garbage collection: ",r):yield Eh(r)}yield t.Gn(3e5)}))}}class xz{constructor(e,t){this.Qn=e,this.params=t}calculateTargetCount(e,t){return this.Qn.jn(e).next(r=>Math.floor(t/100*r))}nthSequenceNumber(e,t){if(0===t)return ae.resolve(Po.ct);const r=new Mz(t);return this.Qn.forEachTarget(e,i=>r.Un(i.sequenceNumber)).next(()=>this.Qn.zn(e,i=>r.Un(i))).next(()=>r.maxValue)}removeTargets(e,t,r){return this.Qn.removeTargets(e,t,r)}removeOrphanedDocuments(e,t){return this.Qn.removeOrphanedDocuments(e,t)}collect(e,t){return-1===this.params.cacheSizeCollectionThreshold?(Ue("LruGarbageCollector","Garbage collection skipped; disabled"),ae.resolve(x2)):this.getCacheSize(e).next(r=>r<this.params.cacheSizeCollectionThreshold?(Ue("LruGarbageCollector",`Garbage collection skipped; Cache size ${r} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),x2):this.Wn(e,t))}getCacheSize(e){return this.Qn.getCacheSize(e)}Wn(e,t){let r,i,a,c,f,_,w;const S=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(x=>(x>this.params.maximumSequenceNumbersToCollect?(Ue("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${x}`),i=this.params.maximumSequenceNumbersToCollect):i=x,c=Date.now(),this.nthSequenceNumber(e,i))).next(x=>(r=x,f=Date.now(),this.removeTargets(e,r,t))).next(x=>(a=x,_=Date.now(),this.removeOrphanedDocuments(e,r))).next(x=>(w=Date.now(),nx()<=ba.in.DEBUG&&Ue("LruGarbageCollector",`LRU Garbage Collection\n\tCounted targets in ${c-S}ms\n\tDetermined least recently used ${i} in `+(f-c)+`ms\n\tRemoved ${a} targets in `+(_-f)+`ms\n\tRemoved ${x} documents in `+(w-_)+`ms\nTotal Duration: ${w-S}ms`),ae.resolve({didRun:!0,sequenceNumbersCollected:i,targetsRemoved:a,documentsRemoved:x})))}}class Rz{constructor(e,t){this.db=e,this.garbageCollector=function L2(n,e){return new xz(n,e)}(this,t)}jn(e){const t=this.Hn(e);return this.db.getTargetCache().getTargetCount(e).next(r=>t.next(i=>r+i))}Hn(e){let t=0;return this.zn(e,r=>{t++}).next(()=>t)}forEachTarget(e,t){return this.db.getTargetCache().forEachTarget(e,t)}zn(e,t){return this.Jn(e,(r,i)=>t(i))}addReference(e,t,r){return yI(e,r)}removeReference(e,t,r){return yI(e,r)}removeTargets(e,t,r){return this.db.getTargetCache().removeTargets(e,t,r)}markPotentiallyOrphaned(e,t){return yI(e,t)}Yn(e,t){return function(r,i){let a=!1;return O2(r).Z(c=>k2(r,c,i).next(f=>(f&&(a=!0),ae.resolve(!f)))).next(()=>a)}(e,t)}removeOrphanedDocuments(e,t){const r=this.db.getRemoteDocumentCache().newChangeBuffer(),i=[];let a=0;return this.Jn(e,(c,f)=>{if(f<=t){const _=this.Yn(e,c).next(w=>{if(!w)return a++,r.getEntry(e,c).next(()=>(r.removeEntry(c,At.min()),Ph(e).delete([0,ws(c.path)])))});i.push(_)}}).next(()=>ae.waitFor(i)).next(()=>r.apply(e)).next(()=>a)}removeTarget(e,t){const r=t.withSequenceNumber(e.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(e,r)}updateLimboDocument(e,t){return yI(e,t)}Jn(e,t){const r=Ph(e);let i,a=Po.ct;return r.X({index:"documentTargetsIndex"},([c,f],{path:_,sequenceNumber:w})=>{0===c?(a!==Po.ct&&t(new Xe(Dc(i)),a),a=w,i=_):a=Po.ct}).next(()=>{a!==Po.ct&&t(new Xe(Dc(i)),a)})}getCacheSize(e){return this.db.getRemoteDocumentCache().getSize(e)}}function yI(n,e){return Ph(n).put((r=n.currentSequenceNumber,{targetId:0,path:ws(e.path),sequenceNumber:r}));var r}class V2{constructor(){this.changes=new Wu(e=>e.toString(),(e,t)=>e.isEqual(t)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,ur.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();const r=this.changes.get(t);return void 0!==r?ae.resolve(r):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}class kz{constructor(e){this.serializer=e}setIndexManager(e){this.indexManager=e}addEntry(e,t,r){return sg(e).put(r)}removeEntry(e,t,r){return sg(e).delete(function(i,a){const c=i.path.toArray();return[c.slice(0,c.length-2),c[c.length-2],dI(a),c[c.length-1]]}(t,r))}updateMetadata(e,t){return this.getMetadata(e).next(r=>(r.byteSize+=t,this.Xn(e,r)))}getEntry(e,t){let r=ur.newInvalidDocument(t);return sg(e).X({index:"documentKeyIndex",range:IDBKeyRange.only(Sb(t))},(i,a)=>{r=this.Zn(t,a)}).next(()=>r)}ts(e,t){let r={size:0,document:ur.newInvalidDocument(t)};return sg(e).X({index:"documentKeyIndex",range:IDBKeyRange.only(Sb(t))},(i,a)=>{r={document:this.Zn(t,a),size:mI(a)}}).next(()=>r)}getEntries(e,t){let r=ho();return this.es(e,t,(i,a)=>{const c=this.Zn(i,a);r=r.insert(i,c)}).next(()=>r)}ns(e,t){let r=ho(),i=new er(Xe.comparator);return this.es(e,t,(a,c)=>{const f=this.Zn(a,c);r=r.insert(a,f),i=i.insert(a,mI(c))}).next(()=>({documents:r,ss:i}))}es(e,t,r){if(t.isEmpty())return ae.resolve();let i=new cr(j2);t.forEach(_=>i=i.add(_));const a=IDBKeyRange.bound(Sb(i.first()),Sb(i.last())),c=i.getIterator();let f=c.getNext();return sg(e).X({index:"documentKeyIndex",range:a},(_,w,S)=>{const x=Xe.fromSegments([...w.prefixPath,w.collectionGroup,w.documentId]);for(;f&&j2(f,x)<0;)r(f,null),f=c.getNext();f&&f.isEqual(x)&&(r(f,w),f=c.hasNext()?c.getNext():null),f?S.G(Sb(f)):S.done()}).next(()=>{for(;f;)r(f,null),f=c.hasNext()?c.getNext():null})}getDocumentsMatchingQuery(e,t,r,i){const a=t.path,c=[a.popLast().toArray(),a.lastSegment(),dI(r.readTime),r.documentKey.path.isEmpty()?"":r.documentKey.path.lastSegment()],f=[a.popLast().toArray(),a.lastSegment(),[Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER],""];return sg(e).j(IDBKeyRange.bound(c,f,!0)).next(_=>{let w=ho();for(const S of _){const x=this.Zn(Xe.fromSegments(S.prefixPath.concat(S.collectionGroup,S.documentId)),S);x.isFoundDocument()&&(ub(t,x)||i.has(x.key))&&(w=w.insert(x.key,x))}return w})}getAllFromCollectionGroup(e,t,r,i){let a=ho();const c=H2(t,r),f=H2(t,Oo.max());return sg(e).X({index:"collectionGroupIndex",range:IDBKeyRange.bound(c,f,!0)},(_,w,S)=>{const x=this.Zn(Xe.fromSegments(w.prefixPath.concat(w.collectionGroup,w.documentId)),w);a=a.insert(x.key,x),a.size===i&&S.done()}).next(()=>a)}newChangeBuffer(e){return new Oz(this,!!e&&e.trackRemovals)}getSize(e){return this.getMetadata(e).next(t=>t.byteSize)}getMetadata(e){return U2(e).get("remoteDocumentGlobalKey").next(t=>(It(!!t),t))}Xn(e,t){return U2(e).put("remoteDocumentGlobalKey",t)}Zn(e,t){if(t){const r=function yz(n,e){let t;if(e.document)t=u2(n.le,e.document,!!e.hasCommittedMutations);else if(e.noDocument){const r=Xe.fromSegments(e.noDocument.path),i=eg(e.noDocument.readTime);t=ur.newNoDocument(r,i),e.hasCommittedMutations&&t.setHasCommittedMutations()}else{if(!e.unknownDocument)return ct();{const r=Xe.fromSegments(e.unknownDocument.path),i=eg(e.unknownDocument.version);t=ur.newUnknownDocument(r,i)}}return e.readTime&&t.setReadTime(function(r){const i=new _r(r[0],r[1]);return At.fromTimestamp(i)}(e.readTime)),t}(this.serializer,t);if(!r.isNoDocument()||!r.version.isEqual(At.min()))return r}return ur.newInvalidDocument(e)}}function B2(n){return new kz(n)}class Oz extends V2{constructor(e,t){super(),this.rs=e,this.trackRemovals=t,this.os=new Wu(r=>r.toString(),(r,i)=>r.isEqual(i))}applyChanges(e){const t=[];let r=0,i=new cr((a,c)=>Gt(a.canonicalString(),c.canonicalString()));return this.changes.forEach((a,c)=>{const f=this.os.get(a);if(t.push(this.rs.removeEntry(e,a,f.readTime)),c.isValidDocument()){const _=_2(this.rs.serializer,c);i=i.add(a.path.popLast()),r+=mI(_)-f.size,t.push(this.rs.addEntry(e,a,_))}else if(r-=f.size,this.trackRemovals){const _=_2(this.rs.serializer,c.convertToNoDocument(At.min()));t.push(this.rs.addEntry(e,a,_))}}),i.forEach(a=>{t.push(this.rs.indexManager.addToCollectionParentIndex(e,a))}),t.push(this.rs.updateMetadata(e,r)),ae.waitFor(t)}getFromCache(e,t){return this.rs.ts(e,t).next(r=>(this.os.set(t,{size:r.size,readTime:r.document.readTime}),r.document))}getAllFromCache(e,t){return this.rs.ns(e,t).next(({documents:r,ss:i})=>(i.forEach((a,c)=>{this.os.set(a,{size:c,readTime:r.get(a).readTime})}),r))}}function U2(n){return Mi(n,"remoteDocumentGlobal")}function sg(n){return Mi(n,"remoteDocumentsV14")}function Sb(n){const e=n.path.toArray();return[e.slice(0,e.length-2),e[e.length-2],e[e.length-1]]}function H2(n,e){const t=e.documentKey.path.toArray();return[n,dI(e.readTime),t.slice(0,t.length-2),t.length>0?t[t.length-1]:""]}function j2(n,e){const t=n.path.toArray(),r=e.path.toArray();let i=0;for(let a=0;a<t.length-2&&a<r.length-2;++a)if(i=Gt(t[a],r[a]),i)return i;return i=Gt(t.length,r.length),i||(i=Gt(t[t.length-2],r[r.length-2]),i||Gt(t[t.length-1],r[r.length-1]))}class Pz{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}}class $2{constructor(e,t,r,i){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=r,this.indexManager=i}getDocument(e,t){let r=null;return this.documentOverlayCache.getOverlay(e,t).next(i=>(r=i,this.remoteDocumentCache.getEntry(e,t))).next(i=>(null!==r&&pb(r.mutation,i,uo.empty(),_r.now()),i))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next(r=>this.getLocalViewOfDocuments(e,r,tn()).next(()=>r))}getLocalViewOfDocuments(e,t,r=tn()){const i=Tc();return this.populateOverlays(e,i,t).next(()=>this.computeViews(e,t,i,r).next(a=>{let c=db();return a.forEach((f,_)=>{c=c.insert(f,_.overlayedDocument)}),c}))}getOverlayedDocuments(e,t){const r=Tc();return this.populateOverlays(e,r,t).next(()=>this.computeViews(e,t,r,tn()))}populateOverlays(e,t,r){const i=[];return r.forEach(a=>{t.has(a)||i.push(a)}),this.documentOverlayCache.getOverlays(e,i).next(a=>{a.forEach((c,f)=>{t.set(c,f)})})}computeViews(e,t,r,i){let a=ho();const c=hb(),f=hb();return t.forEach((_,w)=>{const S=r.get(w.key);i.has(w.key)&&(void 0===S||S.mutation instanceof Ku)?a=a.insert(w.key,w):void 0!==S?(c.set(w.key,S.mutation.getFieldMask()),pb(S.mutation,w,S.mutation.getFieldMask(),_r.now())):c.set(w.key,uo.empty())}),this.recalculateAndSaveOverlays(e,a).next(_=>(_.forEach((w,S)=>c.set(w,S)),t.forEach((w,S)=>{var x;return f.set(w,new Pz(S,null!==(x=c.get(w))&&void 0!==x?x:null))}),f))}recalculateAndSaveOverlays(e,t){const r=hb();let i=new er((c,f)=>c-f),a=tn();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next(c=>{for(const f of c)f.keys().forEach(_=>{const w=t.get(_);if(null===w)return;let S=r.get(_)||uo.empty();S=f.applyToLocalView(w,S),r.set(_,S);const x=(i.get(f.batchId)||tn()).add(_);i=i.insert(f.batchId,x)})}).next(()=>{const c=[],f=i.getReverseIterator();for(;f.hasNext();){const _=f.getNext(),w=_.key,S=_.value,x=PL();S.forEach(L=>{if(!a.has(L)){const U=$L(t.get(L),r.get(L));null!==U&&x.set(L,U),a=a.add(L)}}),c.push(this.documentOverlayCache.saveOverlays(e,w,x))}return ae.waitFor(c)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next(r=>this.recalculateAndSaveOverlays(e,r))}getDocumentsMatchingQuery(e,t,r){return Xe.isDocumentKey((i=t).path)&&null===i.collectionGroup&&0===i.filters.length?this.getDocumentsMatchingDocumentQuery(e,t.path):mx(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,r):this.getDocumentsMatchingCollectionQuery(e,t,r);var i}getNextDocuments(e,t,r,i){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,r,i).next(a=>{const c=i-a.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,r.largestBatchId,i-a.size):ae.resolve(Tc());let f=-1,_=a;return c.next(w=>ae.forEach(w,(S,x)=>(f<x.largestBatchId&&(f=x.largestBatchId),a.get(S)?ae.resolve():this.remoteDocumentCache.getEntry(e,S).next(L=>{_=_.insert(S,L)}))).next(()=>this.populateOverlays(e,w,a)).next(()=>this.computeViews(e,_,w,tn())).next(S=>({batchId:f,changes:OL(S)})))})}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new Xe(t)).next(r=>{let i=db();return r.isFoundDocument()&&(i=i.insert(r.key,r)),i})}getDocumentsMatchingCollectionGroupQuery(e,t,r){const i=t.collectionGroup;let a=db();return this.indexManager.getCollectionParents(e,i).next(c=>ae.forEach(c,f=>{const _=(w=t,S=f.child(i),new qu(S,null,w.explicitOrderBy.slice(),w.filters.slice(),w.limit,w.limitType,w.startAt,w.endAt));var w,S;return this.getDocumentsMatchingCollectionQuery(e,_,r).next(w=>{w.forEach((S,x)=>{a=a.insert(S,x)})})}).next(()=>a))}getDocumentsMatchingCollectionQuery(e,t,r){let i;return this.documentOverlayCache.getOverlaysForCollection(e,t.path,r.largestBatchId).next(a=>(i=a,this.remoteDocumentCache.getDocumentsMatchingQuery(e,t,r,i))).next(a=>{i.forEach((f,_)=>{const w=_.getKey();null===a.get(w)&&(a=a.insert(w,ur.newInvalidDocument(w)))});let c=db();return a.forEach((f,_)=>{const w=i.get(f);void 0!==w&&pb(w.mutation,_,uo.empty(),_r.now()),ub(t,_)&&(c=c.insert(f,_))}),c})}}class Nz{constructor(e){this.serializer=e,this.us=new Map,this.cs=new Map}getBundleMetadata(e,t){return ae.resolve(this.us.get(t))}saveBundleMetadata(e,t){var r;return this.us.set(t.id,{id:(r=t).id,version:r.version,createTime:Gr(r.createTime)}),ae.resolve()}getNamedQuery(e,t){return ae.resolve(this.cs.get(t))}saveNamedQuery(e,t){return this.cs.set(t.name,{name:(r=t).name,query:Rx(r.bundledQuery),readTime:Gr(r.readTime)}),ae.resolve();var r}}class Fz{constructor(){this.overlays=new er(Xe.comparator),this.hs=new Map}getOverlay(e,t){return ae.resolve(this.overlays.get(t))}getOverlays(e,t){const r=Tc();return ae.forEach(t,i=>this.getOverlay(e,i).next(a=>{null!==a&&r.set(i,a)})).next(()=>r)}saveOverlays(e,t,r){return r.forEach((i,a)=>{this.de(e,t,a)}),ae.resolve()}removeOverlaysForBatchId(e,t,r){const i=this.hs.get(r);return void 0!==i&&(i.forEach(a=>this.overlays=this.overlays.remove(a)),this.hs.delete(r)),ae.resolve()}getOverlaysForCollection(e,t,r){const i=Tc(),a=t.length+1,c=new Xe(t.child("")),f=this.overlays.getIteratorFrom(c);for(;f.hasNext();){const _=f.getNext().value,w=_.getKey();if(!t.isPrefixOf(w.path))break;w.path.length===a&&_.largestBatchId>r&&i.set(_.getKey(),_)}return ae.resolve(i)}getOverlaysForCollectionGroup(e,t,r,i){let a=new er((w,S)=>w-S);const c=this.overlays.getIterator();for(;c.hasNext();){const w=c.getNext().value;if(w.getKey().getCollectionGroup()===t&&w.largestBatchId>r){let S=a.get(w.largestBatchId);null===S&&(S=Tc(),a=a.insert(w.largestBatchId,S)),S.set(w.getKey(),w)}}const f=Tc(),_=a.getIterator();for(;_.hasNext()&&(_.getNext().value.forEach((w,S)=>f.set(w,S)),!(f.size()>=i)););return ae.resolve(f)}de(e,t,r){const i=this.overlays.get(r.key);if(null!==i){const c=this.hs.get(i.largestBatchId).delete(r.key);this.hs.set(i.largestBatchId,c)}this.overlays=this.overlays.insert(r.key,new Cx(t,r));let a=this.hs.get(t);void 0===a&&(a=tn(),this.hs.set(t,a)),this.hs.set(t,a.add(r.key))}}class Vx{constructor(){this.ls=new cr(xi.fs),this.ds=new cr(xi._s)}isEmpty(){return this.ls.isEmpty()}addReference(e,t){const r=new xi(e,t);this.ls=this.ls.add(r),this.ds=this.ds.add(r)}ws(e,t){e.forEach(r=>this.addReference(r,t))}removeReference(e,t){this.gs(new xi(e,t))}ys(e,t){e.forEach(r=>this.removeReference(r,t))}ps(e){const t=new Xe(new _n([])),r=new xi(t,e),i=new xi(t,e+1),a=[];return this.ds.forEachInRange([r,i],c=>{this.gs(c),a.push(c.key)}),a}Is(){this.ls.forEach(e=>this.gs(e))}gs(e){this.ls=this.ls.delete(e),this.ds=this.ds.delete(e)}Ts(e){const t=new Xe(new _n([])),r=new xi(t,e),i=new xi(t,e+1);let a=tn();return this.ds.forEachInRange([r,i],c=>{a=a.add(c.key)}),a}containsKey(e){const t=new xi(e,0),r=this.ls.firstAfterOrEqual(t);return null!==r&&e.isEqual(r.key)}}class xi{constructor(e,t){this.key=e,this.Es=t}static fs(e,t){return Xe.comparator(e.key,t.key)||Gt(e.Es,t.Es)}static _s(e,t){return Gt(e.Es,t.Es)||Xe.comparator(e.key,t.key)}}class Lz{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.As=1,this.Rs=new cr(xi.fs)}checkEmpty(e){return ae.resolve(0===this.mutationQueue.length)}addMutationBatch(e,t,r,i){const a=this.As;this.As++;const c=new wx(a,t,r,i);this.mutationQueue.push(c);for(const f of i)this.Rs=this.Rs.add(new xi(f.key,a)),this.indexManager.addToCollectionParentIndex(e,f.key.path.popLast());return ae.resolve(c)}lookupMutationBatch(e,t){return ae.resolve(this.vs(t))}getNextMutationBatchAfterBatchId(e,t){const i=this.Ps(t+1),a=i<0?0:i;return ae.resolve(this.mutationQueue.length>a?this.mutationQueue[a]:null)}getHighestUnacknowledgedBatchId(){return ae.resolve(0===this.mutationQueue.length?-1:this.As-1)}getAllMutationBatches(e){return ae.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){const r=new xi(t,0),i=new xi(t,Number.POSITIVE_INFINITY),a=[];return this.Rs.forEachInRange([r,i],c=>{const f=this.vs(c.Es);a.push(f)}),ae.resolve(a)}getAllMutationBatchesAffectingDocumentKeys(e,t){let r=new cr(Gt);return t.forEach(i=>{const a=new xi(i,0),c=new xi(i,Number.POSITIVE_INFINITY);this.Rs.forEachInRange([a,c],f=>{r=r.add(f.Es)})}),ae.resolve(this.bs(r))}getAllMutationBatchesAffectingQuery(e,t){const r=t.path,i=r.length+1;let a=r;Xe.isDocumentKey(a)||(a=a.child(""));const c=new xi(new Xe(a),0);let f=new cr(Gt);return this.Rs.forEachWhile(_=>{const w=_.key.path;return!!r.isPrefixOf(w)&&(w.length===i&&(f=f.add(_.Es)),!0)},c),ae.resolve(this.bs(f))}bs(e){const t=[];return e.forEach(r=>{const i=this.vs(r);null!==i&&t.push(i)}),t}removeMutationBatch(e,t){It(0===this.Vs(t.batchId,"removed")),this.mutationQueue.shift();let r=this.Rs;return ae.forEach(t.mutations,i=>{const a=new xi(i.key,t.batchId);return r=r.delete(a),this.referenceDelegate.markPotentiallyOrphaned(e,i.key)}).next(()=>{this.Rs=r})}Dn(e){}containsKey(e,t){const r=new xi(t,0),i=this.Rs.firstAfterOrEqual(r);return ae.resolve(t.isEqual(i&&i.key))}performConsistencyCheck(e){return ae.resolve()}Vs(e,t){return this.Ps(e)}Ps(e){return 0===this.mutationQueue.length?0:e-this.mutationQueue[0].batchId}vs(e){const t=this.Ps(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}}class Vz{constructor(e){this.Ss=e,this.docs=new er(Xe.comparator),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){const r=t.key,i=this.docs.get(r),a=i?i.size:0,c=this.Ss(t);return this.docs=this.docs.insert(r,{document:t.mutableCopy(),size:c}),this.size+=c-a,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){const t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){const r=this.docs.get(t);return ae.resolve(r?r.document.mutableCopy():ur.newInvalidDocument(t))}getEntries(e,t){let r=ho();return t.forEach(i=>{const a=this.docs.get(i);r=r.insert(i,a?a.document.mutableCopy():ur.newInvalidDocument(i))}),ae.resolve(r)}getDocumentsMatchingQuery(e,t,r,i){let a=ho();const c=t.path,f=new Xe(c.child("")),_=this.docs.getIteratorFrom(f);for(;_.hasNext();){const{key:w,value:{document:S}}=_.getNext();if(!c.isPrefixOf(w.path))break;w.path.length>c.length+1||sx(KF(S),r)<=0||(i.has(S.key)||ub(t,S))&&(a=a.insert(S.key,S.mutableCopy()))}return ae.resolve(a)}getAllFromCollectionGroup(e,t,r,i){ct()}Ds(e,t){return ae.forEach(this.docs,r=>t(r))}newChangeBuffer(e){return new Bz(this)}getSize(e){return ae.resolve(this.size)}}class Bz extends V2{constructor(e){super(),this.rs=e}applyChanges(e){const t=[];return this.changes.forEach((r,i)=>{i.isValidDocument()?t.push(this.rs.addEntry(e,i)):this.rs.removeEntry(r)}),ae.waitFor(t)}getFromCache(e,t){return this.rs.getEntry(e,t)}getAllFromCache(e,t){return this.rs.getEntries(e,t)}}class Uz{constructor(e){this.persistence=e,this.Cs=new Wu(t=>Zp(t),lb),this.lastRemoteSnapshotVersion=At.min(),this.highestTargetId=0,this.xs=0,this.Ns=new Vx,this.targetCount=0,this.ks=ig.Nn()}forEachTarget(e,t){return this.Cs.forEach((r,i)=>t(i)),ae.resolve()}getLastRemoteSnapshotVersion(e){return ae.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return ae.resolve(this.xs)}allocateTargetId(e){return this.highestTargetId=this.ks.next(),ae.resolve(this.highestTargetId)}setTargetsMetadata(e,t,r){return r&&(this.lastRemoteSnapshotVersion=r),t>this.xs&&(this.xs=t),ae.resolve()}$n(e){this.Cs.set(e.target,e);const t=e.targetId;t>this.highestTargetId&&(this.ks=new ig(t),this.highestTargetId=t),e.sequenceNumber>this.xs&&(this.xs=e.sequenceNumber)}addTargetData(e,t){return this.$n(t),this.targetCount+=1,ae.resolve()}updateTargetData(e,t){return this.$n(t),ae.resolve()}removeTargetData(e,t){return this.Cs.delete(t.target),this.Ns.ps(t.targetId),this.targetCount-=1,ae.resolve()}removeTargets(e,t,r){let i=0;const a=[];return this.Cs.forEach((c,f)=>{f.sequenceNumber<=t&&null===r.get(f.targetId)&&(this.Cs.delete(c),a.push(this.removeMatchingKeysForTargetId(e,f.targetId)),i++)}),ae.waitFor(a).next(()=>i)}getTargetCount(e){return ae.resolve(this.targetCount)}getTargetData(e,t){const r=this.Cs.get(t)||null;return ae.resolve(r)}addMatchingKeys(e,t,r){return this.Ns.ws(t,r),ae.resolve()}removeMatchingKeys(e,t,r){this.Ns.ys(t,r);const i=this.persistence.referenceDelegate,a=[];return i&&t.forEach(c=>{a.push(i.markPotentiallyOrphaned(e,c))}),ae.waitFor(a)}removeMatchingKeysForTargetId(e,t){return this.Ns.ps(t),ae.resolve()}getMatchingKeysForTargetId(e,t){const r=this.Ns.Ts(t);return ae.resolve(r)}containsKey(e,t){return ae.resolve(this.Ns.containsKey(t))}}class Bx{constructor(e,t){this.Ms={},this.overlays={},this.Os=new Po(0),this.$s=!1,this.$s=!0,this.referenceDelegate=e(this),this.Fs=new Uz(this),this.indexManager=new Sz,this.remoteDocumentCache=new Vz(r=>this.referenceDelegate.Bs(r)),this.serializer=new m2(t),this.Ls=new Nz(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.$s=!1,Promise.resolve()}get started(){return this.$s}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new Fz,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let r=this.Ms[e.toKey()];return r||(r=new Lz(t,this.referenceDelegate),this.Ms[e.toKey()]=r),r}getTargetCache(){return this.Fs}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ls}runTransaction(e,t,r){Ue("MemoryPersistence","Starting transaction:",e);const i=new Hz(this.Os.next());return this.referenceDelegate.qs(),r(i).next(a=>this.referenceDelegate.Us(i).next(()=>a)).toPromise().then(a=>(i.raiseOnCommittedEvent(),a))}Ks(e,t){return ae.or(Object.values(this.Ms).map(r=>()=>r.containsKey(e,t)))}}class Hz extends YF{constructor(e){super(),this.currentSequenceNumber=e}}class vI{constructor(e){this.persistence=e,this.Gs=new Vx,this.Qs=null}static js(e){return new vI(e)}get zs(){if(this.Qs)return this.Qs;throw ct()}addReference(e,t,r){return this.Gs.addReference(r,t),this.zs.delete(r.toString()),ae.resolve()}removeReference(e,t,r){return this.Gs.removeReference(r,t),this.zs.add(r.toString()),ae.resolve()}markPotentiallyOrphaned(e,t){return this.zs.add(t.toString()),ae.resolve()}removeTarget(e,t){this.Gs.ps(t.targetId).forEach(i=>this.zs.add(i.toString()));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,t.targetId).next(i=>{i.forEach(a=>this.zs.add(a.toString()))}).next(()=>r.removeTargetData(e,t))}qs(){this.Qs=new Set}Us(e){const t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return ae.forEach(this.zs,r=>{const i=Xe.fromPath(r);return this.Ws(e,i).next(a=>{a||t.removeEntry(i,At.min())})}).next(()=>(this.Qs=null,t.apply(e)))}updateLimboDocument(e,t){return this.Ws(e,t).next(r=>{r?this.zs.delete(t.toString()):this.zs.add(t.toString())})}Bs(e){return 0}Ws(e,t){return ae.or([()=>ae.resolve(this.Gs.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Ks(e,t)])}}class jz{constructor(e){this.serializer=e}$(e,t,r,i){const a=new KC("createOrUpgrade",t);var f;r<1&&i>=1&&(e.createObjectStore("owner"),(f=e).createObjectStore("mutationQueues",{keyPath:"userId"}),f.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",eL,{unique:!0}),f.createObjectStore("documentMutations"),z2(e),function(f){f.createObjectStore("remoteDocuments")}(e));let c=ae.resolve();return r<3&&i>=3&&(0!==r&&(function(f){f.deleteObjectStore("targetDocuments"),f.deleteObjectStore("targets"),f.deleteObjectStore("targetGlobal")}(e),z2(e)),c=c.next(()=>function(f){const _=f.store("targetGlobal"),w={highestTargetId:0,highestListenSequenceNumber:0,lastRemoteSnapshotVersion:At.min().toTimestamp(),targetCount:0};return _.put("targetGlobalKey",w)}(a))),r<4&&i>=4&&(0!==r&&(c=c.next(()=>function(f,_){return _.store("mutations").j().next(w=>{f.deleteObjectStore("mutations"),f.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",eL,{unique:!0});const S=_.store("mutations"),x=w.map(L=>S.put(L));return ae.waitFor(x)})}(e,a))),c=c.next(()=>{!function(f){f.createObjectStore("clientMetadata",{keyPath:"clientId"})}(e)})),r<5&&i>=5&&(c=c.next(()=>this.Js(a))),r<6&&i>=6&&(c=c.next(()=>(function(f){f.createObjectStore("remoteDocumentGlobal")}(e),this.Ys(a)))),r<7&&i>=7&&(c=c.next(()=>this.Xs(a))),r<8&&i>=8&&(c=c.next(()=>this.Zs(e,a))),r<9&&i>=9&&(c=c.next(()=>{!function(f){f.objectStoreNames.contains("remoteDocumentChanges")&&f.deleteObjectStore("remoteDocumentChanges")}(e)})),r<10&&i>=10&&(c=c.next(()=>this.ti(a))),r<11&&i>=11&&(c=c.next(()=>{(function(f){f.createObjectStore("bundles",{keyPath:"bundleId"})})(e),function(f){f.createObjectStore("namedQueries",{keyPath:"name"})}(e)})),r<12&&i>=12&&(c=c.next(()=>{!function(f){const _=f.createObjectStore("documentOverlays",{keyPath:S$});_.createIndex("collectionPathOverlayIndex",T$,{unique:!1}),_.createIndex("collectionGroupOverlayIndex",A$,{unique:!1})}(e)})),r<13&&i>=13&&(c=c.next(()=>function(f){const _=f.createObjectStore("remoteDocumentsV14",{keyPath:g$});_.createIndex("documentKeyIndex",m$),_.createIndex("collectionGroupIndex",_$)}(e)).next(()=>this.ei(e,a)).next(()=>e.deleteObjectStore("remoteDocuments"))),r<14&&i>=14&&(c=c.next(()=>this.ni(e,a))),r<15&&i>=15&&(c=c.next(()=>function(f){f.createObjectStore("indexConfiguration",{keyPath:"indexId",autoIncrement:!0}).createIndex("collectionGroupIndex","collectionGroup",{unique:!1}),f.createObjectStore("indexState",{keyPath:E$}).createIndex("sequenceNumberIndex",C$,{unique:!1}),f.createObjectStore("indexEntries",{keyPath:I$}).createIndex("documentKeyIndex",D$,{unique:!1})}(e))),c}Ys(e){let t=0;return e.store("remoteDocuments").X((r,i)=>{t+=mI(i)}).next(()=>{const r={byteSize:t};return e.store("remoteDocumentGlobal").put("remoteDocumentGlobalKey",r)})}Js(e){const t=e.store("mutationQueues"),r=e.store("mutations");return t.j().next(i=>ae.forEach(i,a=>{const c=IDBKeyRange.bound([a.userId,-1],[a.userId,a.lastAcknowledgedBatchId]);return r.j("userMutationsIndex",c).next(f=>ae.forEach(f,_=>{It(_.userId===a.userId);const w=tg(this.serializer,_);return R2(e,a.userId,w).next(()=>{})}))}))}Xs(e){const t=e.store("targetDocuments"),r=e.store("remoteDocuments");return e.store("targetGlobal").get("targetGlobalKey").next(i=>{const a=[];return r.X((c,f)=>{const _=new _n(c),w=[0,ws(_)];a.push(t.get(w).next(S=>S?ae.resolve():t.put({targetId:0,path:ws(_),sequenceNumber:i.highestListenSequenceNumber})))}).next(()=>ae.waitFor(a))})}Zs(e,t){e.createObjectStore("collectionParents",{keyPath:w$});const r=t.store("collectionParents"),i=new Lx,a=c=>{if(i.add(c)){const f=c.lastSegment(),_=c.popLast();return r.put({collectionId:f,parent:ws(_)})}};return t.store("remoteDocuments").X({Y:!0},(c,f)=>{const _=new _n(c);return a(_.popLast())}).next(()=>t.store("documentMutations").X({Y:!0},([c,f,_],w)=>{const S=Dc(f);return a(S.popLast())}))}ti(e){const t=e.store("targets");return t.X((r,i)=>{const a=wb(i),c=y2(this.serializer,a);return t.put(c)})}ei(e,t){const r=t.store("remoteDocuments"),i=[];return r.X((a,c)=>{const f=t.store("remoteDocumentsV14"),_=(w=c,w.document?new Xe(_n.fromString(w.document.name).popFirst(5)):w.noDocument?Xe.fromSegments(w.noDocument.path):w.unknownDocument?Xe.fromSegments(w.unknownDocument.path):ct()).path.toArray();var w;const S={prefixPath:_.slice(0,_.length-2),collectionGroup:_[_.length-2],documentId:_[_.length-1],readTime:c.readTime||[0,0],unknownDocument:c.unknownDocument,noDocument:c.noDocument,document:c.document,hasCommittedMutations:!!c.hasCommittedMutations};i.push(f.put(S))}).next(()=>ae.waitFor(i))}ni(e,t){const r=t.store("mutations"),i=B2(this.serializer),a=new Bx(vI.js,this.serializer.le);return r.j().next(c=>{const f=new Map;return c.forEach(_=>{var w;let S=null!==(w=f.get(_.userId))&&void 0!==w?w:tn();tg(this.serializer,_).keys().forEach(x=>S=S.add(x)),f.set(_.userId,S)}),ae.forEach(f,(_,w)=>{const S=new Ai(w),x=hI.fe(this.serializer,S),L=a.getIndexManager(S),U=_I.fe(S,this.serializer,L,a.referenceDelegate);return new $2(i,U,x,L).recalculateAndSaveOverlaysForDocumentKeys(new lx(t,Po.ct),_).next()})})}}function z2(n){n.createObjectStore("targetDocuments",{keyPath:v$}).createIndex("documentTargetsIndex",b$,{unique:!0}),n.createObjectStore("targets",{keyPath:"targetId"}).createIndex("queryTargetsIndex",y$,{unique:!0}),n.createObjectStore("targetGlobal")}const Ux="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.";class Hx{constructor(e,t,r,i,a,c,f,_,w,S,x=15){if(this.allowTabSynchronization=e,this.persistenceKey=t,this.clientId=r,this.si=a,this.window=c,this.document=f,this.ii=w,this.ri=S,this.oi=x,this.Os=null,this.$s=!1,this.isPrimary=!1,this.networkEnabled=!0,this.ui=null,this.inForeground=!1,this.ci=null,this.ai=null,this.hi=Number.NEGATIVE_INFINITY,this.li=L=>Promise.resolve(),!Hx.D())throw new Pe(he.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.referenceDelegate=new Rz(this,i),this.fi=t+"main",this.serializer=new m2(_),this.di=new fl(this.fi,this.oi,new jz(this.serializer)),this.Fs=new Az(this.referenceDelegate,this.serializer),this.remoteDocumentCache=B2(this.serializer),this.Ls=new vz,this.window&&this.window.localStorage?this._i=this.window.localStorage:(this._i=null,!1===S&&zr("IndexedDbPersistence","LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}start(){return this.wi().then(()=>{if(!this.isPrimary&&!this.allowTabSynchronization)throw new Pe(he.FAILED_PRECONDITION,Ux);return this.mi(),this.gi(),this.yi(),this.runTransaction("getHighestListenSequenceNumber","readonly",e=>this.Fs.getHighestSequenceNumber(e))}).then(e=>{this.Os=new Po(e,this.ii)}).then(()=>{this.$s=!0}).catch(e=>(this.di&&this.di.close(),Promise.reject(e)))}pi(e){var t=this;return this.li=function(){var r=(0,ye.Z)(function*(i){if(t.started)return e(i)});return function(i){return r.apply(this,arguments)}}(),e(this.isPrimary)}setDatabaseDeletedListener(e){this.di.B(function(){var t=(0,ye.Z)(function*(r){null===r.newVersion&&(yield e())});return function(r){return t.apply(this,arguments)}}())}setNetworkEnabled(e){var t=this;this.networkEnabled!==e&&(this.networkEnabled=e,this.si.enqueueAndForget((0,ye.Z)(function*(){t.started&&(yield t.wi())})))}wi(){return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",e=>wI(e).put({clientId:this.clientId,updateTimeMs:Date.now(),networkEnabled:this.networkEnabled,inForeground:this.inForeground}).next(()=>{if(this.isPrimary)return this.Ii(e).next(t=>{t||(this.isPrimary=!1,this.si.enqueueRetryable(()=>this.li(!1)))})}).next(()=>this.Ti(e)).next(t=>this.isPrimary&&!t?this.Ei(e).next(()=>!1):!!t&&this.Ai(e).next(()=>!0))).catch(e=>{if(Ch(e))return Ue("IndexedDbPersistence","Failed to extend owner lease: ",e),this.isPrimary;if(!this.allowTabSynchronization)throw e;return Ue("IndexedDbPersistence","Releasing owner lease after error during lease refresh",e),!1}).then(e=>{this.isPrimary!==e&&this.si.enqueueRetryable(()=>this.li(e)),this.isPrimary=e})}Ii(e){return Tb(e).get("owner").next(t=>ae.resolve(this.Ri(t)))}vi(e){return wI(e).delete(this.clientId)}Pi(){var e=this;return(0,ye.Z)(function*(){if(e.isPrimary&&!e.bi(e.hi,18e5)){e.hi=Date.now();const t=yield e.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",r=>{const i=Mi(r,"clientMetadata");return i.j().next(a=>{const c=e.Vi(a,18e5),f=a.filter(_=>-1===c.indexOf(_));return ae.forEach(f,_=>i.delete(_.clientId)).next(()=>f)})}).catch(()=>[]);if(e._i)for(const r of t)e._i.removeItem(e.Si(r.clientId))}})()}yi(){this.ai=this.si.enqueueAfterDelay("client_metadata_refresh",4e3,()=>this.wi().then(()=>this.Pi()).then(()=>this.yi()))}Ri(e){return!!e&&e.ownerId===this.clientId}Ti(e){return this.ri?ae.resolve(!0):Tb(e).get("owner").next(t=>{if(null!==t&&this.bi(t.leaseTimestampMs,5e3)&&!this.Di(t.ownerId)){if(this.Ri(t)&&this.networkEnabled)return!0;if(!this.Ri(t)){if(!t.allowTabSynchronization)throw new Pe(he.FAILED_PRECONDITION,Ux);return!1}}return!(!this.networkEnabled||!this.inForeground)||wI(e).j().next(r=>void 0===this.Vi(r,5e3).find(i=>{if(this.clientId!==i.clientId){const c=!this.inForeground&&i.inForeground,f=this.networkEnabled===i.networkEnabled;if(!this.networkEnabled&&i.networkEnabled||c&&f)return!0}return!1}))}).next(t=>(this.isPrimary!==t&&Ue("IndexedDbPersistence",`Client ${t?"is":"is not"} eligible for a primary lease.`),t))}shutdown(){var e=this;return(0,ye.Z)(function*(){e.$s=!1,e.Ci(),e.ai&&(e.ai.cancel(),e.ai=null),e.xi(),e.Ni(),yield e.di.runTransaction("shutdown","readwrite",["owner","clientMetadata"],t=>{const r=new lx(t,Po.ct);return e.Ei(r).next(()=>e.vi(r))}),e.di.close(),e.ki()})()}Vi(e,t){return e.filter(r=>this.bi(r.updateTimeMs,t)&&!this.Di(r.clientId))}Mi(){return this.runTransaction("getActiveClients","readonly",e=>wI(e).j().next(t=>this.Vi(t,18e5).map(r=>r.clientId)))}get started(){return this.$s}getMutationQueue(e,t){return _I.fe(e,this.serializer,t,this.referenceDelegate)}getTargetCache(){return this.Fs}getRemoteDocumentCache(){return this.remoteDocumentCache}getIndexManager(e){return new Tz(e,this.serializer.le.databaseId)}getDocumentOverlayCache(e){return hI.fe(this.serializer,e)}getBundleCache(){return this.Ls}runTransaction(e,t,r){Ue("IndexedDbPersistence","Starting transaction:",e);const i="readonly"===t?"readonly":"readwrite",a=15===(c=this.oi)?x$:14===c?iL:13===c?rL:12===c?M$:11===c?nL:void ct();var c;let f;return this.di.runTransaction(e,i,a,_=>(f=new lx(_,this.Os?this.Os.next():Po.ct),"readwrite-primary"===t?this.Ii(f).next(w=>!!w||this.Ti(f)).next(w=>{if(!w)throw zr(`Failed to obtain primary lease for action '${e}'.`),this.isPrimary=!1,this.si.enqueueRetryable(()=>this.li(!1)),new Pe(he.FAILED_PRECONDITION,ZF);return r(f)}).next(w=>this.Ai(f).next(()=>w)):this.Oi(f).next(()=>r(f)))).then(_=>(f.raiseOnCommittedEvent(),_))}Oi(e){return Tb(e).get("owner").next(t=>{if(null!==t&&this.bi(t.leaseTimestampMs,5e3)&&!this.Di(t.ownerId)&&!this.Ri(t)&&!(this.ri||this.allowTabSynchronization&&t.allowTabSynchronization))throw new Pe(he.FAILED_PRECONDITION,Ux)})}Ai(e){const t={ownerId:this.clientId,allowTabSynchronization:this.allowTabSynchronization,leaseTimestampMs:Date.now()};return Tb(e).put("owner",t)}static D(){return fl.D()}Ei(e){const t=Tb(e);return t.get("owner").next(r=>this.Ri(r)?(Ue("IndexedDbPersistence","Releasing primary lease."),t.delete("owner")):ae.resolve())}bi(e,t){const r=Date.now();return!(e<r-t||e>r&&(zr(`Detected an update time that is in the future: ${e} > ${r}`),1))}mi(){null!==this.document&&"function"==typeof this.document.addEventListener&&(this.ci=()=>{this.si.enqueueAndForget(()=>(this.inForeground="visible"===this.document.visibilityState,this.wi()))},this.document.addEventListener("visibilitychange",this.ci),this.inForeground="visible"===this.document.visibilityState)}xi(){this.ci&&(this.document.removeEventListener("visibilitychange",this.ci),this.ci=null)}gi(){var e;"function"==typeof(null===(e=this.window)||void 0===e?void 0:e.addEventListener)&&(this.ui=()=>{this.Ci();const t=/(?:Version|Mobile)\/1[456]/;(0,cn.G6)()&&(navigator.appVersion.match(t)||navigator.userAgent.match(t))&&this.si.enterRestrictedMode(!0),this.si.enqueueAndForget(()=>this.shutdown())},this.window.addEventListener("pagehide",this.ui))}Ni(){this.ui&&(this.window.removeEventListener("pagehide",this.ui),this.ui=null)}Di(e){var t;try{const r=null!==(null===(t=this._i)||void 0===t?void 0:t.getItem(this.Si(e)));return Ue("IndexedDbPersistence",`Client '${e}' ${r?"is":"is not"} zombied in LocalStorage`),r}catch(r){return zr("IndexedDbPersistence","Failed to get zombied client id.",r),!1}}Ci(){if(this._i)try{this._i.setItem(this.Si(this.clientId),String(Date.now()))}catch(e){zr("Failed to set zombie client id.",e)}}ki(){if(this._i)try{this._i.removeItem(this.Si(this.clientId))}catch{}}Si(e){return`firestore_zombie_${this.persistenceKey}_${e}`}}function Tb(n){return Mi(n,"owner")}function wI(n){return Mi(n,"clientMetadata")}function jx(n,e){let t=n.projectId;return n.isDefaultDatabase||(t+="."+n.database),"firestore/"+e+"/"+t+"/"}class $x{constructor(e,t,r,i){this.targetId=e,this.fromCache=t,this.$i=r,this.Fi=i}static Bi(e,t){let r=tn(),i=tn();for(const a of t.docChanges)switch(a.type){case 0:r=r.add(a.doc.key);break;case 1:i=i.add(a.doc.key)}return new $x(e,t.fromCache,r,i)}}class G2{constructor(){this.Li=!1}initialize(e,t){this.qi=e,this.indexManager=t,this.Li=!0}getDocumentsMatchingQuery(e,t,r,i){return this.Ui(e,t).next(a=>a||this.Ki(e,t,i,r)).next(a=>a||this.Gi(e,t))}Ui(e,t){if(AL(t))return ae.resolve(null);let r=Ks(t);return this.indexManager.getIndexType(e,r).next(i=>0===i?null:(null!==t.limit&&1===i&&(t=sI(t,null,"F"),r=Ks(t)),this.indexManager.getDocumentsMatchingTarget(e,r).next(a=>{const c=tn(...a);return this.qi.getDocuments(e,c).next(f=>this.indexManager.getMinOffset(e,r).next(_=>{const w=this.Qi(t,f);return this.ji(t,w,c,_.readTime)?this.Ui(e,sI(t,null,"F")):this.zi(e,w,t,_)}))})))}Ki(e,t,r,i){return AL(t)||i.isEqual(At.min())?this.Gi(e,t):this.qi.getDocuments(e,r).next(a=>{const c=this.Qi(t,a);return this.ji(t,c,r,i)?this.Gi(e,t):(nx()<=ba.in.DEBUG&&Ue("QueryEngine","Re-using previous result from %s to execute query: %s",i.toString(),yx(t)),this.zi(e,c,t,WF(i,-1)))})}Qi(e,t){let r=new cr(RL(e));return t.forEach((i,a)=>{ub(e,a)&&(r=r.add(a))}),r}ji(e,t,r,i){if(null===e.limit)return!1;if(r.size!==t.size)return!0;const a="F"===e.limitType?t.last():t.first();return!!a&&(a.hasPendingWrites||a.version.compareTo(i)>0)}Gi(e,t){return nx()<=ba.in.DEBUG&&Ue("QueryEngine","Using full collection scan to execute query:",yx(t)),this.qi.getDocumentsMatchingQuery(e,t,Oo.min())}zi(e,t,r,i){return this.qi.getDocumentsMatchingQuery(e,r,i).next(a=>(t.forEach(c=>{a=a.insert(c.key,c)}),a))}}class $z{constructor(e,t,r,i){this.persistence=e,this.Wi=t,this.serializer=i,this.Hi=new er(Gt),this.Ji=new Wu(a=>Zp(a),lb),this.Yi=new Map,this.Xi=e.getRemoteDocumentCache(),this.Fs=e.getTargetCache(),this.Ls=e.getBundleCache(),this.Zi(r)}Zi(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new $2(this.Xi,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Xi.setIndexManager(this.indexManager),this.Wi.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",t=>e.collect(t,this.Hi))}}function q2(n,e,t,r){return new $z(n,e,t,r)}function W2(n,e){return zx.apply(this,arguments)}function zx(){return zx=(0,ye.Z)(function*(n,e){const t=Je(n);return yield t.persistence.runTransaction("Handle user change","readonly",r=>{let i;return t.mutationQueue.getAllMutationBatches(r).next(a=>(i=a,t.Zi(e),t.mutationQueue.getAllMutationBatches(r))).next(a=>{const c=[],f=[];let _=tn();for(const w of i){c.push(w.batchId);for(const S of w.mutations)_=_.add(S.key)}for(const w of a){f.push(w.batchId);for(const S of w.mutations)_=_.add(S.key)}return t.localDocuments.getDocuments(r,_).next(w=>({tr:w,removedBatchIds:c,addedBatchIds:f}))})})}),zx.apply(this,arguments)}function zz(n,e){const t=Je(n);return t.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{const i=e.batch.keys(),a=t.Xi.newChangeBuffer({trackRemovals:!0});return function(c,f,_,w){const S=_.batch,x=S.keys();let L=ae.resolve();return x.forEach(U=>{L=L.next(()=>w.getEntry(f,U)).next(W=>{const ie=_.docVersions.get(U);It(null!==ie),W.version.compareTo(ie)<0&&(S.applyToRemoteDocument(W,_),W.isValidDocument()&&(W.setReadTime(_.commitVersion),w.addEntry(W)))})}),L.next(()=>c.mutationQueue.removeMutationBatch(f,S))}(t,r,e,a).next(()=>a.apply(r)).next(()=>t.mutationQueue.performConsistencyCheck(r)).next(()=>t.documentOverlayCache.removeOverlaysForBatchId(r,i,e.batch.batchId)).next(()=>t.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,function(c){let f=tn();for(let _=0;_<c.mutationResults.length;++_)c.mutationResults[_].transformResults.length>0&&(f=f.add(c.batch.mutations[_].key));return f}(e))).next(()=>t.localDocuments.getDocuments(r,i))})}function K2(n){const e=Je(n);return e.persistence.runTransaction("Get last remote snapshot version","readonly",t=>e.Fs.getLastRemoteSnapshotVersion(t))}function Gz(n,e){const t=Je(n),r=e.snapshotVersion;let i=t.Hi;return t.persistence.runTransaction("Apply remote event","readwrite-primary",a=>{const c=t.Xi.newChangeBuffer({trackRemovals:!0});i=t.Hi;const f=[];e.targetChanges.forEach((S,x)=>{const L=i.get(x);if(!L)return;f.push(t.Fs.removeMatchingKeys(a,S.removedDocuments,x).next(()=>t.Fs.addMatchingKeys(a,S.addedDocuments,x)));let U=L.withSequenceNumber(a.currentSequenceNumber);var W,ie,we;null!==e.targetMismatches.get(x)?U=U.withResumeToken(hi.EMPTY_BYTE_STRING,At.min()).withLastLimboFreeSnapshotVersion(At.min()):S.resumeToken.approximateByteSize()>0&&(U=U.withResumeToken(S.resumeToken,r)),i=i.insert(x,U),ie=U,we=S,(0===(W=L).resumeToken.approximateByteSize()||ie.snapshotVersion.toMicroseconds()-W.snapshotVersion.toMicroseconds()>=3e8||we.addedDocuments.size+we.modifiedDocuments.size+we.removedDocuments.size>0)&&f.push(t.Fs.updateTargetData(a,U))});let _=ho(),w=tn();if(e.documentUpdates.forEach(S=>{e.resolvedLimboDocuments.has(S)&&f.push(t.persistence.referenceDelegate.updateLimboDocument(a,S))}),f.push(Z2(a,c,e.documentUpdates).next(S=>{_=S.er,w=S.nr})),!r.isEqual(At.min())){const S=t.Fs.getLastRemoteSnapshotVersion(a).next(x=>t.Fs.setTargetsMetadata(a,a.currentSequenceNumber,r));f.push(S)}return ae.waitFor(f).next(()=>c.apply(a)).next(()=>t.localDocuments.getLocalViewOfDocuments(a,_,w)).next(()=>_)}).then(a=>(t.Hi=i,a))}function Z2(n,e,t){let r=tn(),i=tn();return t.forEach(a=>r=r.add(a)),e.getEntries(n,r).next(a=>{let c=ho();return t.forEach((f,_)=>{const w=a.get(f);_.isFoundDocument()!==w.isFoundDocument()&&(i=i.add(f)),_.isNoDocument()&&_.version.isEqual(At.min())?(e.removeEntry(f,_.readTime),c=c.insert(f,_)):!w.isValidDocument()||_.version.compareTo(w.version)>0||0===_.version.compareTo(w.version)&&w.hasPendingWrites?(e.addEntry(_),c=c.insert(f,_)):Ue("LocalStore","Ignoring outdated watch update for ",f,". Current version:",w.version," Watch version:",_.version)}),{er:c,nr:i}})}function qz(n,e){const t=Je(n);return t.persistence.runTransaction("Get next mutation batch","readonly",r=>(void 0===e&&(e=-1),t.mutationQueue.getNextMutationBatchAfterBatchId(r,e)))}function __(n,e){const t=Je(n);return t.persistence.runTransaction("Allocate target","readwrite",r=>{let i;return t.Fs.getTargetData(r,e).next(a=>a?(i=a,ae.resolve(i)):t.Fs.allocateTargetId(r).next(c=>(i=new Zu(e,c,"TargetPurposeListen",r.currentSequenceNumber),t.Fs.addTargetData(r,i).next(()=>i))))}).then(r=>{const i=t.Hi.get(r.targetId);return(null===i||r.snapshotVersion.compareTo(i.snapshotVersion)>0)&&(t.Hi=t.Hi.insert(r.targetId,r),t.Ji.set(e,r.targetId)),r})}function y_(n,e,t){return Gx.apply(this,arguments)}function Gx(){return Gx=(0,ye.Z)(function*(n,e,t){const r=Je(n),i=r.Hi.get(e),a=t?"readwrite":"readwrite-primary";try{t||(yield r.persistence.runTransaction("Release target",a,c=>r.persistence.referenceDelegate.removeTarget(c,i)))}catch(c){if(!Ch(c))throw c;Ue("LocalStore",`Failed to update sequence numbers for target ${e}: ${c}`)}r.Hi=r.Hi.remove(e),r.Ji.delete(i.target)}),Gx.apply(this,arguments)}function EI(n,e,t){const r=Je(n);let i=At.min(),a=tn();return r.persistence.runTransaction("Execute query","readonly",c=>function(f,_,w){const S=Je(f),x=S.Ji.get(w);return void 0!==x?ae.resolve(S.Hi.get(x)):S.Fs.getTargetData(_,w)}(r,c,Ks(e)).next(f=>{if(f)return i=f.lastLimboFreeSnapshotVersion,r.Fs.getMatchingKeysForTargetId(c,f.targetId).next(_=>{a=_})}).next(()=>r.Wi.getDocumentsMatchingQuery(c,e,t?i:At.min(),t?a:tn())).next(f=>(X2(r,xL(e),f),{documents:f,sr:a})))}function Y2(n,e){const t=Je(n),r=Je(t.Fs),i=t.Hi.get(e);return i?Promise.resolve(i.target):t.persistence.runTransaction("Get target data","readonly",a=>r.he(a,e).next(c=>c?c.target:null))}function Q2(n,e){const t=Je(n),r=t.Yi.get(e)||At.min();return t.persistence.runTransaction("Get new document changes","readonly",i=>t.Xi.getAllFromCollectionGroup(i,e,WF(r,-1),Number.MAX_SAFE_INTEGER)).then(i=>(X2(t,e,i),i))}function X2(n,e,t){let r=n.Yi.get(e)||At.min();t.forEach((i,a)=>{a.readTime.compareTo(r)>0&&(r=a.readTime)}),n.Yi.set(e,r)}function qx(){return qx=(0,ye.Z)(function*(n,e,t,r){const i=Je(n);let a=tn(),c=ho();for(const w of t){const S=e.ir(w.metadata.name);w.document&&(a=a.add(S));const x=e.rr(w);x.setReadTime(e.ur(w.metadata.readTime)),c=c.insert(S,x)}const f=i.Xi.newChangeBuffer({trackRemovals:!0}),_=yield __(i,(w=r,Ks(l_(_n.fromString(`__bundle__/docs/${w}`)))));var w;return i.persistence.runTransaction("Apply bundle documents","readwrite",w=>Z2(w,f,c).next(S=>(f.apply(w),S)).next(S=>i.Fs.removeMatchingKeysForTargetId(w,_.targetId).next(()=>i.Fs.addMatchingKeys(w,a,_.targetId)).next(()=>i.localDocuments.getLocalViewOfDocuments(w,S.er,S.nr)).next(()=>S.er)))}),qx.apply(this,arguments)}function Kz(n,e){return Wx.apply(this,arguments)}function Wx(){return Wx=(0,ye.Z)(function*(n,e,t=tn()){const r=yield __(n,Ks(Rx(e.bundledQuery))),i=Je(n);return i.persistence.runTransaction("Save named query","readwrite",a=>{const c=Gr(e.readTime);if(r.snapshotVersion.compareTo(c)>=0)return i.Ls.saveNamedQuery(a,e);const f=r.withResumeToken(hi.EMPTY_BYTE_STRING,c);return i.Hi=i.Hi.insert(f.targetId,f),i.Fs.updateTargetData(a,f).next(()=>i.Fs.removeMatchingKeysForTargetId(a,r.targetId)).next(()=>i.Fs.addMatchingKeys(a,t,r.targetId)).next(()=>i.Ls.saveNamedQuery(a,e))})}),Wx.apply(this,arguments)}function J2(n,e){return`firestore_clients_${n}_${e}`}function eV(n,e,t){let r=`firestore_mutations_${n}_${t}`;return e.isAuthenticated()&&(r+=`_${e.uid}`),r}function Kx(n,e){return`firestore_targets_${n}_${e}`}class CI{constructor(e,t,r,i){this.user=e,this.batchId=t,this.state=r,this.error=i}static cr(e,t,r){const i=JSON.parse(r);let a,c="object"==typeof i&&-1!==["pending","acknowledged","rejected"].indexOf(i.state)&&(void 0===i.error||"object"==typeof i.error);return c&&i.error&&(c="string"==typeof i.error.message&&"string"==typeof i.error.code,c&&(a=new Pe(i.error.code,i.error.message))),c?new CI(e,t,i.state,a):(zr("SharedClientState",`Failed to parse mutation state for ID '${t}': ${r}`),null)}ar(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class Ab{constructor(e,t,r){this.targetId=e,this.state=t,this.error=r}static cr(e,t){const r=JSON.parse(t);let i,a="object"==typeof r&&-1!==["not-current","current","rejected"].indexOf(r.state)&&(void 0===r.error||"object"==typeof r.error);return a&&r.error&&(a="string"==typeof r.error.message&&"string"==typeof r.error.code,a&&(i=new Pe(r.error.code,r.error.message))),a?new Ab(e,r.state,i):(zr("SharedClientState",`Failed to parse target state for ID '${e}': ${t}`),null)}ar(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class II{constructor(e,t){this.clientId=e,this.activeTargetIds=t}static cr(e,t){const r=JSON.parse(t);let i="object"==typeof r&&r.activeTargetIds instanceof Array,a=vx();for(let c=0;i&&c<r.activeTargetIds.length;++c)i=XF(r.activeTargetIds[c]),a=a.add(r.activeTargetIds[c]);return i?new II(e,a):(zr("SharedClientState",`Failed to parse client data for instance '${e}': ${t}`),null)}}class Zx{constructor(e,t){this.clientId=e,this.onlineState=t}static cr(e){const t=JSON.parse(e);return"object"==typeof t&&-1!==["Unknown","Online","Offline"].indexOf(t.onlineState)&&"string"==typeof t.clientId?new Zx(t.clientId,t.onlineState):(zr("SharedClientState",`Failed to parse online state: ${e}`),null)}}class Yx{constructor(){this.activeTargetIds=vx()}hr(e){this.activeTargetIds=this.activeTargetIds.add(e)}lr(e){this.activeTargetIds=this.activeTargetIds.delete(e)}ar(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class Qx{constructor(e,t,r,i,a){this.window=e,this.si=t,this.persistenceKey=r,this.dr=i,this.syncEngine=null,this.onlineStateHandler=null,this.sequenceNumberHandler=null,this._r=this.wr.bind(this),this.mr=new er(Gt),this.started=!1,this.gr=[];const c=r.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");this.storage=this.window.localStorage,this.currentUser=a,this.yr=J2(this.persistenceKey,this.dr),this.pr=`firestore_sequence_number_${this.persistenceKey}`,this.mr=this.mr.insert(this.dr,new Yx),this.Ir=new RegExp(`^firestore_clients_${c}_([^_]*)$`),this.Tr=new RegExp(`^firestore_mutations_${c}_(\\d+)(?:_(.*))?$`),this.Er=new RegExp(`^firestore_targets_${c}_(\\d+)$`),this.Ar=`firestore_online_state_${this.persistenceKey}`,this.Rr=function(f){return`firestore_bundle_loaded_v2_${f}`}(this.persistenceKey),this.window.addEventListener("storage",this._r)}static D(e){return!(!e||!e.localStorage)}start(){var e=this;return(0,ye.Z)(function*(){const t=yield e.syncEngine.Mi();for(const i of t){if(i===e.dr)continue;const a=e.getItem(J2(e.persistenceKey,i));if(a){const c=II.cr(i,a);c&&(e.mr=e.mr.insert(c.clientId,c))}}e.vr();const r=e.storage.getItem(e.Ar);if(r){const i=e.Pr(r);i&&e.br(i)}for(const i of e.gr)e.wr(i);e.gr=[],e.window.addEventListener("pagehide",()=>e.shutdown()),e.started=!0})()}writeSequenceNumber(e){this.setItem(this.pr,JSON.stringify(e))}getAllActiveQueryTargets(){return this.Vr(this.mr)}isActiveQueryTarget(e){let t=!1;return this.mr.forEach((r,i)=>{i.activeTargetIds.has(e)&&(t=!0)}),t}addPendingMutation(e){this.Sr(e,"pending")}updateMutationState(e,t,r){this.Sr(e,t,r),this.Dr(e)}addLocalQueryTarget(e){let t="not-current";if(this.isActiveQueryTarget(e)){const r=this.storage.getItem(Kx(this.persistenceKey,e));if(r){const i=Ab.cr(e,r);i&&(t=i.state)}}return this.Cr.hr(e),this.vr(),t}removeLocalQueryTarget(e){this.Cr.lr(e),this.vr()}isLocalQueryTarget(e){return this.Cr.activeTargetIds.has(e)}clearQueryState(e){this.removeItem(Kx(this.persistenceKey,e))}updateQueryState(e,t,r){this.Nr(e,t,r)}handleUserChange(e,t,r){t.forEach(i=>{this.Dr(i)}),this.currentUser=e,r.forEach(i=>{this.addPendingMutation(i)})}setOnlineState(e){this.kr(e)}notifyBundleLoaded(e){this.Mr(e)}shutdown(){this.started&&(this.window.removeEventListener("storage",this._r),this.removeItem(this.yr),this.started=!1)}getItem(e){const t=this.storage.getItem(e);return Ue("SharedClientState","READ",e,t),t}setItem(e,t){Ue("SharedClientState","SET",e,t),this.storage.setItem(e,t)}removeItem(e){Ue("SharedClientState","REMOVE",e),this.storage.removeItem(e)}wr(e){var t=this;const r=e;if(r.storageArea===this.storage){if(Ue("SharedClientState","EVENT",r.key,r.newValue),r.key===this.yr)return void zr("Received WebStorage notification for local change. Another client might have garbage-collected our state");this.si.enqueueRetryable((0,ye.Z)(function*(){if(t.started){if(null!==r.key)if(t.Ir.test(r.key)){if(null==r.newValue){const i=t.Or(r.key);return t.$r(i,null)}{const i=t.Fr(r.key,r.newValue);if(i)return t.$r(i.clientId,i)}}else if(t.Tr.test(r.key)){if(null!==r.newValue){const i=t.Br(r.key,r.newValue);if(i)return t.Lr(i)}}else if(t.Er.test(r.key)){if(null!==r.newValue){const i=t.qr(r.key,r.newValue);if(i)return t.Ur(i)}}else if(r.key===t.Ar){if(null!==r.newValue){const i=t.Pr(r.newValue);if(i)return t.br(i)}}else if(r.key===t.pr){const i=function(a){let c=Po.ct;if(null!=a)try{const f=JSON.parse(a);It("number"==typeof f),c=f}catch(f){zr("SharedClientState","Failed to read sequence number from WebStorage",f)}return c}(r.newValue);i!==Po.ct&&t.sequenceNumberHandler(i)}else if(r.key===t.Rr){const i=t.Kr(r.newValue);yield Promise.all(i.map(a=>t.syncEngine.Gr(a)))}}else t.gr.push(r)}))}}get Cr(){return this.mr.get(this.dr)}vr(){this.setItem(this.yr,this.Cr.ar())}Sr(e,t,r){const i=new CI(this.currentUser,e,t,r),a=eV(this.persistenceKey,this.currentUser,e);this.setItem(a,i.ar())}Dr(e){const t=eV(this.persistenceKey,this.currentUser,e);this.removeItem(t)}kr(e){this.storage.setItem(this.Ar,JSON.stringify({clientId:this.dr,onlineState:e}))}Nr(e,t,r){const i=Kx(this.persistenceKey,e),a=new Ab(e,t,r);this.setItem(i,a.ar())}Mr(e){const t=JSON.stringify(Array.from(e));this.setItem(this.Rr,t)}Or(e){const t=this.Ir.exec(e);return t?t[1]:null}Fr(e,t){const r=this.Or(e);return II.cr(r,t)}Br(e,t){const r=this.Tr.exec(e),i=Number(r[1]);return CI.cr(new Ai(void 0!==r[2]?r[2]:null),i,t)}qr(e,t){const r=this.Er.exec(e),i=Number(r[1]);return Ab.cr(i,t)}Pr(e){return Zx.cr(e)}Kr(e){return JSON.parse(e)}Lr(e){var t=this;return(0,ye.Z)(function*(){if(e.user.uid===t.currentUser.uid)return t.syncEngine.Qr(e.batchId,e.state,e.error);Ue("SharedClientState",`Ignoring mutation for non-active user ${e.user.uid}`)})()}Ur(e){return this.syncEngine.jr(e.targetId,e.state,e.error)}$r(e,t){const r=t?this.mr.insert(e,t):this.mr.remove(e),i=this.Vr(this.mr),a=this.Vr(r),c=[],f=[];return a.forEach(_=>{i.has(_)||c.push(_)}),i.forEach(_=>{a.has(_)||f.push(_)}),this.syncEngine.zr(c,f).then(()=>{this.mr=r})}br(e){this.mr.get(e.clientId)&&this.onlineStateHandler(e.onlineState)}Vr(e){let t=vx();return e.forEach((r,i)=>{t=t.unionWith(i.activeTargetIds)}),t}}class tV{constructor(){this.Wr=new Yx,this.Hr={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,r){}addLocalQueryTarget(e){return this.Wr.hr(e),this.Hr[e]||"not-current"}updateQueryState(e,t,r){this.Hr[e]=t}removeLocalQueryTarget(e){this.Wr.lr(e)}isLocalQueryTarget(e){return this.Wr.activeTargetIds.has(e)}clearQueryState(e){delete this.Hr[e]}getAllActiveQueryTargets(){return this.Wr.activeTargetIds}isActiveQueryTarget(e){return this.Wr.activeTargetIds.has(e)}start(){return this.Wr=new Yx,Promise.resolve()}handleUserChange(e,t,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}class Zz{Jr(e){}shutdown(){}}class nV{constructor(){this.Yr=()=>this.Xr(),this.Zr=()=>this.eo(),this.no=[],this.so()}Jr(e){this.no.push(e)}shutdown(){window.removeEventListener("online",this.Yr),window.removeEventListener("offline",this.Zr)}so(){window.addEventListener("online",this.Yr),window.addEventListener("offline",this.Zr)}Xr(){Ue("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const e of this.no)e(0)}eo(){Ue("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const e of this.no)e(1)}static D(){return typeof window<"u"&&void 0!==window.addEventListener&&void 0!==window.removeEventListener}}let DI=null;function Xx(){return null===DI?DI=268435456+Math.round(2147483648*Math.random()):DI++,"0x"+DI.toString(16)}const Yz={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class Qz{constructor(e){this.io=e.io,this.ro=e.ro}oo(e){this.uo=e}co(e){this.ao=e}onMessage(e){this.ho=e}close(){this.ro()}send(e){this.io(e)}lo(){this.uo()}fo(e){this.ao(e)}_o(e){this.ho(e)}}const Cs="WebChannelConnection";class Xz extends class{constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId,this.wo=(e.ssl?"https":"http")+"://"+e.host,this.mo="projects/"+this.databaseId.projectId+"/databases/"+this.databaseId.database+"/documents"}get yo(){return!1}po(e,t,r,i,a){const c=Xx(),f=this.Io(e,t);Ue("RestConnection",`Sending RPC '${e}' ${c}:`,f,r);const _={};return this.To(_,i,a),this.Eo(e,f,_,r).then(w=>(Ue("RestConnection",`Received RPC '${e}' ${c}: `,w),w),w=>{throw Ea("RestConnection",`RPC '${e}' ${c} failed with error: `,w,"url: ",f,"request:",r),w})}Ao(e,t,r,i,a,c){return this.po(e,t,r,i,a)}To(e,t,r){e["X-Goog-Api-Client"]="gl-js/ fire/"+n_,e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach((i,a)=>e[a]=i),r&&r.headers.forEach((i,a)=>e[a]=i)}Io(e,t){return`${this.wo}/v1/${t}:${Yz[e]}`}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams}Eo(e,t,r,i){const a=Xx();return new Promise((c,f)=>{const _=new Zj;_.setWithCredentials(!0),_.listenOnce(qj.COMPLETE,()=>{try{switch(_.getLastErrorCode()){case tx.NO_ERROR:const S=_.getResponseJson();Ue(Cs,`XHR for RPC '${e}' ${a} received:`,JSON.stringify(S)),c(S);break;case tx.TIMEOUT:Ue(Cs,`RPC '${e}' ${a} timed out`),f(new Pe(he.DEADLINE_EXCEEDED,"Request time out"));break;case tx.HTTP_ERROR:const x=_.getStatus();if(Ue(Cs,`RPC '${e}' ${a} failed with status:`,x,"response text:",_.getResponseText()),x>0){let L=_.getResponseJson();Array.isArray(L)&&(L=L[0]);const U=L?.error;if(U&&U.status&&U.message){const W=function(ie){const we=ie.toLowerCase().replace(/_/g,"-");return Object.values(he).indexOf(we)>=0?we:he.UNKNOWN}(U.status);f(new Pe(W,U.message))}else f(new Pe(he.UNKNOWN,"Server responded with status "+_.getStatus()))}else f(new Pe(he.UNAVAILABLE,"Connection failed."));break;default:ct()}}finally{Ue(Cs,`RPC '${e}' ${a} completed.`)}});const w=JSON.stringify(i);Ue(Cs,`RPC '${e}' ${a} sending request:`,i),_.send(t,"POST",w,r,15)})}Ro(e,t,r){const i=Xx(),a=[this.wo,"/","google.firestore.v1.Firestore","/",e,"/channel"],c=zj(),f=Gj(),_={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling};this.useFetchStreams&&(_.xmlHttpFactory=new Kj({})),this.To(_.initMessageHeaders,t,r),_.encodeInitMessageHeaders=!0;const w=a.join("");Ue(Cs,`Creating RPC '${e}' stream ${i}: ${w}`,_);const S=c.createWebChannel(w,_);let x=!1,L=!1;const U=new Qz({io:ie=>{L?Ue(Cs,`Not sending because RPC '${e}' stream ${i} is closed:`,ie):(x||(Ue(Cs,`Opening RPC '${e}' stream ${i} transport.`),S.open(),x=!0),Ue(Cs,`RPC '${e}' stream ${i} sending:`,ie),S.send(ie))},ro:()=>S.close()}),W=(ie,we,qe)=>{ie.listen(we,ot=>{try{qe(ot)}catch(tt){setTimeout(()=>{throw tt},0)}})};return W(S,GC.EventType.OPEN,()=>{L||Ue(Cs,`RPC '${e}' stream ${i} transport opened.`)}),W(S,GC.EventType.CLOSE,()=>{L||(L=!0,Ue(Cs,`RPC '${e}' stream ${i} transport closed`),U.fo())}),W(S,GC.EventType.ERROR,ie=>{L||(L=!0,Ea(Cs,`RPC '${e}' stream ${i} transport errored:`,ie),U.fo(new Pe(he.UNAVAILABLE,"The operation could not be completed")))}),W(S,GC.EventType.MESSAGE,ie=>{var we;if(!L){const qe=ie.data[0];It(!!qe);const ot=qe,tt=ot.error||(null===(we=ot[0])||void 0===we?void 0:we.error);if(tt){Ue(Cs,`RPC '${e}' stream ${i} received error:`,tt);const Dt=tt.status;let zt=function(Tn){const Ri=Jr[Tn];if(void 0!==Ri)return ZL(Ri)}(Dt),Yt=tt.message;void 0===zt&&(zt=he.INTERNAL,Yt="Unknown error status: "+Dt+" with message "+tt.message),L=!0,U.fo(new Pe(zt,Yt)),S.close()}else Ue(Cs,`RPC '${e}' stream ${i} received:`,qe),U._o(qe)}}),W(f,Wj.STAT_EVENT,ie=>{ie.stat===HF.PROXY?Ue(Cs,`RPC '${e}' stream ${i} detected buffering proxy`):ie.stat===HF.NOPROXY&&Ue(Cs,`RPC '${e}' stream ${i} detected no buffering proxy`)}),setTimeout(()=>{U.lo()},0),U}}function rV(){return typeof window<"u"?window:null}function SI(){return typeof document<"u"?document:null}function Mb(n){return new lz(n,!0)}class Jx{constructor(e,t,r=1e3,i=1.5,a=6e4){this.si=e,this.timerId=t,this.vo=r,this.Po=i,this.bo=a,this.Vo=0,this.So=null,this.Do=Date.now(),this.reset()}reset(){this.Vo=0}Co(){this.Vo=this.bo}xo(e){this.cancel();const t=Math.floor(this.Vo+this.No()),r=Math.max(0,Date.now()-this.Do),i=Math.max(0,t-r);i>0&&Ue("ExponentialBackoff",`Backing off for ${i} ms (base delay: ${this.Vo} ms, delay with jitter: ${t} ms, last attempt: ${r} ms ago)`),this.So=this.si.enqueueAfterDelay(this.timerId,i,()=>(this.Do=Date.now(),e())),this.Vo*=this.Po,this.Vo<this.vo&&(this.Vo=this.vo),this.Vo>this.bo&&(this.Vo=this.bo)}ko(){null!==this.So&&(this.So.skipDelay(),this.So=null)}cancel(){null!==this.So&&(this.So.cancel(),this.So=null)}No(){return(Math.random()-.5)*this.Vo}}class iV{constructor(e,t,r,i,a,c,f,_){this.si=e,this.Mo=r,this.Oo=i,this.connection=a,this.authCredentialsProvider=c,this.appCheckCredentialsProvider=f,this.listener=_,this.state=0,this.$o=0,this.Fo=null,this.Bo=null,this.stream=null,this.Lo=new Jx(e,t)}qo(){return 1===this.state||5===this.state||this.Uo()}Uo(){return 2===this.state||3===this.state}start(){4!==this.state?this.auth():this.Ko()}stop(){var e=this;return(0,ye.Z)(function*(){e.qo()&&(yield e.close(0))})()}Go(){this.state=0,this.Lo.reset()}Qo(){this.Uo()&&null===this.Fo&&(this.Fo=this.si.enqueueAfterDelay(this.Mo,6e4,()=>this.jo()))}zo(e){this.Wo(),this.stream.send(e)}jo(){var e=this;return(0,ye.Z)(function*(){if(e.Uo())return e.close(0)})()}Wo(){this.Fo&&(this.Fo.cancel(),this.Fo=null)}Ho(){this.Bo&&(this.Bo.cancel(),this.Bo=null)}close(e,t){var r=this;return(0,ye.Z)(function*(){r.Wo(),r.Ho(),r.Lo.cancel(),r.$o++,4!==e?r.Lo.reset():t&&t.code===he.RESOURCE_EXHAUSTED?(zr(t.toString()),zr("Using maximum backoff delay to prevent overloading the backend."),r.Lo.Co()):t&&t.code===he.UNAUTHENTICATED&&3!==r.state&&(r.authCredentialsProvider.invalidateToken(),r.appCheckCredentialsProvider.invalidateToken()),null!==r.stream&&(r.Jo(),r.stream.close(),r.stream=null),r.state=e,yield r.listener.co(t)})()}Jo(){}auth(){this.state=1;const e=this.Yo(this.$o),t=this.$o;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,i])=>{this.$o===t&&this.Xo(r,i)},r=>{e(()=>{const i=new Pe(he.UNKNOWN,"Fetching auth token failed: "+r.message);return this.Zo(i)})})}Xo(e,t){const r=this.Yo(this.$o);this.stream=this.tu(e,t),this.stream.oo(()=>{r(()=>(this.state=2,this.Bo=this.si.enqueueAfterDelay(this.Oo,1e4,()=>(this.Uo()&&(this.state=3),Promise.resolve())),this.listener.oo()))}),this.stream.co(i=>{r(()=>this.Zo(i))}),this.stream.onMessage(i=>{r(()=>this.onMessage(i))})}Ko(){var e=this;this.state=5,this.Lo.xo((0,ye.Z)(function*(){e.state=0,e.start()}))}Zo(e){return Ue("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}Yo(e){return t=>{this.si.enqueueAndForget(()=>this.$o===e?t():(Ue("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class Jz extends iV{constructor(e,t,r,i,a,c){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,r,i,c),this.serializer=a}tu(e,t){return this.connection.Ro("Listen",e,t)}onMessage(e){this.Lo.reset();const t=function dz(n,e){let t;if("targetChange"in e){const r="NO_CHANGE"===(_=e.targetChange.targetChangeType||"NO_CHANGE")?0:"ADD"===_?1:"REMOVE"===_?2:"CURRENT"===_?3:"RESET"===_?4:ct(),i=e.targetChange.targetIds||[],a=function(_,w){return _.useProto3Json?(It(void 0===w||"string"==typeof w),hi.fromBase64String(w||"")):(It(void 0===w||w instanceof Uint8Array),hi.fromUint8Array(w||new Uint8Array))}(n,e.targetChange.resumeToken),c=e.targetChange.cause,f=c&&function(_){const w=void 0===_.code?he.UNKNOWN:ZL(_.code);return new Pe(w,_.message||"")}(c);t=new e2(r,i,a,f||null)}else if("documentChange"in e){const r=e.documentChange,i=Ac(n,r.document.name),a=Gr(r.document.updateTime),c=r.document.createTime?Gr(r.document.createTime):At.min(),f=new ts({mapValue:{fields:r.document.fields}}),_=ur.newFoundDocument(i,a,c,f);t=new uI(r.targetIds||[],r.removedTargetIds||[],_.key,_)}else if("documentDelete"in e){const r=e.documentDelete,i=Ac(n,r.document),a=r.readTime?Gr(r.readTime):At.min(),c=ur.newNoDocument(i,a);t=new uI([],r.removedTargetIds||[],c.key,c)}else if("documentRemove"in e){const r=e.documentRemove,i=Ac(n,r.document);t=new uI([],r.removedTargetIds||[],i,null)}else{if(!("filter"in e))return ct();{const r=e.filter,{count:i=0,unchangedNames:a}=r,c=new nz(i,a);t=new JL(r.targetId,c)}}var _;return t}(this.serializer,e),r=function(i){if(!("targetChange"in i))return At.min();const a=i.targetChange;return a.targetIds&&a.targetIds.length?At.min():a.readTime?Gr(a.readTime):At.min()}(e);return this.listener.eu(t,r)}nu(e){const t={};t.database=vb(this.serializer),t.addTarget=function(i,a){let c;const f=a.target;if(c=nI(f)?{documents:d2(i,f)}:{query:xx(i,f)},c.targetId=a.targetId,a.resumeToken.approximateByteSize()>0){c.resumeToken=s2(i,a.resumeToken);const _=Sx(i,a.expectedCount);null!==_&&(c.expectedCount=_)}else if(a.snapshotVersion.compareTo(At.min())>0){c.readTime=f_(i,a.snapshotVersion.toTimestamp());const _=Sx(i,a.expectedCount);null!==_&&(c.expectedCount=_)}return c}(this.serializer,e);const r=function fz(n,e){const t=function(r){switch(r){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return ct()}}(e.purpose);return null==t?null:{"goog-listen-tags":t}}(0,e);r&&(t.labels=r),this.zo(t)}su(e){const t={};t.database=vb(this.serializer),t.removeTarget=e,this.zo(t)}}class e3 extends iV{constructor(e,t,r,i,a,c){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,r,i,c),this.serializer=a,this.iu=!1}get ru(){return this.iu}start(){this.iu=!1,this.lastStreamToken=void 0,super.start()}Jo(){this.iu&&this.ou([])}tu(e,t){return this.connection.Ro("Write",e,t)}onMessage(e){if(It(!!e.streamToken),this.lastStreamToken=e.streamToken,this.iu){this.Lo.reset();const t=function hz(n,e){return n&&n.length>0?(It(void 0!==e),n.map(t=>function(r,i){let a=Gr(r.updateTime?r.updateTime:i);return a.isEqual(At.min())&&(a=Gr(i)),new X$(a,r.transformResults||[])}(t,e))):[]}(e.writeResults,e.commitTime),r=Gr(e.commitTime);return this.listener.uu(r,t)}return It(!e.writeResults||0===e.writeResults.length),this.iu=!0,this.listener.cu()}au(){const e={};e.database=vb(this.serializer),this.zo(e)}ou(e){const t={streamToken:this.lastStreamToken,writes:e.map(r=>bb(this.serializer,r))};this.zo(t)}}class t3 extends class{}{constructor(e,t,r,i){super(),this.authCredentials=e,this.appCheckCredentials=t,this.connection=r,this.serializer=i,this.hu=!1}lu(){if(this.hu)throw new Pe(he.FAILED_PRECONDITION,"The client has already been terminated.")}po(e,t,r){return this.lu(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([i,a])=>this.connection.po(e,t,r,i,a)).catch(i=>{throw"FirebaseError"===i.name?(i.code===he.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),i):new Pe(he.UNKNOWN,i.toString())})}Ao(e,t,r,i){return this.lu(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([a,c])=>this.connection.Ao(e,t,r,a,c,i)).catch(a=>{throw"FirebaseError"===a.name?(a.code===he.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),a):new Pe(he.UNKNOWN,a.toString())})}terminate(){this.hu=!0}}class r3{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.du=0,this._u=null,this.wu=!0}mu(){0===this.du&&(this.gu("Unknown"),this._u=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this._u=null,this.yu("Backend didn't respond within 10 seconds."),this.gu("Offline"),Promise.resolve())))}pu(e){"Online"===this.state?this.gu("Unknown"):(this.du++,this.du>=1&&(this.Iu(),this.yu(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.gu("Offline")))}set(e){this.Iu(),this.du=0,"Online"===e&&(this.wu=!1),this.gu(e)}gu(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}yu(e){const t=`Could not reach Cloud Firestore backend. ${e}\nThis typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.wu?(zr(t),this.wu=!1):Ue("OnlineStateTracker",t)}Iu(){null!==this._u&&(this._u.cancel(),this._u=null)}}class s3{constructor(e,t,r,i,a){var c=this;this.localStore=e,this.datastore=t,this.asyncQueue=r,this.remoteSyncer={},this.Tu=[],this.Eu=new Map,this.Au=new Set,this.Ru=[],this.vu=a,this.vu.Jr(f=>{r.enqueueAndForget((0,ye.Z)(function*(){var _;Nh(c)&&(Ue("RemoteStore","Restarting streams for network reachability change."),yield(_=(0,ye.Z)(function*(w){const S=Je(w);S.Au.add(4),yield v_(S),S.Pu.set("Unknown"),S.Au.delete(4),yield xb(S)}),function(w){return _.apply(this,arguments)})(c))}))}),this.Pu=new r3(r,i)}}function xb(n){return tR.apply(this,arguments)}function tR(){return tR=(0,ye.Z)(function*(n){if(Nh(n))for(const e of n.Ru)yield e(!0)}),tR.apply(this,arguments)}function v_(n){return nR.apply(this,arguments)}function nR(){return nR=(0,ye.Z)(function*(n){for(const e of n.Ru)yield e(!1)}),nR.apply(this,arguments)}function TI(n,e){const t=Je(n);t.Eu.has(e.targetId)||(t.Eu.set(e.targetId,e),sR(t)?iR(t):w_(t).Uo()&&rR(t,e))}function Rb(n,e){const t=Je(n),r=w_(t);t.Eu.delete(e),r.Uo()&&sV(t,e),0===t.Eu.size&&(r.Uo()?r.Qo():Nh(t)&&t.Pu.set("Unknown"))}function rR(n,e){if(n.bu.Lt(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(At.min())>0){const t=n.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(t)}w_(n).nu(e)}function sV(n,e){n.bu.Lt(e),w_(n).su(e)}function iR(n){n.bu=new iz({getRemoteKeysForTarget:e=>n.remoteSyncer.getRemoteKeysForTarget(e),he:e=>n.Eu.get(e)||null,oe:()=>n.datastore.serializer.databaseId}),w_(n).start(),n.Pu.mu()}function sR(n){return Nh(n)&&!w_(n).qo()&&n.Eu.size>0}function Nh(n){return 0===Je(n).Au.size}function oV(n){n.bu=void 0}function o3(n){return oR.apply(this,arguments)}function oR(){return oR=(0,ye.Z)(function*(n){n.Eu.forEach((e,t)=>{rR(n,e)})}),oR.apply(this,arguments)}function a3(n,e){return aR.apply(this,arguments)}function aR(){return aR=(0,ye.Z)(function*(n,e){oV(n),sR(n)?(n.Pu.pu(e),iR(n)):n.Pu.set("Unknown")}),aR.apply(this,arguments)}function l3(n,e,t){return lR.apply(this,arguments)}function lR(){return lR=(0,ye.Z)(function*(n,e,t){if(n.Pu.set("Online"),e instanceof e2&&2===e.state&&e.cause)try{yield(r=(0,ye.Z)(function*(i,a){const c=a.cause;for(const f of a.targetIds)i.Eu.has(f)&&(yield i.remoteSyncer.rejectListen(f,c),i.Eu.delete(f),i.bu.removeTarget(f))}),function(i,a){return r.apply(this,arguments)})(n,e)}catch(r){Ue("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),r),yield AI(n,r)}else if(e instanceof uI?n.bu.Wt(e):e instanceof JL?n.bu.ee(e):n.bu.Yt(e),!t.isEqual(At.min()))try{const r=yield K2(n.localStore);t.compareTo(r)>=0&&(yield function(i,a){const c=i.bu.ue(a);return c.targetChanges.forEach((f,_)=>{if(f.resumeToken.approximateByteSize()>0){const w=i.Eu.get(_);w&&i.Eu.set(_,w.withResumeToken(f.resumeToken,a))}}),c.targetMismatches.forEach((f,_)=>{const w=i.Eu.get(f);if(!w)return;i.Eu.set(f,w.withResumeToken(hi.EMPTY_BYTE_STRING,w.snapshotVersion)),sV(i,f);const S=new Zu(w.target,f,_,w.sequenceNumber);rR(i,S)}),i.remoteSyncer.applyRemoteEvent(c)}(n,t))}catch(r){Ue("RemoteStore","Failed to raise snapshot:",r),yield AI(n,r)}var r}),lR.apply(this,arguments)}function AI(n,e,t){return cR.apply(this,arguments)}function cR(){return cR=(0,ye.Z)(function*(n,e,t){if(!Ch(e))throw e;n.Au.add(1),yield v_(n),n.Pu.set("Offline"),t||(t=()=>K2(n.localStore)),n.asyncQueue.enqueueRetryable((0,ye.Z)(function*(){Ue("RemoteStore","Retrying IndexedDB access"),yield t(),n.Au.delete(1),yield xb(n)}))}),cR.apply(this,arguments)}function aV(n,e){return e().catch(t=>AI(n,t,e))}function b_(n){return uR.apply(this,arguments)}function uR(){return uR=(0,ye.Z)(function*(n){const e=Je(n),t=Fh(e);let r=e.Tu.length>0?e.Tu[e.Tu.length-1].batchId:-1;for(;c3(e);)try{const i=yield qz(e.localStore,r);if(null===i){0===e.Tu.length&&t.Qo();break}r=i.batchId,u3(e,i)}catch(i){yield AI(e,i)}lV(e)&&cV(e)}),uR.apply(this,arguments)}function c3(n){return Nh(n)&&n.Tu.length<10}function u3(n,e){n.Tu.push(e);const t=Fh(n);t.Uo()&&t.ru&&t.ou(e.mutations)}function lV(n){return Nh(n)&&!Fh(n).qo()&&n.Tu.length>0}function cV(n){Fh(n).start()}function d3(n){return dR.apply(this,arguments)}function dR(){return dR=(0,ye.Z)(function*(n){Fh(n).au()}),dR.apply(this,arguments)}function h3(n){return hR.apply(this,arguments)}function hR(){return hR=(0,ye.Z)(function*(n){const e=Fh(n);for(const t of n.Tu)e.ou(t.mutations)}),hR.apply(this,arguments)}function f3(n,e,t){return fR.apply(this,arguments)}function fR(){return fR=(0,ye.Z)(function*(n,e,t){const r=n.Tu.shift(),i=Ex.from(r,e,t);yield aV(n,()=>n.remoteSyncer.applySuccessfulWrite(i)),yield b_(n)}),fR.apply(this,arguments)}function p3(n,e){return pR.apply(this,arguments)}function pR(){return pR=(0,ye.Z)(function*(n,e){var t;e&&Fh(n).ru&&(yield(t=(0,ye.Z)(function*(r,i){if(KL(a=i.code)&&a!==he.ABORTED){const c=r.Tu.shift();Fh(r).Go(),yield aV(r,()=>r.remoteSyncer.rejectFailedWrite(c.batchId,i)),yield b_(r)}var a}),function(r,i){return t.apply(this,arguments)})(n,e)),lV(n)&&cV(n)}),pR.apply(this,arguments)}function uV(n,e){return gR.apply(this,arguments)}function gR(){return gR=(0,ye.Z)(function*(n,e){const t=Je(n);t.asyncQueue.verifyOperationInProgress(),Ue("RemoteStore","RemoteStore received new credentials");const r=Nh(t);t.Au.add(3),yield v_(t),r&&t.Pu.set("Unknown"),yield t.remoteSyncer.handleCredentialChange(e),t.Au.delete(3),yield xb(t)}),gR.apply(this,arguments)}function mR(n,e){return _R.apply(this,arguments)}function _R(){return _R=(0,ye.Z)(function*(n,e){const t=Je(n);e?(t.Au.delete(2),yield xb(t)):e||(t.Au.add(2),yield v_(t),t.Pu.set("Unknown"))}),_R.apply(this,arguments)}function w_(n){return n.Vu||(n.Vu=function(e,t,r){const i=Je(e);return i.lu(),new Jz(t,i.connection,i.authCredentials,i.appCheckCredentials,i.serializer,r)}(n.datastore,n.asyncQueue,{oo:o3.bind(null,n),co:a3.bind(null,n),eu:l3.bind(null,n)}),n.Ru.push(function(){var e=(0,ye.Z)(function*(t){t?(n.Vu.Go(),sR(n)?iR(n):n.Pu.set("Unknown")):(yield n.Vu.stop(),oV(n))});return function(t){return e.apply(this,arguments)}}())),n.Vu}function Fh(n){return n.Su||(n.Su=function(e,t,r){const i=Je(e);return i.lu(),new e3(t,i.connection,i.authCredentials,i.appCheckCredentials,i.serializer,r)}(n.datastore,n.asyncQueue,{oo:d3.bind(null,n),co:p3.bind(null,n),cu:h3.bind(null,n),uu:f3.bind(null,n)}),n.Ru.push(function(){var e=(0,ye.Z)(function*(t){t?(n.Su.Go(),yield b_(n)):(yield n.Su.stop(),n.Tu.length>0&&(Ue("RemoteStore",`Stopping write stream with ${n.Tu.length} pending writes`),n.Tu=[]))});return function(t){return e.apply(this,arguments)}}())),n.Su}class yR{constructor(e,t,r,i,a){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=r,this.op=i,this.removalCallback=a,this.deferred=new di,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(c=>{})}static createAndSchedule(e,t,r,i,a){const c=Date.now()+r,f=new yR(e,t,c,i,a);return f.start(r),f}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){null!==this.timerHandle&&(this.clearTimeout(),this.deferred.reject(new Pe(he.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>null!==this.timerHandle?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){null!==this.timerHandle&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function E_(n,e){if(zr("AsyncQueue",`${e}: ${n}`),Ch(n))return new Pe(he.UNAVAILABLE,`${e}: ${n}`);throw n}class C_{constructor(e){this.comparator=e?(t,r)=>e(t,r)||Xe.comparator(t.key,r.key):(t,r)=>Xe.comparator(t.key,r.key),this.keyedMap=db(),this.sortedSet=new er(this.comparator)}static emptySet(e){return new C_(e.comparator)}has(e){return null!=this.keyedMap.get(e)}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((t,r)=>(e(t),!1))}add(e){const t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){const t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof C_)||this.size!==e.size)return!1;const t=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;t.hasNext();){const i=t.getNext().key,a=r.getNext().key;if(!i.isEqual(a))return!1}return!0}toString(){const e=[];return this.forEach(t=>{e.push(t.toString())}),0===e.length?"DocumentSet ()":"DocumentSet (\n  "+e.join("  \n")+"\n)"}copy(e,t){const r=new C_;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=t,r}}class dV{constructor(){this.Du=new er(Xe.comparator)}track(e){const t=e.doc.key,r=this.Du.get(t);r?0!==e.type&&3===r.type?this.Du=this.Du.insert(t,e):3===e.type&&1!==r.type?this.Du=this.Du.insert(t,{type:r.type,doc:e.doc}):2===e.type&&2===r.type?this.Du=this.Du.insert(t,{type:2,doc:e.doc}):2===e.type&&0===r.type?this.Du=this.Du.insert(t,{type:0,doc:e.doc}):1===e.type&&0===r.type?this.Du=this.Du.remove(t):1===e.type&&2===r.type?this.Du=this.Du.insert(t,{type:1,doc:r.doc}):0===e.type&&1===r.type?this.Du=this.Du.insert(t,{type:2,doc:e.doc}):ct():this.Du=this.Du.insert(t,e)}Cu(){const e=[];return this.Du.inorderTraversal((t,r)=>{e.push(r)}),e}}class I_{constructor(e,t,r,i,a,c,f,_,w){this.query=e,this.docs=t,this.oldDocs=r,this.docChanges=i,this.mutatedKeys=a,this.fromCache=c,this.syncStateChanged=f,this.excludesMetadataChanges=_,this.hasCachedResults=w}static fromInitialDocuments(e,t,r,i,a){const c=[];return t.forEach(f=>{c.push({type:0,doc:f})}),new I_(e,t,C_.emptySet(t),c,r,i,!0,!1,a)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&cb(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const t=this.docChanges,r=e.docChanges;if(t.length!==r.length)return!1;for(let i=0;i<t.length;i++)if(t[i].type!==r[i].type||!t[i].doc.isEqual(r[i].doc))return!1;return!0}}class g3{constructor(){this.xu=void 0,this.listeners=[]}}class m3{constructor(){this.queries=new Wu(e=>ML(e),cb),this.onlineState="Unknown",this.Nu=new Set}}function vR(n,e){return bR.apply(this,arguments)}function bR(){return bR=(0,ye.Z)(function*(n,e){const t=Je(n),r=e.query;let i=!1,a=t.queries.get(r);if(a||(i=!0,a=new g3),i)try{a.xu=yield t.onListen(r)}catch(c){const f=E_(c,`Initialization of query '${yx(e.query)}' failed`);return void e.onError(f)}t.queries.set(r,a),a.listeners.push(e),e.ku(t.onlineState),a.xu&&e.Mu(a.xu)&&CR(t)}),bR.apply(this,arguments)}function wR(n,e){return ER.apply(this,arguments)}function ER(){return ER=(0,ye.Z)(function*(n,e){const t=Je(n),r=e.query;let i=!1;const a=t.queries.get(r);if(a){const c=a.listeners.indexOf(e);c>=0&&(a.listeners.splice(c,1),i=0===a.listeners.length)}if(i)return t.queries.delete(r),t.onUnlisten(r)}),ER.apply(this,arguments)}function _3(n,e){const t=Je(n);let r=!1;for(const i of e){const c=t.queries.get(i.query);if(c){for(const f of c.listeners)f.Mu(i)&&(r=!0);c.xu=i}}r&&CR(t)}function y3(n,e,t){const r=Je(n),i=r.queries.get(e);if(i)for(const a of i.listeners)a.onError(t);r.queries.delete(e)}function CR(n){n.Nu.forEach(e=>{e.next()})}class IR{constructor(e,t,r){this.query=e,this.Ou=t,this.$u=!1,this.Fu=null,this.onlineState="Unknown",this.options=r||{}}Mu(e){if(!this.options.includeMetadataChanges){const r=[];for(const i of e.docChanges)3!==i.type&&r.push(i);e=new I_(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let t=!1;return this.$u?this.Bu(e)&&(this.Ou.next(e),t=!0):this.Lu(e,this.onlineState)&&(this.qu(e),t=!0),this.Fu=e,t}onError(e){this.Ou.error(e)}ku(e){this.onlineState=e;let t=!1;return this.Fu&&!this.$u&&this.Lu(this.Fu,e)&&(this.qu(this.Fu),t=!0),t}Lu(e,t){return!e.fromCache||(!this.options.Uu||!("Offline"!==t))&&(!e.docs.isEmpty()||e.hasCachedResults||"Offline"===t)}Bu(e){return e.docChanges.length>0||!!(e.syncStateChanged||this.Fu&&this.Fu.hasPendingWrites!==e.hasPendingWrites)&&!0===this.options.includeMetadataChanges}qu(e){e=I_.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.$u=!0,this.Ou.next(e)}}class v3{constructor(e,t){this.Ku=e,this.byteLength=t}Gu(){return"metadata"in this.Ku}}class hV{constructor(e){this.serializer=e}ir(e){return Ac(this.serializer,e)}rr(e){return e.metadata.exists?u2(this.serializer,e.document,!1):ur.newNoDocument(this.ir(e.metadata.name),this.ur(e.metadata.readTime))}ur(e){return Gr(e)}}class b3{constructor(e,t,r){this.Qu=e,this.localStore=t,this.serializer=r,this.queries=[],this.documents=[],this.collectionGroups=new Set,this.progress=fV(e)}ju(e){this.progress.bytesLoaded+=e.byteLength;let t=this.progress.documentsLoaded;if(e.Ku.namedQuery)this.queries.push(e.Ku.namedQuery);else if(e.Ku.documentMetadata){this.documents.push({metadata:e.Ku.documentMetadata}),e.Ku.documentMetadata.exists||++t;const r=_n.fromString(e.Ku.documentMetadata.name);this.collectionGroups.add(r.get(r.length-2))}else e.Ku.document&&(this.documents[this.documents.length-1].document=e.Ku.document,++t);return t!==this.progress.documentsLoaded?(this.progress.documentsLoaded=t,Object.assign({},this.progress)):null}zu(e){const t=new Map,r=new hV(this.serializer);for(const i of e)if(i.metadata.queries){const a=r.ir(i.metadata.name);for(const c of i.metadata.queries){const f=(t.get(c)||tn()).add(a);t.set(c,f)}}return t}complete(){var e=this;return(0,ye.Z)(function*(){const t=yield function Wz(n,e,t,r){return qx.apply(this,arguments)}(e.localStore,new hV(e.serializer),e.documents,e.Qu.id),r=e.zu(e.documents);for(const i of e.queries)yield Kz(e.localStore,i,r.get(i.name));return e.progress.taskState="Success",{progress:e.progress,Wu:e.collectionGroups,Hu:t}})()}}function fV(n){return{taskState:"Running",documentsLoaded:0,bytesLoaded:0,totalDocuments:n.totalDocuments,totalBytes:n.totalBytes}}class pV{constructor(e){this.key=e}}class gV{constructor(e){this.key=e}}class mV{constructor(e,t){this.query=e,this.Ju=t,this.Yu=null,this.hasCachedResults=!1,this.current=!1,this.Xu=tn(),this.mutatedKeys=tn(),this.Zu=RL(e),this.tc=new C_(this.Zu)}get ec(){return this.Ju}nc(e,t){const r=t?t.sc:new dV,i=t?t.tc:this.tc;let a=t?t.mutatedKeys:this.mutatedKeys,c=i,f=!1;const _="F"===this.query.limitType&&i.size===this.query.limit?i.last():null,w="L"===this.query.limitType&&i.size===this.query.limit?i.first():null;if(e.inorderTraversal((S,x)=>{const L=i.get(S),U=ub(this.query,x)?x:null,W=!!L&&this.mutatedKeys.has(L.key),ie=!!U&&(U.hasLocalMutations||this.mutatedKeys.has(U.key)&&U.hasCommittedMutations);let we=!1;L&&U?L.data.isEqual(U.data)?W!==ie&&(r.track({type:3,doc:U}),we=!0):this.ic(L,U)||(r.track({type:2,doc:U}),we=!0,(_&&this.Zu(U,_)>0||w&&this.Zu(U,w)<0)&&(f=!0)):!L&&U?(r.track({type:0,doc:U}),we=!0):L&&!U&&(r.track({type:1,doc:L}),we=!0,(_||w)&&(f=!0)),we&&(U?(c=c.add(U),a=ie?a.add(S):a.delete(S)):(c=c.delete(S),a=a.delete(S)))}),null!==this.query.limit)for(;c.size>this.query.limit;){const S="F"===this.query.limitType?c.last():c.first();c=c.delete(S.key),a=a.delete(S.key),r.track({type:1,doc:S})}return{tc:c,sc:r,ji:f,mutatedKeys:a}}ic(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,r){const i=this.tc;this.tc=e.tc,this.mutatedKeys=e.mutatedKeys;const a=e.sc.Cu();a.sort((w,S)=>function(x,L){const U=W=>{switch(W){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return ct()}};return U(x)-U(L)}(w.type,S.type)||this.Zu(w.doc,S.doc)),this.rc(r);const c=t?this.oc():[],f=0===this.Xu.size&&this.current?1:0,_=f!==this.Yu;return this.Yu=f,0!==a.length||_?{snapshot:new I_(this.query,e.tc,i,a,e.mutatedKeys,0===f,_,!1,!!r&&r.resumeToken.approximateByteSize()>0),uc:c}:{uc:c}}ku(e){return this.current&&"Offline"===e?(this.current=!1,this.applyChanges({tc:this.tc,sc:new dV,mutatedKeys:this.mutatedKeys,ji:!1},!1)):{uc:[]}}cc(e){return!this.Ju.has(e)&&!!this.tc.has(e)&&!this.tc.get(e).hasLocalMutations}rc(e){e&&(e.addedDocuments.forEach(t=>this.Ju=this.Ju.add(t)),e.modifiedDocuments.forEach(t=>{}),e.removedDocuments.forEach(t=>this.Ju=this.Ju.delete(t)),this.current=e.current)}oc(){if(!this.current)return[];const e=this.Xu;this.Xu=tn(),this.tc.forEach(r=>{this.cc(r.key)&&(this.Xu=this.Xu.add(r.key))});const t=[];return e.forEach(r=>{this.Xu.has(r)||t.push(new gV(r))}),this.Xu.forEach(r=>{e.has(r)||t.push(new pV(r))}),t}ac(e){this.Ju=e.sr,this.Xu=tn();const t=this.nc(e.documents);return this.applyChanges(t,!0)}hc(){return I_.fromInitialDocuments(this.query,this.tc,this.mutatedKeys,0===this.Yu,this.hasCachedResults)}}class w3{constructor(e,t,r){this.query=e,this.targetId=t,this.view=r}}class E3{constructor(e){this.key=e,this.lc=!1}}class C3{constructor(e,t,r,i,a,c){this.localStore=e,this.remoteStore=t,this.eventManager=r,this.sharedClientState=i,this.currentUser=a,this.maxConcurrentLimboResolutions=c,this.fc={},this.dc=new Wu(f=>ML(f),cb),this._c=new Map,this.wc=new Set,this.mc=new er(Xe.comparator),this.gc=new Map,this.yc=new Vx,this.Ic={},this.Tc=new Map,this.Ec=ig.kn(),this.onlineState="Unknown",this.Ac=void 0}get isPrimaryClient(){return!0===this.Ac}}function I3(n,e){return DR.apply(this,arguments)}function DR(){return DR=(0,ye.Z)(function*(n,e){const t=KR(n);let r,i;const a=t.dc.get(e);if(a)r=a.targetId,t.sharedClientState.addLocalQueryTarget(r),i=a.view.hc();else{const c=yield __(t.localStore,Ks(e)),f=t.sharedClientState.addLocalQueryTarget(c.targetId);r=c.targetId,i=yield SR(t,e,r,"current"===f,c.resumeToken),t.isPrimaryClient&&TI(t.remoteStore,c)}return i}),DR.apply(this,arguments)}function SR(n,e,t,r,i){return TR.apply(this,arguments)}function TR(){return TR=(0,ye.Z)(function*(n,e,t,r,i){n.Rc=(x,L,U)=>{return(W=(0,ye.Z)(function*(ie,we,qe,ot){let tt=we.view.nc(qe);tt.ji&&(tt=yield EI(ie.localStore,we.query,!1).then(({documents:Yt})=>we.view.nc(Yt,tt)));const Dt=ot&&ot.targetChanges.get(we.targetId),zt=we.view.applyChanges(tt,ie.isPrimaryClient,Dt);return LR(ie,we.targetId,zt.uc),zt.snapshot}),function(ie,we,qe,ot){return W.apply(this,arguments)})(n,x,L,U);var W};const a=yield EI(n.localStore,e,!0),c=new mV(e,a.sr),f=c.nc(a.documents),_=_b.createSynthesizedTargetChangeForCurrentChange(t,r&&"Offline"!==n.onlineState,i),w=c.applyChanges(f,n.isPrimaryClient,_);LR(n,t,w.uc);const S=new w3(e,t,c);return n.dc.set(e,S),n._c.has(t)?n._c.get(t).push(e):n._c.set(t,[e]),w.snapshot}),TR.apply(this,arguments)}function D3(n,e){return AR.apply(this,arguments)}function AR(){return AR=(0,ye.Z)(function*(n,e){const t=Je(n),r=t.dc.get(e),i=t._c.get(r.targetId);if(i.length>1)return t._c.set(r.targetId,i.filter(a=>!cb(a,e))),void t.dc.delete(e);t.isPrimaryClient?(t.sharedClientState.removeLocalQueryTarget(r.targetId),t.sharedClientState.isActiveQueryTarget(r.targetId)||(yield y_(t.localStore,r.targetId,!1).then(()=>{t.sharedClientState.clearQueryState(r.targetId),Rb(t.remoteStore,r.targetId),D_(t,r.targetId)}).catch(Eh))):(D_(t,r.targetId),yield y_(t.localStore,r.targetId,!0))}),AR.apply(this,arguments)}function MR(){return MR=(0,ye.Z)(function*(n,e,t){const r=ZR(n);try{const i=yield function(a,c){const f=Je(a),_=_r.now(),w=c.reduce((L,U)=>L.add(U.key),tn());let S,x;return f.persistence.runTransaction("Locally write mutations","readwrite",L=>{let U=ho(),W=tn();return f.Xi.getEntries(L,w).next(ie=>{U=ie,U.forEach((we,qe)=>{qe.isValidDocument()||(W=W.add(we))})}).next(()=>f.localDocuments.getOverlayedDocuments(L,U)).next(ie=>{S=ie;const we=[];for(const qe of c){const ot=ez(qe,S.get(qe.key).overlayedDocument);null!=ot&&we.push(new Ku(qe.key,ot,gL(ot.value.mapValue),yr.exists(!0)))}return f.mutationQueue.addMutationBatch(L,_,we,c)}).next(ie=>{x=ie;const we=ie.applyToLocalDocumentSet(S,W);return f.documentOverlayCache.saveOverlays(L,ie.batchId,we)})}).then(()=>({batchId:x.batchId,changes:OL(S)}))}(r.localStore,e);r.sharedClientState.addPendingMutation(i.batchId),function(a,c,f){let _=a.Ic[a.currentUser.toKey()];_||(_=new er(Gt)),_=_.insert(c,f),a.Ic[a.currentUser.toKey()]=_}(r,i.batchId,t),yield Yu(r,i.changes),yield b_(r.remoteStore)}catch(i){const a=E_(i,"Failed to persist write");t.reject(a)}}),MR.apply(this,arguments)}function _V(n,e){return xR.apply(this,arguments)}function xR(){return xR=(0,ye.Z)(function*(n,e){const t=Je(n);try{const r=yield Gz(t.localStore,e);e.targetChanges.forEach((i,a)=>{const c=t.gc.get(a);c&&(It(i.addedDocuments.size+i.modifiedDocuments.size+i.removedDocuments.size<=1),i.addedDocuments.size>0?c.lc=!0:i.modifiedDocuments.size>0?It(c.lc):i.removedDocuments.size>0&&(It(c.lc),c.lc=!1))}),yield Yu(t,r,e)}catch(r){yield Eh(r)}}),xR.apply(this,arguments)}function yV(n,e,t){const r=Je(n);if(r.isPrimaryClient&&0===t||!r.isPrimaryClient&&1===t){const i=[];r.dc.forEach((a,c)=>{const f=c.view.ku(e);f.snapshot&&i.push(f.snapshot)}),function(a,c){const f=Je(a);f.onlineState=c;let _=!1;f.queries.forEach((w,S)=>{for(const x of S.listeners)x.ku(c)&&(_=!0)}),_&&CR(f)}(r.eventManager,e),i.length&&r.fc.eu(i),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}function T3(n,e,t){return RR.apply(this,arguments)}function RR(){return RR=(0,ye.Z)(function*(n,e,t){const r=Je(n);r.sharedClientState.updateQueryState(e,"rejected",t);const i=r.gc.get(e),a=i&&i.key;if(a){let c=new er(Xe.comparator);c=c.insert(a,ur.newNoDocument(a,At.min()));const f=tn().add(a),_=new mb(At.min(),new Map,new er(Gt),c,f);yield _V(r,_),r.mc=r.mc.remove(a),r.gc.delete(e),VR(r)}else yield y_(r.localStore,e,!1).then(()=>D_(r,e,t)).catch(Eh)}),RR.apply(this,arguments)}function A3(n,e){return kR.apply(this,arguments)}function kR(){return kR=(0,ye.Z)(function*(n,e){const t=Je(n),r=e.batch.batchId;try{const i=yield zz(t.localStore,e);FR(t,r,null),NR(t,r),t.sharedClientState.updateMutationState(r,"acknowledged"),yield Yu(t,i)}catch(i){yield Eh(i)}}),kR.apply(this,arguments)}function M3(n,e,t){return OR.apply(this,arguments)}function OR(){return OR=(0,ye.Z)(function*(n,e,t){const r=Je(n);try{const i=yield function(a,c){const f=Je(a);return f.persistence.runTransaction("Reject batch","readwrite-primary",_=>{let w;return f.mutationQueue.lookupMutationBatch(_,c).next(S=>(It(null!==S),w=S.keys(),f.mutationQueue.removeMutationBatch(_,S))).next(()=>f.mutationQueue.performConsistencyCheck(_)).next(()=>f.documentOverlayCache.removeOverlaysForBatchId(_,w,c)).next(()=>f.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(_,w)).next(()=>f.localDocuments.getDocuments(_,w))})}(r.localStore,e);FR(r,e,t),NR(r,e),r.sharedClientState.updateMutationState(e,"rejected",t),yield Yu(r,i)}catch(i){yield Eh(i)}}),OR.apply(this,arguments)}function PR(){return PR=(0,ye.Z)(function*(n,e){const t=Je(n);Nh(t.remoteStore)||Ue("SyncEngine","The network is disabled. The task returned by 'awaitPendingWrites()' will not complete until the network is enabled.");try{const r=yield function(a){const c=Je(a);return c.persistence.runTransaction("Get highest unacknowledged batch id","readonly",f=>c.mutationQueue.getHighestUnacknowledgedBatchId(f))}(t.localStore);if(-1===r)return void e.resolve();const i=t.Tc.get(r)||[];i.push(e),t.Tc.set(r,i)}catch(r){const i=E_(r,"Initialization of waitForPendingWrites() operation failed");e.reject(i)}}),PR.apply(this,arguments)}function NR(n,e){(n.Tc.get(e)||[]).forEach(t=>{t.resolve()}),n.Tc.delete(e)}function FR(n,e,t){const r=Je(n);let i=r.Ic[r.currentUser.toKey()];if(i){const a=i.get(e);a&&(t?a.reject(t):a.resolve(),i=i.remove(e)),r.Ic[r.currentUser.toKey()]=i}}function D_(n,e,t=null){n.sharedClientState.removeLocalQueryTarget(e);for(const r of n._c.get(e))n.dc.delete(r),t&&n.fc.vc(r,t);n._c.delete(e),n.isPrimaryClient&&n.yc.ps(e).forEach(r=>{n.yc.containsKey(r)||vV(n,r)})}function vV(n,e){n.wc.delete(e.path.canonicalString());const t=n.mc.get(e);null!==t&&(Rb(n.remoteStore,t),n.mc=n.mc.remove(e),n.gc.delete(t),VR(n))}function LR(n,e,t){for(const r of t)r instanceof pV?(n.yc.addReference(r.key,e),R3(n,r)):r instanceof gV?(Ue("SyncEngine","Document no longer in limbo: "+r.key),n.yc.removeReference(r.key,e),n.yc.containsKey(r.key)||vV(n,r.key)):ct()}function R3(n,e){const t=e.key,r=t.path.canonicalString();n.mc.get(t)||n.wc.has(r)||(Ue("SyncEngine","New document in limbo: "+t),n.wc.add(r),VR(n))}function VR(n){for(;n.wc.size>0&&n.mc.size<n.maxConcurrentLimboResolutions;){const e=n.wc.values().next().value;n.wc.delete(e);const t=new Xe(_n.fromString(e)),r=n.Ec.next();n.gc.set(r,new E3(t)),n.mc=n.mc.insert(t,r),TI(n.remoteStore,new Zu(Ks(l_(t.path)),r,"TargetPurposeLimboResolution",Po.ct))}}function Yu(n,e,t){return BR.apply(this,arguments)}function BR(){return BR=(0,ye.Z)(function*(n,e,t){const r=Je(n),i=[],a=[],c=[];var f;r.dc.isEmpty()||(r.dc.forEach((f,_)=>{c.push(r.Rc(_,e,t).then(w=>{if((w||t)&&r.isPrimaryClient&&r.sharedClientState.updateQueryState(_.targetId,w?.fromCache?"not-current":"current"),w){i.push(w);const S=$x.Bi(_.targetId,w);a.push(S)}}))}),yield Promise.all(c),r.fc.eu(i),yield(f=(0,ye.Z)(function*(_,w){const S=Je(_);try{yield S.persistence.runTransaction("notifyLocalViewChanges","readwrite",x=>ae.forEach(w,L=>ae.forEach(L.$i,U=>S.persistence.referenceDelegate.addReference(x,L.targetId,U)).next(()=>ae.forEach(L.Fi,U=>S.persistence.referenceDelegate.removeReference(x,L.targetId,U)))))}catch(x){if(!Ch(x))throw x;Ue("LocalStore","Failed to update sequence numbers: "+x)}for(const x of w){const L=x.targetId;if(!x.fromCache){const U=S.Hi.get(L),ie=U.withLastLimboFreeSnapshotVersion(U.snapshotVersion);S.Hi=S.Hi.insert(L,ie)}}}),function(_,w){return f.apply(this,arguments)})(r.localStore,a))}),BR.apply(this,arguments)}function k3(n,e){return UR.apply(this,arguments)}function UR(){return UR=(0,ye.Z)(function*(n,e){const t=Je(n);if(!t.currentUser.isEqual(e)){Ue("SyncEngine","User change. New user:",e.toKey());const r=yield W2(t.localStore,e);t.currentUser=e,(i=t).Tc.forEach(c=>{c.forEach(f=>{f.reject(new Pe(he.CANCELLED,"'waitForPendingWrites' promise is rejected due to a user change."))})}),i.Tc.clear(),t.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),yield Yu(t,r.tr)}var i}),UR.apply(this,arguments)}function O3(n,e){const t=Je(n),r=t.gc.get(e);if(r&&r.lc)return tn().add(r.key);{let i=tn();const a=t._c.get(e);if(!a)return i;for(const c of a){const f=t.dc.get(c);i=i.unionWith(f.view.ec)}return i}}function P3(n,e){return HR.apply(this,arguments)}function HR(){return HR=(0,ye.Z)(function*(n,e){const t=Je(n),r=yield EI(t.localStore,e.query,!0),i=e.view.ac(r);return t.isPrimaryClient&&LR(t,e.targetId,i.uc),i}),HR.apply(this,arguments)}function N3(n,e){return jR.apply(this,arguments)}function jR(){return jR=(0,ye.Z)(function*(n,e){const t=Je(n);return Q2(t.localStore,e).then(r=>Yu(t,r))}),jR.apply(this,arguments)}function F3(n,e,t,r){return $R.apply(this,arguments)}function $R(){return $R=(0,ye.Z)(function*(n,e,t,r){const i=Je(n),a=yield function(c,f){const _=Je(c),w=Je(_.mutationQueue);return _.persistence.runTransaction("Lookup mutation documents","readonly",S=>w.Vn(S,f).next(x=>x?_.localDocuments.getDocuments(S,x):ae.resolve(null)))}(i.localStore,e);var f;null!==a?("pending"===t?yield b_(i.remoteStore):"acknowledged"===t||"rejected"===t?(FR(i,e,r||null),NR(i,e),f=e,Je(Je(i.localStore).mutationQueue).Dn(f)):ct(),yield Yu(i,a)):Ue("SyncEngine","Cannot apply mutation batch with id: "+e)}),$R.apply(this,arguments)}function zR(){return zR=(0,ye.Z)(function*(n,e){const t=Je(n);if(KR(t),ZR(t),!0===e&&!0!==t.Ac){const r=t.sharedClientState.getAllActiveQueryTargets(),i=yield bV(t,r.toArray());t.Ac=!0,yield mR(t.remoteStore,!0);for(const a of i)TI(t.remoteStore,a)}else if(!1===e&&!1!==t.Ac){const r=[];let i=Promise.resolve();t._c.forEach((a,c)=>{t.sharedClientState.isLocalQueryTarget(c)?r.push(c):i=i.then(()=>(D_(t,c),y_(t.localStore,c,!0))),Rb(t.remoteStore,c)}),yield i,yield bV(t,r),function(a){const c=Je(a);c.gc.forEach((f,_)=>{Rb(c.remoteStore,_)}),c.yc.Is(),c.gc=new Map,c.mc=new er(Xe.comparator)}(t),t.Ac=!1,yield mR(t.remoteStore,!1)}}),zR.apply(this,arguments)}function bV(n,e,t){return GR.apply(this,arguments)}function GR(){return GR=(0,ye.Z)(function*(n,e,t){const r=Je(n),i=[],a=[];for(const c of e){let f;const _=r._c.get(c);if(_&&0!==_.length){f=yield __(r.localStore,Ks(_[0]));for(const w of _){const S=r.dc.get(w),x=yield P3(r,S);x.snapshot&&a.push(x.snapshot)}}else{const w=yield Y2(r.localStore,c);f=yield __(r.localStore,w),yield SR(r,wV(w),c,!1,f.resumeToken)}i.push(f)}return r.fc.eu(a),i}),GR.apply(this,arguments)}function wV(n){return TL(n.path,n.collectionGroup,n.orderBy,n.filters,n.limit,"F",n.startAt,n.endAt)}function V3(n){const e=Je(n);return Je(Je(e.localStore).persistence).Mi()}function B3(n,e,t,r){return qR.apply(this,arguments)}function qR(){return qR=(0,ye.Z)(function*(n,e,t,r){const i=Je(n);if(i.Ac)return void Ue("SyncEngine","Ignoring unexpected query state notification.");const a=i._c.get(e);if(a&&a.length>0)switch(t){case"current":case"not-current":{const c=yield Q2(i.localStore,xL(a[0])),f=mb.createSynthesizedRemoteEventForCurrentChange(e,"current"===t,hi.EMPTY_BYTE_STRING);yield Yu(i,c,f);break}case"rejected":yield y_(i.localStore,e,!0),D_(i,e,r);break;default:ct()}}),qR.apply(this,arguments)}function U3(n,e,t){return WR.apply(this,arguments)}function WR(){return WR=(0,ye.Z)(function*(n,e,t){const r=KR(n);if(r.Ac){for(const i of e){if(r._c.has(i)){Ue("SyncEngine","Adding an already active target "+i);continue}const a=yield Y2(r.localStore,i),c=yield __(r.localStore,a);yield SR(r,wV(a),c.targetId,!1,c.resumeToken),TI(r.remoteStore,c)}for(const i of t)r._c.has(i)&&(yield y_(r.localStore,i,!1).then(()=>{Rb(r.remoteStore,i),D_(r,i)}).catch(Eh))}}),WR.apply(this,arguments)}function KR(n){const e=Je(n);return e.remoteStore.remoteSyncer.applyRemoteEvent=_V.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=O3.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=T3.bind(null,e),e.fc.eu=_3.bind(null,e.eventManager),e.fc.vc=y3.bind(null,e.eventManager),e}function ZR(n){const e=Je(n);return e.remoteStore.remoteSyncer.applySuccessfulWrite=A3.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=M3.bind(null,e),e}class kb{constructor(){this.synchronizeTabs=!1}initialize(e){var t=this;return(0,ye.Z)(function*(){t.serializer=Mb(e.databaseInfo.databaseId),t.sharedClientState=t.createSharedClientState(e),t.persistence=t.createPersistence(e),yield t.persistence.start(),t.localStore=t.createLocalStore(e),t.gcScheduler=t.createGarbageCollectionScheduler(e,t.localStore),t.indexBackfillerScheduler=t.createIndexBackfillerScheduler(e,t.localStore)})()}createGarbageCollectionScheduler(e,t){return null}createIndexBackfillerScheduler(e,t){return null}createLocalStore(e){return q2(this.persistence,new G2,e.initialUser,this.serializer)}createPersistence(e){return new Bx(vI.js,this.serializer)}createSharedClientState(e){return new tV}terminate(){var e=this;return(0,ye.Z)(function*(){e.gcScheduler&&e.gcScheduler.stop(),yield e.sharedClientState.shutdown(),yield e.persistence.shutdown()})()}}class YR extends kb{constructor(e,t,r){super(),this.bc=e,this.cacheSizeBytes=t,this.forceOwnership=r,this.synchronizeTabs=!1}initialize(e){var t=()=>super.initialize,r=this;return(0,ye.Z)(function*(){yield t().call(r,e),yield r.bc.initialize(r,e),yield ZR(r.bc.syncEngine),yield b_(r.bc.remoteStore),yield r.persistence.pi(()=>(r.gcScheduler&&!r.gcScheduler.started&&r.gcScheduler.start(),r.indexBackfillerScheduler&&!r.indexBackfillerScheduler.started&&r.indexBackfillerScheduler.start(),Promise.resolve()))})()}createLocalStore(e){return q2(this.persistence,new G2,e.initialUser,this.serializer)}createGarbageCollectionScheduler(e,t){return new F2(this.persistence.referenceDelegate.garbageCollector,e.asyncQueue,t)}createIndexBackfillerScheduler(e,t){const r=new h$(t,this.persistence);return new d$(e.asyncQueue,r)}createPersistence(e){const t=jx(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey),r=void 0!==this.cacheSizeBytes?Es.withCacheSize(this.cacheSizeBytes):Es.DEFAULT;return new Hx(this.synchronizeTabs,t,e.clientId,r,e.asyncQueue,rV(),SI(),this.serializer,this.sharedClientState,!!this.forceOwnership)}createSharedClientState(e){return new tV}}class EV extends YR{constructor(e,t){super(e,t,!1),this.bc=e,this.cacheSizeBytes=t,this.synchronizeTabs=!0}initialize(e){var t=()=>super.initialize,r=this;return(0,ye.Z)(function*(){yield t().call(r,e);const i=r.bc.syncEngine;r.sharedClientState instanceof Qx&&(r.sharedClientState.syncEngine={Qr:F3.bind(null,i),jr:B3.bind(null,i),zr:U3.bind(null,i),Mi:V3.bind(null,i),Gr:N3.bind(null,i)},yield r.sharedClientState.start()),yield r.persistence.pi(function(){var a=(0,ye.Z)(function*(c){yield function L3(n,e){return zR.apply(this,arguments)}(r.bc.syncEngine,c),r.gcScheduler&&(c&&!r.gcScheduler.started?r.gcScheduler.start():c||r.gcScheduler.stop()),r.indexBackfillerScheduler&&(c&&!r.indexBackfillerScheduler.started?r.indexBackfillerScheduler.start():c||r.indexBackfillerScheduler.stop())});return function(c){return a.apply(this,arguments)}}())})()}createSharedClientState(e){const t=rV();if(!Qx.D(t))throw new Pe(he.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");const r=jx(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey);return new Qx(t,e.asyncQueue,r,e.clientId,e.initialUser)}}class S_{initialize(e,t){var r=this;return(0,ye.Z)(function*(){r.localStore||(r.localStore=e.localStore,r.sharedClientState=e.sharedClientState,r.datastore=r.createDatastore(t),r.remoteStore=r.createRemoteStore(t),r.eventManager=r.createEventManager(t),r.syncEngine=r.createSyncEngine(t,!e.synchronizeTabs),r.sharedClientState.onlineStateHandler=i=>yV(r.syncEngine,i,1),r.remoteStore.remoteSyncer.handleCredentialChange=k3.bind(null,r.syncEngine),yield mR(r.remoteStore,r.syncEngine.isPrimaryClient))})()}createEventManager(e){return new m3}createDatastore(e){const t=Mb(e.databaseInfo.databaseId),r=new Xz(e.databaseInfo);return new t3(e.authCredentials,e.appCheckCredentials,r,t)}createRemoteStore(e){return t=this.localStore,r=this.datastore,i=e.asyncQueue,a=f=>yV(this.syncEngine,f,0),c=nV.D()?new nV:new Zz,new s3(t,r,i,a,c);var t,r,i,a,c}createSyncEngine(e,t){return function(r,i,a,c,f,_,w){const S=new C3(r,i,a,c,f,_);return w&&(S.Ac=!0),S}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}terminate(){return(e=(0,ye.Z)(function*(t){const r=Je(t);Ue("RemoteStore","RemoteStore shutting down."),r.Au.add(5),yield v_(r),r.vu.shutdown(),r.Pu.set("Unknown")}),function(t){return e.apply(this,arguments)})(this.remoteStore);var e}}function CV(n,e=10240){let t=0;return{read:()=>(0,ye.Z)(function*(){if(t<n.byteLength){const r={value:n.slice(t,t+e),done:!1};return t+=e,r}return{done:!0}})(),cancel:()=>(0,ye.Z)(function*(){})(),releaseLock(){},closed:Promise.resolve()}}class MI{constructor(e){this.observer=e,this.muted=!1}next(e){this.observer.next&&this.Vc(this.observer.next,e)}error(e){this.observer.error?this.Vc(this.observer.error,e):zr("Uncaught Error in snapshot listener:",e.toString())}Sc(){this.muted=!0}Vc(e,t){this.muted||setTimeout(()=>{this.muted||e(t)},0)}}class $3{constructor(e,t){this.Dc=e,this.serializer=t,this.metadata=new di,this.buffer=new Uint8Array,this.Cc=new TextDecoder("utf-8"),this.xc().then(r=>{r&&r.Gu()?this.metadata.resolve(r.Ku.metadata):this.metadata.reject(new Error(`The first element of the bundle is not a metadata, it is\n             ${JSON.stringify(r?.Ku)}`))},r=>this.metadata.reject(r))}close(){return this.Dc.cancel()}getMetadata(){var e=this;return(0,ye.Z)(function*(){return e.metadata.promise})()}Pc(){var e=this;return(0,ye.Z)(function*(){return yield e.getMetadata(),e.xc()})()}xc(){var e=this;return(0,ye.Z)(function*(){const t=yield e.Nc();if(null===t)return null;const r=e.Cc.decode(t),i=Number(r);isNaN(i)&&e.kc(`length string (${r}) is not valid number`);const a=yield e.Mc(i);return new v3(JSON.parse(a),t.length+i)})()}Oc(){return this.buffer.findIndex(e=>e==="{".charCodeAt(0))}Nc(){var e=this;return(0,ye.Z)(function*(){for(;e.Oc()<0&&!(yield e.$c()););if(0===e.buffer.length)return null;const t=e.Oc();t<0&&e.kc("Reached the end of bundle when a length string is expected.");const r=e.buffer.slice(0,t);return e.buffer=e.buffer.slice(t),r})()}Mc(e){var t=this;return(0,ye.Z)(function*(){for(;t.buffer.length<e;)(yield t.$c())&&t.kc("Reached the end of bundle when more is expected.");const r=t.Cc.decode(t.buffer.slice(0,e));return t.buffer=t.buffer.slice(e),r})()}kc(e){throw this.Dc.cancel(),new Error(`Invalid bundle format: ${e}`)}$c(){var e=this;return(0,ye.Z)(function*(){const t=yield e.Dc.read();if(!t.done){const r=new Uint8Array(e.buffer.length+t.value.length);r.set(e.buffer),r.set(t.value,e.buffer.length),e.buffer=r}return t.done})()}}class z3{constructor(e){this.datastore=e,this.readVersions=new Map,this.mutations=[],this.committed=!1,this.lastWriteError=null,this.writtenDocs=new Set}lookup(e){var t=this;return(0,ye.Z)(function*(){if(t.ensureCommitNotCalled(),t.mutations.length>0)throw new Pe(he.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes.");const r=yield(i=(0,ye.Z)(function*(a,c){const f=Je(a),_=vb(f.serializer)+"/documents",w={documents:c.map(U=>yb(f.serializer,U))},S=yield f.Ao("BatchGetDocuments",_,w,c.length),x=new Map;S.forEach(U=>{const W=function uz(n,e){return"found"in e?function(t,r){It(!!r.found);const i=Ac(t,r.found.name),a=Gr(r.found.updateTime),c=r.found.createTime?Gr(r.found.createTime):At.min(),f=new ts({mapValue:{fields:r.found.fields}});return ur.newFoundDocument(i,a,c,f)}(n,e):"missing"in e?function(t,r){It(!!r.missing),It(!!r.readTime);const i=Ac(t,r.missing),a=Gr(r.readTime);return ur.newNoDocument(i,a)}(n,e):ct()}(f.serializer,U);x.set(W.key.toString(),W)});const L=[];return c.forEach(U=>{const W=x.get(U.toString());It(!!W),L.push(W)}),L}),function(a,c){return i.apply(this,arguments)})(t.datastore,e);var i;return r.forEach(i=>t.recordVersion(i)),r})()}set(e,t){this.write(t.toMutation(e,this.precondition(e))),this.writtenDocs.add(e.toString())}update(e,t){try{this.write(t.toMutation(e,this.preconditionForUpdate(e)))}catch(r){this.lastWriteError=r}this.writtenDocs.add(e.toString())}delete(e){this.write(new h_(e,this.precondition(e))),this.writtenDocs.add(e.toString())}commit(){var e=this;return(0,ye.Z)(function*(){if(e.ensureCommitNotCalled(),e.lastWriteError)throw e.lastWriteError;const t=e.readVersions;var r;e.mutations.forEach(r=>{t.delete(r.key.toString())}),t.forEach((r,i)=>{const a=Xe.fromPath(i);e.mutations.push(new bx(a,e.precondition(a)))}),yield(r=(0,ye.Z)(function*(i,a){const c=Je(i),f=vb(c.serializer)+"/documents",_={writes:a.map(w=>bb(c.serializer,w))};yield c.po("Commit",f,_)}),function(i,a){return r.apply(this,arguments)})(e.datastore,e.mutations),e.committed=!0})()}recordVersion(e){let t;if(e.isFoundDocument())t=e.version;else{if(!e.isNoDocument())throw ct();t=At.min()}const r=this.readVersions.get(e.key.toString());if(r){if(!t.isEqual(r))throw new Pe(he.ABORTED,"Document version changed between two reads.")}else this.readVersions.set(e.key.toString(),t)}precondition(e){const t=this.readVersions.get(e.toString());return!this.writtenDocs.has(e.toString())&&t?t.isEqual(At.min())?yr.exists(!1):yr.updateTime(t):yr.none()}preconditionForUpdate(e){const t=this.readVersions.get(e.toString());if(!this.writtenDocs.has(e.toString())&&t){if(t.isEqual(At.min()))throw new Pe(he.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return yr.updateTime(t)}return yr.exists(!0)}write(e){this.ensureCommitNotCalled(),this.mutations.push(e)}ensureCommitNotCalled(){}}class G3{constructor(e,t,r,i,a){this.asyncQueue=e,this.datastore=t,this.options=r,this.updateFunction=i,this.deferred=a,this.Fc=r.maxAttempts,this.Lo=new Jx(this.asyncQueue,"transaction_retry")}run(){this.Fc-=1,this.Bc()}Bc(){var e=this;this.Lo.xo((0,ye.Z)(function*(){const t=new z3(e.datastore),r=e.Lc(t);r&&r.then(i=>{e.asyncQueue.enqueueAndForget(()=>t.commit().then(()=>{e.deferred.resolve(i)}).catch(a=>{e.qc(a)}))}).catch(i=>{e.qc(i)})}))}Lc(e){try{const t=this.updateFunction(e);return!nb(t)&&t.catch&&t.then?t:(this.deferred.reject(Error("Transaction callback must return a Promise")),null)}catch(t){return this.deferred.reject(t),null}}qc(e){this.Fc>0&&this.Uc(e)?(this.Fc-=1,this.asyncQueue.enqueueAndForget(()=>(this.Bc(),Promise.resolve()))):this.deferred.reject(e)}Uc(e){if("FirebaseError"===e.name){const t=e.code;return"aborted"===t||"failed-precondition"===t||"already-exists"===t||!KL(t)}return!1}}class q3{constructor(e,t,r,i){var a=this;this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=r,this.databaseInfo=i,this.user=Ai.UNAUTHENTICATED,this.clientId=GF.A(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this.authCredentials.start(r,function(){var c=(0,ye.Z)(function*(f){Ue("FirestoreClient","Received user=",f.uid),yield a.authCredentialListener(f),a.user=f});return function(f){return c.apply(this,arguments)}}()),this.appCheckCredentials.start(r,c=>(Ue("FirestoreClient","Received new app check token=",c),this.appCheckCredentialListener(c,this.user)))}getConfiguration(){var e=this;return(0,ye.Z)(function*(){return{asyncQueue:e.asyncQueue,databaseInfo:e.databaseInfo,clientId:e.clientId,authCredentials:e.authCredentials,appCheckCredentials:e.appCheckCredentials,initialUser:e.user,maxConcurrentLimboResolutions:100}})()}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}verifyNotTerminated(){if(this.asyncQueue.isShuttingDown)throw new Pe(he.FAILED_PRECONDITION,"The client has already been terminated.")}terminate(){var e=this;this.asyncQueue.enterRestrictedMode();const t=new di;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((0,ye.Z)(function*(){try{e._onlineComponents&&(yield e._onlineComponents.terminate()),e._offlineComponents&&(yield e._offlineComponents.terminate()),e.authCredentials.shutdown(),e.appCheckCredentials.shutdown(),t.resolve()}catch(r){const i=E_(r,"Failed to shutdown persistence");t.reject(i)}})),t.promise}}function xI(n,e){return QR.apply(this,arguments)}function QR(){return QR=(0,ye.Z)(function*(n,e){n.asyncQueue.verifyOperationInProgress(),Ue("FirestoreClient","Initializing OfflineComponentProvider");const t=yield n.getConfiguration();yield e.initialize(t);let r=t.initialUser;n.setCredentialChangeListener(function(){var i=(0,ye.Z)(function*(a){r.isEqual(a)||(yield W2(e.localStore,a),r=a)});return function(a){return i.apply(this,arguments)}}()),e.persistence.setDatabaseDeletedListener(()=>n.terminate()),n._offlineComponents=e}),QR.apply(this,arguments)}function XR(n,e){return JR.apply(this,arguments)}function JR(){return JR=(0,ye.Z)(function*(n,e){n.asyncQueue.verifyOperationInProgress();const t=yield ek(n);Ue("FirestoreClient","Initializing OnlineComponentProvider");const r=yield n.getConfiguration();yield e.initialize(t,r),n.setCredentialChangeListener(i=>uV(e.remoteStore,i)),n.setAppCheckTokenChangeListener((i,a)=>uV(e.remoteStore,a)),n._onlineComponents=e}),JR.apply(this,arguments)}function IV(n){return"FirebaseError"===n.name?n.code===he.FAILED_PRECONDITION||n.code===he.UNIMPLEMENTED:!(typeof DOMException<"u"&&n instanceof DOMException)||22===n.code||20===n.code||11===n.code}function ek(n){return tk.apply(this,arguments)}function tk(){return tk=(0,ye.Z)(function*(n){if(!n._offlineComponents)if(n._uninitializedComponentsProvider){Ue("FirestoreClient","Using user provided OfflineComponentProvider");try{yield xI(n,n._uninitializedComponentsProvider._offline)}catch(e){const t=e;if(!IV(t))throw t;Ea("Error using user provided cache. Falling back to memory cache: "+t),yield xI(n,new kb)}}else Ue("FirestoreClient","Using default OfflineComponentProvider"),yield xI(n,new kb);return n._offlineComponents}),tk.apply(this,arguments)}function RI(n){return nk.apply(this,arguments)}function nk(){return nk=(0,ye.Z)(function*(n){return n._onlineComponents||(n._uninitializedComponentsProvider?(Ue("FirestoreClient","Using user provided OnlineComponentProvider"),yield XR(n,n._uninitializedComponentsProvider._online)):(Ue("FirestoreClient","Using default OnlineComponentProvider"),yield XR(n,new S_))),n._onlineComponents}),nk.apply(this,arguments)}function DV(n){return ek(n).then(e=>e.persistence)}function kI(n){return ek(n).then(e=>e.localStore)}function SV(n){return RI(n).then(e=>e.remoteStore)}function rk(n){return RI(n).then(e=>e.syncEngine)}function T_(n){return ik.apply(this,arguments)}function ik(){return ik=(0,ye.Z)(function*(n){const e=yield RI(n),t=e.eventManager;return t.onListen=I3.bind(null,e.syncEngine),t.onUnlisten=D3.bind(null,e.syncEngine),t}),ik.apply(this,arguments)}function AV(n,e,t={}){const r=new di;return n.asyncQueue.enqueueAndForget((0,ye.Z)(function*(){return function(i,a,c,f,_){const w=new MI({next:x=>{a.enqueueAndForget(()=>wR(i,S));const L=x.docs.has(c);!L&&x.fromCache?_.reject(new Pe(he.UNAVAILABLE,"Failed to get document because the client is offline.")):L&&x.fromCache&&f&&"server"===f.source?_.reject(new Pe(he.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):_.resolve(x)},error:x=>_.reject(x)}),S=new IR(l_(c.path),w,{includeMetadataChanges:!0,Uu:!0});return vR(i,S)}(yield T_(n),n.asyncQueue,e,t,r)})),r.promise}function MV(n,e,t={}){const r=new di;return n.asyncQueue.enqueueAndForget((0,ye.Z)(function*(){return function(i,a,c,f,_){const w=new MI({next:x=>{a.enqueueAndForget(()=>wR(i,S)),x.fromCache&&"server"===f.source?_.reject(new Pe(he.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):_.resolve(x)},error:x=>_.reject(x)}),S=new IR(c,w,{includeMetadataChanges:!0,Uu:!0});return vR(i,S)}(yield T_(n),n.asyncQueue,e,t,r)})),r.promise}const xV=new Map;function sk(n,e,t){if(!t)throw new Pe(he.INVALID_ARGUMENT,`Function ${n}() cannot be called with an empty ${e}.`)}function RV(n,e,t,r){if(!0===e&&!0===r)throw new Pe(he.INVALID_ARGUMENT,`${n} and ${t} cannot be used together.`)}function kV(n){if(!Xe.isDocumentKey(n))throw new Pe(he.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${n} has ${n.length}.`)}function OV(n){if(Xe.isDocumentKey(n))throw new Pe(he.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${n} has ${n.length}.`)}function OI(n){if(void 0===n)return"undefined";if(null===n)return"null";if("string"==typeof n)return n.length>20&&(n=`${n.substring(0,20)}...`),JSON.stringify(n);if("number"==typeof n||"boolean"==typeof n)return""+n;if("object"==typeof n){if(n instanceof Array)return"an array";{const e=(t=n).constructor?t.constructor.name:null;return e?`a custom ${e} object`:"an object"}}var t;return"function"==typeof n?"a function":ct()}function dn(n,e){if("_delegate"in n&&(n=n._delegate),!(n instanceof e)){if(e.name===n.constructor.name)throw new Pe(he.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const t=OI(n);throw new Pe(he.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${t}`)}}return n}function PV(n,e){if(e<=0)throw new Pe(he.INVALID_ARGUMENT,`Function ${n}() requires a positive number, but it was: ${e}.`)}class NV{constructor(e){var t;if(void 0===e.host){if(void 0!==e.ssl)throw new Pe(he.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=null===(t=e.ssl)||void 0===t||t;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.cache=e.localCache,void 0===e.cacheSizeBytes)this.cacheSizeBytes=41943040;else{if(-1!==e.cacheSizeBytes&&e.cacheSizeBytes<1048576)throw new Pe(he.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}RV("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalAutoDetectLongPolling=!this.experimentalForceLongPolling&&void 0!==e.experimentalAutoDetectLongPolling&&!!e.experimentalAutoDetectLongPolling,this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class Ob{constructor(e,t,r,i){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=r,this._app=i,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new NV({}),this._settingsFrozen=!1}get app(){if(!this._app)throw new Pe(he.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return void 0!==this._terminateTask}_setSettings(e){if(this._settingsFrozen)throw new Pe(he.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new NV(e),void 0!==e.credentials&&(this._authCredentials=function(t){if(!t)return new Jj;switch(t.type){case"firstParty":return new r$(t.sessionIndex||"0",t.iamToken||null,t.authTokenFactory||null);case"provider":return t.client;default:throw new Pe(he.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask||(this._terminateTask=this._terminate()),this._terminateTask}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(e){const t=xV.get(e);t&&(Ue("ComponentProvider","Removing Datastore"),xV.delete(e),t.terminate())}(this),Promise.resolve()}}class dr{constructor(e,t,r){this.converter=t,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Mc(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new dr(this.firestore,e,this._key)}}class ns{constructor(e,t,r){this.converter=t,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new ns(this.firestore,e,this._query)}}class Mc extends ns{constructor(e,t,r){super(e,t,l_(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new dr(this.firestore,null,new Xe(e))}withConverter(e){return new Mc(this.firestore,e,this._path)}}function LV(n,e,...t){if(n=(0,cn.m9)(n),sk("collection","path",e),n instanceof Ob){const r=_n.fromString(e,...t);return OV(r),new Mc(n,null,r)}{if(!(n instanceof dr||n instanceof Mc))throw new Pe(he.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=n._path.child(_n.fromString(e,...t));return OV(r),new Mc(n.firestore,null,r)}}function PI(n,e,...t){if(n=(0,cn.m9)(n),1===arguments.length&&(e=GF.A()),sk("doc","path",e),n instanceof Ob){const r=_n.fromString(e,...t);return kV(r),new dr(n,null,new Xe(r))}{if(!(n instanceof dr||n instanceof Mc))throw new Pe(he.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=n._path.child(_n.fromString(e,...t));return kV(r),new dr(n.firestore,n instanceof Mc?n.converter:null,new Xe(r))}}function VV(n,e){return n=(0,cn.m9)(n),e=(0,cn.m9)(e),(n instanceof dr||n instanceof Mc)&&(e instanceof dr||e instanceof Mc)&&n.firestore===e.firestore&&n.path===e.path&&n.converter===e.converter}function ok(n,e){return n=(0,cn.m9)(n),e=(0,cn.m9)(e),n instanceof ns&&e instanceof ns&&n.firestore===e.firestore&&cb(n._query,e._query)&&n.converter===e.converter}class n6{constructor(){this.Kc=Promise.resolve(),this.Gc=[],this.Qc=!1,this.jc=[],this.zc=null,this.Wc=!1,this.Hc=!1,this.Jc=[],this.Lo=new Jx(this,"async_queue_retry"),this.Yc=()=>{const t=SI();t&&Ue("AsyncQueue","Visibility state changed to "+t.visibilityState),this.Lo.ko()};const e=SI();e&&"function"==typeof e.addEventListener&&e.addEventListener("visibilitychange",this.Yc)}get isShuttingDown(){return this.Qc}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.Xc(),this.Zc(e)}enterRestrictedMode(e){if(!this.Qc){this.Qc=!0,this.Hc=e||!1;const t=SI();t&&"function"==typeof t.removeEventListener&&t.removeEventListener("visibilitychange",this.Yc)}}enqueue(e){if(this.Xc(),this.Qc)return new Promise(()=>{});const t=new di;return this.Zc(()=>this.Qc&&this.Hc?Promise.resolve():(e().then(t.resolve,t.reject),t.promise)).then(()=>t.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Gc.push(e),this.ta()))}ta(){var e=this;return(0,ye.Z)(function*(){if(0!==e.Gc.length){try{yield e.Gc[0](),e.Gc.shift(),e.Lo.reset()}catch(t){if(!Ch(t))throw t;Ue("AsyncQueue","Operation failed with retryable error: "+t)}e.Gc.length>0&&e.Lo.xo(()=>e.ta())}})()}Zc(e){const t=this.Kc.then(()=>(this.Wc=!0,e().catch(r=>{throw this.zc=r,this.Wc=!1,zr("INTERNAL UNHANDLED ERROR: ",function(a){let c=a.message||"";return a.stack&&(c=a.stack.includes(a.message)?a.stack:a.message+"\n"+a.stack),c}(r)),r}).then(r=>(this.Wc=!1,r))));return this.Kc=t,t}enqueueAfterDelay(e,t,r){this.Xc(),this.Jc.indexOf(e)>-1&&(t=0);const i=yR.createAndSchedule(this,e,t,r,a=>this.ea(a));return this.jc.push(i),i}Xc(){this.zc&&ct()}verifyOperationInProgress(){}na(){var e=this;return(0,ye.Z)(function*(){let t;do{t=e.Kc,yield t}while(t!==e.Kc)})()}sa(e){for(const t of this.jc)if(t.timerId===e)return!0;return!1}ia(e){return this.na().then(()=>{this.jc.sort((t,r)=>t.targetTimeMs-r.targetTimeMs);for(const t of this.jc)if(t.skipDelay(),"all"!==e&&t.timerId===e)break;return this.na()})}ra(e){this.Jc.push(e)}ea(e){const t=this.jc.indexOf(e);this.jc.splice(t,1)}}function ak(n){return function(e,t){if("object"!=typeof e||null===e)return!1;const r=e;for(const i of["next","error","complete"])if(i in r&&"function"==typeof r[i])return!0;return!1}(n)}class r6{constructor(){this._progressObserver={},this._taskCompletionResolver=new di,this._lastProgress={taskState:"Running",totalBytes:0,totalDocuments:0,bytesLoaded:0,documentsLoaded:0}}onProgress(e,t,r){this._progressObserver={next:e,error:t,complete:r}}catch(e){return this._taskCompletionResolver.promise.catch(e)}then(e,t){return this._taskCompletionResolver.promise.then(e,t)}_completeWith(e){this._updateProgress(e),this._progressObserver.complete&&this._progressObserver.complete(),this._taskCompletionResolver.resolve(e)}_failWith(e){this._lastProgress.taskState="Error",this._progressObserver.next&&this._progressObserver.next(this._lastProgress),this._progressObserver.error&&this._progressObserver.error(e),this._taskCompletionResolver.reject(e)}_updateProgress(e){this._lastProgress=e,this._progressObserver.next&&this._progressObserver.next(e)}}class hr extends Ob{constructor(e,t,r,i){super(e,t,r,i),this.type="firestore",this._queue=new n6,this._persistenceKey=i?.name||"[DEFAULT]"}_terminate(){return this._firestoreClient||BV(this),this._firestoreClient.terminate()}}function qr(n){return n._firestoreClient||BV(n),n._firestoreClient.verifyNotTerminated(),n._firestoreClient}function BV(n){var e,t,r;const i=n._freezeSettings(),a=(f=(null===(e=n._app)||void 0===e?void 0:e.options.appId)||"",new O$(n._databaseId,f,n._persistenceKey,(w=i).host,w.ssl,w.experimentalForceLongPolling,w.experimentalAutoDetectLongPolling,w.useFetchStreams));var f,w;n._firestoreClient=new q3(n._authCredentials,n._appCheckCredentials,n._queue,a),(null===(t=i.cache)||void 0===t?void 0:t._offlineComponentProvider)&&(null===(r=i.cache)||void 0===r?void 0:r._onlineComponentProvider)&&(n._firestoreClient._uninitializedComponentsProvider={_offlineKind:i.cache.kind,_offline:i.cache._offlineComponentProvider,_online:i.cache._onlineComponentProvider})}function UV(n,e,t){const r=new di;return n.asyncQueue.enqueue((0,ye.Z)(function*(){try{yield xI(n,t),yield XR(n,e),r.resolve()}catch(i){const a=i;if(!IV(a))throw a;Ea("Error enabling indexeddb cache. Falling back to memory cache: "+a),r.reject(a)}})).then(()=>r.promise)}function HV(n){if(n._initialized||n._terminated)throw new Pe(he.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only enable persistence before calling any other methods on a Firestore object.")}class xc{constructor(e){this._byteString=e}static fromBase64String(e){try{return new xc(hi.fromBase64String(e))}catch(t){throw new Pe(he.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(e){return new xc(hi.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}class Qu{constructor(...e){for(let t=0;t<e.length;++t)if(0===e[t].length)throw new Pe(he.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Nr(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}class og{constructor(e){this._methodName=e}}class NI{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new Pe(he.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new Pe(he.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return Gt(this._lat,e._lat)||Gt(this._long,e._long)}}const p6=/^__.*__$/;class g6{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return null!==this.fieldMask?new Ku(e,this.data,this.fieldMask,t,this.fieldTransforms):new d_(e,this.data,t,this.fieldTransforms)}}class jV{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return new Ku(e,this.data,this.fieldMask,t,this.fieldTransforms)}}function $V(n){switch(n){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw ct()}}class FI{constructor(e,t,r,i,a,c){this.settings=e,this.databaseId=t,this.serializer=r,this.ignoreUndefinedProperties=i,void 0===a&&this.oa(),this.fieldTransforms=a||[],this.fieldMask=c||[]}get path(){return this.settings.path}get ua(){return this.settings.ua}ca(e){return new FI(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}aa(e){var t;const r=null===(t=this.path)||void 0===t?void 0:t.child(e),i=this.ca({path:r,ha:!1});return i.la(e),i}fa(e){var t;const r=null===(t=this.path)||void 0===t?void 0:t.child(e),i=this.ca({path:r,ha:!1});return i.oa(),i}da(e){return this.ca({path:void 0,ha:!0})}_a(e){return BI(e,this.settings.methodName,this.settings.wa||!1,this.path,this.settings.ma)}contains(e){return void 0!==this.fieldMask.find(t=>e.isPrefixOf(t))||void 0!==this.fieldTransforms.find(t=>e.isPrefixOf(t.field))}oa(){if(this.path)for(let e=0;e<this.path.length;e++)this.la(this.path.get(e))}la(e){if(0===e.length)throw this._a("Document fields must not be empty");if($V(this.ua)&&p6.test(e))throw this._a('Document fields cannot begin and end with "__"')}}class m6{constructor(e,t,r){this.databaseId=e,this.ignoreUndefinedProperties=t,this.serializer=r||Mb(e)}ga(e,t,r,i=!1){return new FI({ua:e,methodName:t,ma:r,path:Nr.emptyPath(),ha:!1,wa:i},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function ag(n){const e=n._freezeSettings(),t=Mb(n._databaseId);return new m6(n._databaseId,!!e.ignoreUndefinedProperties,t)}function LI(n,e,t,r,i,a={}){const c=n.ga(a.merge||a.mergeFields?2:0,e,t,i);dk("Data must be an object, but it was:",c,r);const f=qV(r,c);let _,w;if(a.merge)_=new uo(c.fieldMask),w=c.fieldTransforms;else if(a.mergeFields){const S=[];for(const x of a.mergeFields){const L=Fb(e,x,t);if(!c.contains(L))throw new Pe(he.INVALID_ARGUMENT,`Field '${L}' is specified in your field mask but missing from your input data.`);KV(S,L)||S.push(L)}_=new uo(S),w=c.fieldTransforms.filter(x=>_.covers(x.field))}else _=null,w=c.fieldTransforms;return new g6(new ts(f),_,w)}class Nb extends og{_toFieldTransform(e){if(2!==e.ua)throw e._a(1===e.ua?`${this._methodName}() can only appear at the top level of your update data`:`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof Nb}}function zV(n,e,t){return new FI({ua:3,ma:e.settings.ma,methodName:n._methodName,ha:t},e.databaseId,e.serializer,e.ignoreUndefinedProperties)}class lk extends og{_toFieldTransform(e){return new fb(e.path,new c_)}isEqual(e){return e instanceof lk}}class _6 extends og{constructor(e,t){super(e),this.ya=t}_toFieldTransform(e){const t=zV(this,e,!0),r=this.ya.map(a=>lg(a,t)),i=new Qp(r);return new fb(e.path,i)}isEqual(e){return this===e}}class y6 extends og{constructor(e,t){super(e),this.ya=t}_toFieldTransform(e){const t=zV(this,e,!0),r=this.ya.map(a=>lg(a,t)),i=new Xp(r);return new fb(e.path,i)}isEqual(e){return this===e}}class v6 extends og{constructor(e,t){super(e),this.pa=t}_toFieldTransform(e){const t=new u_(e.serializer,LL(e.serializer,this.pa));return new fb(e.path,t)}isEqual(e){return this===e}}function ck(n,e,t,r){const i=n.ga(1,e,t);dk("Data must be an object, but it was:",i,r);const a=[],c=ts.empty();Ih(r,(_,w)=>{const S=VI(e,_,t);w=(0,cn.m9)(w);const x=i.fa(S);if(w instanceof Nb)a.push(S);else{const L=lg(w,x);null!=L&&(a.push(S),c.set(S,L))}});const f=new uo(a);return new jV(c,f,i.fieldTransforms)}function uk(n,e,t,r,i,a){const c=n.ga(1,e,t),f=[Fb(e,r,t)],_=[i];if(a.length%2!=0)throw new Pe(he.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let L=0;L<a.length;L+=2)f.push(Fb(e,a[L])),_.push(a[L+1]);const w=[],S=ts.empty();for(let L=f.length-1;L>=0;--L)if(!KV(w,f[L])){const U=f[L];let W=_[L];W=(0,cn.m9)(W);const ie=c.fa(U);if(W instanceof Nb)w.push(U);else{const we=lg(W,ie);null!=we&&(w.push(U),S.set(U,we))}}const x=new uo(w);return new jV(S,x,c.fieldTransforms)}function GV(n,e,t,r=!1){return lg(t,n.ga(r?4:3,e))}function lg(n,e){if(WV(n=(0,cn.m9)(n)))return dk("Unsupported field value:",e,n),qV(n,e);if(n instanceof og)return function(t,r){if(!$V(r.ua))throw r._a(`${t._methodName}() can only be used with update() and set()`);if(!r.path)throw r._a(`${t._methodName}() is not currently supported inside arrays`);const i=t._toFieldTransform(r);i&&r.fieldTransforms.push(i)}(n,e),null;if(void 0===n&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),n instanceof Array){if(e.settings.ha&&4!==e.ua)throw e._a("Nested arrays are not supported");return function(t,r){const i=[];let a=0;for(const c of t){let f=lg(c,r.da(a));null==f&&(f={nullValue:"NULL_VALUE"}),i.push(f),a++}return{arrayValue:{values:i}}}(n,e)}return function(t,r){if(null===(t=(0,cn.m9)(t)))return{nullValue:"NULL_VALUE"};if("number"==typeof t)return LL(r.serializer,t);if("boolean"==typeof t)return{booleanValue:t};if("string"==typeof t)return{stringValue:t};if(t instanceof Date){const i=_r.fromDate(t);return{timestampValue:f_(r.serializer,i)}}if(t instanceof _r){const i=new _r(t.seconds,1e3*Math.floor(t.nanoseconds/1e3));return{timestampValue:f_(r.serializer,i)}}if(t instanceof NI)return{geoPointValue:{latitude:t.latitude,longitude:t.longitude}};if(t instanceof xc)return{bytesValue:s2(r.serializer,t._byteString)};if(t instanceof dr){const i=r.databaseId,a=t.firestore._databaseId;if(!a.isEqual(i))throw r._a(`Document reference is for database ${a.projectId}/${a.database} but should be for database ${i.projectId}/${i.database}`);return{referenceValue:Tx(t.firestore._databaseId||r.databaseId,t._key.path)}}throw r._a(`Unsupported field value: ${OI(t)}`)}(n,e)}function qV(n,e){const t={};return oL(n)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):Ih(n,(r,i)=>{const a=lg(i,e.aa(r));null!=a&&(t[r]=a)}),{mapValue:{fields:t}}}function WV(n){return!("object"!=typeof n||null===n||n instanceof Array||n instanceof Date||n instanceof _r||n instanceof NI||n instanceof xc||n instanceof dr||n instanceof og)}function dk(n,e,t){if(!WV(t)||"object"!=typeof(r=t)||null===r||Object.getPrototypeOf(r)!==Object.prototype&&null!==Object.getPrototypeOf(r)){const r=OI(t);throw e._a("an object"===r?n+" a custom object":n+" "+r)}var r}function Fb(n,e,t){if((e=(0,cn.m9)(e))instanceof Qu)return e._internalPath;if("string"==typeof e)return VI(n,e);throw BI("Field path arguments must be of type string or ",n,!1,void 0,t)}const b6=new RegExp("[~\\*/\\[\\]]");function VI(n,e,t){if(e.search(b6)>=0)throw BI(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,n,!1,void 0,t);try{return new Qu(...e.split("."))._internalPath}catch{throw BI(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,n,!1,void 0,t)}}function BI(n,e,t,r,i){const a=r&&!r.isEmpty(),c=void 0!==i;let f=`Function ${e}() called with invalid data`;t&&(f+=" (via `toFirestore()`)"),f+=". ";let _="";return(a||c)&&(_+=" (found",a&&(_+=` in field ${r}`),c&&(_+=` in document ${i}`),_+=")"),new Pe(he.INVALID_ARGUMENT,f+n+_)}function KV(n,e){return n.some(t=>t.isEqual(e))}class Lb{constructor(e,t,r,i,a){this._firestore=e,this._userDataWriter=t,this._key=r,this._document=i,this._converter=a}get id(){return this._key.path.lastSegment()}get ref(){return new dr(this._firestore,this._converter,this._key)}exists(){return null!==this._document}data(){if(this._document){if(this._converter){const e=new w6(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const t=this._document.data.field(UI("DocumentSnapshot.get",e));if(null!==t)return this._userDataWriter.convertValue(t)}}}class w6 extends Lb{data(){return super.data()}}function UI(n,e){return"string"==typeof e?VI(n,e):e instanceof Qu?e._internalPath:e._delegate._internalPath}function ZV(n){if("L"===n.limitType&&0===n.explicitOrderBy.length)throw new Pe(he.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class hk{}class Vb extends hk{}function Lh(n,e,...t){let r=[];e instanceof hk&&r.push(e),r=r.concat(t),function(i){const a=i.filter(f=>f instanceof A_).length,c=i.filter(f=>f instanceof Bb).length;if(a>1||a>0&&c>0)throw new Pe(he.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(r);for(const i of r)n=i._apply(n);return n}class Bb extends Vb{constructor(e,t,r){super(),this._field=e,this._op=t,this._value=r,this.type="where"}static _create(e,t,r){return new Bb(e,t,r)}_apply(e){const t=this._parse(e);return JV(e._query,t),new ns(e.firestore,e.converter,_x(e._query,t))}_parse(e){const t=ag(e.firestore);return function(i,a,c,f,_,w,S){let x;if(_.isKeyField()){if("array-contains"===w||"array-contains-any"===w)throw new Pe(he.INVALID_ARGUMENT,`Invalid Query. You can't perform '${w}' queries on documentId().`);if("in"===w||"not-in"===w){XV(S,w);const L=[];for(const U of S)L.push(QV(f,i,U));x={arrayValue:{values:L}}}else x=QV(f,i,S)}else"in"!==w&&"not-in"!==w&&"array-contains-any"!==w||XV(S,w),x=GV(c,"where",S,"in"===w||"not-in"===w);return un.create(_,w,x)}(e._query,0,t,e.firestore._databaseId,this._field,this._op,this._value)}}class A_ extends hk{constructor(e,t){super(),this.type=e,this._queryConstraints=t}static _create(e,t){return new A_(e,t)}_parse(e){const t=this._queryConstraints.map(r=>r._parse(e)).filter(r=>r.getFilters().length>0);return 1===t.length?t[0]:Ln.create(t,this._getOperator())}_apply(e){const t=this._parse(e);return 0===t.getFilters().length?e:(function(r,i){let a=r;const c=i.getFlattenedFilters();for(const f of c)JV(a,f),a=_x(a,f)}(e._query,t),new ns(e.firestore,e.converter,_x(e._query,t)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return"and"===this.type?"and":"or"}}class fk extends Vb{constructor(e,t){super(),this._field=e,this._direction=t,this.type="orderBy"}static _create(e,t){return new fk(e,t)}_apply(e){const t=function(r,i,a){if(null!==r.startAt)throw new Pe(he.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(null!==r.endAt)throw new Pe(he.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");const c=new o_(i,a);return function(f,_){if(null===gx(f)){const w=iI(f);null!==w&&eB(0,w,_.field)}}(r,c),c}(e._query,this._field,this._direction);return new ns(e.firestore,e.converter,function(r,i){const a=r.explicitOrderBy.concat([i]);return new qu(r.path,r.collectionGroup,a,r.filters.slice(),r.limit,r.limitType,r.startAt,r.endAt)}(e._query,t))}}class HI extends Vb{constructor(e,t,r){super(),this.type=e,this._limit=t,this._limitType=r}static _create(e,t,r){return new HI(e,t,r)}_apply(e){return new ns(e.firestore,e.converter,sI(e._query,this._limit,this._limitType))}}class jI extends Vb{constructor(e,t,r){super(),this.type=e,this._docOrFields=t,this._inclusive=r}static _create(e,t,r){return new jI(e,t,r)}_apply(e){const t=YV(e,this.type,this._docOrFields,this._inclusive);return new ns(e.firestore,e.converter,(i=t,new qu((r=e._query).path,r.collectionGroup,r.explicitOrderBy.slice(),r.filters.slice(),r.limit,r.limitType,i,r.endAt)));var r,i}}class $I extends Vb{constructor(e,t,r){super(),this.type=e,this._docOrFields=t,this._inclusive=r}static _create(e,t,r){return new $I(e,t,r)}_apply(e){const t=YV(e,this.type,this._docOrFields,this._inclusive);return new ns(e.firestore,e.converter,(i=t,new qu((r=e._query).path,r.collectionGroup,r.explicitOrderBy.slice(),r.filters.slice(),r.limit,r.limitType,r.startAt,i)));var r,i}}function YV(n,e,t,r){if(t[0]=(0,cn.m9)(t[0]),t[0]instanceof Lb)return function(i,a,c,f,_){if(!f)throw new Pe(he.NOT_FOUND,`Can't use a DocumentSnapshot that doesn't exist for ${c}().`);const w=[];for(const S of Yp(i))if(S.field.isKeyField())w.push(Kp(a,f.key));else{const x=f.data.field(S.field);if(QC(x))throw new Pe(he.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+S.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(null===x){const L=S.field.canonicalString();throw new Pe(he.INVALID_ARGUMENT,`Invalid query. You are trying to start or end a query using a document for which the field '${L}' (used as the orderBy) does not exist.`)}w.push(x)}return new xh(w,_)}(n._query,n.firestore._databaseId,e,t[0]._document,r);{const i=ag(n.firestore);return function(a,c,f,_,w,S){const x=a.explicitOrderBy;if(w.length>x.length)throw new Pe(he.INVALID_ARGUMENT,`Too many arguments provided to ${_}(). The number of arguments must be less than or equal to the number of orderBy() clauses`);const L=[];for(let U=0;U<w.length;U++){const W=w[U];if(x[U].field.isKeyField()){if("string"!=typeof W)throw new Pe(he.INVALID_ARGUMENT,`Invalid query. Expected a string for document ID in ${_}(), but got a ${typeof W}`);if(!mx(a)&&-1!==W.indexOf("/"))throw new Pe(he.INVALID_ARGUMENT,`Invalid query. When querying a collection and ordering by documentId(), the value passed to ${_}() must be a plain document ID, but '${W}' contains a slash.`);const ie=a.path.child(_n.fromString(W));if(!Xe.isDocumentKey(ie))throw new Pe(he.INVALID_ARGUMENT,`Invalid query. When querying a collection group and ordering by documentId(), the value passed to ${_}() must result in a valid document path, but '${ie}' is not because it contains an odd number of segments.`);const we=new Xe(ie);L.push(Kp(c,we))}else{const ie=GV(f,_,W);L.push(ie)}}return new xh(L,S)}(n._query,n.firestore._databaseId,i,e,t,r)}}function QV(n,e,t){if("string"==typeof(t=(0,cn.m9)(t))){if(""===t)throw new Pe(he.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!mx(e)&&-1!==t.indexOf("/"))throw new Pe(he.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${t}' contains a '/' character.`);const r=e.path.child(_n.fromString(t));if(!Xe.isDocumentKey(r))throw new Pe(he.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return Kp(n,new Xe(r))}if(t instanceof dr)return Kp(n,t._key);throw new Pe(he.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${OI(t)}.`)}function XV(n,e){if(!Array.isArray(n)||0===n.length)throw new Pe(he.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function JV(n,e){if(e.isInequality()){const r=iI(n),i=e.field;if(null!==r&&!r.isEqual(i))throw new Pe(he.INVALID_ARGUMENT,`Invalid query. All where filters with an inequality (<, <=, !=, not-in, >, or >=) must be on the same field. But you have inequality filters on '${r.toString()}' and '${i.toString()}'`);const a=gx(n);null!==a&&eB(0,i,a)}const t=function(r,i){for(const a of r)for(const c of a.getFlattenedFilters())if(i.indexOf(c.op)>=0)return c.op;return null}(n.filters,function(r){switch(r){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(null!==t)throw new Pe(he.INVALID_ARGUMENT,t===e.op?`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`:`Invalid query. You cannot use '${e.op.toString()}' filters with '${t.toString()}' filters.`)}function eB(n,e,t){if(!t.isEqual(e))throw new Pe(he.INVALID_ARGUMENT,`Invalid query. You have a where filter with an inequality (<, <=, !=, not-in, >, or >=) on field '${e.toString()}' and so you must also use '${e.toString()}' as your first argument to orderBy(), but your first orderBy() is on field '${t.toString()}' instead.`)}class pk{convertValue(e,t="none"){switch(Ah(e)){case 0:return null;case 1:return e.booleanValue;case 2:return Fr(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(Gu(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 10:return this.convertObject(e.mapValue,t);default:throw ct()}}convertObject(e,t){return this.convertObjectMap(e.fields,t)}convertObjectMap(e,t="none"){const r={};return Ih(e,(i,a)=>{r[i]=this.convertValue(a,t)}),r}convertGeoPoint(e){return new NI(Fr(e.latitude),Fr(e.longitude))}convertArray(e,t){return(e.values||[]).map(r=>this.convertValue(r,t))}convertServerTimestamp(e,t){switch(t){case"previous":const r=XC(e);return null==r?null:this.convertValue(r,t);case"estimate":return this.convertTimestamp(ib(e));default:return null}}convertTimestamp(e){const t=Dh(e);return new _r(t.seconds,t.nanos)}convertDocumentKey(e,t){const r=_n.fromString(e);It(g2(r));const i=new Sh(r.get(1),r.get(3)),a=new Xe(r.popFirst(5));return i.isEqual(t)||zr(`Document ${a} contains a document reference within a different database (${i.projectId}/${i.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),a}}function zI(n,e,t){let r;return r=n?t&&(t.merge||t.mergeFields)?n.toFirestore(e,t):n.toFirestore(e):e,r}class x6 extends pk{constructor(e){super(),this.firestore=e}convertBytes(e){return new xc(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new dr(this.firestore,null,t)}}class cg{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class Xu extends Lb{constructor(e,t,r,i,a,c){super(e,t,r,i,c),this._firestore=e,this._firestoreImpl=e,this.metadata=a}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const t=new Ub(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){const r=this._document.data.field(UI("DocumentSnapshot.get",e));if(null!==r)return this._userDataWriter.convertValue(r,t.serverTimestamps)}}}class Ub extends Xu{data(e={}){return super.data(e)}}class Vh{constructor(e,t,r,i){this._firestore=e,this._userDataWriter=t,this._snapshot=i,this.metadata=new cg(i.hasPendingWrites,i.fromCache),this.query=r}get docs(){const e=[];return this.forEach(t=>e.push(t)),e}get size(){return this._snapshot.docs.size}get empty(){return 0===this.size}forEach(e,t){this._snapshot.docs.forEach(r=>{e.call(t,new Ub(this._firestore,this._userDataWriter,r.key,r,new cg(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new Pe(he.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=function(r,i){if(r._snapshot.oldDocs.isEmpty()){let a=0;return r._snapshot.docChanges.map(c=>({type:"added",doc:new Ub(r._firestore,r._userDataWriter,c.doc.key,c.doc,new cg(r._snapshot.mutatedKeys.has(c.doc.key),r._snapshot.fromCache),r.query.converter),oldIndex:-1,newIndex:a++}))}{let a=r._snapshot.oldDocs;return r._snapshot.docChanges.filter(c=>i||3!==c.type).map(c=>{const f=new Ub(r._firestore,r._userDataWriter,c.doc.key,c.doc,new cg(r._snapshot.mutatedKeys.has(c.doc.key),r._snapshot.fromCache),r.query.converter);let _=-1,w=-1;return 0!==c.type&&(_=a.indexOf(c.doc.key),a=a.delete(c.doc.key)),1!==c.type&&(a=a.add(c.doc),w=a.indexOf(c.doc.key)),{type:k6(c.type),doc:f,oldIndex:_,newIndex:w}})}}(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}}function k6(n){switch(n){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return ct()}}function nB(n,e){return n instanceof Xu&&e instanceof Xu?n._firestore===e._firestore&&n._key.isEqual(e._key)&&(null===n._document?null===e._document:n._document.isEqual(e._document))&&n._converter===e._converter:n instanceof Vh&&e instanceof Vh&&n._firestore===e._firestore&&ok(n.query,e.query)&&n.metadata.isEqual(e.metadata)&&n._snapshot.isEqual(e._snapshot)}class Bh extends pk{constructor(e){super(),this.firestore=e}convertBytes(e){return new xc(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new dr(this.firestore,null,t)}}function rB(n,e,t){n=dn(n,dr);const r=dn(n.firestore,hr),i=zI(n.converter,e,t);return M_(r,[LI(ag(r),"setDoc",n._key,i,null!==n.converter,t).toMutation(n._key,yr.none())])}function iB(n,e,t,...r){n=dn(n,dr);const i=dn(n.firestore,hr),a=ag(i);let c;return c="string"==typeof(e=(0,cn.m9)(e))||e instanceof Qu?uk(a,"updateDoc",n._key,e,t,r):ck(a,"updateDoc",n._key,e),M_(i,[c.toMutation(n._key,yr.exists(!0))])}function sB(n,...e){var t,r,i;n=(0,cn.m9)(n);let a={includeMetadataChanges:!1},c=0;"object"!=typeof e[c]||ak(e[c])||(a=e[c],c++);const f={includeMetadataChanges:a.includeMetadataChanges};if(ak(e[c])){const x=e[c];e[c]=null===(t=x.next)||void 0===t?void 0:t.bind(x),e[c+1]=null===(r=x.error)||void 0===r?void 0:r.bind(x),e[c+2]=null===(i=x.complete)||void 0===i?void 0:i.bind(x)}let _,w,S;if(n instanceof dr)w=dn(n.firestore,hr),S=l_(n._key.path),_={next:x=>{e[c]&&e[c](gk(w,n,x))},error:e[c+1],complete:e[c+2]};else{const x=dn(n,ns);w=dn(x.firestore,hr),S=x._query;const L=new Bh(w);_={next:U=>{e[c]&&e[c](new Vh(w,L,x,U))},error:e[c+1],complete:e[c+2]},ZV(n._query)}return function(x,L,U,W){const ie=new MI(W),we=new IR(L,ie,U);return x.asyncQueue.enqueueAndForget((0,ye.Z)(function*(){return vR(yield T_(x),we)})),()=>{ie.Sc(),x.asyncQueue.enqueueAndForget((0,ye.Z)(function*(){return wR(yield T_(x),we)}))}}(qr(w),S,f,_)}function M_(n,e){return function(t,r){const i=new di;return t.asyncQueue.enqueueAndForget((0,ye.Z)(function*(){return function S3(n,e,t){return MR.apply(this,arguments)}(yield rk(t),r,i)})),i.promise}(qr(n),e)}function gk(n,e,t){const r=t.docs.get(e._key),i=new Bh(n);return new Xu(n,i,e._key,r,new cg(t.hasPendingWrites,t.fromCache),e.converter)}const Y6={maxAttempts:5};class oB{constructor(e,t){this._firestore=e,this._commitHandler=t,this._mutations=[],this._committed=!1,this._dataReader=ag(e)}set(e,t,r){this._verifyNotCommitted();const i=Uh(e,this._firestore),a=zI(i.converter,t,r),c=LI(this._dataReader,"WriteBatch.set",i._key,a,null!==i.converter,r);return this._mutations.push(c.toMutation(i._key,yr.none())),this}update(e,t,r,...i){this._verifyNotCommitted();const a=Uh(e,this._firestore);let c;return c="string"==typeof(t=(0,cn.m9)(t))||t instanceof Qu?uk(this._dataReader,"WriteBatch.update",a._key,t,r,i):ck(this._dataReader,"WriteBatch.update",a._key,t),this._mutations.push(c.toMutation(a._key,yr.exists(!0))),this}delete(e){this._verifyNotCommitted();const t=Uh(e,this._firestore);return this._mutations=this._mutations.concat(new h_(t._key,yr.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new Pe(he.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}}function Uh(n,e){if((n=(0,cn.m9)(n)).firestore!==e)throw new Pe(he.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return n}class Q6 extends class{constructor(e,t){this._firestore=e,this._transaction=t,this._dataReader=ag(e)}get(e){const t=Uh(e,this._firestore),r=new x6(this._firestore);return this._transaction.lookup([t._key]).then(i=>{if(!i||1!==i.length)return ct();const a=i[0];if(a.isFoundDocument())return new Lb(this._firestore,r,a.key,a,t.converter);if(a.isNoDocument())return new Lb(this._firestore,r,t._key,null,t.converter);throw ct()})}set(e,t,r){const i=Uh(e,this._firestore),a=zI(i.converter,t,r),c=LI(this._dataReader,"Transaction.set",i._key,a,null!==i.converter,r);return this._transaction.set(i._key,c),this}update(e,t,r,...i){const a=Uh(e,this._firestore);let c;return c="string"==typeof(t=(0,cn.m9)(t))||t instanceof Qu?uk(this._dataReader,"Transaction.update",a._key,t,r,i):ck(this._dataReader,"Transaction.update",a._key,t),this._transaction.update(a._key,c),this}delete(e){const t=Uh(e,this._firestore);return this._transaction.delete(t._key),this}}{constructor(e,t){super(e,t),this._firestore=e}get(e){const t=Uh(e,this._firestore),r=new Bh(this._firestore);return super.get(e).then(i=>new Xu(this._firestore,r,t._key,i._document,new cg(!1,!1),t.converter))}}function mk(n,e){if(void 0===e)return{merge:!1};if(void 0!==e.mergeFields&&void 0!==e.merge)throw new Pe("invalid-argument",`Invalid options passed to function ${n}(): You cannot specify both "merge" and "mergeFields".`);return e}function lB(){if(typeof Uint8Array>"u")throw new Pe("unimplemented","Uint8Arrays are not available in this environment.")}function cB(){if(!function R$(){return typeof atob<"u"}())throw new Pe("unimplemented","Blobs are unavailable in Firestore in this environment.")}!function(n,e=!0){n_=ul.SDK_VERSION,(0,ul._registerComponent)(new yh.wA("firestore",(t,{instanceIdentifier:r,options:i})=>{const a=t.getProvider("app").getImmediate(),c=new hr(new t$(t.getProvider("auth-internal")),new i$(t.getProvider("app-check-internal")),function(f,_){if(!Object.prototype.hasOwnProperty.apply(f.options,["projectId"]))throw new Pe(he.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Sh(f.options.projectId,_)}(a,r),a);return i=Object.assign({useFetchStreams:e},i),c._setSettings(i),c},"PUBLIC").setMultipleInstances(!0)),(0,ul.registerVersion)(jF,"3.11.0",n),(0,ul.registerVersion)(jF,"3.11.0","esm2017")}();class Hb{constructor(e){this._delegate=e}static fromBase64String(e){return cB(),new Hb(xc.fromBase64String(e))}static fromUint8Array(e){return lB(),new Hb(xc.fromUint8Array(e))}toBase64(){return cB(),this._delegate.toBase64()}toUint8Array(){return lB(),this._delegate.toUint8Array()}isEqual(e){return this._delegate.isEqual(e._delegate)}toString(){return"Blob(base64: "+this.toBase64()+")"}}function _k(n){return function oG(n,e){if("object"!=typeof n||null===n)return!1;const t=n;for(const r of e)if(r in t&&"function"==typeof t[r])return!0;return!1}(n,["next","error","complete"])}class aG{enableIndexedDbPersistence(e,t){return function s6(n,e){HV(n=dn(n,hr));const t=qr(n);if(t._uninitializedComponentsProvider)throw new Pe(he.FAILED_PRECONDITION,"SDK cache is already specified.");Ea("enableIndexedDbPersistence() will be deprecated in the future, you can use `FirestoreSettings.cache` instead.");const r=n._freezeSettings(),i=new S_;return UV(t,i,new YR(i,r.cacheSizeBytes,e?.forceOwnership))}(e._delegate,{forceOwnership:t})}enableMultiTabIndexedDbPersistence(e){return function o6(n){HV(n=dn(n,hr));const e=qr(n);if(e._uninitializedComponentsProvider)throw new Pe(he.FAILED_PRECONDITION,"SDK cache is already specified.");Ea("enableMultiTabIndexedDbPersistence() will be deprecated in the future, you can use `FirestoreSettings.cache` instead.");const t=n._freezeSettings(),r=new S_;return UV(e,r,new EV(r,t.cacheSizeBytes))}(e._delegate)}clearIndexedDbPersistence(e){return function a6(n){if(n._initialized&&!n._terminated)throw new Pe(he.FAILED_PRECONDITION,"Persistence can only be cleared before a Firestore instance is initialized or after it is terminated.");const e=new di;return n._queue.enqueueAndForgetEvenWhileRestricted((0,ye.Z)(function*(){try{yield(t=(0,ye.Z)(function*(r){if(!fl.D())return Promise.resolve();const i=r+"main";yield fl.delete(i)}),function(r){return t.apply(this,arguments)})(jx(n._databaseId,n._persistenceKey)),e.resolve()}catch(t){e.reject(t)}var t})),e.promise}(e._delegate)}}class uB{constructor(e,t,r){this._delegate=t,this._persistenceProvider=r,this.INTERNAL={delete:()=>this.terminate()},e instanceof Sh||(this._appCompat=e)}get _databaseId(){return this._delegate._databaseId}settings(e){const t=this._delegate._getSettings();!e.merge&&t.host!==e.host&&Ea("You are overriding the original host. If you did not intend to override your settings, use {merge: true}."),e.merge&&delete(e=Object.assign(Object.assign({},t),e)).merge,this._delegate._setSettings(e)}useEmulator(e,t,r={}){!function FV(n,e,t,r={}){var i;const a=(n=dn(n,Ob))._getSettings();if("firestore.googleapis.com"!==a.host&&a.host!==e&&Ea("Host has been set in both settings() and useEmulator(), emulator host will be used"),n._setSettings(Object.assign(Object.assign({},a),{host:`${e}:${t}`,ssl:!1})),r.mockUserToken){let c,f;if("string"==typeof r.mockUserToken)c=r.mockUserToken,f=Ai.MOCK_USER;else{c=(0,cn.Sg)(r.mockUserToken,null===(i=n._app)||void 0===i?void 0:i.options.projectId);const _=r.mockUserToken.sub||r.mockUserToken.user_id;if(!_)throw new Pe(he.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");f=new Ai(_)}n._authCredentials=new e$(new $F(c,f))}}(this._delegate,e,t,r)}enableNetwork(){return function c6(n){return function W3(n){return n.asyncQueue.enqueue((0,ye.Z)(function*(){const e=yield DV(n),t=yield SV(n);return e.setNetworkEnabled(!0),function(r){const i=Je(r);return i.Au.delete(0),xb(i)}(t)}))}(qr(n=dn(n,hr)))}(this._delegate)}disableNetwork(){return function u6(n){return function K3(n){return n.asyncQueue.enqueue((0,ye.Z)(function*(){const e=yield DV(n),t=yield SV(n);return e.setNetworkEnabled(!1),(r=(0,ye.Z)(function*(i){const a=Je(i);a.Au.add(0),yield v_(a),a.Pu.set("Offline")}),function(i){return r.apply(this,arguments)})(t);var r}))}(qr(n=dn(n,hr)))}(this._delegate)}enablePersistence(e){let t=!1,r=!1;return e&&(t=!!e.synchronizeTabs,r=!!e.experimentalForceOwningTab,RV("synchronizeTabs",t,"experimentalForceOwningTab",r)),t?this._persistenceProvider.enableMultiTabIndexedDbPersistence(this):this._persistenceProvider.enableIndexedDbPersistence(this,r)}clearPersistence(){return this._persistenceProvider.clearIndexedDbPersistence(this)}terminate(){return this._appCompat&&(this._appCompat._removeServiceInstance("firestore-compat"),this._appCompat._removeServiceInstance("firestore")),this._delegate._delete()}waitForPendingWrites(){return function l6(n){return function(e){const t=new di;return e.asyncQueue.enqueueAndForget((0,ye.Z)(function*(){return function x3(n,e){return PR.apply(this,arguments)}(yield rk(e),t)})),t.promise}(qr(n=dn(n,hr)))}(this._delegate)}onSnapshotsInSync(e){return function H6(n,e){return function Q3(n,e){const t=new MI(e);return n.asyncQueue.enqueueAndForget((0,ye.Z)(function*(){return r=yield T_(n),i=t,Je(r).Nu.add(i),void i.next();var r,i})),()=>{t.Sc(),n.asyncQueue.enqueueAndForget((0,ye.Z)(function*(){return r=yield T_(n),i=t,void Je(r).Nu.delete(i);var r,i}))}}(qr(n=dn(n,hr)),ak(e)?e:{next:e})}(this._delegate,e)}get app(){if(!this._appCompat)throw new Pe("failed-precondition","Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._appCompat}collection(e){try{return new x_(this,LV(this._delegate,e))}catch(t){throw Zs(t,"collection()","Firestore.collection()")}}doc(e){try{return new Ca(this,PI(this._delegate,e))}catch(t){throw Zs(t,"doc()","Firestore.doc()")}}collectionGroup(e){try{return new Ys(this,function t6(n,e){if(n=dn(n,Ob),sk("collectionGroup","collection id",e),e.indexOf("/")>=0)throw new Pe(he.INVALID_ARGUMENT,`Invalid collection ID '${e}' passed to function collectionGroup(). Collection IDs must not contain '/'.`);return new ns(n,null,(t=e,new qu(_n.emptyPath(),t)));var t}(this._delegate,e))}catch(t){throw Zs(t,"collectionGroup()","Firestore.collectionGroup()")}}runTransaction(e){return function X6(n,e,t){n=dn(n,hr);const r=Object.assign(Object.assign({},Y6),t);return function(i){if(i.maxAttempts<1)throw new Pe(he.INVALID_ARGUMENT,"Max attempts must be at least 1")}(r),function(i,a,c){const f=new di;return i.asyncQueue.enqueueAndForget((0,ye.Z)(function*(){const _=yield function TV(n){return RI(n).then(e=>e.datastore)}(i);new G3(i.asyncQueue,_,c,a,f).run()})),f.promise}(qr(n),i=>e(new Q6(n,i)),r)}(this._delegate,t=>e(new dB(this,t)))}batch(){return qr(this._delegate),new hB(new oB(this._delegate,e=>M_(this._delegate,e)))}loadBundle(e){return function d6(n,e){const t=qr(n=dn(n,hr)),r=new r6;return function X3(n,e,t,r){const i=function(a,c){let f;return f="string"==typeof a?YL().encode(a):a,_=function(_,w){if(_ instanceof Uint8Array)return CV(_,w);if(_ instanceof ArrayBuffer)return CV(new Uint8Array(_),w);if(_ instanceof ReadableStream)return _.getReader();throw new Error("Source of `toByteStreamReader` has to be a ArrayBuffer or ReadableStream")}(f),new $3(_,c);var _}(t,Mb(e));n.asyncQueue.enqueueAndForget((0,ye.Z)(function*(){!function H3(n,e,t){const r=Je(n);var i;(i=(0,ye.Z)(function*(a,c,f){try{const _=yield c.getMetadata();if(yield function(L,U){const W=Je(L),ie=Gr(U.createTime);return W.persistence.runTransaction("hasNewerBundle","readonly",we=>W.Ls.getBundleMetadata(we,U.id)).then(we=>!!we&&we.createTime.compareTo(ie)>=0)}(a.localStore,_))return yield c.close(),f._completeWith({taskState:"Success",documentsLoaded:(L=_).totalDocuments,bytesLoaded:L.totalBytes,totalDocuments:L.totalDocuments,totalBytes:L.totalBytes}),Promise.resolve(new Set);f._updateProgress(fV(_));const w=new b3(_,a.localStore,c.serializer);let S=yield c.Pc();for(;S;){const L=yield w.ju(S);L&&f._updateProgress(L),S=yield c.Pc()}const x=yield w.complete();return yield Yu(a,x.Hu,void 0),yield function(L,U){const W=Je(L);return W.persistence.runTransaction("Save bundle","readwrite",ie=>W.Ls.saveBundleMetadata(ie,U))}(a.localStore,_),f._completeWith(x.progress),Promise.resolve(x.Wu)}catch(_){return Ea("SyncEngine",`Loading bundle failed with ${_}`),f._failWith(_),Promise.resolve(new Set)}var L}),function(a,c,f){return i.apply(this,arguments)})(r,e,t).then(i=>{r.sharedClientState.notifyBundleLoaded(i)})}(yield rk(n),i,r)}))}(t,n._databaseId,e,r),r}(this._delegate,e)}namedQuery(e){return function h6(n,e){return function J3(n,e){return n.asyncQueue.enqueue((0,ye.Z)(function*(){return function(t,r){const i=Je(t);return i.persistence.runTransaction("Get named query","readonly",a=>i.Ls.getNamedQuery(a,r))}(yield kI(n),e)}))}(qr(n=dn(n,hr)),e).then(t=>t?new ns(n,null,t.query):null)}(this._delegate,e).then(t=>t?new Ys(this,t):null)}}class GI extends pk{constructor(e){super(),this.firestore=e}convertBytes(e){return new Hb(new xc(e))}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return Ca.forKey(t,this.firestore,null)}}class dB{constructor(e,t){this._firestore=e,this._delegate=t,this._userDataWriter=new GI(e)}get(e){const t=dg(e);return this._delegate.get(t).then(r=>new jb(this._firestore,new Xu(this._firestore._delegate,this._userDataWriter,r._key,r._document,r.metadata,t.converter)))}set(e,t,r){const i=dg(e);return r?(mk("Transaction.set",r),this._delegate.set(i,t,r)):this._delegate.set(i,t),this}update(e,t,r,...i){const a=dg(e);return 2===arguments.length?this._delegate.update(a,t):this._delegate.update(a,t,r,...i),this}delete(e){const t=dg(e);return this._delegate.delete(t),this}}class hB{constructor(e){this._delegate=e}set(e,t,r){const i=dg(e);return r?(mk("WriteBatch.set",r),this._delegate.set(i,t,r)):this._delegate.set(i,t),this}update(e,t,r,...i){const a=dg(e);return 2===arguments.length?this._delegate.update(a,t):this._delegate.update(a,t,r,...i),this}delete(e){const t=dg(e);return this._delegate.delete(t),this}commit(){return this._delegate.commit()}}class ug{constructor(e,t,r){this._firestore=e,this._userDataWriter=t,this._delegate=r}fromFirestore(e,t){const r=new Ub(this._firestore._delegate,this._userDataWriter,e._key,e._document,e.metadata,null);return this._delegate.fromFirestore(new $b(this._firestore,r),t??{})}toFirestore(e,t){return t?this._delegate.toFirestore(e,t):this._delegate.toFirestore(e)}static getInstance(e,t){const r=ug.INSTANCES;let i=r.get(e);i||(i=new WeakMap,r.set(e,i));let a=i.get(t);return a||(a=new ug(e,new GI(e),t),i.set(t,a)),a}}ug.INSTANCES=new WeakMap;class Ca{constructor(e,t){this.firestore=e,this._delegate=t,this._userDataWriter=new GI(e)}static forPath(e,t,r){if(e.length%2!=0)throw new Pe("invalid-argument",`Invalid document reference. Document references must have an even number of segments, but ${e.canonicalString()} has ${e.length}`);return new Ca(t,new dr(t._delegate,r,new Xe(e)))}static forKey(e,t,r){return new Ca(t,new dr(t._delegate,r,e))}get id(){return this._delegate.id}get parent(){return new x_(this.firestore,this._delegate.parent)}get path(){return this._delegate.path}collection(e){try{return new x_(this.firestore,LV(this._delegate,e))}catch(t){throw Zs(t,"collection()","DocumentReference.collection()")}}isEqual(e){return(e=(0,cn.m9)(e))instanceof dr&&VV(this._delegate,e)}set(e,t){t=mk("DocumentReference.set",t);try{return t?rB(this._delegate,e,t):rB(this._delegate,e)}catch(r){throw Zs(r,"setDoc()","DocumentReference.set()")}}update(e,t,...r){try{return 1===arguments.length?iB(this._delegate,e):iB(this._delegate,e,t,...r)}catch(i){throw Zs(i,"updateDoc()","DocumentReference.update()")}}delete(){return function B6(n){return M_(dn(n.firestore,hr),[new h_(n._key,yr.none())])}(this._delegate)}onSnapshot(...e){const t=fB(e),r=pB(e,i=>new jb(this.firestore,new Xu(this.firestore._delegate,this._userDataWriter,i._key,i._document,i.metadata,this._delegate.converter)));return sB(this._delegate,t,r)}get(e){let t;return t="cache"===e?.source?function P6(n){n=dn(n,dr);const e=dn(n.firestore,hr),t=qr(e),r=new Bh(e);return function Z3(n,e){const t=new di;return n.asyncQueue.enqueueAndForget((0,ye.Z)(function*(){return(r=(0,ye.Z)(function*(i,a,c){try{const f=yield function(_,w){const S=Je(_);return S.persistence.runTransaction("read document","readonly",x=>S.localDocuments.getDocument(x,w))}(i,a);f.isFoundDocument()?c.resolve(f):f.isNoDocument()?c.resolve(null):c.reject(new Pe(he.UNAVAILABLE,"Failed to get document from cache. (However, this document may exist on the server. Run again without setting 'source' in the GetOptions to attempt to retrieve the document from the server.)"))}catch(f){const _=E_(f,`Failed to get document '${a} from cache`);c.reject(_)}}),function(i,a,c){return r.apply(this,arguments)})(yield kI(n),e,t);var r})),t.promise}(t,n._key).then(i=>new Xu(e,r,n._key,i,new cg(null!==i&&i.hasLocalMutations,!0),n.converter))}(this._delegate):"server"===e?.source?function N6(n){n=dn(n,dr);const e=dn(n.firestore,hr);return AV(qr(e),n._key,{source:"server"}).then(t=>gk(e,n,t))}(this._delegate):function O6(n){n=dn(n,dr);const e=dn(n.firestore,hr);return AV(qr(e),n._key).then(t=>gk(e,n,t))}(this._delegate),t.then(r=>new jb(this.firestore,new Xu(this.firestore._delegate,this._userDataWriter,r._key,r._document,r.metadata,this._delegate.converter)))}withConverter(e){return new Ca(this.firestore,this._delegate.withConverter(e?ug.getInstance(this.firestore,e):null))}}function Zs(n,e,t){return n.message=n.message.replace(e,t),n}function fB(n){for(const e of n)if("object"==typeof e&&!_k(e))return e;return{}}function pB(n,e){var t,r;let i;return i=_k(n[0])?n[0]:_k(n[1])?n[1]:"function"==typeof n[0]?{next:n[0],error:n[1],complete:n[2]}:{next:n[1],error:n[2],complete:n[3]},{next:a=>{i.next&&i.next(e(a))},error:null===(t=i.error)||void 0===t?void 0:t.bind(i),complete:null===(r=i.complete)||void 0===r?void 0:r.bind(i)}}class jb{constructor(e,t){this._firestore=e,this._delegate=t}get ref(){return new Ca(this._firestore,this._delegate.ref)}get id(){return this._delegate.id}get metadata(){return this._delegate.metadata}get exists(){return this._delegate.exists()}data(e){return this._delegate.data(e)}get(e,t){return this._delegate.get(e,t)}isEqual(e){return nB(this._delegate,e._delegate)}}class $b extends jb{data(e){const t=this._delegate.data(e);return function Xj(n,e){n||ct()}(void 0!==t),t}}class Ys{constructor(e,t){this.firestore=e,this._delegate=t,this._userDataWriter=new GI(e)}where(e,t,r){try{return new Ys(this.firestore,Lh(this._delegate,function E6(n,e,t){const r=e,i=UI("where",n);return Bb._create(i,r,t)}(e,t,r)))}catch(i){throw Zs(i,/(orderBy|where)\(\)/,"Query.$1()")}}orderBy(e,t){try{return new Ys(this.firestore,Lh(this._delegate,function C6(n,e="asc"){const t=e,r=UI("orderBy",n);return fk._create(r,t)}(e,t)))}catch(r){throw Zs(r,/(orderBy|where)\(\)/,"Query.$1()")}}limit(e){try{return new Ys(this.firestore,Lh(this._delegate,function I6(n){return PV("limit",n),HI._create("limit",n,"F")}(e)))}catch(t){throw Zs(t,"limit()","Query.limit()")}}limitToLast(e){try{return new Ys(this.firestore,Lh(this._delegate,function D6(n){return PV("limitToLast",n),HI._create("limitToLast",n,"L")}(e)))}catch(t){throw Zs(t,"limitToLast()","Query.limitToLast()")}}startAt(...e){try{return new Ys(this.firestore,Lh(this._delegate,function S6(...n){return jI._create("startAt",n,!0)}(...e)))}catch(t){throw Zs(t,"startAt()","Query.startAt()")}}startAfter(...e){try{return new Ys(this.firestore,Lh(this._delegate,function T6(...n){return jI._create("startAfter",n,!1)}(...e)))}catch(t){throw Zs(t,"startAfter()","Query.startAfter()")}}endBefore(...e){try{return new Ys(this.firestore,Lh(this._delegate,function A6(...n){return $I._create("endBefore",n,!1)}(...e)))}catch(t){throw Zs(t,"endBefore()","Query.endBefore()")}}endAt(...e){try{return new Ys(this.firestore,Lh(this._delegate,function M6(...n){return $I._create("endAt",n,!0)}(...e)))}catch(t){throw Zs(t,"endAt()","Query.endAt()")}}isEqual(e){return ok(this._delegate,e._delegate)}get(e){let t;return t="cache"===e?.source?function L6(n){n=dn(n,ns);const e=dn(n.firestore,hr),t=qr(e),r=new Bh(e);return function Y3(n,e){const t=new di;return n.asyncQueue.enqueueAndForget((0,ye.Z)(function*(){return(r=(0,ye.Z)(function*(i,a,c){try{const f=yield EI(i,a,!0),_=new mV(a,f.sr),w=_.nc(f.documents),S=_.applyChanges(w,!1);c.resolve(S.snapshot)}catch(f){const _=E_(f,`Failed to execute query '${a} against cache`);c.reject(_)}}),function(i,a,c){return r.apply(this,arguments)})(yield kI(n),e,t);var r})),t.promise}(t,n._query).then(i=>new Vh(e,r,n,i))}(this._delegate):"server"===e?.source?function V6(n){n=dn(n,ns);const e=dn(n.firestore,hr),t=qr(e),r=new Bh(e);return MV(t,n._query,{source:"server"}).then(i=>new Vh(e,r,n,i))}(this._delegate):function F6(n){n=dn(n,ns);const e=dn(n.firestore,hr),t=qr(e),r=new Bh(e);return ZV(n._query),MV(t,n._query).then(i=>new Vh(e,r,n,i))}(this._delegate),t.then(r=>new yk(this.firestore,new Vh(this.firestore._delegate,this._userDataWriter,this._delegate,r._snapshot)))}onSnapshot(...e){const t=fB(e),r=pB(e,i=>new yk(this.firestore,new Vh(this.firestore._delegate,this._userDataWriter,this._delegate,i._snapshot)));return sB(this._delegate,t,r)}withConverter(e){return new Ys(this.firestore,this._delegate.withConverter(e?ug.getInstance(this.firestore,e):null))}}class cG{constructor(e,t){this._firestore=e,this._delegate=t}get type(){return this._delegate.type}get doc(){return new $b(this._firestore,this._delegate.doc)}get oldIndex(){return this._delegate.oldIndex}get newIndex(){return this._delegate.newIndex}}class yk{constructor(e,t){this._firestore=e,this._delegate=t}get query(){return new Ys(this._firestore,this._delegate.query)}get metadata(){return this._delegate.metadata}get size(){return this._delegate.size}get empty(){return this._delegate.empty}get docs(){return this._delegate.docs.map(e=>new $b(this._firestore,e))}docChanges(e){return this._delegate.docChanges(e).map(t=>new cG(this._firestore,t))}forEach(e,t){this._delegate.forEach(r=>{e.call(t,new $b(this._firestore,r))})}isEqual(e){return nB(this._delegate,e._delegate)}}class x_ extends Ys{constructor(e,t){super(e,t),this.firestore=e,this._delegate=t}get id(){return this._delegate.id}get path(){return this._delegate.path}get parent(){const e=this._delegate.parent;return e?new Ca(this.firestore,e):null}doc(e){try{return new Ca(this.firestore,void 0===e?PI(this._delegate):PI(this._delegate,e))}catch(t){throw Zs(t,"doc()","CollectionReference.doc()")}}add(e){return function U6(n,e){const t=dn(n.firestore,hr),r=PI(n),i=zI(n.converter,e);return M_(t,[LI(ag(n.firestore),"addDoc",r._key,i,null!==n.converter,{}).toMutation(r._key,yr.exists(!1))]).then(()=>r)}(this._delegate,e).then(t=>new Ca(this.firestore,t))}isEqual(e){return VV(this._delegate,e._delegate)}withConverter(e){return new x_(this.firestore,this._delegate.withConverter(e?ug.getInstance(this.firestore,e):null))}}function dg(n){return dn(n,dr)}class vk{constructor(...e){this._delegate=new Qu(...e)}static documentId(){return new vk(Nr.keyField().canonicalString())}isEqual(e){return(e=(0,cn.m9)(e))instanceof Qu&&this._delegate._internalPath.isEqual(e._internalPath)}}class hg{constructor(e){this._delegate=e}static serverTimestamp(){const e=function eG(){return new lk("serverTimestamp")}();return e._methodName="FieldValue.serverTimestamp",new hg(e)}static delete(){const e=function J6(){return new Nb("deleteField")}();return e._methodName="FieldValue.delete",new hg(e)}static arrayUnion(...e){const t=function tG(...n){return new _6("arrayUnion",n)}(...e);return t._methodName="FieldValue.arrayUnion",new hg(t)}static arrayRemove(...e){const t=function nG(...n){return new y6("arrayRemove",n)}(...e);return t._methodName="FieldValue.arrayRemove",new hg(t)}static increment(e){const t=function rG(n){return new v6("increment",n)}(e);return t._methodName="FieldValue.increment",new hg(t)}isEqual(e){return this._delegate.isEqual(e._delegate)}}const uG={Firestore:uB,GeoPoint:NI,Timestamp:_r,Blob:Hb,Transaction:dB,WriteBatch:hB,DocumentReference:Ca,DocumentSnapshot:jb,Query:Ys,QueryDocumentSnapshot:$b,QuerySnapshot:yk,CollectionReference:x_,FieldPath:vk,FieldValue:hg,setLogLevel:function lG(n){!function Qj(n){wh.setLogLevel(n)}(n)},CACHE_SIZE_UNLIMITED:-1};function gB(n,e){return function fG(n,e=Tp.z){return new Xr.y(t=>{let r;return null!=e?e.schedule(()=>{r=n.onSnapshot({includeMetadataChanges:!0},t)}):r=n.onSnapshot({includeMetadataChanges:!0},t),()=>{r?.()}})}(n,e)}function bk(n,e){return gB(n,e).pipe((0,_t.U)(t=>({payload:t,type:"query"})))}function qI(n,e){return bk(n,e).pipe(ps(void 0),dM(),(0,_t.U)(([t,r])=>{const i=r.payload.docChanges(),a=i.map(c=>({type:c.type,payload:c}));return t&&JSON.stringify(t.payload.metadata)!==JSON.stringify(r.payload.metadata)&&r.payload.docs.forEach((c,f)=>{const _=i.find(S=>S.doc.ref.isEqual(c.ref)),w=t?.payload.docs.find(S=>S.ref.isEqual(c.ref));_&&JSON.stringify(_.doc.metadata)===JSON.stringify(c.metadata)||!_&&w&&JSON.stringify(w.metadata)===JSON.stringify(c.metadata)||a.push({type:"modified",payload:{oldIndex:f,newIndex:f,type:"modified",doc:c}})}),a}))}function mB(n,e,t){return qI(n,t).pipe(no((r,i)=>function gG(n,e,t){return e.forEach(r=>{t.indexOf(r.type)>-1&&(n=function mG(n,e){switch(e.type){case"added":if(!n[e.newIndex]||!n[e.newIndex].doc.ref.isEqual(e.doc.ref))return wk(n,e.newIndex,0,e);break;case"modified":if(null==n[e.oldIndex]||n[e.oldIndex].doc.ref.isEqual(e.doc.ref)){if(e.oldIndex!==e.newIndex){const t=n.slice();return t.splice(e.oldIndex,1),t.splice(e.newIndex,0,e),t}return wk(n,e.newIndex,1,e)}break;case"removed":if(n[e.oldIndex]&&n[e.oldIndex].doc.ref.isEqual(e.doc.ref))return wk(n,e.oldIndex,1)}return n}(n,r))}),n}(r,i.map(a=>a.payload),e),[]),oE(),(0,_t.U)(r=>r.map(i=>({type:i.type,payload:i}))))}function wk(n,e,t,...r){const i=n.slice();return i.splice(e,t,...r),i}function _B(n){return(!n||0===n.length)&&(n=["added","removed","modified"]),n}!function hG(n){(function dG(n,e){n.INTERNAL.registerComponent(new yh.wA("firestore-compat",t=>{const r=t.getProvider("app-compat").getImmediate(),i=t.getProvider("firestore").getImmediate();return e(r,i)},"PUBLIC").setServiceProps(Object.assign({},uG)))})(n,(e,t)=>new uB(e,t,new aG)),n.registerVersion("@firebase/firestore-compat","0.3.8")}(qH.Z);class yB{constructor(e,t,r){this.ref=e,this.query=t,this.afs=r}stateChanges(e){let t=qI(this.query,this.afs.schedulers.outsideAngular);return e&&e.length>0&&(t=t.pipe((0,_t.U)(r=>r.filter(i=>e.indexOf(i.type)>-1)))),t.pipe(ps(void 0),dM(),Wn(([r,i])=>i.length>0||!r),(0,_t.U)(([r,i])=>i),h.iC)}auditTrail(e){return this.stateChanges(e).pipe(no((t,r)=>[...t,...r],[]))}snapshotChanges(e){const t=_B(e);return mB(this.query,t,this.afs.schedulers.outsideAngular).pipe(h.iC)}valueChanges(e={}){return bk(this.query,this.afs.schedulers.outsideAngular).pipe((0,_t.U)(t=>t.payload.docs.map(r=>e.idField?Object.assign(Object.assign({},r.data()),{[e.idField]:r.id}):r.data())),h.iC)}get(e){return(0,fn.D)(this.query.get(e)).pipe(h.iC)}add(e){return this.ref.add(e)}doc(e){return new vB(this.ref.doc(e),this.afs)}}class vB{constructor(e,t){this.ref=e,this.afs=t}set(e,t){return this.ref.set(e,t)}update(e){return this.ref.update(e)}delete(){return this.ref.delete()}collection(e,t){const r=this.ref.collection(e),{ref:i,query:a}=EB(r,t);return new yB(i,a,this.afs)}snapshotChanges(){return function pG(n,e){return gB(n,e).pipe(ps(void 0),dM(),(0,_t.U)(([t,r])=>r.exists?t?.exists?{payload:r,type:"modified"}:{payload:r,type:"added"}:{payload:r,type:"removed"}))}(this.ref,this.afs.schedulers.outsideAngular).pipe(h.iC)}valueChanges(e={}){return this.snapshotChanges().pipe((0,_t.U)(({payload:t})=>e.idField?Object.assign(Object.assign({},t.data()),{[e.idField]:t.id}):t.data()))}get(e){return(0,fn.D)(this.ref.get(e)).pipe(h.iC)}}class _G{constructor(e,t){this.query=e,this.afs=t}stateChanges(e){return e&&0!==e.length?qI(this.query,this.afs.schedulers.outsideAngular).pipe((0,_t.U)(t=>t.filter(r=>e.indexOf(r.type)>-1)),Wn(t=>t.length>0),h.iC):qI(this.query,this.afs.schedulers.outsideAngular).pipe(h.iC)}auditTrail(e){return this.stateChanges(e).pipe(no((t,r)=>[...t,...r],[]))}snapshotChanges(e){const t=_B(e);return mB(this.query,t,this.afs.schedulers.outsideAngular).pipe(h.iC)}valueChanges(e={}){return bk(this.query,this.afs.schedulers.outsideAngular).pipe((0,_t.U)(r=>r.payload.docs.map(i=>e.idField?Object.assign({[e.idField]:i.id},i.data()):i.data())),h.iC)}get(e){return(0,fn.D)(this.query.get(e)).pipe(h.iC)}}const bB=new d.OlP("angularfire2.enableFirestorePersistence"),wB=new d.OlP("angularfire2.firestore.persistenceSettings"),yG=new d.OlP("angularfire2.firestore.settings"),vG=new d.OlP("angularfire2.firestore.use-emulator");function EB(n,e=(t=>t)){return{query:e(n),ref:n}}let bG=(()=>{class n{constructor(t,r,i,a,c,f,_,w,S,x,L,U,W,ie,we,qe,ot){this.schedulers=_;const tt=(0,va.on)(t,f,r),Dt=S;x&&EN(tt,f,L,W,ie,we,U,qe),[this.firestore,this.persistenceEnabled$]=(0,va.cc)(`${tt.name}.firestore`,"AngularFirestore",tt.name,()=>{const zt=f.runOutsideAngular(()=>tt.firestore());if(a&&zt.settings(a),Dt&&zt.useEmulator(...Dt),i&&!bl(c)){const Yt=()=>{try{return(0,fn.D)(zt.enablePersistence(w||void 0).then(()=>!0,()=>!1))}catch(Tn){return typeof console<"u"&&console.warn(Tn),nt(!1)}};return[zt,f.runOutsideAngular(Yt)]}return[zt,nt(!1)]},[a,Dt,i])}collection(t,r){let i;i="string"==typeof t?this.firestore.collection(t):t;const{ref:a,query:c}=EB(i,r),f=this.schedulers.ngZone.run(()=>a);return new yB(f,c,this)}collectionGroup(t,r){const i=r||(c=>c),a=this.firestore.collectionGroup(t);return new _G(i(a),this)}doc(t){let r;r="string"==typeof t?this.firestore.doc(t):t;const i=this.schedulers.ngZone.run(()=>r);return new vB(i,this)}createId(){return this.firestore.collection("_").doc().id}}return n.\u0275fac=function(t){return new(t||n)(d.LFG(va.Dh),d.LFG(va.xv,8),d.LFG(bB,8),d.LFG(yG,8),d.LFG(d.Lbi),d.LFG(d.R0b),d.LFG(h.HU),d.LFG(wB,8),d.LFG(vG,8),d.LFG(uM,8),d.LFG(mN,8),d.LFG(_N,8),d.LFG(yN,8),d.LFG(vN,8),d.LFG(bN,8),d.LFG(wN,8),d.LFG(lM,8))},n.\u0275prov=d.Yz7({token:n,factory:n.\u0275fac,providedIn:"any"}),n})(),wG=(()=>{class n{constructor(){gN.Z.registerVersion("angularfire",h.q4.full,"fst-compat")}static enablePersistence(t){return{ngModule:n,providers:[{provide:bB,useValue:!0},{provide:wB,useValue:t}]}}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=d.oAB({type:n}),n.\u0275inj=d.cJS({providers:[bG]}),n})();const CB_firebaseConfig={apiKey:"AIzaSyCoFK8wf2T_Cjmq1HGd78wMkq1r1e6LumY",authDomain:"rorr-1124e.firebaseapp.com",projectId:"rorr-1124e",storageBucket:"rorr-1124e.appspot.com",messagingSenderId:"1023753832713",appId:"1:1023753832713:web:b5f7e7d0960d2477126bd8",measurementId:"G-0Q1J784GZB"};function IB(n){return new d.vHH(3e3,!1)}function n4(){return typeof window<"u"&&typeof window.document<"u"}function Ek(){return typeof process<"u"&&"[object process]"==={}.toString.call(process)}function Hh(n){switch(n.length){case 0:return new jm;case 1:return n[0];default:return new RE(n)}}function DB(n,e,t,r,i=new Map,a=new Map){const c=[],f=[];let _=-1,w=null;if(r.forEach(S=>{const x=S.get("offset"),L=x==_,U=L&&w||new Map;S.forEach((W,ie)=>{let we=ie,qe=W;if("offset"!==ie)switch(we=e.normalizePropertyName(we,c),qe){case"!":qe=i.get(ie);break;case ya:qe=a.get(ie);break;default:qe=e.normalizeStyleValue(ie,we,qe,c)}U.set(we,qe)}),L||f.push(U),w=U,_=x}),c.length)throw function zG(n){return new d.vHH(3502,!1)}();return f}function Ck(n,e,t,r){switch(e){case"start":n.onStart(()=>r(t&&Ik(t,"start",n)));break;case"done":n.onDone(()=>r(t&&Ik(t,"done",n)));break;case"destroy":n.onDestroy(()=>r(t&&Ik(t,"destroy",n)))}}function Ik(n,e,t){const a=Dk(n.element,n.triggerName,n.fromState,n.toState,e||n.phaseName,t.totalTime??n.totalTime,!!t.disabled),c=n._data;return null!=c&&(a._data=c),a}function Dk(n,e,t,r,i="",a=0,c){return{element:n,triggerName:e,fromState:t,toState:r,phaseName:i,totalTime:a,disabled:!!c}}function No(n,e,t){let r=n.get(e);return r||n.set(e,r=t),r}function SB(n){const e=n.indexOf(":");return[n.substring(1,e),n.slice(e+1)]}let Sk=(n,e)=>!1,TB=(n,e,t)=>[],AB=null;function Tk(n){const e=n.parentNode||n.host;return e===AB?null:e}(Ek()||typeof Element<"u")&&(n4()?(AB=(()=>document.documentElement)(),Sk=(n,e)=>{for(;e;){if(e===n)return!0;e=Tk(e)}return!1}):Sk=(n,e)=>n.contains(e),TB=(n,e,t)=>{if(t)return Array.from(n.querySelectorAll(e));const r=n.querySelector(e);return r?[r]:[]});let fg=null,MB=!1;const xB=Sk,RB=TB;let kB=(()=>{class n{validateStyleProperty(t){return function i4(n){fg||(fg=function s4(){return typeof document<"u"?document.body:null}()||{},MB=!!fg.style&&"WebkitAppearance"in fg.style);let e=!0;return fg.style&&!function r4(n){return"ebkit"==n.substring(1,6)}(n)&&(e=n in fg.style,!e&&MB&&(e="Webkit"+n.charAt(0).toUpperCase()+n.slice(1)in fg.style)),e}(t)}matchesElement(t,r){return!1}containsElement(t,r){return xB(t,r)}getParentElement(t){return Tk(t)}query(t,r,i){return RB(t,r,i)}computeStyle(t,r,i){return i||""}animate(t,r,i,a,c,f=[],_){return new jm(i,a)}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=d.Yz7({token:n,factory:n.\u0275fac}),n})(),Ak=(()=>{class n{}return n.NOOP=new kB,n})();const Mk="ng-enter",WI="ng-leave",KI="ng-trigger",ZI=".ng-trigger",PB="ng-animating",xk=".ng-animating";function Ju(n){if("number"==typeof n)return n;const e=n.match(/^(-?[\.\d]+)(m?s)/);return!e||e.length<2?0:Rk(parseFloat(e[1]),e[2])}function Rk(n,e){return"s"===e?1e3*n:n}function YI(n,e,t){return n.hasOwnProperty("duration")?n:function l4(n,e,t){let i,a=0,c="";if("string"==typeof n){const f=n.match(/^(-?[\.\d]+)(m?s)(?:\s+(-?[\.\d]+)(m?s))?(?:\s+([-a-z]+(?:\(.+?\))?))?$/i);if(null===f)return e.push(IB()),{duration:0,delay:0,easing:""};i=Rk(parseFloat(f[1]),f[2]);const _=f[3];null!=_&&(a=Rk(parseFloat(_),f[4]));const w=f[5];w&&(c=w)}else i=n;if(!t){let f=!1,_=e.length;i<0&&(e.push(function EG(){return new d.vHH(3100,!1)}()),f=!0),a<0&&(e.push(function CG(){return new d.vHH(3101,!1)}()),f=!0),f&&e.splice(_,0,IB())}return{duration:i,delay:a,easing:c}}(n,e,t)}function zb(n,e={}){return Object.keys(n).forEach(t=>{e[t]=n[t]}),e}function NB(n){const e=new Map;return Object.keys(n).forEach(t=>{e.set(t,n[t])}),e}function jh(n,e=new Map,t){if(t)for(let[r,i]of t)e.set(r,i);for(let[r,i]of n)e.set(r,i);return e}function LB(n,e,t){return t?e+":"+t+";":""}function VB(n){let e="";for(let t=0;t<n.style.length;t++){const r=n.style.item(t);e+=LB(0,r,n.style.getPropertyValue(r))}for(const t in n.style)n.style.hasOwnProperty(t)&&!t.startsWith("_")&&(e+=LB(0,h4(t),n.style[t]));n.setAttribute("style",e)}function Rc(n,e,t){n.style&&(e.forEach((r,i)=>{const a=Ok(i);t&&!t.has(i)&&t.set(i,n.style[a]),n.style[a]=r}),Ek()&&VB(n))}function pg(n,e){n.style&&(e.forEach((t,r)=>{const i=Ok(r);n.style[i]=""}),Ek()&&VB(n))}function Gb(n){return Array.isArray(n)?1==n.length?n[0]:gv(n):n}const kk=new RegExp("{{\\s*(.+?)\\s*}}","g");function BB(n){let e=[];if("string"==typeof n){let t;for(;t=kk.exec(n);)e.push(t[1]);kk.lastIndex=0}return e}function qb(n,e,t){const r=n.toString(),i=r.replace(kk,(a,c)=>{let f=e[c];return null==f&&(t.push(function DG(n){return new d.vHH(3003,!1)}()),f=""),f.toString()});return i==r?n:i}function QI(n){const e=[];let t=n.next();for(;!t.done;)e.push(t.value),t=n.next();return e}const d4=/-+([a-z0-9])/g;function Ok(n){return n.replace(d4,(...e)=>e[1].toUpperCase())}function h4(n){return n.replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase()}function Fo(n,e,t){switch(e.type){case 7:return n.visitTrigger(e,t);case 0:return n.visitState(e,t);case 1:return n.visitTransition(e,t);case 2:return n.visitSequence(e,t);case 3:return n.visitGroup(e,t);case 4:return n.visitAnimate(e,t);case 5:return n.visitKeyframes(e,t);case 6:return n.visitStyle(e,t);case 8:return n.visitReference(e,t);case 9:return n.visitAnimateChild(e,t);case 10:return n.visitAnimateRef(e,t);case 11:return n.visitQuery(e,t);case 12:return n.visitStagger(e,t);default:throw function SG(n){return new d.vHH(3004,!1)}()}}function UB(n,e){return window.getComputedStyle(n)[e]}function y4(n,e){const t=[];return"string"==typeof n?n.split(/\s*,\s*/).forEach(r=>function v4(n,e,t){if(":"==n[0]){const _=function b4(n,e){switch(n){case":enter":return"void => *";case":leave":return"* => void";case":increment":return(t,r)=>parseFloat(r)>parseFloat(t);case":decrement":return(t,r)=>parseFloat(r)<parseFloat(t);default:return e.push(function UG(n){return new d.vHH(3016,!1)}()),"* => *"}}(n,t);if("function"==typeof _)return void e.push(_);n=_}const r=n.match(/^(\*|[-\w]+)\s*(<?[=-]>)\s*(\*|[-\w]+)$/);if(null==r||r.length<4)return t.push(function BG(n){return new d.vHH(3015,!1)}()),e;const i=r[1],a=r[2],c=r[3];e.push(HB(i,c));"<"==a[0]&&!("*"==i&&"*"==c)&&e.push(HB(c,i))}(r,t,e)):t.push(n),t}const tD=new Set(["true","1"]),nD=new Set(["false","0"]);function HB(n,e){const t=tD.has(n)||nD.has(n),r=tD.has(e)||nD.has(e);return(i,a)=>{let c="*"==n||n==i,f="*"==e||e==a;return!c&&t&&"boolean"==typeof i&&(c=i?tD.has(n):nD.has(n)),!f&&r&&"boolean"==typeof a&&(f=a?tD.has(e):nD.has(e)),c&&f}}const w4=new RegExp("s*:selfs*,?","g");function Pk(n,e,t,r){return new E4(n).build(e,t,r)}class E4{constructor(e){this._driver=e}build(e,t,r){const i=new D4(t);return this._resetContextStyleTimingState(i),Fo(this,Gb(e),i)}_resetContextStyleTimingState(e){e.currentQuerySelector="",e.collectedStyles=new Map,e.collectedStyles.set("",new Map),e.currentTime=0}visitTrigger(e,t){let r=t.queryCount=0,i=t.depCount=0;const a=[],c=[];return"@"==e.name.charAt(0)&&t.errors.push(function AG(){return new d.vHH(3006,!1)}()),e.definitions.forEach(f=>{if(this._resetContextStyleTimingState(t),0==f.type){const _=f,w=_.name;w.toString().split(/\s*,\s*/).forEach(S=>{_.name=S,a.push(this.visitState(_,t))}),_.name=w}else if(1==f.type){const _=this.visitTransition(f,t);r+=_.queryCount,i+=_.depCount,c.push(_)}else t.errors.push(function MG(){return new d.vHH(3007,!1)}())}),{type:7,name:e.name,states:a,transitions:c,queryCount:r,depCount:i,options:null}}visitState(e,t){const r=this.visitStyle(e.styles,t),i=e.options&&e.options.params||null;if(r.containsDynamicStyles){const a=new Set,c=i||{};r.styles.forEach(f=>{f instanceof Map&&f.forEach(_=>{BB(_).forEach(w=>{c.hasOwnProperty(w)||a.add(w)})})}),a.size&&(QI(a.values()),t.errors.push(function xG(n,e){return new d.vHH(3008,!1)}()))}return{type:0,name:e.name,style:r,options:i?{params:i}:null}}visitTransition(e,t){t.queryCount=0,t.depCount=0;const r=Fo(this,Gb(e.animation),t);return{type:1,matchers:y4(e.expr,t.errors),animation:r,queryCount:t.queryCount,depCount:t.depCount,options:gg(e.options)}}visitSequence(e,t){return{type:2,steps:e.steps.map(r=>Fo(this,r,t)),options:gg(e.options)}}visitGroup(e,t){const r=t.currentTime;let i=0;const a=e.steps.map(c=>{t.currentTime=r;const f=Fo(this,c,t);return i=Math.max(i,t.currentTime),f});return t.currentTime=i,{type:3,steps:a,options:gg(e.options)}}visitAnimate(e,t){const r=function T4(n,e){if(n.hasOwnProperty("duration"))return n;if("number"==typeof n)return Nk(YI(n,e).duration,0,"");const t=n;if(t.split(/\s+/).some(a=>"{"==a.charAt(0)&&"{"==a.charAt(1))){const a=Nk(0,0,"");return a.dynamic=!0,a.strValue=t,a}const i=YI(t,e);return Nk(i.duration,i.delay,i.easing)}(e.timings,t.errors);t.currentAnimateTimings=r;let i,a=e.styles?e.styles:vc({});if(5==a.type)i=this.visitKeyframes(a,t);else{let c=e.styles,f=!1;if(!c){f=!0;const w={};r.easing&&(w.easing=r.easing),c=vc(w)}t.currentTime+=r.duration+r.delay;const _=this.visitStyle(c,t);_.isEmptyStep=f,i=_}return t.currentAnimateTimings=null,{type:4,timings:r,style:i,options:null}}visitStyle(e,t){const r=this._makeStyleAst(e,t);return this._validateStyleAst(r,t),r}_makeStyleAst(e,t){const r=[],i=Array.isArray(e.styles)?e.styles:[e.styles];for(let f of i)"string"==typeof f?f===ya?r.push(f):t.errors.push(new d.vHH(3002,!1)):r.push(NB(f));let a=!1,c=null;return r.forEach(f=>{if(f instanceof Map&&(f.has("easing")&&(c=f.get("easing"),f.delete("easing")),!a))for(let _ of f.values())if(_.toString().indexOf("{{")>=0){a=!0;break}}),{type:6,styles:r,easing:c,offset:e.offset,containsDynamicStyles:a,options:null}}_validateStyleAst(e,t){const r=t.currentAnimateTimings;let i=t.currentTime,a=t.currentTime;r&&a>0&&(a-=r.duration+r.delay),e.styles.forEach(c=>{"string"!=typeof c&&c.forEach((f,_)=>{const w=t.collectedStyles.get(t.currentQuerySelector),S=w.get(_);let x=!0;S&&(a!=i&&a>=S.startTime&&i<=S.endTime&&(t.errors.push(function kG(n,e,t,r,i){return new d.vHH(3010,!1)}()),x=!1),a=S.startTime),x&&w.set(_,{startTime:a,endTime:i}),t.options&&function u4(n,e,t){const r=e.params||{},i=BB(n);i.length&&i.forEach(a=>{r.hasOwnProperty(a)||t.push(function IG(n){return new d.vHH(3001,!1)}())})}(f,t.options,t.errors)})})}visitKeyframes(e,t){const r={type:5,styles:[],options:null};if(!t.currentAnimateTimings)return t.errors.push(function OG(){return new d.vHH(3011,!1)}()),r;let a=0;const c=[];let f=!1,_=!1,w=0;const S=e.steps.map(qe=>{const ot=this._makeStyleAst(qe,t);let tt=null!=ot.offset?ot.offset:function S4(n){if("string"==typeof n)return null;let e=null;if(Array.isArray(n))n.forEach(t=>{if(t instanceof Map&&t.has("offset")){const r=t;e=parseFloat(r.get("offset")),r.delete("offset")}});else if(n instanceof Map&&n.has("offset")){const t=n;e=parseFloat(t.get("offset")),t.delete("offset")}return e}(ot.styles),Dt=0;return null!=tt&&(a++,Dt=ot.offset=tt),_=_||Dt<0||Dt>1,f=f||Dt<w,w=Dt,c.push(Dt),ot});_&&t.errors.push(function PG(){return new d.vHH(3012,!1)}()),f&&t.errors.push(function NG(){return new d.vHH(3200,!1)}());const x=e.steps.length;let L=0;a>0&&a<x?t.errors.push(function FG(){return new d.vHH(3202,!1)}()):0==a&&(L=1/(x-1));const U=x-1,W=t.currentTime,ie=t.currentAnimateTimings,we=ie.duration;return S.forEach((qe,ot)=>{const tt=L>0?ot==U?1:L*ot:c[ot],Dt=tt*we;t.currentTime=W+ie.delay+Dt,ie.duration=Dt,this._validateStyleAst(qe,t),qe.offset=tt,r.styles.push(qe)}),r}visitReference(e,t){return{type:8,animation:Fo(this,Gb(e.animation),t),options:gg(e.options)}}visitAnimateChild(e,t){return t.depCount++,{type:9,options:gg(e.options)}}visitAnimateRef(e,t){return{type:10,animation:this.visitReference(e.animation,t),options:gg(e.options)}}visitQuery(e,t){const r=t.currentQuerySelector,i=e.options||{};t.queryCount++,t.currentQuery=e;const[a,c]=function C4(n){const e=!!n.split(/\s*,\s*/).find(t=>":self"==t);return e&&(n=n.replace(w4,"")),n=n.replace(/@\*/g,ZI).replace(/@\w+/g,t=>ZI+"-"+t.slice(1)).replace(/:animating/g,xk),[n,e]}(e.selector);t.currentQuerySelector=r.length?r+" "+a:a,No(t.collectedStyles,t.currentQuerySelector,new Map);const f=Fo(this,Gb(e.animation),t);return t.currentQuery=null,t.currentQuerySelector=r,{type:11,selector:a,limit:i.limit||0,optional:!!i.optional,includeSelf:c,animation:f,originalSelector:e.selector,options:gg(e.options)}}visitStagger(e,t){t.currentQuery||t.errors.push(function LG(){return new d.vHH(3013,!1)}());const r="full"===e.timings?{duration:0,delay:0,easing:"full"}:YI(e.timings,t.errors,!0);return{type:12,animation:Fo(this,Gb(e.animation),t),timings:r,options:null}}}class D4{constructor(e){this.errors=e,this.queryCount=0,this.depCount=0,this.currentTransition=null,this.currentQuery=null,this.currentQuerySelector=null,this.currentAnimateTimings=null,this.currentTime=0,this.collectedStyles=new Map,this.options=null,this.unsupportedCSSPropertiesFound=new Set}}function gg(n){return n?(n=zb(n)).params&&(n.params=function I4(n){return n?zb(n):null}(n.params)):n={},n}function Nk(n,e,t){return{duration:n,delay:e,easing:t}}function Fk(n,e,t,r,i,a,c=null,f=!1){return{type:1,element:n,keyframes:e,preStyleProps:t,postStyleProps:r,duration:i,delay:a,totalTime:i+a,easing:c,subTimeline:f}}class rD{constructor(){this._map=new Map}get(e){return this._map.get(e)||[]}append(e,t){let r=this._map.get(e);r||this._map.set(e,r=[]),r.push(...t)}has(e){return this._map.has(e)}clear(){this._map.clear()}}const x4=new RegExp(":enter","g"),k4=new RegExp(":leave","g");function Lk(n,e,t,r,i,a=new Map,c=new Map,f,_,w=[]){return(new O4).buildKeyframes(n,e,t,r,i,a,c,f,_,w)}class O4{buildKeyframes(e,t,r,i,a,c,f,_,w,S=[]){w=w||new rD;const x=new Vk(e,t,w,i,a,S,[]);x.options=_;const L=_.delay?Ju(_.delay):0;x.currentTimeline.delayNextStep(L),x.currentTimeline.setStyles([c],null,x.errors,_),Fo(this,r,x);const U=x.timelines.filter(W=>W.containsAnimation());if(U.length&&f.size){let W;for(let ie=U.length-1;ie>=0;ie--){const we=U[ie];if(we.element===t){W=we;break}}W&&!W.allowOnlyTimelineStyles()&&W.setStyles([f],null,x.errors,_)}return U.length?U.map(W=>W.buildKeyframes()):[Fk(t,[],[],[],0,L,"",!1)]}visitTrigger(e,t){}visitState(e,t){}visitTransition(e,t){}visitAnimateChild(e,t){const r=t.subInstructions.get(t.element);if(r){const i=t.createSubContext(e.options),a=t.currentTimeline.currentTime,c=this._visitSubInstructions(r,i,i.options);a!=c&&t.transformIntoNewTimeline(c)}t.previousNode=e}visitAnimateRef(e,t){const r=t.createSubContext(e.options);r.transformIntoNewTimeline(),this._applyAnimationRefDelays([e.options,e.animation.options],t,r),this.visitReference(e.animation,r),t.transformIntoNewTimeline(r.currentTimeline.currentTime),t.previousNode=e}_applyAnimationRefDelays(e,t,r){for(const i of e){const a=i?.delay;if(a){const c="number"==typeof a?a:Ju(qb(a,i?.params??{},t.errors));r.delayNextStep(c)}}}_visitSubInstructions(e,t,r){let a=t.currentTimeline.currentTime;const c=null!=r.duration?Ju(r.duration):null,f=null!=r.delay?Ju(r.delay):null;return 0!==c&&e.forEach(_=>{const w=t.appendInstructionToTimeline(_,c,f);a=Math.max(a,w.duration+w.delay)}),a}visitReference(e,t){t.updateOptions(e.options,!0),Fo(this,e.animation,t),t.previousNode=e}visitSequence(e,t){const r=t.subContextCount;let i=t;const a=e.options;if(a&&(a.params||a.delay)&&(i=t.createSubContext(a),i.transformIntoNewTimeline(),null!=a.delay)){6==i.previousNode.type&&(i.currentTimeline.snapshotCurrentStyles(),i.previousNode=iD);const c=Ju(a.delay);i.delayNextStep(c)}e.steps.length&&(e.steps.forEach(c=>Fo(this,c,i)),i.currentTimeline.applyStylesToKeyframe(),i.subContextCount>r&&i.transformIntoNewTimeline()),t.previousNode=e}visitGroup(e,t){const r=[];let i=t.currentTimeline.currentTime;const a=e.options&&e.options.delay?Ju(e.options.delay):0;e.steps.forEach(c=>{const f=t.createSubContext(e.options);a&&f.delayNextStep(a),Fo(this,c,f),i=Math.max(i,f.currentTimeline.currentTime),r.push(f.currentTimeline)}),r.forEach(c=>t.currentTimeline.mergeTimelineCollectedStyles(c)),t.transformIntoNewTimeline(i),t.previousNode=e}_visitTiming(e,t){if(e.dynamic){const r=e.strValue;return YI(t.params?qb(r,t.params,t.errors):r,t.errors)}return{duration:e.duration,delay:e.delay,easing:e.easing}}visitAnimate(e,t){const r=t.currentAnimateTimings=this._visitTiming(e.timings,t),i=t.currentTimeline;r.delay&&(t.incrementTime(r.delay),i.snapshotCurrentStyles());const a=e.style;5==a.type?this.visitKeyframes(a,t):(t.incrementTime(r.duration),this.visitStyle(a,t),i.applyStylesToKeyframe()),t.currentAnimateTimings=null,t.previousNode=e}visitStyle(e,t){const r=t.currentTimeline,i=t.currentAnimateTimings;!i&&r.hasCurrentStyleProperties()&&r.forwardFrame();const a=i&&i.easing||e.easing;e.isEmptyStep?r.applyEmptyStep(a):r.setStyles(e.styles,a,t.errors,t.options),t.previousNode=e}visitKeyframes(e,t){const r=t.currentAnimateTimings,i=t.currentTimeline.duration,a=r.duration,f=t.createSubContext().currentTimeline;f.easing=r.easing,e.styles.forEach(_=>{f.forwardTime((_.offset||0)*a),f.setStyles(_.styles,_.easing,t.errors,t.options),f.applyStylesToKeyframe()}),t.currentTimeline.mergeTimelineCollectedStyles(f),t.transformIntoNewTimeline(i+a),t.previousNode=e}visitQuery(e,t){const r=t.currentTimeline.currentTime,i=e.options||{},a=i.delay?Ju(i.delay):0;a&&(6===t.previousNode.type||0==r&&t.currentTimeline.hasCurrentStyleProperties())&&(t.currentTimeline.snapshotCurrentStyles(),t.previousNode=iD);let c=r;const f=t.invokeQuery(e.selector,e.originalSelector,e.limit,e.includeSelf,!!i.optional,t.errors);t.currentQueryTotal=f.length;let _=null;f.forEach((w,S)=>{t.currentQueryIndex=S;const x=t.createSubContext(e.options,w);a&&x.delayNextStep(a),w===t.element&&(_=x.currentTimeline),Fo(this,e.animation,x),x.currentTimeline.applyStylesToKeyframe(),c=Math.max(c,x.currentTimeline.currentTime)}),t.currentQueryIndex=0,t.currentQueryTotal=0,t.transformIntoNewTimeline(c),_&&(t.currentTimeline.mergeTimelineCollectedStyles(_),t.currentTimeline.snapshotCurrentStyles()),t.previousNode=e}visitStagger(e,t){const r=t.parentContext,i=t.currentTimeline,a=e.timings,c=Math.abs(a.duration),f=c*(t.currentQueryTotal-1);let _=c*t.currentQueryIndex;switch(a.duration<0?"reverse":a.easing){case"reverse":_=f-_;break;case"full":_=r.currentStaggerTime}const S=t.currentTimeline;_&&S.delayNextStep(_);const x=S.currentTime;Fo(this,e.animation,t),t.previousNode=e,r.currentStaggerTime=i.currentTime-x+(i.startTime-r.currentTimeline.startTime)}}const iD={};class Vk{constructor(e,t,r,i,a,c,f,_){this._driver=e,this.element=t,this.subInstructions=r,this._enterClassName=i,this._leaveClassName=a,this.errors=c,this.timelines=f,this.parentContext=null,this.currentAnimateTimings=null,this.previousNode=iD,this.subContextCount=0,this.options={},this.currentQueryIndex=0,this.currentQueryTotal=0,this.currentStaggerTime=0,this.currentTimeline=_||new sD(this._driver,t,0),f.push(this.currentTimeline)}get params(){return this.options.params}updateOptions(e,t){if(!e)return;const r=e;let i=this.options;null!=r.duration&&(i.duration=Ju(r.duration)),null!=r.delay&&(i.delay=Ju(r.delay));const a=r.params;if(a){let c=i.params;c||(c=this.options.params={}),Object.keys(a).forEach(f=>{(!t||!c.hasOwnProperty(f))&&(c[f]=qb(a[f],c,this.errors))})}}_copyOptions(){const e={};if(this.options){const t=this.options.params;if(t){const r=e.params={};Object.keys(t).forEach(i=>{r[i]=t[i]})}}return e}createSubContext(e=null,t,r){const i=t||this.element,a=new Vk(this._driver,i,this.subInstructions,this._enterClassName,this._leaveClassName,this.errors,this.timelines,this.currentTimeline.fork(i,r||0));return a.previousNode=this.previousNode,a.currentAnimateTimings=this.currentAnimateTimings,a.options=this._copyOptions(),a.updateOptions(e),a.currentQueryIndex=this.currentQueryIndex,a.currentQueryTotal=this.currentQueryTotal,a.parentContext=this,this.subContextCount++,a}transformIntoNewTimeline(e){return this.previousNode=iD,this.currentTimeline=this.currentTimeline.fork(this.element,e),this.timelines.push(this.currentTimeline),this.currentTimeline}appendInstructionToTimeline(e,t,r){const i={duration:t??e.duration,delay:this.currentTimeline.currentTime+(r??0)+e.delay,easing:""},a=new P4(this._driver,e.element,e.keyframes,e.preStyleProps,e.postStyleProps,i,e.stretchStartingKeyframe);return this.timelines.push(a),i}incrementTime(e){this.currentTimeline.forwardTime(this.currentTimeline.duration+e)}delayNextStep(e){e>0&&this.currentTimeline.delayNextStep(e)}invokeQuery(e,t,r,i,a,c){let f=[];if(i&&f.push(this.element),e.length>0){e=(e=e.replace(x4,"."+this._enterClassName)).replace(k4,"."+this._leaveClassName);let w=this._driver.query(this.element,e,1!=r);0!==r&&(w=r<0?w.slice(w.length+r,w.length):w.slice(0,r)),f.push(...w)}return!a&&0==f.length&&c.push(function VG(n){return new d.vHH(3014,!1)}()),f}}class sD{constructor(e,t,r,i){this._driver=e,this.element=t,this.startTime=r,this._elementTimelineStylesLookup=i,this.duration=0,this._previousKeyframe=new Map,this._currentKeyframe=new Map,this._keyframes=new Map,this._styleSummary=new Map,this._localTimelineStyles=new Map,this._pendingStyles=new Map,this._backFill=new Map,this._currentEmptyStepKeyframe=null,this._elementTimelineStylesLookup||(this._elementTimelineStylesLookup=new Map),this._globalTimelineStyles=this._elementTimelineStylesLookup.get(t),this._globalTimelineStyles||(this._globalTimelineStyles=this._localTimelineStyles,this._elementTimelineStylesLookup.set(t,this._localTimelineStyles)),this._loadKeyframe()}containsAnimation(){switch(this._keyframes.size){case 0:return!1;case 1:return this.hasCurrentStyleProperties();default:return!0}}hasCurrentStyleProperties(){return this._currentKeyframe.size>0}get currentTime(){return this.startTime+this.duration}delayNextStep(e){const t=1===this._keyframes.size&&this._pendingStyles.size;this.duration||t?(this.forwardTime(this.currentTime+e),t&&this.snapshotCurrentStyles()):this.startTime+=e}fork(e,t){return this.applyStylesToKeyframe(),new sD(this._driver,e,t||this.currentTime,this._elementTimelineStylesLookup)}_loadKeyframe(){this._currentKeyframe&&(this._previousKeyframe=this._currentKeyframe),this._currentKeyframe=this._keyframes.get(this.duration),this._currentKeyframe||(this._currentKeyframe=new Map,this._keyframes.set(this.duration,this._currentKeyframe))}forwardFrame(){this.duration+=1,this._loadKeyframe()}forwardTime(e){this.applyStylesToKeyframe(),this.duration=e,this._loadKeyframe()}_updateStyle(e,t){this._localTimelineStyles.set(e,t),this._globalTimelineStyles.set(e,t),this._styleSummary.set(e,{time:this.currentTime,value:t})}allowOnlyTimelineStyles(){return this._currentEmptyStepKeyframe!==this._currentKeyframe}applyEmptyStep(e){e&&this._previousKeyframe.set("easing",e);for(let[t,r]of this._globalTimelineStyles)this._backFill.set(t,r||ya),this._currentKeyframe.set(t,ya);this._currentEmptyStepKeyframe=this._currentKeyframe}setStyles(e,t,r,i){t&&this._previousKeyframe.set("easing",t);const a=i&&i.params||{},c=function N4(n,e){const t=new Map;let r;return n.forEach(i=>{if("*"===i){r=r||e.keys();for(let a of r)t.set(a,ya)}else jh(i,t)}),t}(e,this._globalTimelineStyles);for(let[f,_]of c){const w=qb(_,a,r);this._pendingStyles.set(f,w),this._localTimelineStyles.has(f)||this._backFill.set(f,this._globalTimelineStyles.get(f)??ya),this._updateStyle(f,w)}}applyStylesToKeyframe(){0!=this._pendingStyles.size&&(this._pendingStyles.forEach((e,t)=>{this._currentKeyframe.set(t,e)}),this._pendingStyles.clear(),this._localTimelineStyles.forEach((e,t)=>{this._currentKeyframe.has(t)||this._currentKeyframe.set(t,e)}))}snapshotCurrentStyles(){for(let[e,t]of this._localTimelineStyles)this._pendingStyles.set(e,t),this._updateStyle(e,t)}getFinalKeyframe(){return this._keyframes.get(this.duration)}get properties(){const e=[];for(let t in this._currentKeyframe)e.push(t);return e}mergeTimelineCollectedStyles(e){e._styleSummary.forEach((t,r)=>{const i=this._styleSummary.get(r);(!i||t.time>i.time)&&this._updateStyle(r,t.value)})}buildKeyframes(){this.applyStylesToKeyframe();const e=new Set,t=new Set,r=1===this._keyframes.size&&0===this.duration;let i=[];this._keyframes.forEach((f,_)=>{const w=jh(f,new Map,this._backFill);w.forEach((S,x)=>{"!"===S?e.add(x):S===ya&&t.add(x)}),r||w.set("offset",_/this.duration),i.push(w)});const a=e.size?QI(e.values()):[],c=t.size?QI(t.values()):[];if(r){const f=i[0],_=new Map(f);f.set("offset",0),_.set("offset",1),i=[f,_]}return Fk(this.element,i,a,c,this.duration,this.startTime,this.easing,!1)}}class P4 extends sD{constructor(e,t,r,i,a,c,f=!1){super(e,t,c.delay),this.keyframes=r,this.preStyleProps=i,this.postStyleProps=a,this._stretchStartingKeyframe=f,this.timings={duration:c.duration,delay:c.delay,easing:c.easing}}containsAnimation(){return this.keyframes.length>1}buildKeyframes(){let e=this.keyframes,{delay:t,duration:r,easing:i}=this.timings;if(this._stretchStartingKeyframe&&t){const a=[],c=r+t,f=t/c,_=jh(e[0]);_.set("offset",0),a.push(_);const w=jh(e[0]);w.set("offset",zB(f)),a.push(w);const S=e.length-1;for(let x=1;x<=S;x++){let L=jh(e[x]);const U=L.get("offset");L.set("offset",zB((t+U*r)/c)),a.push(L)}r=c,t=0,i="",e=a}return Fk(this.element,e,this.preStyleProps,this.postStyleProps,r,t,i,!0)}}function zB(n,e=3){const t=Math.pow(10,e-1);return Math.round(n*t)/t}class Bk{}const F4=new Set(["width","height","minWidth","minHeight","maxWidth","maxHeight","left","top","bottom","right","fontSize","outlineWidth","outlineOffset","paddingTop","paddingLeft","paddingBottom","paddingRight","marginTop","marginLeft","marginBottom","marginRight","borderRadius","borderWidth","borderTopWidth","borderLeftWidth","borderRightWidth","borderBottomWidth","textIndent","perspective"]);class L4 extends Bk{normalizePropertyName(e,t){return Ok(e)}normalizeStyleValue(e,t,r,i){let a="";const c=r.toString().trim();if(F4.has(t)&&0!==r&&"0"!==r)if("number"==typeof r)a="px";else{const f=r.match(/^[+-]?[\d\.]+([a-z]*)$/);f&&0==f[1].length&&i.push(function TG(n,e){return new d.vHH(3005,!1)}())}return c+a}}function GB(n,e,t,r,i,a,c,f,_,w,S,x,L){return{type:0,element:n,triggerName:e,isRemovalTransition:i,fromState:t,fromStyles:a,toState:r,toStyles:c,timelines:f,queriedElements:_,preStyleProps:w,postStyleProps:S,totalTime:x,errors:L}}const Uk={};class qB{constructor(e,t,r){this._triggerName=e,this.ast=t,this._stateStyles=r}match(e,t,r,i){return function V4(n,e,t,r,i){return n.some(a=>a(e,t,r,i))}(this.ast.matchers,e,t,r,i)}buildStyles(e,t,r){let i=this._stateStyles.get("*");return void 0!==e&&(i=this._stateStyles.get(e?.toString())||i),i?i.buildStyles(t,r):new Map}build(e,t,r,i,a,c,f,_,w,S){const x=[],L=this.ast.options&&this.ast.options.params||Uk,W=this.buildStyles(r,f&&f.params||Uk,x),ie=_&&_.params||Uk,we=this.buildStyles(i,ie,x),qe=new Set,ot=new Map,tt=new Map,Dt="void"===i,zt={params:B4(ie,L),delay:this.ast.options?.delay},Yt=S?[]:Lk(e,t,this.ast.animation,a,c,W,we,zt,w,x);let Tn=0;if(Yt.forEach(ed=>{Tn=Math.max(ed.duration+ed.delay,Tn)}),x.length)return GB(t,this._triggerName,r,i,Dt,W,we,[],[],ot,tt,Tn,x);Yt.forEach(ed=>{const td=ed.element,yU=No(ot,td,new Set);ed.preStyleProps.forEach(_g=>yU.add(_g));const Yb=No(tt,td,new Set);ed.postStyleProps.forEach(_g=>Yb.add(_g)),td!==t&&qe.add(td)});const Ri=QI(qe.values());return GB(t,this._triggerName,r,i,Dt,W,we,Yt,Ri,ot,tt,Tn)}}function B4(n,e){const t=zb(e);for(const r in n)n.hasOwnProperty(r)&&null!=n[r]&&(t[r]=n[r]);return t}class U4{constructor(e,t,r){this.styles=e,this.defaultParams=t,this.normalizer=r}buildStyles(e,t){const r=new Map,i=zb(this.defaultParams);return Object.keys(e).forEach(a=>{const c=e[a];null!==c&&(i[a]=c)}),this.styles.styles.forEach(a=>{"string"!=typeof a&&a.forEach((c,f)=>{c&&(c=qb(c,i,t));const _=this.normalizer.normalizePropertyName(f,t);c=this.normalizer.normalizeStyleValue(f,_,c,t),r.set(_,c)})}),r}}class j4{constructor(e,t,r){this.name=e,this.ast=t,this._normalizer=r,this.transitionFactories=[],this.states=new Map,t.states.forEach(i=>{this.states.set(i.name,new U4(i.style,i.options&&i.options.params||{},r))}),WB(this.states,"true","1"),WB(this.states,"false","0"),t.transitions.forEach(i=>{this.transitionFactories.push(new qB(e,i,this.states))}),this.fallbackTransition=function $4(n,e,t){return new qB(n,{type:1,animation:{type:2,steps:[],options:null},matchers:[(c,f)=>!0],options:null,queryCount:0,depCount:0},e)}(e,this.states)}get containsQueries(){return this.ast.queryCount>0}matchTransition(e,t,r,i){return this.transitionFactories.find(c=>c.match(e,t,r,i))||null}matchStyles(e,t,r){return this.fallbackTransition.buildStyles(e,t,r)}}function WB(n,e,t){n.has(e)?n.has(t)||n.set(t,n.get(e)):n.has(t)&&n.set(e,n.get(t))}const z4=new rD;class G4{constructor(e,t,r){this.bodyNode=e,this._driver=t,this._normalizer=r,this._animations=new Map,this._playersById=new Map,this.players=[]}register(e,t){const r=[],a=Pk(this._driver,t,r,[]);if(r.length)throw function GG(n){return new d.vHH(3503,!1)}();this._animations.set(e,a)}_buildPlayer(e,t,r){const i=e.element,a=DB(0,this._normalizer,0,e.keyframes,t,r);return this._driver.animate(i,a,e.duration,e.delay,e.easing,[],!0)}create(e,t,r={}){const i=[],a=this._animations.get(e);let c;const f=new Map;if(a?(c=Lk(this._driver,t,a,Mk,WI,new Map,new Map,r,z4,i),c.forEach(S=>{const x=No(f,S.element,new Map);S.postStyleProps.forEach(L=>x.set(L,null))})):(i.push(function qG(){return new d.vHH(3300,!1)}()),c=[]),i.length)throw function WG(n){return new d.vHH(3504,!1)}();f.forEach((S,x)=>{S.forEach((L,U)=>{S.set(U,this._driver.computeStyle(x,U,ya))})});const w=Hh(c.map(S=>{const x=f.get(S.element);return this._buildPlayer(S,new Map,x)}));return this._playersById.set(e,w),w.onDestroy(()=>this.destroy(e)),this.players.push(w),w}destroy(e){const t=this._getPlayer(e);t.destroy(),this._playersById.delete(e);const r=this.players.indexOf(t);r>=0&&this.players.splice(r,1)}_getPlayer(e){const t=this._playersById.get(e);if(!t)throw function KG(n){return new d.vHH(3301,!1)}();return t}listen(e,t,r,i){const a=Dk(t,"","","");return Ck(this._getPlayer(e),r,a,i),()=>{}}command(e,t,r,i){if("register"==r)return void this.register(e,i[0]);if("create"==r)return void this.create(e,t,i[0]||{});const a=this._getPlayer(e);switch(r){case"play":a.play();break;case"pause":a.pause();break;case"reset":a.reset();break;case"restart":a.restart();break;case"finish":a.finish();break;case"init":a.init();break;case"setPosition":a.setPosition(parseFloat(i[0]));break;case"destroy":this.destroy(e)}}}const KB="ng-animate-queued",Hk="ng-animate-disabled",Y4=[],ZB={namespaceId:"",setForRemoval:!1,setForMove:!1,hasAnimation:!1,removedBeforeQueried:!1},Q4={namespaceId:"",setForMove:!1,setForRemoval:!1,hasAnimation:!1,removedBeforeQueried:!0},Ia="__ng_removed";class jk{constructor(e,t=""){this.namespaceId=t;const r=e&&e.hasOwnProperty("value");if(this.value=function t5(n){return n??null}(r?e.value:e),r){const a=zb(e);delete a.value,this.options=a}else this.options={};this.options.params||(this.options.params={})}get params(){return this.options.params}absorbOptions(e){const t=e.params;if(t){const r=this.options.params;Object.keys(t).forEach(i=>{null==r[i]&&(r[i]=t[i])})}}}const Wb="void",$k=new jk(Wb);class X4{constructor(e,t,r){this.id=e,this.hostElement=t,this._engine=r,this.players=[],this._triggers=new Map,this._queue=[],this._elementListeners=new Map,this._hostClassName="ng-tns-"+e,Da(t,this._hostClassName)}listen(e,t,r,i){if(!this._triggers.has(t))throw function ZG(n,e){return new d.vHH(3302,!1)}();if(null==r||0==r.length)throw function YG(n){return new d.vHH(3303,!1)}();if(!function n5(n){return"start"==n||"done"==n}(r))throw function QG(n,e){return new d.vHH(3400,!1)}();const a=No(this._elementListeners,e,[]),c={name:t,phase:r,callback:i};a.push(c);const f=No(this._engine.statesByElement,e,new Map);return f.has(t)||(Da(e,KI),Da(e,KI+"-"+t),f.set(t,$k)),()=>{this._engine.afterFlush(()=>{const _=a.indexOf(c);_>=0&&a.splice(_,1),this._triggers.has(t)||f.delete(t)})}}register(e,t){return!this._triggers.has(e)&&(this._triggers.set(e,t),!0)}_getTrigger(e){const t=this._triggers.get(e);if(!t)throw function XG(n){return new d.vHH(3401,!1)}();return t}trigger(e,t,r,i=!0){const a=this._getTrigger(t),c=new zk(this.id,t,e);let f=this._engine.statesByElement.get(e);f||(Da(e,KI),Da(e,KI+"-"+t),this._engine.statesByElement.set(e,f=new Map));let _=f.get(t);const w=new jk(r,this.id);if(!(r&&r.hasOwnProperty("value"))&&_&&w.absorbOptions(_.options),f.set(t,w),_||(_=$k),w.value!==Wb&&_.value===w.value){if(!function o5(n,e){const t=Object.keys(n),r=Object.keys(e);if(t.length!=r.length)return!1;for(let i=0;i<t.length;i++){const a=t[i];if(!e.hasOwnProperty(a)||n[a]!==e[a])return!1}return!0}(_.params,w.params)){const ie=[],we=a.matchStyles(_.value,_.params,ie),qe=a.matchStyles(w.value,w.params,ie);ie.length?this._engine.reportError(ie):this._engine.afterFlush(()=>{pg(e,we),Rc(e,qe)})}return}const L=No(this._engine.playersByElement,e,[]);L.forEach(ie=>{ie.namespaceId==this.id&&ie.triggerName==t&&ie.queued&&ie.destroy()});let U=a.matchTransition(_.value,w.value,e,w.params),W=!1;if(!U){if(!i)return;U=a.fallbackTransition,W=!0}return this._engine.totalQueuedPlayers++,this._queue.push({element:e,triggerName:t,transition:U,fromState:_,toState:w,player:c,isFallbackTransition:W}),W||(Da(e,KB),c.onStart(()=>{R_(e,KB)})),c.onDone(()=>{let ie=this.players.indexOf(c);ie>=0&&this.players.splice(ie,1);const we=this._engine.playersByElement.get(e);if(we){let qe=we.indexOf(c);qe>=0&&we.splice(qe,1)}}),this.players.push(c),L.push(c),c}deregister(e){this._triggers.delete(e),this._engine.statesByElement.forEach(t=>t.delete(e)),this._elementListeners.forEach((t,r)=>{this._elementListeners.set(r,t.filter(i=>i.name!=e))})}clearElementCache(e){this._engine.statesByElement.delete(e),this._elementListeners.delete(e);const t=this._engine.playersByElement.get(e);t&&(t.forEach(r=>r.destroy()),this._engine.playersByElement.delete(e))}_signalRemovalForInnerTriggers(e,t){const r=this._engine.driver.query(e,ZI,!0);r.forEach(i=>{if(i[Ia])return;const a=this._engine.fetchNamespacesByElement(i);a.size?a.forEach(c=>c.triggerLeaveAnimation(i,t,!1,!0)):this.clearElementCache(i)}),this._engine.afterFlushAnimationsDone(()=>r.forEach(i=>this.clearElementCache(i)))}triggerLeaveAnimation(e,t,r,i){const a=this._engine.statesByElement.get(e),c=new Map;if(a){const f=[];if(a.forEach((_,w)=>{if(c.set(w,_.value),this._triggers.has(w)){const S=this.trigger(e,w,Wb,i);S&&f.push(S)}}),f.length)return this._engine.markElementAsRemoved(this.id,e,!0,t,c),r&&Hh(f).onDone(()=>this._engine.processLeaveNode(e)),!0}return!1}prepareLeaveAnimationListeners(e){const t=this._elementListeners.get(e),r=this._engine.statesByElement.get(e);if(t&&r){const i=new Set;t.forEach(a=>{const c=a.name;if(i.has(c))return;i.add(c);const _=this._triggers.get(c).fallbackTransition,w=r.get(c)||$k,S=new jk(Wb),x=new zk(this.id,c,e);this._engine.totalQueuedPlayers++,this._queue.push({element:e,triggerName:c,transition:_,fromState:w,toState:S,player:x,isFallbackTransition:!0})})}}removeNode(e,t){const r=this._engine;if(e.childElementCount&&this._signalRemovalForInnerTriggers(e,t),this.triggerLeaveAnimation(e,t,!0))return;let i=!1;if(r.totalAnimations){const a=r.players.length?r.playersByQueriedElement.get(e):[];if(a&&a.length)i=!0;else{let c=e;for(;c=c.parentNode;)if(r.statesByElement.get(c)){i=!0;break}}}if(this.prepareLeaveAnimationListeners(e),i)r.markElementAsRemoved(this.id,e,!1,t);else{const a=e[Ia];(!a||a===ZB)&&(r.afterFlush(()=>this.clearElementCache(e)),r.destroyInnerAnimations(e),r._onRemovalComplete(e,t))}}insertNode(e,t){Da(e,this._hostClassName)}drainQueuedTransitions(e){const t=[];return this._queue.forEach(r=>{const i=r.player;if(i.destroyed)return;const a=r.element,c=this._elementListeners.get(a);c&&c.forEach(f=>{if(f.name==r.triggerName){const _=Dk(a,r.triggerName,r.fromState.value,r.toState.value);_._data=e,Ck(r.player,f.phase,_,f.callback)}}),i.markedForDestroy?this._engine.afterFlush(()=>{i.destroy()}):t.push(r)}),this._queue=[],t.sort((r,i)=>{const a=r.transition.ast.depCount,c=i.transition.ast.depCount;return 0==a||0==c?a-c:this._engine.driver.containsElement(r.element,i.element)?1:-1})}destroy(e){this.players.forEach(t=>t.destroy()),this._signalRemovalForInnerTriggers(this.hostElement,e)}elementContainsData(e){let t=!1;return this._elementListeners.has(e)&&(t=!0),t=!!this._queue.find(r=>r.element===e)||t,t}}class J4{constructor(e,t,r){this.bodyNode=e,this.driver=t,this._normalizer=r,this.players=[],this.newHostElements=new Map,this.playersByElement=new Map,this.playersByQueriedElement=new Map,this.statesByElement=new Map,this.disabledNodes=new Set,this.totalAnimations=0,this.totalQueuedPlayers=0,this._namespaceLookup={},this._namespaceList=[],this._flushFns=[],this._whenQuietFns=[],this.namespacesByHostElement=new Map,this.collectedEnterElements=[],this.collectedLeaveElements=[],this.onRemovalComplete=(i,a)=>{}}_onRemovalComplete(e,t){this.onRemovalComplete(e,t)}get queuedPlayers(){const e=[];return this._namespaceList.forEach(t=>{t.players.forEach(r=>{r.queued&&e.push(r)})}),e}createNamespace(e,t){const r=new X4(e,t,this);return this.bodyNode&&this.driver.containsElement(this.bodyNode,t)?this._balanceNamespaceList(r,t):(this.newHostElements.set(t,r),this.collectEnterElement(t)),this._namespaceLookup[e]=r}_balanceNamespaceList(e,t){const r=this._namespaceList,i=this.namespacesByHostElement;if(r.length-1>=0){let c=!1,f=this.driver.getParentElement(t);for(;f;){const _=i.get(f);if(_){const w=r.indexOf(_);r.splice(w+1,0,e),c=!0;break}f=this.driver.getParentElement(f)}c||r.unshift(e)}else r.push(e);return i.set(t,e),e}register(e,t){let r=this._namespaceLookup[e];return r||(r=this.createNamespace(e,t)),r}registerTrigger(e,t,r){let i=this._namespaceLookup[e];i&&i.register(t,r)&&this.totalAnimations++}destroy(e,t){if(!e)return;const r=this._fetchNamespace(e);this.afterFlush(()=>{this.namespacesByHostElement.delete(r.hostElement),delete this._namespaceLookup[e];const i=this._namespaceList.indexOf(r);i>=0&&this._namespaceList.splice(i,1)}),this.afterFlushAnimationsDone(()=>r.destroy(t))}_fetchNamespace(e){return this._namespaceLookup[e]}fetchNamespacesByElement(e){const t=new Set,r=this.statesByElement.get(e);if(r)for(let i of r.values())if(i.namespaceId){const a=this._fetchNamespace(i.namespaceId);a&&t.add(a)}return t}trigger(e,t,r,i){if(oD(t)){const a=this._fetchNamespace(e);if(a)return a.trigger(t,r,i),!0}return!1}insertNode(e,t,r,i){if(!oD(t))return;const a=t[Ia];if(a&&a.setForRemoval){a.setForRemoval=!1,a.setForMove=!0;const c=this.collectedLeaveElements.indexOf(t);c>=0&&this.collectedLeaveElements.splice(c,1)}if(e){const c=this._fetchNamespace(e);c&&c.insertNode(t,r)}i&&this.collectEnterElement(t)}collectEnterElement(e){this.collectedEnterElements.push(e)}markElementAsDisabled(e,t){t?this.disabledNodes.has(e)||(this.disabledNodes.add(e),Da(e,Hk)):this.disabledNodes.has(e)&&(this.disabledNodes.delete(e),R_(e,Hk))}removeNode(e,t,r,i){if(oD(t)){const a=e?this._fetchNamespace(e):null;if(a?a.removeNode(t,i):this.markElementAsRemoved(e,t,!1,i),r){const c=this.namespacesByHostElement.get(t);c&&c.id!==e&&c.removeNode(t,i)}}else this._onRemovalComplete(t,i)}markElementAsRemoved(e,t,r,i,a){this.collectedLeaveElements.push(t),t[Ia]={namespaceId:e,setForRemoval:i,hasAnimation:r,removedBeforeQueried:!1,previousTriggersValues:a}}listen(e,t,r,i,a){return oD(t)?this._fetchNamespace(e).listen(t,r,i,a):()=>{}}_buildInstruction(e,t,r,i,a){return e.transition.build(this.driver,e.element,e.fromState.value,e.toState.value,r,i,e.fromState.options,e.toState.options,t,a)}destroyInnerAnimations(e){let t=this.driver.query(e,ZI,!0);t.forEach(r=>this.destroyActiveAnimationsForElement(r)),0!=this.playersByQueriedElement.size&&(t=this.driver.query(e,xk,!0),t.forEach(r=>this.finishActiveQueriedAnimationOnElement(r)))}destroyActiveAnimationsForElement(e){const t=this.playersByElement.get(e);t&&t.forEach(r=>{r.queued?r.markedForDestroy=!0:r.destroy()})}finishActiveQueriedAnimationOnElement(e){const t=this.playersByQueriedElement.get(e);t&&t.forEach(r=>r.finish())}whenRenderingDone(){return new Promise(e=>{if(this.players.length)return Hh(this.players).onDone(()=>e());e()})}processLeaveNode(e){const t=e[Ia];if(t&&t.setForRemoval){if(e[Ia]=ZB,t.namespaceId){this.destroyInnerAnimations(e);const r=this._fetchNamespace(t.namespaceId);r&&r.clearElementCache(e)}this._onRemovalComplete(e,t.setForRemoval)}e.classList?.contains(Hk)&&this.markElementAsDisabled(e,!1),this.driver.query(e,".ng-animate-disabled",!0).forEach(r=>{this.markElementAsDisabled(r,!1)})}flush(e=-1){let t=[];if(this.newHostElements.size&&(this.newHostElements.forEach((r,i)=>this._balanceNamespaceList(r,i)),this.newHostElements.clear()),this.totalAnimations&&this.collectedEnterElements.length)for(let r=0;r<this.collectedEnterElements.length;r++)Da(this.collectedEnterElements[r],"ng-star-inserted");if(this._namespaceList.length&&(this.totalQueuedPlayers||this.collectedLeaveElements.length)){const r=[];try{t=this._flushAnimations(r,e)}finally{for(let i=0;i<r.length;i++)r[i]()}}else for(let r=0;r<this.collectedLeaveElements.length;r++)this.processLeaveNode(this.collectedLeaveElements[r]);if(this.totalQueuedPlayers=0,this.collectedEnterElements.length=0,this.collectedLeaveElements.length=0,this._flushFns.forEach(r=>r()),this._flushFns=[],this._whenQuietFns.length){const r=this._whenQuietFns;this._whenQuietFns=[],t.length?Hh(t).onDone(()=>{r.forEach(i=>i())}):r.forEach(i=>i())}}reportError(e){throw function JG(n){return new d.vHH(3402,!1)}()}_flushAnimations(e,t){const r=new rD,i=[],a=new Map,c=[],f=new Map,_=new Map,w=new Map,S=new Set;this.disabledNodes.forEach(Et=>{S.add(Et);const Lt=this.driver.query(Et,".ng-animate-queued",!0);for(let jt=0;jt<Lt.length;jt++)S.add(Lt[jt])});const x=this.bodyNode,L=Array.from(this.statesByElement.keys()),U=XB(L,this.collectedEnterElements),W=new Map;let ie=0;U.forEach((Et,Lt)=>{const jt=Mk+ie++;W.set(Lt,jt),Et.forEach(Cn=>Da(Cn,jt))});const we=[],qe=new Set,ot=new Set;for(let Et=0;Et<this.collectedLeaveElements.length;Et++){const Lt=this.collectedLeaveElements[Et],jt=Lt[Ia];jt&&jt.setForRemoval&&(we.push(Lt),qe.add(Lt),jt.hasAnimation?this.driver.query(Lt,".ng-star-inserted",!0).forEach(Cn=>qe.add(Cn)):ot.add(Lt))}const tt=new Map,Dt=XB(L,Array.from(qe));Dt.forEach((Et,Lt)=>{const jt=WI+ie++;tt.set(Lt,jt),Et.forEach(Cn=>Da(Cn,jt))}),e.push(()=>{U.forEach((Et,Lt)=>{const jt=W.get(Lt);Et.forEach(Cn=>R_(Cn,jt))}),Dt.forEach((Et,Lt)=>{const jt=tt.get(Lt);Et.forEach(Cn=>R_(Cn,jt))}),we.forEach(Et=>{this.processLeaveNode(Et)})});const zt=[],Yt=[];for(let Et=this._namespaceList.length-1;Et>=0;Et--)this._namespaceList[Et].drainQueuedTransitions(t).forEach(jt=>{const Cn=jt.player,ki=jt.element;if(zt.push(Cn),this.collectedEnterElements.length){const Is=ki[Ia];if(Is&&Is.setForMove){if(Is.previousTriggersValues&&Is.previousTriggersValues.has(jt.triggerName)){const yg=Is.previousTriggersValues.get(jt.triggerName),Sa=this.statesByElement.get(jt.element);if(Sa&&Sa.has(jt.triggerName)){const hD=Sa.get(jt.triggerName);hD.value=yg,Sa.set(jt.triggerName,hD)}}return void Cn.destroy()}}const kc=!x||!this.driver.containsElement(x,ki),Lo=tt.get(ki),Gh=W.get(ki),Cr=this._buildInstruction(jt,r,Gh,Lo,kc);if(Cr.errors&&Cr.errors.length)return void Yt.push(Cr);if(kc)return Cn.onStart(()=>pg(ki,Cr.fromStyles)),Cn.onDestroy(()=>Rc(ki,Cr.toStyles)),void i.push(Cn);if(jt.isFallbackTransition)return Cn.onStart(()=>pg(ki,Cr.fromStyles)),Cn.onDestroy(()=>Rc(ki,Cr.toStyles)),void i.push(Cn);const wU=[];Cr.timelines.forEach(Is=>{Is.stretchStartingKeyframe=!0,this.disabledNodes.has(Is.element)||wU.push(Is)}),Cr.timelines=wU,r.append(ki,Cr.timelines),c.push({instruction:Cr,player:Cn,element:ki}),Cr.queriedElements.forEach(Is=>No(f,Is,[]).push(Cn)),Cr.preStyleProps.forEach((Is,yg)=>{if(Is.size){let Sa=_.get(yg);Sa||_.set(yg,Sa=new Set),Is.forEach((hD,Jk)=>Sa.add(Jk))}}),Cr.postStyleProps.forEach((Is,yg)=>{let Sa=w.get(yg);Sa||w.set(yg,Sa=new Set),Is.forEach((hD,Jk)=>Sa.add(Jk))})});if(Yt.length){const Et=[];Yt.forEach(Lt=>{Et.push(function e4(n,e){return new d.vHH(3505,!1)}())}),zt.forEach(Lt=>Lt.destroy()),this.reportError(Et)}const Tn=new Map,Ri=new Map;c.forEach(Et=>{const Lt=Et.element;r.has(Lt)&&(Ri.set(Lt,Lt),this._beforeAnimationBuild(Et.player.namespaceId,Et.instruction,Tn))}),i.forEach(Et=>{const Lt=Et.element;this._getPreviousPlayers(Lt,!1,Et.namespaceId,Et.triggerName,null).forEach(Cn=>{No(Tn,Lt,[]).push(Cn),Cn.destroy()})});const ed=we.filter(Et=>eU(Et,_,w)),td=new Map;QB(td,this.driver,ot,w,ya).forEach(Et=>{eU(Et,_,w)&&ed.push(Et)});const Yb=new Map;U.forEach((Et,Lt)=>{QB(Yb,this.driver,new Set(Et),_,"!")}),ed.forEach(Et=>{const Lt=td.get(Et),jt=Yb.get(Et);td.set(Et,new Map([...Array.from(Lt?.entries()??[]),...Array.from(jt?.entries()??[])]))});const _g=[],vU=[],bU={};c.forEach(Et=>{const{element:Lt,player:jt,instruction:Cn}=Et;if(r.has(Lt)){if(S.has(Lt))return jt.onDestroy(()=>Rc(Lt,Cn.toStyles)),jt.disabled=!0,jt.overrideTotalTime(Cn.totalTime),void i.push(jt);let ki=bU;if(Ri.size>1){let Lo=Lt;const Gh=[];for(;Lo=Lo.parentNode;){const Cr=Ri.get(Lo);if(Cr){ki=Cr;break}Gh.push(Lo)}Gh.forEach(Cr=>Ri.set(Cr,ki))}const kc=this._buildAnimation(jt.namespaceId,Cn,Tn,a,Yb,td);if(jt.setRealPlayer(kc),ki===bU)_g.push(jt);else{const Lo=this.playersByElement.get(ki);Lo&&Lo.length&&(jt.parentPlayer=Hh(Lo)),i.push(jt)}}else pg(Lt,Cn.fromStyles),jt.onDestroy(()=>Rc(Lt,Cn.toStyles)),vU.push(jt),S.has(Lt)&&i.push(jt)}),vU.forEach(Et=>{const Lt=a.get(Et.element);if(Lt&&Lt.length){const jt=Hh(Lt);Et.setRealPlayer(jt)}}),i.forEach(Et=>{Et.parentPlayer?Et.syncPlayerEvents(Et.parentPlayer):Et.destroy()});for(let Et=0;Et<we.length;Et++){const Lt=we[Et],jt=Lt[Ia];if(R_(Lt,WI),jt&&jt.hasAnimation)continue;let Cn=[];if(f.size){let kc=f.get(Lt);kc&&kc.length&&Cn.push(...kc);let Lo=this.driver.query(Lt,xk,!0);for(let Gh=0;Gh<Lo.length;Gh++){let Cr=f.get(Lo[Gh]);Cr&&Cr.length&&Cn.push(...Cr)}}const ki=Cn.filter(kc=>!kc.destroyed);ki.length?r5(this,Lt,ki):this.processLeaveNode(Lt)}return we.length=0,_g.forEach(Et=>{this.players.push(Et),Et.onDone(()=>{Et.destroy();const Lt=this.players.indexOf(Et);this.players.splice(Lt,1)}),Et.play()}),_g}elementContainsData(e,t){let r=!1;const i=t[Ia];return i&&i.setForRemoval&&(r=!0),this.playersByElement.has(t)&&(r=!0),this.playersByQueriedElement.has(t)&&(r=!0),this.statesByElement.has(t)&&(r=!0),this._fetchNamespace(e).elementContainsData(t)||r}afterFlush(e){this._flushFns.push(e)}afterFlushAnimationsDone(e){this._whenQuietFns.push(e)}_getPreviousPlayers(e,t,r,i,a){let c=[];if(t){const f=this.playersByQueriedElement.get(e);f&&(c=f)}else{const f=this.playersByElement.get(e);if(f){const _=!a||a==Wb;f.forEach(w=>{w.queued||!_&&w.triggerName!=i||c.push(w)})}}return(r||i)&&(c=c.filter(f=>!(r&&r!=f.namespaceId||i&&i!=f.triggerName))),c}_beforeAnimationBuild(e,t,r){const a=t.element,c=t.isRemovalTransition?void 0:e,f=t.isRemovalTransition?void 0:t.triggerName;for(const _ of t.timelines){const w=_.element,S=w!==a,x=No(r,w,[]);this._getPreviousPlayers(w,S,c,f,t.toState).forEach(U=>{const W=U.getRealPlayer();W.beforeDestroy&&W.beforeDestroy(),U.destroy(),x.push(U)})}pg(a,t.fromStyles)}_buildAnimation(e,t,r,i,a,c){const f=t.triggerName,_=t.element,w=[],S=new Set,x=new Set,L=t.timelines.map(W=>{const ie=W.element;S.add(ie);const we=ie[Ia];if(we&&we.removedBeforeQueried)return new jm(W.duration,W.delay);const qe=ie!==_,ot=function s5(n){const e=[];return JB(n,e),e}((r.get(ie)||Y4).map(Tn=>Tn.getRealPlayer())).filter(Tn=>!!Tn.element&&Tn.element===ie),tt=a.get(ie),Dt=c.get(ie),zt=DB(0,this._normalizer,0,W.keyframes,tt,Dt),Yt=this._buildPlayer(W,zt,ot);if(W.subTimeline&&i&&x.add(ie),qe){const Tn=new zk(e,f,ie);Tn.setRealPlayer(Yt),w.push(Tn)}return Yt});w.forEach(W=>{No(this.playersByQueriedElement,W.element,[]).push(W),W.onDone(()=>function e5(n,e,t){let r=n.get(e);if(r){if(r.length){const i=r.indexOf(t);r.splice(i,1)}0==r.length&&n.delete(e)}return r}(this.playersByQueriedElement,W.element,W))}),S.forEach(W=>Da(W,PB));const U=Hh(L);return U.onDestroy(()=>{S.forEach(W=>R_(W,PB)),Rc(_,t.toStyles)}),x.forEach(W=>{No(i,W,[]).push(U)}),U}_buildPlayer(e,t,r){return t.length>0?this.driver.animate(e.element,t,e.duration,e.delay,e.easing,r):new jm(e.duration,e.delay)}}class zk{constructor(e,t,r){this.namespaceId=e,this.triggerName=t,this.element=r,this._player=new jm,this._containsRealPlayer=!1,this._queuedCallbacks=new Map,this.destroyed=!1,this.markedForDestroy=!1,this.disabled=!1,this.queued=!0,this.totalTime=0}setRealPlayer(e){this._containsRealPlayer||(this._player=e,this._queuedCallbacks.forEach((t,r)=>{t.forEach(i=>Ck(e,r,void 0,i))}),this._queuedCallbacks.clear(),this._containsRealPlayer=!0,this.overrideTotalTime(e.totalTime),this.queued=!1)}getRealPlayer(){return this._player}overrideTotalTime(e){this.totalTime=e}syncPlayerEvents(e){const t=this._player;t.triggerCallback&&e.onStart(()=>t.triggerCallback("start")),e.onDone(()=>this.finish()),e.onDestroy(()=>this.destroy())}_queueEvent(e,t){No(this._queuedCallbacks,e,[]).push(t)}onDone(e){this.queued&&this._queueEvent("done",e),this._player.onDone(e)}onStart(e){this.queued&&this._queueEvent("start",e),this._player.onStart(e)}onDestroy(e){this.queued&&this._queueEvent("destroy",e),this._player.onDestroy(e)}init(){this._player.init()}hasStarted(){return!this.queued&&this._player.hasStarted()}play(){!this.queued&&this._player.play()}pause(){!this.queued&&this._player.pause()}restart(){!this.queued&&this._player.restart()}finish(){this._player.finish()}destroy(){this.destroyed=!0,this._player.destroy()}reset(){!this.queued&&this._player.reset()}setPosition(e){this.queued||this._player.setPosition(e)}getPosition(){return this.queued?0:this._player.getPosition()}triggerCallback(e){const t=this._player;t.triggerCallback&&t.triggerCallback(e)}}function oD(n){return n&&1===n.nodeType}function YB(n,e){const t=n.style.display;return n.style.display=e??"none",t}function QB(n,e,t,r,i){const a=[];t.forEach(_=>a.push(YB(_)));const c=[];r.forEach((_,w)=>{const S=new Map;_.forEach(x=>{const L=e.computeStyle(w,x,i);S.set(x,L),(!L||0==L.length)&&(w[Ia]=Q4,c.push(w))}),n.set(w,S)});let f=0;return t.forEach(_=>YB(_,a[f++])),c}function XB(n,e){const t=new Map;if(n.forEach(f=>t.set(f,[])),0==e.length)return t;const i=new Set(e),a=new Map;function c(f){if(!f)return 1;let _=a.get(f);if(_)return _;const w=f.parentNode;return _=t.has(w)?w:i.has(w)?1:c(w),a.set(f,_),_}return e.forEach(f=>{const _=c(f);1!==_&&t.get(_).push(f)}),t}function Da(n,e){n.classList?.add(e)}function R_(n,e){n.classList?.remove(e)}function r5(n,e,t){Hh(t).onDone(()=>n.processLeaveNode(e))}function JB(n,e){for(let t=0;t<n.length;t++){const r=n[t];r instanceof RE?JB(r.players,e):e.push(r)}}function eU(n,e,t){const r=t.get(n);if(!r)return!1;let i=e.get(n);return i?r.forEach(a=>i.add(a)):e.set(n,r),t.delete(n),!0}class aD{constructor(e,t,r){this.bodyNode=e,this._driver=t,this._normalizer=r,this._triggerCache={},this.onRemovalComplete=(i,a)=>{},this._transitionEngine=new J4(e,t,r),this._timelineEngine=new G4(e,t,r),this._transitionEngine.onRemovalComplete=(i,a)=>this.onRemovalComplete(i,a)}registerTrigger(e,t,r,i,a){const c=e+"-"+i;let f=this._triggerCache[c];if(!f){const _=[],S=Pk(this._driver,a,_,[]);if(_.length)throw function $G(n,e){return new d.vHH(3404,!1)}();f=function H4(n,e,t){return new j4(n,e,t)}(i,S,this._normalizer),this._triggerCache[c]=f}this._transitionEngine.registerTrigger(t,i,f)}register(e,t){this._transitionEngine.register(e,t)}destroy(e,t){this._transitionEngine.destroy(e,t)}onInsert(e,t,r,i){this._transitionEngine.insertNode(e,t,r,i)}onRemove(e,t,r,i){this._transitionEngine.removeNode(e,t,i||!1,r)}disableAnimations(e,t){this._transitionEngine.markElementAsDisabled(e,t)}process(e,t,r,i){if("@"==r.charAt(0)){const[a,c]=SB(r);this._timelineEngine.command(a,t,c,i)}else this._transitionEngine.trigger(e,t,r,i)}listen(e,t,r,i,a){if("@"==r.charAt(0)){const[c,f]=SB(r);return this._timelineEngine.listen(c,t,f,a)}return this._transitionEngine.listen(e,t,r,i,a)}flush(e=-1){this._transitionEngine.flush(e)}get players(){return this._transitionEngine.players.concat(this._timelineEngine.players)}whenRenderingDone(){return this._transitionEngine.whenRenderingDone()}}let l5=(()=>{class n{constructor(t,r,i){this._element=t,this._startStyles=r,this._endStyles=i,this._state=0;let a=n.initialStylesByElement.get(t);a||n.initialStylesByElement.set(t,a=new Map),this._initialStyles=a}start(){this._state<1&&(this._startStyles&&Rc(this._element,this._startStyles,this._initialStyles),this._state=1)}finish(){this.start(),this._state<2&&(Rc(this._element,this._initialStyles),this._endStyles&&(Rc(this._element,this._endStyles),this._endStyles=null),this._state=1)}destroy(){this.finish(),this._state<3&&(n.initialStylesByElement.delete(this._element),this._startStyles&&(pg(this._element,this._startStyles),this._endStyles=null),this._endStyles&&(pg(this._element,this._endStyles),this._endStyles=null),Rc(this._element,this._initialStyles),this._state=3)}}return n.initialStylesByElement=new WeakMap,n})();function Gk(n){let e=null;return n.forEach((t,r)=>{(function c5(n){return"display"===n||"position"===n})(r)&&(e=e||new Map,e.set(r,t))}),e}class tU{constructor(e,t,r,i){this.element=e,this.keyframes=t,this.options=r,this._specialStyles=i,this._onDoneFns=[],this._onStartFns=[],this._onDestroyFns=[],this._initialized=!1,this._finished=!1,this._started=!1,this._destroyed=!1,this._originalOnDoneFns=[],this._originalOnStartFns=[],this.time=0,this.parentPlayer=null,this.currentSnapshot=new Map,this._duration=r.duration,this._delay=r.delay||0,this.time=this._duration+this._delay}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(e=>e()),this._onDoneFns=[])}init(){this._buildPlayer(),this._preparePlayerBeforeStart()}_buildPlayer(){if(this._initialized)return;this._initialized=!0;const e=this.keyframes;this.domPlayer=this._triggerWebAnimation(this.element,e,this.options),this._finalKeyframe=e.length?e[e.length-1]:new Map,this.domPlayer.addEventListener("finish",()=>this._onFinish())}_preparePlayerBeforeStart(){this._delay?this._resetDomPlayerState():this.domPlayer.pause()}_convertKeyframesToObject(e){const t=[];return e.forEach(r=>{t.push(Object.fromEntries(r))}),t}_triggerWebAnimation(e,t,r){return e.animate(this._convertKeyframesToObject(t),r)}onStart(e){this._originalOnStartFns.push(e),this._onStartFns.push(e)}onDone(e){this._originalOnDoneFns.push(e),this._onDoneFns.push(e)}onDestroy(e){this._onDestroyFns.push(e)}play(){this._buildPlayer(),this.hasStarted()||(this._onStartFns.forEach(e=>e()),this._onStartFns=[],this._started=!0,this._specialStyles&&this._specialStyles.start()),this.domPlayer.play()}pause(){this.init(),this.domPlayer.pause()}finish(){this.init(),this._specialStyles&&this._specialStyles.finish(),this._onFinish(),this.domPlayer.finish()}reset(){this._resetDomPlayerState(),this._destroyed=!1,this._finished=!1,this._started=!1,this._onStartFns=this._originalOnStartFns,this._onDoneFns=this._originalOnDoneFns}_resetDomPlayerState(){this.domPlayer&&this.domPlayer.cancel()}restart(){this.reset(),this.play()}hasStarted(){return this._started}destroy(){this._destroyed||(this._destroyed=!0,this._resetDomPlayerState(),this._onFinish(),this._specialStyles&&this._specialStyles.destroy(),this._onDestroyFns.forEach(e=>e()),this._onDestroyFns=[])}setPosition(e){void 0===this.domPlayer&&this.init(),this.domPlayer.currentTime=e*this.time}getPosition(){return this.domPlayer.currentTime/this.time}get totalTime(){return this._delay+this._duration}beforeDestroy(){const e=new Map;this.hasStarted()&&this._finalKeyframe.forEach((r,i)=>{"offset"!==i&&e.set(i,this._finished?r:UB(this.element,i))}),this.currentSnapshot=e}triggerCallback(e){const t="start"===e?this._onStartFns:this._onDoneFns;t.forEach(r=>r()),t.length=0}}class u5{validateStyleProperty(e){return!0}validateAnimatableStyleProperty(e){return!0}matchesElement(e,t){return!1}containsElement(e,t){return xB(e,t)}getParentElement(e){return Tk(e)}query(e,t,r){return RB(e,t,r)}computeStyle(e,t,r){return window.getComputedStyle(e)[t]}animate(e,t,r,i,a,c=[]){const _={duration:r,delay:i,fill:0==i?"both":"forwards"};a&&(_.easing=a);const w=new Map,S=c.filter(U=>U instanceof tU);(function f4(n,e){return 0===n||0===e})(r,i)&&S.forEach(U=>{U.currentSnapshot.forEach((W,ie)=>w.set(ie,W))});let x=function c4(n){return n.length?n[0]instanceof Map?n:n.map(e=>NB(e)):[]}(t).map(U=>jh(U));x=function p4(n,e,t){if(t.size&&e.length){let r=e[0],i=[];if(t.forEach((a,c)=>{r.has(c)||i.push(c),r.set(c,a)}),i.length)for(let a=1;a<e.length;a++){let c=e[a];i.forEach(f=>c.set(f,UB(n,f)))}}return e}(e,x,w);const L=function a5(n,e){let t=null,r=null;return Array.isArray(e)&&e.length?(t=Gk(e[0]),e.length>1&&(r=Gk(e[e.length-1]))):e instanceof Map&&(t=Gk(e)),t||r?new l5(n,t,r):null}(e,x);return new tU(e,x,_,L)}}let d5=(()=>{class n extends fv{constructor(t,r){super(),this._nextAnimationId=0,this._renderer=t.createRenderer(r.body,{id:"0",encapsulation:d.ifc.None,styles:[],data:{animation:[]}})}build(t){const r=this._nextAnimationId.toString();this._nextAnimationId++;const i=Array.isArray(t)?gv(t):t;return nU(this._renderer,null,r,"register",[i]),new h5(r,this._renderer)}}return n.\u0275fac=function(t){return new(t||n)(d.LFG(d.FYo),d.LFG(se))},n.\u0275prov=d.Yz7({token:n,factory:n.\u0275fac}),n})();class h5 extends class Um{}{constructor(e,t){super(),this._id=e,this._renderer=t}create(e,t){return new f5(this._id,e,t||{},this._renderer)}}class f5{constructor(e,t,r,i){this.id=e,this.element=t,this._renderer=i,this.parentPlayer=null,this._started=!1,this.totalTime=0,this._command("create",r)}_listen(e,t){return this._renderer.listen(this.element,`@@${this.id}:${e}`,t)}_command(e,...t){return nU(this._renderer,this.element,this.id,e,t)}onDone(e){this._listen("done",e)}onStart(e){this._listen("start",e)}onDestroy(e){this._listen("destroy",e)}init(){this._command("init")}hasStarted(){return this._started}play(){this._command("play"),this._started=!0}pause(){this._command("pause")}restart(){this._command("restart")}finish(){this._command("finish")}destroy(){this._command("destroy")}reset(){this._command("reset"),this._started=!1}setPosition(e){this._command("setPosition",e)}getPosition(){return this._renderer.engine.players[+this.id]?.getPosition()??0}}function nU(n,e,t,r,i){return n.setProperty(e,`@@${t}:${r}`,i)}const rU="@.disabled";let p5=(()=>{class n{constructor(t,r,i){this.delegate=t,this.engine=r,this._zone=i,this._currentId=0,this._microtaskId=1,this._animationCallbacksBuffer=[],this._rendererCache=new Map,this._cdRecurDepth=0,this.promise=Promise.resolve(0),r.onRemovalComplete=(a,c)=>{const f=c?.parentNode(a);f&&c.removeChild(f,a)}}createRenderer(t,r){const a=this.delegate.createRenderer(t,r);if(!(t&&r&&r.data&&r.data.animation)){let S=this._rendererCache.get(a);return S||(S=new iU("",a,this.engine,()=>this._rendererCache.delete(a)),this._rendererCache.set(a,S)),S}const c=r.id,f=r.id+"-"+this._currentId;this._currentId++,this.engine.register(f,t);const _=S=>{Array.isArray(S)?S.forEach(_):this.engine.registerTrigger(c,f,t,S.name,S)};return r.data.animation.forEach(_),new g5(this,f,a,this.engine)}begin(){this._cdRecurDepth++,this.delegate.begin&&this.delegate.begin()}_scheduleCountTask(){this.promise.then(()=>{this._microtaskId++})}scheduleListenerCallback(t,r,i){t>=0&&t<this._microtaskId?this._zone.run(()=>r(i)):(0==this._animationCallbacksBuffer.length&&Promise.resolve(null).then(()=>{this._zone.run(()=>{this._animationCallbacksBuffer.forEach(a=>{const[c,f]=a;c(f)}),this._animationCallbacksBuffer=[]})}),this._animationCallbacksBuffer.push([r,i]))}end(){this._cdRecurDepth--,0==this._cdRecurDepth&&this._zone.runOutsideAngular(()=>{this._scheduleCountTask(),this.engine.flush(this._microtaskId)}),this.delegate.end&&this.delegate.end()}whenRenderingDone(){return this.engine.whenRenderingDone()}}return n.\u0275fac=function(t){return new(t||n)(d.LFG(d.FYo),d.LFG(aD),d.LFG(d.R0b))},n.\u0275prov=d.Yz7({token:n,factory:n.\u0275fac}),n})();class iU{constructor(e,t,r,i){this.namespaceId=e,this.delegate=t,this.engine=r,this._onDestroy=i,this.destroyNode=this.delegate.destroyNode?a=>t.destroyNode(a):null}get data(){return this.delegate.data}destroy(){this.engine.destroy(this.namespaceId,this.delegate),this.delegate.destroy(),this._onDestroy?.()}createElement(e,t){return this.delegate.createElement(e,t)}createComment(e){return this.delegate.createComment(e)}createText(e){return this.delegate.createText(e)}appendChild(e,t){this.delegate.appendChild(e,t),this.engine.onInsert(this.namespaceId,t,e,!1)}insertBefore(e,t,r,i=!0){this.delegate.insertBefore(e,t,r),this.engine.onInsert(this.namespaceId,t,e,i)}removeChild(e,t,r){this.engine.onRemove(this.namespaceId,t,this.delegate,r)}selectRootElement(e,t){return this.delegate.selectRootElement(e,t)}parentNode(e){return this.delegate.parentNode(e)}nextSibling(e){return this.delegate.nextSibling(e)}setAttribute(e,t,r,i){this.delegate.setAttribute(e,t,r,i)}removeAttribute(e,t,r){this.delegate.removeAttribute(e,t,r)}addClass(e,t){this.delegate.addClass(e,t)}removeClass(e,t){this.delegate.removeClass(e,t)}setStyle(e,t,r,i){this.delegate.setStyle(e,t,r,i)}removeStyle(e,t,r){this.delegate.removeStyle(e,t,r)}setProperty(e,t,r){"@"==t.charAt(0)&&t==rU?this.disableAnimations(e,!!r):this.delegate.setProperty(e,t,r)}setValue(e,t){this.delegate.setValue(e,t)}listen(e,t,r){return this.delegate.listen(e,t,r)}disableAnimations(e,t){this.engine.disableAnimations(e,t)}}class g5 extends iU{constructor(e,t,r,i,a){super(t,r,i,a),this.factory=e,this.namespaceId=t}setProperty(e,t,r){"@"==t.charAt(0)?"."==t.charAt(1)&&t==rU?this.disableAnimations(e,r=void 0===r||!!r):this.engine.process(this.namespaceId,e,t.slice(1),r):this.delegate.setProperty(e,t,r)}listen(e,t,r){if("@"==t.charAt(0)){const i=function m5(n){switch(n){case"body":return document.body;case"document":return document;case"window":return window;default:return n}}(e);let a=t.slice(1),c="";return"@"!=a.charAt(0)&&([a,c]=function _5(n){const e=n.indexOf(".");return[n.substring(0,e),n.slice(e+1)]}(a)),this.engine.listen(this.namespaceId,i,a,c,f=>{this.factory.scheduleListenerCallback(f._data||-1,r,f)})}return this.delegate.listen(e,t,r)}}let y5=(()=>{class n extends aD{constructor(t,r,i,a){super(t.body,r,i)}ngOnDestroy(){this.flush()}}return n.\u0275fac=function(t){return new(t||n)(d.LFG(se),d.LFG(Ak),d.LFG(Bk),d.LFG(d.z2F))},n.\u0275prov=d.Yz7({token:n,factory:n.\u0275fac}),n})();const sU=[{provide:fv,useClass:d5},{provide:Bk,useFactory:function v5(){return new L4}},{provide:aD,useClass:y5},{provide:d.FYo,useFactory:function b5(n,e,t){return new p5(n,e,t)},deps:[Qo,aD,d.R0b]}],qk=[{provide:Ak,useFactory:()=>new u5},{provide:d.QbO,useValue:"BrowserAnimations"},...sU],oU=[{provide:Ak,useClass:kB},{provide:d.QbO,useValue:"NoopAnimations"},...sU];let w5=(()=>{class n{static withConfig(t){return{ngModule:n,providers:t.disableAnimations?oU:qk}}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=d.oAB({type:n}),n.\u0275inj=d.cJS({providers:qk,imports:[Bl]}),n})(),Wk=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=d.oAB({type:n}),n.\u0275inj=d.cJS({imports:[[Di],Di]}),n})(),Kk=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=d.oAB({type:n}),n.\u0275inj=d.cJS({imports:[[AE,Di],Di]}),n})(),Xk=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=d.oAB({type:n}),n.\u0275inj=d.cJS({imports:[[Di],Di]}),n})(),_U=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=d.oAB({type:n}),n.\u0275inj=d.cJS({imports:[Ts,Vu,al,ep,Wk,Kk,Xk,Up,_h,XE,aC,Ts,Vu,al,ep,Wk,Kk,Xk,Up,_h,XE]}),n})(),L5=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=d.oAB({type:n}),n.\u0275inj=d.cJS({imports:[Ts,_U]}),n})(),V5=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=d.oAB({type:n,bootstrap:[W1]}),n.\u0275inj=d.cJS({imports:[Bl,Ts,ep,q1,va.hO.initializeApp(CB_firebaseConfig),GH,wG,w5,_U,L5,aC,Up,al,_h,XE,Kk,Xk,Wk]}),n})();(0,d.G48)(),Vl().bootstrapModule(V5).catch(n=>console.error(n))},9751:(vt,Ae,F)=>{F.d(Ae,{y:()=>Ee});var d=F(930),ee=F(727),P=F(8822),ce=F(9635),le=F(2416),fe=F(576),se=F(2806);let Ee=(()=>{class Y{constructor(xe){xe&&(this._subscribe=xe)}lift(xe){const De=new Y;return De.source=this,De.operator=xe,De}subscribe(xe,De,at){const be=function $(Y){return Y&&Y instanceof d.Lv||function z(Y){return Y&&(0,fe.m)(Y.next)&&(0,fe.m)(Y.error)&&(0,fe.m)(Y.complete)}(Y)&&(0,ee.Nn)(Y)}(xe)?xe:new d.Hp(xe,De,at);return(0,se.x)(()=>{const{operator:ve,source:bt}=this;be.add(ve?ve.call(be,bt):bt?this._subscribe(be):this._trySubscribe(be))}),be}_trySubscribe(xe){try{return this._subscribe(xe)}catch(De){xe.error(De)}}forEach(xe,De){return new(De=ge(De))((at,be)=>{const ve=new d.Hp({next:bt=>{try{xe(bt)}catch(St){be(St),ve.unsubscribe()}},error:be,complete:at});this.subscribe(ve)})}_subscribe(xe){var De;return null===(De=this.source)||void 0===De?void 0:De.subscribe(xe)}[P.L](){return this}pipe(...xe){return(0,ce.U)(xe)(this)}toPromise(xe){return new(xe=ge(xe))((De,at)=>{let be;this.subscribe(ve=>be=ve,ve=>at(ve),()=>De(be))})}}return Y.create=We=>new Y(We),Y})();function ge(Y){var We;return null!==(We=Y??le.v.Promise)&&void 0!==We?We:Promise}},7579:(vt,Ae,F)=>{F.d(Ae,{x:()=>se});var d=F(9751),ee=F(727);const ce=(0,F(3888).d)(ge=>function(){ge(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"});var le=F(8737),fe=F(2806);let se=(()=>{class ge extends d.y{constructor(){super(),this.closed=!1,this.currentObservers=null,this.observers=[],this.isStopped=!1,this.hasError=!1,this.thrownError=null}lift($){const Y=new Ee(this,this);return Y.operator=$,Y}_throwIfClosed(){if(this.closed)throw new ce}next($){(0,fe.x)(()=>{if(this._throwIfClosed(),!this.isStopped){this.currentObservers||(this.currentObservers=Array.from(this.observers));for(const Y of this.currentObservers)Y.next($)}})}error($){(0,fe.x)(()=>{if(this._throwIfClosed(),!this.isStopped){this.hasError=this.isStopped=!0,this.thrownError=$;const{observers:Y}=this;for(;Y.length;)Y.shift().error($)}})}complete(){(0,fe.x)(()=>{if(this._throwIfClosed(),!this.isStopped){this.isStopped=!0;const{observers:$}=this;for(;$.length;)$.shift().complete()}})}unsubscribe(){this.isStopped=this.closed=!0,this.observers=this.currentObservers=null}get observed(){var $;return(null===($=this.observers)||void 0===$?void 0:$.length)>0}_trySubscribe($){return this._throwIfClosed(),super._trySubscribe($)}_subscribe($){return this._throwIfClosed(),this._checkFinalizedStatuses($),this._innerSubscribe($)}_innerSubscribe($){const{hasError:Y,isStopped:We,observers:xe}=this;return Y||We?ee.Lc:(this.currentObservers=null,xe.push($),new ee.w0(()=>{this.currentObservers=null,(0,le.P)(xe,$)}))}_checkFinalizedStatuses($){const{hasError:Y,thrownError:We,isStopped:xe}=this;Y?$.error(We):xe&&$.complete()}asObservable(){const $=new d.y;return $.source=this,$}}return ge.create=(z,$)=>new Ee(z,$),ge})();class Ee extends se{constructor(z,$){super(),this.destination=z,this.source=$}next(z){var $,Y;null===(Y=null===($=this.destination)||void 0===$?void 0:$.next)||void 0===Y||Y.call($,z)}error(z){var $,Y;null===(Y=null===($=this.destination)||void 0===$?void 0:$.error)||void 0===Y||Y.call($,z)}complete(){var z,$;null===($=null===(z=this.destination)||void 0===z?void 0:z.complete)||void 0===$||$.call(z)}_subscribe(z){var $,Y;return null!==(Y=null===($=this.source)||void 0===$?void 0:$.subscribe(z))&&void 0!==Y?Y:ee.Lc}}},930:(vt,Ae,F)=>{F.d(Ae,{Hp:()=>at,Lv:()=>Y});var d=F(576),ee=F(727),P=F(2416),ce=F(7849),le=F(5032);const fe=ge("C",void 0,void 0);function ge(Ne,Ce,me){return{kind:Ne,value:Ce,error:me}}var z=F(3410),$=F(2806);class Y extends ee.w0{constructor(Ce){super(),this.isStopped=!1,Ce?(this.destination=Ce,(0,ee.Nn)(Ce)&&Ce.add(this)):this.destination=St}static create(Ce,me,Ke){return new at(Ce,me,Ke)}next(Ce){this.isStopped?bt(function Ee(Ne){return ge("N",Ne,void 0)}(Ce),this):this._next(Ce)}error(Ce){this.isStopped?bt(function se(Ne){return ge("E",void 0,Ne)}(Ce),this):(this.isStopped=!0,this._error(Ce))}complete(){this.isStopped?bt(fe,this):(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe(),this.destination=null)}_next(Ce){this.destination.next(Ce)}_error(Ce){try{this.destination.error(Ce)}finally{this.unsubscribe()}}_complete(){try{this.destination.complete()}finally{this.unsubscribe()}}}const We=Function.prototype.bind;function xe(Ne,Ce){return We.call(Ne,Ce)}class De{constructor(Ce){this.partialObserver=Ce}next(Ce){const{partialObserver:me}=this;if(me.next)try{me.next(Ce)}catch(Ke){be(Ke)}}error(Ce){const{partialObserver:me}=this;if(me.error)try{me.error(Ce)}catch(Ke){be(Ke)}else be(Ce)}complete(){const{partialObserver:Ce}=this;if(Ce.complete)try{Ce.complete()}catch(me){be(me)}}}class at extends Y{constructor(Ce,me,Ke){let $e;if(super(),(0,d.m)(Ce)||!Ce)$e={next:Ce??void 0,error:me??void 0,complete:Ke??void 0};else{let rt;this&&P.v.useDeprecatedNextContext?(rt=Object.create(Ce),rt.unsubscribe=()=>this.unsubscribe(),$e={next:Ce.next&&xe(Ce.next,rt),error:Ce.error&&xe(Ce.error,rt),complete:Ce.complete&&xe(Ce.complete,rt)}):$e=Ce}this.destination=new De($e)}}function be(Ne){P.v.useDeprecatedSynchronousErrorHandling?(0,$.O)(Ne):(0,ce.h)(Ne)}function bt(Ne,Ce){const{onStoppedNotification:me}=P.v;me&&z.z.setTimeout(()=>me(Ne,Ce))}const St={closed:!0,next:le.Z,error:function ve(Ne){throw Ne},complete:le.Z}},727:(vt,Ae,F)=>{F.d(Ae,{Lc:()=>fe,w0:()=>le,Nn:()=>se});var d=F(576);const P=(0,F(3888).d)(ge=>function($){ge(this),this.message=$?`${$.length} errors occurred during unsubscription:\n${$.map((Y,We)=>`${We+1}) ${Y.toString()}`).join("\n  ")}`:"",this.name="UnsubscriptionError",this.errors=$});var ce=F(8737);class le{constructor(z){this.initialTeardown=z,this.closed=!1,this._parentage=null,this._finalizers=null}unsubscribe(){let z;if(!this.closed){this.closed=!0;const{_parentage:$}=this;if($)if(this._parentage=null,Array.isArray($))for(const xe of $)xe.remove(this);else $.remove(this);const{initialTeardown:Y}=this;if((0,d.m)(Y))try{Y()}catch(xe){z=xe instanceof P?xe.errors:[xe]}const{_finalizers:We}=this;if(We){this._finalizers=null;for(const xe of We)try{Ee(xe)}catch(De){z=z??[],De instanceof P?z=[...z,...De.errors]:z.push(De)}}if(z)throw new P(z)}}add(z){var $;if(z&&z!==this)if(this.closed)Ee(z);else{if(z instanceof le){if(z.closed||z._hasParent(this))return;z._addParent(this)}(this._finalizers=null!==($=this._finalizers)&&void 0!==$?$:[]).push(z)}}_hasParent(z){const{_parentage:$}=this;return $===z||Array.isArray($)&&$.includes(z)}_addParent(z){const{_parentage:$}=this;this._parentage=Array.isArray($)?($.push(z),$):$?[$,z]:z}_removeParent(z){const{_parentage:$}=this;$===z?this._parentage=null:Array.isArray($)&&(0,ce.P)($,z)}remove(z){const{_finalizers:$}=this;$&&(0,ce.P)($,z),z instanceof le&&z._removeParent(this)}}le.EMPTY=(()=>{const ge=new le;return ge.closed=!0,ge})();const fe=le.EMPTY;function se(ge){return ge instanceof le||ge&&"closed"in ge&&(0,d.m)(ge.remove)&&(0,d.m)(ge.add)&&(0,d.m)(ge.unsubscribe)}function Ee(ge){(0,d.m)(ge)?ge():ge.unsubscribe()}},2416:(vt,Ae,F)=>{F.d(Ae,{v:()=>d});const d={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1}},515:(vt,Ae,F)=>{F.d(Ae,{E:()=>ee});const ee=new(F(9751).y)(le=>le.complete())},8996:(vt,Ae,F)=>{F.d(Ae,{D:()=>Ce});var d=F(8421),ee=F(5363),P=F(9468),fe=F(9751),Ee=F(2202),ge=F(576),z=F(9672);function Y(me,Ke){if(!me)throw new Error("Iterable cannot be null");return new fe.y($e=>{(0,z.f)($e,Ke,()=>{const rt=me[Symbol.asyncIterator]();(0,z.f)($e,Ke,()=>{rt.next().then(re=>{re.done?$e.complete():$e.next(re.value)})},0,!0)})})}var We=F(3670),xe=F(8239),De=F(1144),at=F(6495),be=F(2206),ve=F(4532),bt=F(3260);function Ce(me,Ke){return Ke?function Ne(me,Ke){if(null!=me){if((0,We.c)(me))return function ce(me,Ke){return(0,d.Xf)(me).pipe((0,P.R)(Ke),(0,ee.Q)(Ke))}(me,Ke);if((0,De.z)(me))return function se(me,Ke){return new fe.y($e=>{let rt=0;return Ke.schedule(function(){rt===me.length?$e.complete():($e.next(me[rt++]),$e.closed||this.schedule())})})}(me,Ke);if((0,xe.t)(me))return function le(me,Ke){return(0,d.Xf)(me).pipe((0,P.R)(Ke),(0,ee.Q)(Ke))}(me,Ke);if((0,be.D)(me))return Y(me,Ke);if((0,at.T)(me))return function $(me,Ke){return new fe.y($e=>{let rt;return(0,z.f)($e,Ke,()=>{rt=me[Ee.h](),(0,z.f)($e,Ke,()=>{let re,kt;try{({value:re,done:kt}=rt.next())}catch(ft){return void $e.error(ft)}kt?$e.complete():$e.next(re)},0,!0)}),()=>(0,ge.m)(rt?.return)&&rt.return()})}(me,Ke);if((0,bt.L)(me))return function St(me,Ke){return Y((0,bt.Q)(me),Ke)}(me,Ke)}throw(0,ve.z)(me)}(me,Ke):(0,d.Xf)(me)}},8421:(vt,Ae,F)=>{F.d(Ae,{Xf:()=>We});var d=F(655),ee=F(1144),P=F(8239),ce=F(9751),le=F(3670),fe=F(2206),se=F(4532),Ee=F(6495),ge=F(3260),z=F(576),$=F(7849),Y=F(8822);function We(Ne){if(Ne instanceof ce.y)return Ne;if(null!=Ne){if((0,le.c)(Ne))return function xe(Ne){return new ce.y(Ce=>{const me=Ne[Y.L]();if((0,z.m)(me.subscribe))return me.subscribe(Ce);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}(Ne);if((0,ee.z)(Ne))return function De(Ne){return new ce.y(Ce=>{for(let me=0;me<Ne.length&&!Ce.closed;me++)Ce.next(Ne[me]);Ce.complete()})}(Ne);if((0,P.t)(Ne))return function at(Ne){return new ce.y(Ce=>{Ne.then(me=>{Ce.closed||(Ce.next(me),Ce.complete())},me=>Ce.error(me)).then(null,$.h)})}(Ne);if((0,fe.D)(Ne))return ve(Ne);if((0,Ee.T)(Ne))return function be(Ne){return new ce.y(Ce=>{for(const me of Ne)if(Ce.next(me),Ce.closed)return;Ce.complete()})}(Ne);if((0,ge.L)(Ne))return function bt(Ne){return ve((0,ge.Q)(Ne))}(Ne)}throw(0,se.z)(Ne)}function ve(Ne){return new ce.y(Ce=>{(function St(Ne,Ce){var me,Ke,$e,rt;return(0,d.mG)(this,void 0,void 0,function*(){try{for(me=(0,d.KL)(Ne);!(Ke=yield me.next()).done;)if(Ce.next(Ke.value),Ce.closed)return}catch(re){$e={error:re}}finally{try{Ke&&!Ke.done&&(rt=me.return)&&(yield rt.call(me))}finally{if($e)throw $e.error}}Ce.complete()})})(Ne,Ce).catch(me=>Ce.error(me))})}},6451:(vt,Ae,F)=>{F.d(Ae,{T:()=>fe});var d=F(8189),ee=F(8421),P=F(515),ce=F(3269),le=F(8996);function fe(...se){const Ee=(0,ce.yG)(se),ge=(0,ce._6)(se,1/0),z=se;return z.length?1===z.length?(0,ee.Xf)(z[0]):(0,d.J)(ge)((0,le.D)(z,Ee)):P.E}},5403:(vt,Ae,F)=>{F.d(Ae,{x:()=>ee});var d=F(930);function ee(ce,le,fe,se,Ee){return new P(ce,le,fe,se,Ee)}class P extends d.Lv{constructor(le,fe,se,Ee,ge,z){super(le),this.onFinalize=ge,this.shouldUnsubscribe=z,this._next=fe?function($){try{fe($)}catch(Y){le.error(Y)}}:super._next,this._error=Ee?function($){try{Ee($)}catch(Y){le.error(Y)}finally{this.unsubscribe()}}:super._error,this._complete=se?function(){try{se()}catch($){le.error($)}finally{this.unsubscribe()}}:super._complete}unsubscribe(){var le;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){const{closed:fe}=this;super.unsubscribe(),!fe&&(null===(le=this.onFinalize)||void 0===le||le.call(this))}}}},4004:(vt,Ae,F)=>{F.d(Ae,{U:()=>P});var d=F(4482),ee=F(5403);function P(ce,le){return(0,d.e)((fe,se)=>{let Ee=0;fe.subscribe((0,ee.x)(se,ge=>{se.next(ce.call(le,ge,Ee++))}))})}},8189:(vt,Ae,F)=>{F.d(Ae,{J:()=>P});var d=F(5577),ee=F(4671);function P(ce=1/0){return(0,d.z)(ee.y,ce)}},5577:(vt,Ae,F)=>{F.d(Ae,{z:()=>Ee});var d=F(4004),ee=F(8421),P=F(4482),ce=F(9672),le=F(5403),se=F(576);function Ee(ge,z,$=1/0){return(0,se.m)(z)?Ee((Y,We)=>(0,d.U)((xe,De)=>z(Y,xe,We,De))((0,ee.Xf)(ge(Y,We))),$):("number"==typeof z&&($=z),(0,P.e)((Y,We)=>function fe(ge,z,$,Y,We,xe,De,at){const be=[];let ve=0,bt=0,St=!1;const Ne=()=>{St&&!be.length&&!ve&&z.complete()},Ce=Ke=>ve<Y?me(Ke):be.push(Ke),me=Ke=>{xe&&z.next(Ke),ve++;let $e=!1;(0,ee.Xf)($(Ke,bt++)).subscribe((0,le.x)(z,rt=>{We?.(rt),xe?Ce(rt):z.next(rt)},()=>{$e=!0},void 0,()=>{if($e)try{for(ve--;be.length&&ve<Y;){const rt=be.shift();De?(0,ce.f)(z,De,()=>me(rt)):me(rt)}Ne()}catch(rt){z.error(rt)}}))};return ge.subscribe((0,le.x)(z,Ce,()=>{St=!0,Ne()})),()=>{at?.()}}(Y,We,ge,$)))}},5363:(vt,Ae,F)=>{F.d(Ae,{Q:()=>ce});var d=F(9672),ee=F(4482),P=F(5403);function ce(le,fe=0){return(0,ee.e)((se,Ee)=>{se.subscribe((0,P.x)(Ee,ge=>(0,d.f)(Ee,le,()=>Ee.next(ge),fe),()=>(0,d.f)(Ee,le,()=>Ee.complete(),fe),ge=>(0,d.f)(Ee,le,()=>Ee.error(ge),fe)))})}},3099:(vt,Ae,F)=>{F.d(Ae,{B:()=>le});var d=F(8421),ee=F(7579),P=F(930),ce=F(4482);function le(se={}){const{connector:Ee=(()=>new ee.x),resetOnError:ge=!0,resetOnComplete:z=!0,resetOnRefCountZero:$=!0}=se;return Y=>{let We,xe,De,at=0,be=!1,ve=!1;const bt=()=>{xe?.unsubscribe(),xe=void 0},St=()=>{bt(),We=De=void 0,be=ve=!1},Ne=()=>{const Ce=We;St(),Ce?.unsubscribe()};return(0,ce.e)((Ce,me)=>{at++,!ve&&!be&&bt();const Ke=De=De??Ee();me.add(()=>{at--,0===at&&!ve&&!be&&(xe=fe(Ne,$))}),Ke.subscribe(me),!We&&at>0&&(We=new P.Hp({next:$e=>Ke.next($e),error:$e=>{ve=!0,bt(),xe=fe(St,ge,$e),Ke.error($e)},complete:()=>{be=!0,bt(),xe=fe(St,z),Ke.complete()}}),(0,d.Xf)(Ce).subscribe(We))})(Y)}}function fe(se,Ee,...ge){if(!0===Ee)return void se();if(!1===Ee)return;const z=new P.Hp({next:()=>{z.unsubscribe(),se()}});return Ee(...ge).subscribe(z)}},9468:(vt,Ae,F)=>{F.d(Ae,{R:()=>ee});var d=F(4482);function ee(P,ce=0){return(0,d.e)((le,fe)=>{fe.add(P.schedule(()=>le.subscribe(fe),ce))})}},8505:(vt,Ae,F)=>{F.d(Ae,{b:()=>le});var d=F(576),ee=F(4482),P=F(5403),ce=F(4671);function le(fe,se,Ee){const ge=(0,d.m)(fe)||se||Ee?{next:fe,error:se,complete:Ee}:fe;return ge?(0,ee.e)((z,$)=>{var Y;null===(Y=ge.subscribe)||void 0===Y||Y.call(ge);let We=!0;z.subscribe((0,P.x)($,xe=>{var De;null===(De=ge.next)||void 0===De||De.call(ge,xe),$.next(xe)},()=>{var xe;We=!1,null===(xe=ge.complete)||void 0===xe||xe.call(ge),$.complete()},xe=>{var De;We=!1,null===(De=ge.error)||void 0===De||De.call(ge,xe),$.error(xe)},()=>{var xe,De;We&&(null===(xe=ge.unsubscribe)||void 0===xe||xe.call(ge)),null===(De=ge.finalize)||void 0===De||De.call(ge)}))}):ce.y}},4408:(vt,Ae,F)=>{F.d(Ae,{o:()=>le});var d=F(727);class ee extends d.w0{constructor(se,Ee){super()}schedule(se,Ee=0){return this}}const P={setInterval(fe,se,...Ee){const{delegate:ge}=P;return ge?.setInterval?ge.setInterval(fe,se,...Ee):setInterval(fe,se,...Ee)},clearInterval(fe){const{delegate:se}=P;return(se?.clearInterval||clearInterval)(fe)},delegate:void 0};var ce=F(8737);class le extends ee{constructor(se,Ee){super(se,Ee),this.scheduler=se,this.work=Ee,this.pending=!1}schedule(se,Ee=0){var ge;if(this.closed)return this;this.state=se;const z=this.id,$=this.scheduler;return null!=z&&(this.id=this.recycleAsyncId($,z,Ee)),this.pending=!0,this.delay=Ee,this.id=null!==(ge=this.id)&&void 0!==ge?ge:this.requestAsyncId($,this.id,Ee),this}requestAsyncId(se,Ee,ge=0){return P.setInterval(se.flush.bind(se,this),ge)}recycleAsyncId(se,Ee,ge=0){if(null!=ge&&this.delay===ge&&!1===this.pending)return Ee;null!=Ee&&P.clearInterval(Ee)}execute(se,Ee){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;const ge=this._execute(se,Ee);if(ge)return ge;!1===this.pending&&null!=this.id&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}_execute(se,Ee){let z,ge=!1;try{this.work(se)}catch($){ge=!0,z=$||new Error("Scheduled action threw falsy error")}if(ge)return this.unsubscribe(),z}unsubscribe(){if(!this.closed){const{id:se,scheduler:Ee}=this,{actions:ge}=Ee;this.work=this.state=this.scheduler=null,this.pending=!1,(0,ce.P)(ge,this),null!=se&&(this.id=this.recycleAsyncId(Ee,se,null)),this.delay=null,super.unsubscribe()}}}},7565:(vt,Ae,F)=>{F.d(Ae,{v:()=>P});var d=F(6063);class ee{constructor(le,fe=ee.now){this.schedulerActionCtor=le,this.now=fe}schedule(le,fe=0,se){return new this.schedulerActionCtor(this,le).schedule(se,fe)}}ee.now=d.l.now;class P extends ee{constructor(le,fe=ee.now){super(le,fe),this.actions=[],this._active=!1}flush(le){const{actions:fe}=this;if(this._active)return void fe.push(le);let se;this._active=!0;do{if(se=le.execute(le.state,le.delay))break}while(le=fe.shift());if(this._active=!1,se){for(;le=fe.shift();)le.unsubscribe();throw se}}}},4986:(vt,Ae,F)=>{F.d(Ae,{P:()=>ce,z:()=>P});var d=F(4408);const P=new(F(7565).v)(d.o),ce=P},6063:(vt,Ae,F)=>{F.d(Ae,{l:()=>d});const d={now:()=>(d.delegate||Date).now(),delegate:void 0}},3410:(vt,Ae,F)=>{F.d(Ae,{z:()=>d});const d={setTimeout(ee,P,...ce){const{delegate:le}=d;return le?.setTimeout?le.setTimeout(ee,P,...ce):setTimeout(ee,P,...ce)},clearTimeout(ee){const{delegate:P}=d;return(P?.clearTimeout||clearTimeout)(ee)},delegate:void 0}},2202:(vt,Ae,F)=>{F.d(Ae,{h:()=>ee});const ee=function d(){return"function"==typeof Symbol&&Symbol.iterator?Symbol.iterator:"@@iterator"}()},8822:(vt,Ae,F)=>{F.d(Ae,{L:()=>d});const d="function"==typeof Symbol&&Symbol.observable||"@@observable"},3269:(vt,Ae,F)=>{F.d(Ae,{_6:()=>fe,jO:()=>ce,yG:()=>le});var d=F(576),ee=F(3532);function P(se){return se[se.length-1]}function ce(se){return(0,d.m)(P(se))?se.pop():void 0}function le(se){return(0,ee.K)(P(se))?se.pop():void 0}function fe(se,Ee){return"number"==typeof P(se)?se.pop():Ee}},8737:(vt,Ae,F)=>{function d(ee,P){if(ee){const ce=ee.indexOf(P);0<=ce&&ee.splice(ce,1)}}F.d(Ae,{P:()=>d})},3888:(vt,Ae,F)=>{function d(ee){const ce=ee(le=>{Error.call(le),le.stack=(new Error).stack});return ce.prototype=Object.create(Error.prototype),ce.prototype.constructor=ce,ce}F.d(Ae,{d:()=>d})},2806:(vt,Ae,F)=>{F.d(Ae,{O:()=>ce,x:()=>P});var d=F(2416);let ee=null;function P(le){if(d.v.useDeprecatedSynchronousErrorHandling){const fe=!ee;if(fe&&(ee={errorThrown:!1,error:null}),le(),fe){const{errorThrown:se,error:Ee}=ee;if(ee=null,se)throw Ee}}else le()}function ce(le){d.v.useDeprecatedSynchronousErrorHandling&&ee&&(ee.errorThrown=!0,ee.error=le)}},9672:(vt,Ae,F)=>{function d(ee,P,ce,le=0,fe=!1){const se=P.schedule(function(){ce(),fe?ee.add(this.schedule(null,le)):this.unsubscribe()},le);if(ee.add(se),!fe)return se}F.d(Ae,{f:()=>d})},4671:(vt,Ae,F)=>{function d(ee){return ee}F.d(Ae,{y:()=>d})},1144:(vt,Ae,F)=>{F.d(Ae,{z:()=>d});const d=ee=>ee&&"number"==typeof ee.length&&"function"!=typeof ee},2206:(vt,Ae,F)=>{F.d(Ae,{D:()=>ee});var d=F(576);function ee(P){return Symbol.asyncIterator&&(0,d.m)(P?.[Symbol.asyncIterator])}},576:(vt,Ae,F)=>{function d(ee){return"function"==typeof ee}F.d(Ae,{m:()=>d})},3670:(vt,Ae,F)=>{F.d(Ae,{c:()=>P});var d=F(8822),ee=F(576);function P(ce){return(0,ee.m)(ce[d.L])}},6495:(vt,Ae,F)=>{F.d(Ae,{T:()=>P});var d=F(2202),ee=F(576);function P(ce){return(0,ee.m)(ce?.[d.h])}},8239:(vt,Ae,F)=>{F.d(Ae,{t:()=>ee});var d=F(576);function ee(P){return(0,d.m)(P?.then)}},3260:(vt,Ae,F)=>{F.d(Ae,{L:()=>ce,Q:()=>P});var d=F(655),ee=F(576);function P(le){return(0,d.FC)(this,arguments,function*(){const se=le.getReader();try{for(;;){const{value:Ee,done:ge}=yield(0,d.qq)(se.read());if(ge)return yield(0,d.qq)(void 0);yield yield(0,d.qq)(Ee)}}finally{se.releaseLock()}})}function ce(le){return(0,ee.m)(le?.getReader)}},3532:(vt,Ae,F)=>{F.d(Ae,{K:()=>ee});var d=F(576);function ee(P){return P&&(0,d.m)(P.schedule)}},4482:(vt,Ae,F)=>{F.d(Ae,{A:()=>ee,e:()=>P});var d=F(576);function ee(ce){return(0,d.m)(ce?.lift)}function P(ce){return le=>{if(ee(le))return le.lift(function(fe){try{return ce(fe,this)}catch(se){this.error(se)}});throw new TypeError("Unable to lift unknown Observable type")}}},5032:(vt,Ae,F)=>{function d(){}F.d(Ae,{Z:()=>d})},9635:(vt,Ae,F)=>{F.d(Ae,{U:()=>P,z:()=>ee});var d=F(4671);function ee(...ce){return P(ce)}function P(ce){return 0===ce.length?d.y:1===ce.length?ce[0]:function(fe){return ce.reduce((se,Ee)=>Ee(se),fe)}}},7849:(vt,Ae,F)=>{F.d(Ae,{h:()=>P});var d=F(2416),ee=F(3410);function P(ce){ee.z.setTimeout(()=>{const{onUnhandledError:le}=d.v;if(!le)throw ce;le(ce)})}},4532:(vt,Ae,F)=>{function d(ee){return new TypeError(`You provided ${null!==ee&&"object"==typeof ee?"an invalid object":`'${ee}'`} where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.`)}F.d(Ae,{z:()=>d})},655:(vt,Ae,F)=>{function ce(pe,_e){var Me={};for(var Re in pe)Object.prototype.hasOwnProperty.call(pe,Re)&&_e.indexOf(Re)<0&&(Me[Re]=pe[Re]);if(null!=pe&&"function"==typeof Object.getOwnPropertySymbols){var Ve=0;for(Re=Object.getOwnPropertySymbols(pe);Ve<Re.length;Ve++)_e.indexOf(Re[Ve])<0&&Object.prototype.propertyIsEnumerable.call(pe,Re[Ve])&&(Me[Re[Ve]]=pe[Re[Ve]])}return Me}function le(pe,_e,Me,Re){var Nt,Ve=arguments.length,Se=Ve<3?_e:null===Re?Re=Object.getOwnPropertyDescriptor(_e,Me):Re;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)Se=Reflect.decorate(pe,_e,Me,Re);else for(var rn=pe.length-1;rn>=0;rn--)(Nt=pe[rn])&&(Se=(Ve<3?Nt(Se):Ve>3?Nt(_e,Me,Se):Nt(_e,Me))||Se);return Ve>3&&Se&&Object.defineProperty(_e,Me,Se),Se}function fe(pe,_e){return function(Me,Re){_e(Me,Re,pe)}}function $(pe,_e){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(pe,_e)}function Y(pe,_e,Me,Re){return new(Me||(Me=Promise))(function(Se,Nt){function rn(qt){try{He(Re.next(qt))}catch(Xt){Nt(Xt)}}function Vt(qt){try{He(Re.throw(qt))}catch(Xt){Nt(Xt)}}function He(qt){qt.done?Se(qt.value):function Ve(Se){return Se instanceof Me?Se:new Me(function(Nt){Nt(Se)})}(qt.value).then(rn,Vt)}He((Re=Re.apply(pe,_e||[])).next())})}function Ne(pe){return this instanceof Ne?(this.v=pe,this):new Ne(pe)}function Ce(pe,_e,Me){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var Ve,Re=Me.apply(pe,_e||[]),Se=[];return Ve={},Nt("next"),Nt("throw"),Nt("return"),Ve[Symbol.asyncIterator]=function(){return this},Ve;function Nt(nn){Re[nn]&&(Ve[nn]=function(kn){return new Promise(function(jn,Lr){Se.push([nn,kn,jn,Lr])>1||rn(nn,kn)})})}function rn(nn,kn){try{!function Vt(nn){nn.value instanceof Ne?Promise.resolve(nn.value.v).then(He,qt):Xt(Se[0][2],nn)}(Re[nn](kn))}catch(jn){Xt(Se[0][3],jn)}}function He(nn){rn("next",nn)}function qt(nn){rn("throw",nn)}function Xt(nn,kn){nn(kn),Se.shift(),Se.length&&rn(Se[0][0],Se[0][1])}}function Ke(pe){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var Me,_e=pe[Symbol.asyncIterator];return _e?_e.call(pe):(pe=function at(pe){var _e="function"==typeof Symbol&&Symbol.iterator,Me=_e&&pe[_e],Re=0;if(Me)return Me.call(pe);if(pe&&"number"==typeof pe.length)return{next:function(){return pe&&Re>=pe.length&&(pe=void 0),{value:pe&&pe[Re++],done:!pe}}};throw new TypeError(_e?"Object is not iterable.":"Symbol.iterator is not defined.")}(pe),Me={},Re("next"),Re("throw"),Re("return"),Me[Symbol.asyncIterator]=function(){return this},Me);function Re(Se){Me[Se]=pe[Se]&&function(Nt){return new Promise(function(rn,Vt){!function Ve(Se,Nt,rn,Vt){Promise.resolve(Vt).then(function(He){Se({value:He,done:rn})},Nt)}(rn,Vt,(Nt=pe[Se](Nt)).done,Nt.value)})}}}F.d(Ae,{FC:()=>Ce,KL:()=>Ke,_T:()=>ce,fM:()=>fe,gn:()=>le,mG:()=>Y,qq:()=>Ne,w6:()=>$})},4650:(vt,Ae,F)=>{F.d(Ae,{$8M:()=>Ll,$Z:()=>_s,AFp:()=>ya,AaK:()=>Ee,BQk:()=>ym,CHM:()=>Dl,CRH:()=>_E,CZH:()=>Um,CqO:()=>ky,D6c:()=>HA,EJc:()=>E1,EiD:()=>$f,EpF:()=>Ry,F$t:()=>CS,F4k:()=>ww,FYo:()=>G_,FiY:()=>eo,G48:()=>R1,Gf:()=>mE,GfV:()=>q_,Gpc:()=>$,Hsn:()=>Cw,Ikx:()=>Gw,JOm:()=>Wi,JVY:()=>Kd,KtG:()=>Hc,L6k:()=>Vg,LAX:()=>Bg,LFG:()=>qn,LSH:()=>Eu,Lbi:()=>vc,Lck:()=>FP,MGl:()=>Hu,MMx:()=>iE,NdJ:()=>Oy,O4$:()=>Wc,OlP:()=>mn,Oqu:()=>Rp,PXZ:()=>wA,Q6J:()=>yw,QGY:()=>Uu,QP$:()=>xt,QbO:()=>mv,Qsj:()=>f0,R0b:()=>co,RDi:()=>Ng,Rgc:()=>Np,SBq:()=>Yf,Sil:()=>yv,Suo:()=>Fp,TTD:()=>gi,TgZ:()=>gm,Udp:()=>qs,VKq:()=>RT,WFA:()=>Py,X6Q:()=>x1,XFs:()=>pt,Xpm:()=>Vn,Xts:()=>Yd,Y36:()=>nh,YKP:()=>ET,YNc:()=>My,Yjl:()=>K,Yz7:()=>He,Z0I:()=>kn,ZZ4:()=>iC,_Bn:()=>wT,_UZ:()=>uh,_Vd:()=>Zf,_c5:()=>H1,_uU:()=>zy,aQg:()=>Av,c2e:()=>b1,cJS:()=>Xt,cg1:()=>Tm,d8E:()=>qw,dDg:()=>D1,dqk:()=>vn,eBb:()=>Zd,eFA:()=>BE,ekj:()=>xp,eoX:()=>yA,f3M:()=>_t,g9A:()=>gv,h0i:()=>Pp,hGG:()=>aC,iGM:()=>ZT,ifc:()=>Ct,ip1:()=>fv,jDz:()=>IT,kL8:()=>Ww,lG2:()=>B,lqb:()=>Su,lri:()=>mA,mCW:()=>b,n5z:()=>xn,oAB:()=>ni,oxw:()=>Ny,pB0:()=>Ug,q3G:()=>ar,q4F:()=>m0,qLn:()=>Qf,qOj:()=>wp,qZA:()=>mm,qzn:()=>ao,rWj:()=>_A,sBO:()=>AA,sIi:()=>oh,s_b:()=>Fm,soG:()=>_v,tb:()=>Hm,tp0:()=>Ao,uIk:()=>Sy,vHH:()=>De,vpe:()=>_a,wAp:()=>Ot,xp6:()=>ty,ynx:()=>_m,z2F:()=>zm,z3N:()=>or,zSh:()=>Gf,zs3:()=>uc});var d=F(7579),ee=F(727),P=F(9751),ce=F(6451),le=F(3099);function fe(s){for(let o in s)if(s[o]===fe)return o;throw Error("Could not find renamed property on target object.")}function se(s,o){for(const l in o)o.hasOwnProperty(l)&&!s.hasOwnProperty(l)&&(s[l]=o[l])}function Ee(s){if("string"==typeof s)return s;if(Array.isArray(s))return"["+s.map(Ee).join(", ")+"]";if(null==s)return""+s;if(s.overriddenName)return`${s.overriddenName}`;if(s.name)return`${s.name}`;const o=s.toString();if(null==o)return""+o;const l=o.indexOf("\n");return-1===l?o:o.substring(0,l)}function ge(s,o){return null==s||""===s?null===o?"":o:null==o||""===o?s:s+" "+o}const z=fe({__forward_ref__:fe});function $(s){return s.__forward_ref__=$,s.toString=function(){return Ee(this())},s}function Y(s){return We(s)?s():s}function We(s){return"function"==typeof s&&s.hasOwnProperty(z)&&s.__forward_ref__===$}class De extends Error{constructor(o,l){super(function at(s,o){return`NG0${Math.abs(s)}${o?": "+o.trim():""}`}(o,l)),this.code=o}}function be(s){return"string"==typeof s?s:null==s?"":String(s)}function Ce(s,o){throw new De(-201,!1)}function Ve(s,o){null==s&&function Se(s,o,l,u){throw new Error(`ASSERTION ERROR: ${s}`+(null==u?"":` [Expected=> ${l} ${u} ${o} <=Actual]`))}(o,s,null,"!=")}function He(s){return{token:s.token,providedIn:s.providedIn||null,factory:s.factory,value:void 0}}function Xt(s){return{providers:s.providers||[],imports:s.imports||[]}}function nn(s){return jn(s,is)||jn(s,Ta)}function kn(s){return null!==nn(s)}function jn(s,o){return s.hasOwnProperty(o)?s[o]:null}function Ir(s){return s&&(s.hasOwnProperty(Oi)||s.hasOwnProperty(Vo))?s[Oi]:null}const is=fe({\u0275prov:fe}),Oi=fe({\u0275inj:fe}),Ta=fe({ngInjectableDef:fe}),Vo=fe({ngInjectorDef:fe});var pt=(()=>((pt=pt||{})[pt.Default=0]="Default",pt[pt.Host=1]="Host",pt[pt.Self=2]="Self",pt[pt.SkipSelf=4]="SkipSelf",pt[pt.Optional=8]="Optional",pt))();let Wr;function Kr(s){const o=Wr;return Wr=s,o}function Bo(s,o,l){const u=nn(s);return u&&"root"==u.providedIn?void 0===u.value?u.value=u.factory():u.value:l&pt.Optional?null:void 0!==o?o:void Ce(Ee(s))}function fr(s){return{toString:s}.toString()}var An=(()=>((An=An||{})[An.OnPush=0]="OnPush",An[An.Default=1]="Default",An))(),Ct=(()=>{return(s=Ct||(Ct={}))[s.Emulated=0]="Emulated",s[s.None=2]="None",s[s.ShadowDom=3]="ShadowDom",Ct;var s})();const vn=(()=>typeof globalThis<"u"&&globalThis||typeof global<"u"&&global||typeof window<"u"&&window||typeof self<"u"&&typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope&&self)(),tr={},Mt=[],Dr=fe({\u0275cmp:fe}),pn=fe({\u0275dir:fe}),Uo=fe({\u0275pipe:fe}),on=fe({\u0275mod:fe}),pr=fe({\u0275fac:fe}),Sr=fe({__NG_ELEMENT_ID__:fe});let Ni=0;function Vn(s){return fr(()=>{const l=!0===s.standalone,u={},h={type:s.type,providersResolver:null,decls:s.decls,vars:s.vars,factory:null,template:s.template||null,consts:s.consts||null,ngContentSelectors:s.ngContentSelectors,hostBindings:s.hostBindings||null,hostVars:s.hostVars||0,hostAttrs:s.hostAttrs||null,contentQueries:s.contentQueries||null,declaredInputs:u,inputs:null,outputs:null,exportAs:s.exportAs||null,onPush:s.changeDetection===An.OnPush,directiveDefs:null,pipeDefs:null,standalone:l,dependencies:l&&s.dependencies||null,getStandaloneInjector:null,selectors:s.selectors||Mt,viewQuery:s.viewQuery||null,features:s.features||null,data:s.data||{},encapsulation:s.encapsulation||Ct.Emulated,id:"c"+Ni++,styles:s.styles||Mt,_:null,setInput:null,schemas:s.schemas||null,tView:null},m=s.dependencies,v=s.features;return h.inputs=H(s.inputs,u),h.outputs=H(s.outputs),v&&v.forEach(C=>C(h)),h.directiveDefs=m?()=>("function"==typeof m?m():m).map(os).filter($n):null,h.pipeDefs=m?()=>("function"==typeof m?m():m).map(Ze).filter($n):null,h})}function os(s){return ue(s)||J(s)}function $n(s){return null!==s}function ni(s){return fr(()=>({type:s.type,bootstrap:s.bootstrap||Mt,declarations:s.declarations||Mt,imports:s.imports||Mt,exports:s.exports||Mt,transitiveCompileScopes:null,schemas:s.schemas||null,id:s.id||null}))}function H(s,o){if(null==s)return tr;const l={};for(const u in s)if(s.hasOwnProperty(u)){let h=s[u],m=h;Array.isArray(h)&&(m=h[1],h=h[0]),l[h]=u,o&&(o[h]=m)}return l}const B=Vn;function K(s){return{type:s.type,name:s.name,factory:null,pure:!1!==s.pure,standalone:!0===s.standalone,onDestroy:s.type.prototype.ngOnDestroy||null}}function ue(s){return s[Dr]||null}function J(s){return s[pn]||null}function Ze(s){return s[Uo]||null}function xt(s){const o=ue(s)||J(s)||Ze(s);return null!==o&&o.standalone}function Ut(s,o){const l=s[on]||null;if(!l&&!0===o)throw new Error(`Type ${Ee(s)} does not have '\u0275mod' property.`);return l}function gr(s){return Array.isArray(s)&&"object"==typeof s[1]}function Yr(s){return Array.isArray(s)&&!0===s[1]}function Xs(s){return 0!=(8&s.flags)}function jo(s){return 2==(2&s.flags)}function Ds(s){return 1==(1&s.flags)}function Li(s){return null!==s.template}function $o(s){return 0!=(256&s[2])}function Ss(s,o){return s.hasOwnProperty(pr)?s[pr]:null}class Yh{constructor(o,l,u){this.previousValue=o,this.currentValue=l,this.firstChange=u}isFirstChange(){return this.firstChange}}function gi(){return hd}function hd(s){return s.type.prototype.ngOnChanges&&(s.setInput=Vc),Ma}function Ma(){const s=Qh(this),o=s?.current;if(o){const l=s.previous;if(l===tr)s.previous=o;else for(let u in o)l[u]=o[u];s.current=null,this.ngOnChanges(o)}}function Vc(s,o,l,u){const h=Qh(s)||function Ts(s,o){return s[yl]=o}(s,{previous:tr,current:null}),m=h.current||(h.current={}),v=h.previous,C=this.declaredInputs[l],D=v[C];m[C]=new Yh(D&&D.currentValue,o,v===tr),s[u]=o}gi.ngInherit=!0;const yl="__ngSimpleChanges__";function Qh(s){return s[yl]||null}function zn(s){for(;Array.isArray(s);)s=s[0];return s}function mi(s,o){return zn(o[s])}function Qr(s,o){return zn(o[s.index])}function Cl(s,o){return s.data[o]}function Gn(s,o){const l=o[s];return gr(l)?l:l[0]}function po(s){return 64==(64&s[2])}function ii(s,o){return null==o?null:s[o]}function Js(s){s[18]=0}function xr(s,o){s[5]+=o;let l=s,u=s[3];for(;null!==u&&(1===o&&1===l[5]||-1===o&&0===l[5]);)u[5]+=o,l=u,u=u[3]}const Rt={lFrame:qc(null),bindingsEnabled:!0};function _d(){return Rt.bindingsEnabled}function Te(){return Rt.lFrame.lView}function Wt(){return Rt.lFrame.tView}function Dl(s){return Rt.lFrame.contextLView=s,s[8]}function Hc(s){return Rt.lFrame.contextLView=null,s}function Bn(){let s=Sl();for(;null!==s&&64===s.type;)s=s.parent;return s}function Sl(){return Rt.lFrame.currentTNode}function si(s,o){const l=Rt.lFrame;l.currentTNode=s,l.isParent=o}function Go(){return Rt.lFrame.isParent}function jc(){Rt.lFrame.isParent=!1}function Ms(){return Rt.lFrame.bindingIndex++}function wg(s,o){const l=Rt.lFrame;l.bindingIndex=l.bindingRootIndex=s,zc(o)}function zc(s){Rt.lFrame.currentDirectiveIndex=s}function Ra(s){const o=Rt.lFrame.currentDirectiveIndex;return-1===o?null:s[o]}function Tl(){return Rt.lFrame.currentQueryIndex}function Ur(s){Rt.lFrame.currentQueryIndex=s}function Gc(s){const o=s[1];return 2===o.type?o.declTNode:1===o.type?s[6]:null}function ka(s,o,l){if(l&pt.SkipSelf){let h=o,m=s;for(;!(h=h.parent,null!==h||l&pt.Host||(h=Gc(m),null===h||(m=m[15],10&h.type))););if(null===h)return!1;o=h,s=m}const u=Rt.lFrame=_o();return u.currentTNode=o,u.lView=s,!0}function Oa(s){const o=_o(),l=s[1];Rt.lFrame=o,o.currentTNode=l.firstChild,o.lView=s,o.tView=l,o.contextLView=s,o.bindingIndex=l.bindingStartIndex,o.inI18n=!1}function _o(){const s=Rt.lFrame,o=null===s?null:s.child;return null===o?qc(s):o}function qc(s){const o={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:s,child:null,inI18n:!1};return null!==s&&(s.child=o),o}function Pa(){const s=Rt.lFrame;return Rt.lFrame=s.parent,s.currentTNode=null,s.lView=null,s}const vd=Pa;function Wo(){const s=Pa();s.isParent=!0,s.tView=null,s.selectedIndex=-1,s.contextLView=null,s.elementDepthCount=0,s.currentDirectiveIndex=-1,s.currentNamespace=null,s.bindingRootIndex=-1,s.bindingIndex=-1,s.currentQueryIndex=0}function ln(){return Rt.lFrame.selectedIndex}function xs(s){Rt.lFrame.selectedIndex=s}function Mn(){const s=Rt.lFrame;return Cl(s.tView,s.selectedIndex)}function Wc(){Rt.lFrame.currentNamespace="svg"}function yo(s,o){for(let l=o.directiveStart,u=o.directiveEnd;l<u;l++){const m=s.data[l].type.prototype,{ngAfterContentInit:v,ngAfterContentChecked:C,ngAfterViewInit:D,ngAfterViewChecked:M,ngOnDestroy:O}=m;v&&(s.contentHooks||(s.contentHooks=[])).push(-l,v),C&&((s.contentHooks||(s.contentHooks=[])).push(l,C),(s.contentCheckHooks||(s.contentCheckHooks=[])).push(l,C)),D&&(s.viewHooks||(s.viewHooks=[])).push(-l,D),M&&((s.viewHooks||(s.viewHooks=[])).push(l,M),(s.viewCheckHooks||(s.viewCheckHooks=[])).push(l,M)),null!=O&&(s.destroyHooks||(s.destroyHooks=[])).push(l,O)}}function Na(s,o,l){Fa(s,o,3,l)}function Ko(s,o,l,u){(3&s[2])===l&&Fa(s,o,l,u)}function Ed(s,o){let l=s[2];(3&l)===o&&(l&=2047,l+=1,s[2]=l)}function Fa(s,o,l,u){const m=u??-1,v=o.length-1;let C=0;for(let D=void 0!==u?65535&s[18]:0;D<v;D++)if("number"==typeof o[D+1]){if(C=o[D],null!=u&&C>=u)break}else o[D]<0&&(s[18]+=65536),(C<m||-1==m)&&(nf(s,l,o,D),s[18]=(4294901760&s[18])+D+2),D++}function nf(s,o,l,u){const h=l[u]<0,m=l[u+1],C=s[h?-l[u]:l[u]];if(h){if(s[2]>>11<s[18]>>16&&(3&s[2])===o){s[2]+=2048;try{m.call(C)}finally{}}}else try{m.call(C)}finally{}}class La{constructor(o,l,u){this.factory=o,this.resolving=!1,this.canSeeViewProviders=l,this.injectImpl=u}}function kl(s,o,l){let u=0;for(;u<l.length;){const h=l[u];if("number"==typeof h){if(0!==h)break;u++;const m=l[u++],v=l[u++],C=l[u++];s.setAttribute(o,v,C,m)}else{const m=h,v=l[++u];af(m)?s.setProperty(o,m,v):s.setAttribute(o,m,v),u++}}return u}function Ol(s){return 3===s||4===s||6===s}function af(s){return 64===s.charCodeAt(0)}function Zo(s,o){if(null!==o&&0!==o.length)if(null===s||0===s.length)s=o.slice();else{let l=-1;for(let u=0;u<o.length;u++){const h=o[u];"number"==typeof h?l=h:0===l||Id(s,l,h,null,-1===l||2===l?o[++u]:null)}}return s}function Id(s,o,l,u,h){let m=0,v=s.length;if(-1===o)v=-1;else for(;m<s.length;){const C=s[m++];if("number"==typeof C){if(C===o){v=-1;break}if(C>o){v=m-1;break}}}for(;m<s.length;){const C=s[m];if("number"==typeof C)break;if(C===l){if(null===u)return void(null!==h&&(s[m+1]=h));if(u===s[m+1])return void(s[m+2]=h)}m++,null!==u&&m++,null!==h&&m++}-1!==v&&(s.splice(v,0,o),m=v+1),s.splice(m++,0,l),null!==u&&s.splice(m++,0,u),null!==h&&s.splice(m++,0,h)}function Xc(s){return-1!==s}function Va(s){return 32767&s}function ls(s,o){let l=function lf(s){return s>>16}(s),u=o;for(;l>0;)u=u[15],l--;return u}let Ba=!0;function ks(s){const o=Ba;return Ba=s,o}let Ua=0;const _i={};function Yo(s,o){const l=bo(s,o);if(-1!==l)return l;const u=o[1];u.firstCreatePass&&(s.injectorIndex=o.length,eu(u.data,s),eu(o,null),eu(u.blueprint,null));const h=wo(s,o),m=s.injectorIndex;if(Xc(h)){const v=Va(h),C=ls(h,o),D=C[1].data;for(let M=0;M<8;M++)o[m+M]=C[v+M]|D[v+M]}return o[m+8]=h,m}function eu(s,o){s.push(0,0,0,0,0,0,0,0,o)}function bo(s,o){return-1===s.injectorIndex||s.parent&&s.parent.injectorIndex===s.injectorIndex||null===o[s.injectorIndex+8]?-1:s.injectorIndex}function wo(s,o){if(s.parent&&-1!==s.parent.injectorIndex)return s.parent.injectorIndex;let l=0,u=null,h=o;for(;null!==h;){if(u=df(h),null===u)return-1;if(l++,h=h[15],-1!==u.injectorIndex)return u.injectorIndex|l<<16}return-1}function Ha(s,o,l){!function Jc(s,o,l){let u;"string"==typeof l?u=l.charCodeAt(0)||0:l.hasOwnProperty(Sr)&&(u=l[Sr]),null==u&&(u=l[Sr]=Ua++);const h=255&u;o.data[s+(h>>5)]|=1<<h}(s,o,l)}function Nl(s,o,l){if(l&pt.Optional||void 0!==s)return s;Ce()}function cf(s,o,l,u){if(l&pt.Optional&&void 0===u&&(u=null),0==(l&(pt.Self|pt.Host))){const h=s[9],m=Kr(void 0);try{return h?h.get(o,u,l&pt.Optional):Bo(o,u,l&pt.Optional)}finally{Kr(m)}}return Nl(u,0,l)}function Qo(s,o,l,u=pt.Default,h){if(null!==s){if(1024&o[2]){const v=function $a(s,o,l,u,h){let m=s,v=o;for(;null!==m&&null!==v&&1024&v[2]&&!(256&v[2]);){const C=Xo(m,v,l,u|pt.Self,_i);if(C!==_i)return C;let D=m.parent;if(!D){const M=v[21];if(M){const O=M.get(l,_i,u);if(O!==_i)return O}D=df(v),v=v[15]}m=D}return h}(s,o,l,u,_i);if(v!==_i)return v}const m=Xo(s,o,l,u,_i);if(m!==_i)return m}return cf(o,l,u,h)}function Xo(s,o,l,u,h){const m=function Co(s){if("string"==typeof s)return s.charCodeAt(0)||0;const o=s.hasOwnProperty(Sr)?s[Sr]:void 0;return"number"==typeof o?o>=0?255&o:Ig:o}(l);if("function"==typeof m){if(!ka(o,s,u))return u&pt.Host?Nl(h,0,u):cf(o,l,u,h);try{const v=m(u);if(null!=v||u&pt.Optional)return v;Ce()}finally{vd()}}else if("number"==typeof m){let v=null,C=bo(s,o),D=-1,M=u&pt.Host?o[16][6]:null;for((-1===C||u&pt.SkipSelf)&&(D=-1===C?wo(s,o):o[C+8],-1!==D&&Fl(u,!1)?(v=o[1],C=Va(D),o=ls(D,o)):C=-1);-1!==C;){const O=o[1];if(uf(m,C,O.data)){const V=Cg(C,o,l,v,u,M);if(V!==_i)return V}D=o[C+8],-1!==D&&Fl(u,o[1].data[C+8]===M)&&uf(m,C,o)?(v=O,C=Va(D),o=ls(D,o)):C=-1}}return h}function Cg(s,o,l,u,h,m){const v=o[1],C=v.data[s+8],O=us(C,v,l,null==u?jo(C)&&Ba:u!=v&&0!=(3&C.type),h&pt.Host&&m===C);return null!==O?ja(o,v,O,C):_i}function us(s,o,l,u,h){const m=s.providerIndexes,v=o.data,C=1048575&m,D=s.directiveStart,O=m>>20,q=h?C+O:s.directiveEnd;for(let te=u?C:C+O;te<q;te++){const Ie=v[te];if(te<D&&l===Ie||te>=D&&Ie.type===l)return te}if(h){const te=v[D];if(te&&Li(te)&&te.type===l)return D}return null}function ja(s,o,l,u){let h=s[l];const m=o.data;if(function xl(s){return s instanceof La}(h)){const v=h;v.resolving&&function bt(s,o){const l=o?`. Dependency path: ${o.join(" > ")} > ${s}`:"";throw new De(-200,`Circular dependency in DI detected for ${s}${l}`)}(function ve(s){return"function"==typeof s?s.name||s.toString():"object"==typeof s&&null!=s&&"function"==typeof s.type?s.type.name||s.type.toString():be(s)}(m[l]));const C=ks(v.canSeeViewProviders);v.resolving=!0;const D=v.injectImpl?Kr(v.injectImpl):null;ka(s,u,pt.Default);try{h=s[l]=v.factory(void 0,m,s,u),o.firstCreatePass&&l>=u.directiveStart&&function Zc(s,o,l){const{ngOnChanges:u,ngOnInit:h,ngDoCheck:m}=o.type.prototype;if(u){const v=hd(o);(l.preOrderHooks||(l.preOrderHooks=[])).push(s,v),(l.preOrderCheckHooks||(l.preOrderCheckHooks=[])).push(s,v)}h&&(l.preOrderHooks||(l.preOrderHooks=[])).push(0-s,h),m&&((l.preOrderHooks||(l.preOrderHooks=[])).push(s,m),(l.preOrderCheckHooks||(l.preOrderCheckHooks=[])).push(s,m))}(l,m[l],o)}finally{null!==D&&Kr(D),ks(C),v.resolving=!1,vd()}}return h}function uf(s,o,l){return!!(l[o+(s>>5)]&1<<s)}function Fl(s,o){return!(s&pt.Self||s&pt.Host&&o)}class ds{constructor(o,l){this._tNode=o,this._lView=l}get(o,l,u){return Qo(this._tNode,this._lView,o,u,l)}}function Ig(){return new ds(Bn(),Te())}function xn(s){return fr(()=>{const o=s.prototype.constructor,l=o[pr]||tu(o),u=Object.prototype;let h=Object.getPrototypeOf(s.prototype).constructor;for(;h&&h!==u;){const m=h[pr]||tu(h);if(m&&m!==l)return m;h=Object.getPrototypeOf(h)}return m=>new m})}function tu(s){return We(s)?()=>{const o=tu(Y(s));return o&&o()}:Ss(s)}function df(s){const o=s[1],l=o.type;return 2===l?o.declTNode:1===l?s[6]:null}function Ll(s){return function Eo(s,o){if("class"===o)return s.classes;if("style"===o)return s.styles;const l=s.attrs;if(l){const u=l.length;let h=0;for(;h<u;){const m=l[h];if(Ol(m))break;if(0===m)h+=2;else if("number"==typeof m)for(h++;h<u&&"string"==typeof l[h];)h++;else{if(m===o)return l[h+1];h+=2}}}return null}(Bn(),s)}const Hn="__parameters__";function Ps(s,o,l){return fr(()=>{const u=function Jo(s){return function(...l){if(s){const u=s(...l);for(const h in u)this[h]=u[h]}}}(o);function h(...m){if(this instanceof h)return u.apply(this,m),this;const v=new h(...m);return C.annotation=v,C;function C(D,M,O){const V=D.hasOwnProperty(Hn)?D[Hn]:Object.defineProperty(D,Hn,{value:[]})[Hn];for(;V.length<=O;)V.push(null);return(V[O]=V[O]||[]).push(v),D}}return l&&(h.prototype=Object.create(l.prototype)),h.prototype.ngMetadataName=s,h.annotationCls=h,h})}class mn{constructor(o,l){this._desc=o,this.ngMetadataName="InjectionToken",this.\u0275prov=void 0,"number"==typeof l?this.__NG_ELEMENT_ID__=l:void 0!==l&&(this.\u0275prov=He({token:this,providedIn:l.providedIn||"root",factory:l.factory}))}get multi(){return this}toString(){return`InjectionToken ${this._desc}`}}function Yn(s,o){void 0===o&&(o=s);for(let l=0;l<s.length;l++){let u=s[l];Array.isArray(u)?(o===s&&(o=s.slice(0,l)),Yn(u,o)):o!==s&&o.push(u)}return o}function ji(s,o){s.forEach(l=>Array.isArray(l)?ji(l,o):o(l))}function ru(s,o,l){o>=s.length?s.push(l):s.splice(o,0,l)}function iu(s,o){return o>=s.length-1?s.pop():s.splice(o,1)[0]}function ea(s,o){const l=[];for(let u=0;u<s;u++)l.push(o);return l}function li(s,o,l){let u=qa(s,o);return u>=0?s[1|u]=l:(u=~u,function Dg(s,o,l,u){let h=s.length;if(h==o)s.push(l,u);else if(1===h)s.push(u,s[0]),s[0]=l;else{for(h--,s.push(s[h-1],s[h]);h>o;)s[h]=s[h-2],h--;s[o]=l,s[o+1]=u}}(s,u,o,l)),u}function $l(s,o){const l=qa(s,o);if(l>=0)return s[1|l]}function qa(s,o){return function yf(s,o,l){let u=0,h=s.length>>l;for(;h!==u;){const m=u+(h-u>>1),v=s[m<<l];if(o===v)return m<<l;v>o?h=m:u=m+1}return~(h<<l)}(s,o,1)}const Kt={},Qn="__NG_DI_FLAG__",Hr="ngTempTokenPath",Xr=/\n/gm,Za="__source";let So;function jr(s){const o=So;return So=s,o}function Wl(s,o=pt.Default){if(void 0===So)throw new De(-203,!1);return null===So?Bo(s,void 0,o):So.get(s,o&pt.Optional?null:void 0,o)}function qn(s,o=pt.Default){return(function Pi(){return Wr}()||Wl)(Y(s),o)}function _t(s,o=pt.Default){return"number"!=typeof o&&(o=0|(o.optional&&8)|(o.host&&1)|(o.self&&2)|(o.skipSelf&&4)),qn(s,o)}function Md(s){const o=[];for(let l=0;l<s.length;l++){const u=Y(s[l]);if(Array.isArray(u)){if(0===u.length)throw new De(900,!1);let h,m=pt.Default;for(let v=0;v<u.length;v++){const C=u[v],D=Ya(C);"number"==typeof D?-1===D?h=C.token:m|=D:h=C}o.push(qn(h,m))}else o.push(qn(u))}return o}function To(s,o){return s[Qn]=o,s.prototype[Qn]=o,s}function Ya(s){return s[Qn]}const eo=To(Ps("Optional"),8),Ao=To(Ps("SkipSelf"),4);var Wi=(()=>((Wi=Wi||{})[Wi.Important=1]="Important",Wi[Wi.DashCase=2]="DashCase",Wi))();const N=new Map;let G=0;const En="__ngContext__";function yt(s,o){gr(o)?(s[En]=o[20],function de(s){N.set(s[20],s)}(o)):s[En]=o}function ec(s,o){return undefined(s,o)}function du(s){const o=s[3];return Yr(o)?o[3]:o}function tc(s){return la(s[13])}function xg(s){return la(s[4])}function la(s){for(;null!==s&&!Yr(s);)s=s[4];return s}function nc(s,o,l,u,h){if(null!=u){let m,v=!1;Yr(u)?m=u:gr(u)&&(v=!0,u=u[0]);const C=zn(u);0===s&&null!==l?null==h?pu(o,l,C):xo(o,l,C,h||null,!0):1===s&&null!==l?xo(o,l,C,h||null,!0):2===s?function Pf(s,o,l){const u=Vd(s,o);u&&function xf(s,o,l,u){s.removeChild(o,l,u)}(s,u,o,l)}(o,C,v):3===s&&o.destroyNode(C),null!=m&&function Lf(s,o,l,u,h){const m=l[7];m!==zn(l)&&nc(o,s,u,m,h);for(let C=10;C<l.length;C++){const D=l[C];gu(D[1],D,s,o,u,m)}}(o,s,m,l,h)}}function Tf(s,o,l){return s.createElement(o,l)}function ic(s,o){const l=s[9],u=l.indexOf(o),h=o[3];512&o[2]&&(o[2]&=-513,xr(h,-1)),l.splice(u,1)}function el(s,o){if(s.length<=10)return;const l=10+o,u=s[l];if(u){const h=u[17];null!==h&&h!==s&&ic(h,u),o>0&&(s[l-1][4]=u[4]);const m=iu(s,10+o);!function Ja(s,o){gu(s,o,o[11],2,null,null),o[0]=null,o[6]=null}(u[1],u);const v=m[19];null!==v&&v.detachView(m[1]),u[3]=null,u[4]=null,u[2]&=-65}return u}function tl(s,o){if(!(128&o[2])){const l=o[11];l.destroyNode&&gu(s,o,l,3,null,null),function F_(s){let o=s[13];if(!o)return Fd(s[1],s);for(;o;){let l=null;if(gr(o))l=o[13];else{const u=o[10];u&&(l=u)}if(!l){for(;o&&!o[4]&&o!==s;)gr(o)&&Fd(o[1],o),o=o[3];null===o&&(o=s),gr(o)&&Fd(o[1],o),l=o&&o[4]}o=l}}(o)}}function Fd(s,o){if(!(128&o[2])){o[2]&=-65,o[2]|=128,function Ld(s,o){let l;if(null!=s&&null!=(l=s.destroyHooks))for(let u=0;u<l.length;u+=2){const h=o[l[u]];if(!(h instanceof La)){const m=l[u+1];if(Array.isArray(m))for(let v=0;v<m.length;v+=2){const C=h[m[v]],D=m[v+1];try{D.call(C)}finally{}}else try{m.call(h)}finally{}}}}(s,o),function Mf(s,o){const l=s.cleanup,u=o[7];let h=-1;if(null!==l)for(let m=0;m<l.length-1;m+=2)if("string"==typeof l[m]){const v=l[m+1],C="function"==typeof v?v(o):zn(o[v]),D=u[h=l[m+2]],M=l[m+3];"boolean"==typeof M?C.removeEventListener(l[m],D,M):M>=0?u[h=M]():u[h=-M].unsubscribe(),m+=2}else{const v=u[h=l[m+1]];l[m].call(v)}if(null!==u){for(let m=h+1;m<u.length;m++)(0,u[m])();o[7]=null}}(s,o),1===o[1].type&&o[11].destroy();const l=o[17];if(null!==l&&Yr(o[3])){l!==o[3]&&ic(l,o);const u=o[19];null!==u&&u.detachView(s)}!function ze(s){N.delete(s[20])}(o)}}function nl(s,o,l){return function Rg(s,o,l){let u=o;for(;null!==u&&40&u.type;)u=(o=u).parent;if(null===u)return l[0];if(2&u.flags){const h=s.data[u.directiveStart].encapsulation;if(h===Ct.None||h===Ct.Emulated)return null}return Qr(u,l)}(s,o.parent,l)}function xo(s,o,l,u,h){s.insertBefore(o,l,u,h)}function pu(s,o,l){s.appendChild(o,l)}function kg(s,o,l,u,h){null!==u?xo(s,o,l,u,h):pu(s,o,l)}function Vd(s,o){return s.parentNode(o)}function Og(s,o,l){return kf(s,o,l)}let sc,oo,kf=function Bd(s,o,l){return 40&s.type?Qr(s,l):null};function so(s,o,l,u){const h=nl(s,u,o),m=o[11],C=Og(u.parent||o[6],u,o);if(null!=h)if(Array.isArray(l))for(let D=0;D<l.length;D++)kg(m,h,l[D],C,!1);else kg(m,h,l,C,!1)}function Bs(s,o){if(null!==o){const l=o.type;if(3&l)return Qr(o,s);if(4&l)return Hd(-1,s[o.index]);if(8&l){const u=o.child;if(null!==u)return Bs(s,u);{const h=s[o.index];return Yr(h)?Hd(-1,h):zn(h)}}if(32&l)return ec(o,s)()||zn(s[o.index]);{const u=Of(s,o);return null!==u?Array.isArray(u)?u[0]:Bs(du(s[16]),u):Bs(s,o.next)}}return null}function Of(s,o){return null!==o?s[16][6].projection[o.projection]:null}function Hd(s,o){const l=10+s+1;if(l<o.length){const u=o[l],h=u[1].firstChild;if(null!==h)return Bs(u,h)}return o[7]}function Nf(s,o,l,u,h,m,v){for(;null!=l;){const C=u[l.index],D=l.type;if(v&&0===o&&(C&&yt(zn(C),u),l.flags|=4),64!=(64&l.flags))if(8&D)Nf(s,o,l.child,u,h,m,!1),nc(o,s,h,C,m);else if(32&D){const M=ec(l,u);let O;for(;O=M();)nc(o,s,h,O,m);nc(o,s,h,C,m)}else 16&D?Ff(s,o,u,l,h,m):nc(o,s,h,C,m);l=v?l.projectionNext:l.next}}function gu(s,o,l,u,h,m){Nf(l,u,s.firstChild,o,h,m,!1)}function Ff(s,o,l,u,h,m){const v=l[16],D=v[6].projection[u.projection];if(Array.isArray(D))for(let M=0;M<D.length;M++)nc(o,s,h,D[M],m);else Nf(s,o,D,v[3],h,m,!0)}function Bf(s,o,l){s.setAttribute(o,"style",l)}function Uf(s,o,l){""===l?s.removeAttribute(o,"class"):s.setAttribute(o,"class",l)}function wr(s){return function jd(){if(void 0===sc&&(sc=null,vn.trustedTypes))try{sc=vn.trustedTypes.createPolicy("angular",{createHTML:s=>s,createScript:s=>s,createScriptURL:s=>s})}catch{}return sc}()?.createHTML(s)||s}function Ng(s){oo=s}class ca{constructor(o){this.changingThisBreaksApplicationSecurity=o}toString(){return`SafeValue must use [property]=binding: ${this.changingThisBreaksApplicationSecurity} (see https://g.co/ng/security#xss)`}}class Wd extends ca{getTypeName(){return"HTML"}}class ui extends ca{getTypeName(){return"Style"}}class _u extends ca{getTypeName(){return"Script"}}class yu extends ca{getTypeName(){return"URL"}}class B_ extends ca{getTypeName(){return"ResourceURL"}}function or(s){return s instanceof ca?s.changingThisBreaksApplicationSecurity:s}function ao(s,o){const l=function Lg(s){return s instanceof ca&&s.getTypeName()||null}(s);if(null!=l&&l!==o){if("ResourceURL"===l&&"URL"===o)return!0;throw new Error(`Required a safe ${o}, got a ${l} (see https://g.co/ng/security#xss)`)}return l===o}function Kd(s){return new Wd(s)}function Vg(s){return new ui(s)}function Zd(s){return new _u(s)}function Bg(s){return new yu(s)}function Ug(s){return new B_(s)}class vu{constructor(o){this.inertDocumentHelper=o}getInertBodyElement(o){o="<body><remove></remove>"+o;try{const l=(new window.DOMParser).parseFromString(wr(o),"text/html").body;return null===l?this.inertDocumentHelper.getInertBodyElement(o):(l.removeChild(l.firstChild),l)}catch{return null}}}class y{constructor(o){if(this.defaultDoc=o,this.inertDocument=this.defaultDoc.implementation.createHTMLDocument("sanitization-inert"),null==this.inertDocument.body){const l=this.inertDocument.createElement("html");this.inertDocument.appendChild(l);const u=this.inertDocument.createElement("body");l.appendChild(u)}}getInertBodyElement(o){const l=this.inertDocument.createElement("template");if("content"in l)return l.innerHTML=wr(o),l;const u=this.inertDocument.createElement("body");return u.innerHTML=wr(o),this.defaultDoc.documentMode&&this.stripCustomNsAttrs(u),u}stripCustomNsAttrs(o){const l=o.attributes;for(let h=l.length-1;0<h;h--){const v=l.item(h).name;("xmlns:ns1"===v||0===v.indexOf("ns1:"))&&o.removeAttribute(v)}let u=o.firstChild;for(;u;)u.nodeType===Node.ELEMENT_NODE&&this.stripCustomNsAttrs(u),u=u.nextSibling}}const g=/^(?:(?:https?|mailto|data|ftp|tel|file|sms):|[^&:/?#]*(?:[/?#]|$))/gi;function b(s){return(s=String(s)).match(g)?s:"unsafe:"+s}function T(s){const o={};for(const l of s.split(","))o[l]=!0;return o}function k(...s){const o={};for(const l of s)for(const u in l)l.hasOwnProperty(u)&&(o[u]=!0);return o}const j=T("area,br,col,hr,img,wbr"),X=T("colgroup,dd,dt,li,p,tbody,td,tfoot,th,thead,tr"),ke=T("rp,rt"),Nn=k(j,k(X,T("address,article,aside,blockquote,caption,center,del,details,dialog,dir,div,dl,figure,figcaption,footer,h1,h2,h3,h4,h5,h6,header,hgroup,hr,ins,main,map,menu,nav,ol,pre,section,summary,table,ul")),k(ke,T("a,abbr,acronym,audio,b,bdi,bdo,big,br,cite,code,del,dfn,em,font,i,img,ins,kbd,label,map,mark,picture,q,ruby,rp,rt,s,samp,small,source,span,strike,strong,sub,sup,time,track,tt,u,var,video")),k(ke,X)),Zi=T("background,cite,href,itemtype,longdesc,poster,src,xlink:href"),wu=k(Zi,T("abbr,accesskey,align,alt,autoplay,axis,bgcolor,border,cellpadding,cellspacing,class,clear,color,cols,colspan,compact,controls,coords,datetime,default,dir,download,face,headers,height,hidden,hreflang,hspace,ismap,itemscope,itemprop,kind,label,lang,language,loop,media,muted,nohref,nowrap,open,preload,rel,rev,role,rows,rowspan,rules,scope,scrolling,shape,size,sizes,span,srclang,srcset,start,summary,tabindex,target,title,translate,type,usemap,valign,value,vspace,width"),T("aria-activedescendant,aria-atomic,aria-autocomplete,aria-busy,aria-checked,aria-colcount,aria-colindex,aria-colspan,aria-controls,aria-current,aria-describedby,aria-details,aria-disabled,aria-dropeffect,aria-errormessage,aria-expanded,aria-flowto,aria-grabbed,aria-haspopup,aria-hidden,aria-invalid,aria-keyshortcuts,aria-label,aria-labelledby,aria-level,aria-live,aria-modal,aria-multiline,aria-multiselectable,aria-orientation,aria-owns,aria-placeholder,aria-posinset,aria-pressed,aria-readonly,aria-relevant,aria-required,aria-roledescription,aria-rowcount,aria-rowindex,aria-rowspan,aria-selected,aria-setsize,aria-sort,aria-valuemax,aria-valuemin,aria-valuenow,aria-valuetext")),ac=T("script,style,template");class jg{constructor(){this.sanitizedSomething=!1,this.buf=[]}sanitizeChildren(o){let l=o.firstChild,u=!0;for(;l;)if(l.nodeType===Node.ELEMENT_NODE?u=this.startElement(l):l.nodeType===Node.TEXT_NODE?this.chars(l.nodeValue):this.sanitizedSomething=!0,u&&l.firstChild)l=l.firstChild;else for(;l;){l.nodeType===Node.ELEMENT_NODE&&this.endElement(l);let h=this.checkClobberedElement(l,l.nextSibling);if(h){l=h;break}l=this.checkClobberedElement(l,l.parentNode)}return this.buf.join("")}startElement(o){const l=o.nodeName.toLowerCase();if(!Nn.hasOwnProperty(l))return this.sanitizedSomething=!0,!ac.hasOwnProperty(l);this.buf.push("<"),this.buf.push(l);const u=o.attributes;for(let h=0;h<u.length;h++){const m=u.item(h),v=m.name,C=v.toLowerCase();if(!wu.hasOwnProperty(C)){this.sanitizedSomething=!0;continue}let D=m.value;Zi[C]&&(D=b(D)),this.buf.push(" ",v,'="',lc(D),'"')}return this.buf.push(">"),!0}endElement(o){const l=o.nodeName.toLowerCase();Nn.hasOwnProperty(l)&&!j.hasOwnProperty(l)&&(this.buf.push("</"),this.buf.push(l),this.buf.push(">"))}chars(o){this.buf.push(lc(o))}checkClobberedElement(o,l){if(l&&(o.compareDocumentPosition(l)&Node.DOCUMENT_POSITION_CONTAINED_BY)===Node.DOCUMENT_POSITION_CONTAINED_BY)throw new Error(`Failed to sanitize html because the element is clobbered: ${o.outerHTML}`);return l}}const Hf=/[\uD800-\uDBFF][\uDC00-\uDFFF]/g,jf=/([^\#-~ |!])/g;function lc(s){return s.replace(/&/g,"&amp;").replace(Hf,function(o){return"&#"+(1024*(o.charCodeAt(0)-55296)+(o.charCodeAt(1)-56320)+65536)+";"}).replace(jf,function(o){return"&#"+o.charCodeAt(0)+";"}).replace(/</g,"&lt;").replace(/>/g,"&gt;")}let cc;function $f(s,o){let l=null;try{cc=cc||function Hg(s){const o=new y(s);return function p(){try{return!!(new window.DOMParser).parseFromString(wr(""),"text/html")}catch{return!1}}()?new vu(o):o}(s);let u=o?String(o):"";l=cc.getInertBodyElement(u);let h=5,m=u;do{if(0===h)throw new Error("Failed to sanitize html because the input is unstable");h--,u=m,m=l.innerHTML,l=cc.getInertBodyElement(u)}while(u!==m);return wr((new jg).sanitizeChildren(ua(l)||l))}finally{if(l){const u=ua(l)||l;for(;u.firstChild;)u.removeChild(u.firstChild)}}}function ua(s){return"content"in s&&function il(s){return s.nodeType===Node.ELEMENT_NODE&&"TEMPLATE"===s.nodeName}(s)?s.content:null}var ar=(()=>((ar=ar||{})[ar.NONE=0]="NONE",ar[ar.HTML=1]="HTML",ar[ar.STYLE=2]="STYLE",ar[ar.SCRIPT=3]="SCRIPT",ar[ar.URL=4]="URL",ar[ar.RESOURCE_URL=5]="RESOURCE_URL",ar))();function Eu(s){const o=function Cu(){const s=Te();return s&&s[12]}();return o?o.sanitize(ar.URL,s)||"":ao(s,"URL")?or(s):b(be(s))}const Yd=new mn("ENVIRONMENT_INITIALIZER"),Iu=new mn("INJECTOR",-1),t0=new mn("INJECTOR_DEF_TYPES");class n0{get(o,l=Kt){if(l===Kt){const u=new Error(`NullInjectorError: No provider for ${Ee(o)}!`);throw u.name="NullInjectorError",u}return l}}function vD(...s){return{\u0275providers:r0(0,s)}}function r0(s,...o){const l=[],u=new Set;let h;return ji(o,m=>{const v=m;U_(v,l,[],u)&&(h||(h=[]),h.push(v))}),void 0!==h&&s0(h,l),l}function s0(s,o){for(let l=0;l<s.length;l++){const{providers:h}=s[l];ji(h,m=>{o.push(m)})}}function U_(s,o,l,u){if(!(s=Y(s)))return!1;let h=null,m=Ir(s);const v=!m&&ue(s);if(m||v){if(v&&!v.standalone)return!1;h=s}else{const D=s.ngModule;if(m=Ir(D),!m)return!1;h=D}const C=u.has(h);if(v){if(C)return!1;if(u.add(h),v.dependencies){const D="function"==typeof v.dependencies?v.dependencies():v.dependencies;for(const M of D)U_(M,o,l,u)}}else{if(!m)return!1;{if(null!=m.imports&&!C){let M;u.add(h);try{ji(m.imports,O=>{U_(O,o,l,u)&&(M||(M=[]),M.push(O))})}finally{}void 0!==M&&s0(M,o)}if(!C){const M=Ss(h)||(()=>new h);o.push({provide:h,useFactory:M,deps:Mt},{provide:t0,useValue:h,multi:!0},{provide:Yd,useValue:()=>qn(h),multi:!0})}const D=m.providers;null==D||C||ji(D,O=>{o.push(O)})}}return h!==s&&void 0!==s.providers}const bD=fe({provide:String,useValue:fe});function H_(s){return null!==s&&"object"==typeof s&&bD in s}function sl(s){return"function"==typeof s}const Gf=new mn("Set Injector scope."),Du={},wD={};let $_;function $g(){return void 0===$_&&($_=new n0),$_}class Su{}class qf extends Su{constructor(o,l,u,h){super(),this.parent=l,this.source=u,this.scopes=h,this.records=new Map,this._ngOnDestroyHooks=new Set,this._onDestroyHooks=[],this._destroyed=!1,z_(o,v=>this.processProvider(v)),this.records.set(Iu,Tu(void 0,this)),h.has("environment")&&this.records.set(Su,Tu(void 0,this));const m=this.records.get(Gf);null!=m&&"string"==typeof m.value&&this.scopes.add(m.value),this.injectorDefTypes=new Set(this.get(t0.multi,Mt,pt.Self))}get destroyed(){return this._destroyed}destroy(){this.assertNotDestroyed(),this._destroyed=!0;try{for(const o of this._ngOnDestroyHooks)o.ngOnDestroy();for(const o of this._onDestroyHooks)o()}finally{this.records.clear(),this._ngOnDestroyHooks.clear(),this.injectorDefTypes.clear(),this._onDestroyHooks.length=0}}onDestroy(o){this._onDestroyHooks.push(o)}runInContext(o){this.assertNotDestroyed();const l=jr(this),u=Kr(void 0);try{return o()}finally{jr(l),Kr(u)}}get(o,l=Kt,u=pt.Default){this.assertNotDestroyed();const h=jr(this),m=Kr(void 0);try{if(!(u&pt.SkipSelf)){let C=this.records.get(o);if(void 0===C){const D=function ED(s){return"function"==typeof s||"object"==typeof s&&s instanceof mn}(o)&&nn(o);C=D&&this.injectableDefInScope(D)?Tu(zg(o),Du):null,this.records.set(o,C)}if(null!=C)return this.hydrate(o,C)}return(u&pt.Self?$g():this.parent).get(o,l=u&pt.Optional&&l===Kt?null:l)}catch(v){if("NullInjectorError"===v.name){if((v[Hr]=v[Hr]||[]).unshift(Ee(o)),h)throw v;return function Kl(s,o,l,u){const h=s[Hr];throw o[Za]&&h.unshift(o[Za]),s.message=function Pn(s,o,l,u=null){s=s&&"\n"===s.charAt(0)&&"\u0275"==s.charAt(1)?s.slice(2):s;let h=Ee(o);if(Array.isArray(o))h=o.map(Ee).join(" -> ");else if("object"==typeof o){let m=[];for(let v in o)if(o.hasOwnProperty(v)){let C=o[v];m.push(v+":"+("string"==typeof C?JSON.stringify(C):Ee(C)))}h=`{${m.join(", ")}}`}return`${l}${u?"("+u+")":""}[${h}]: ${s.replace(Xr,"\n  ")}`}("\n"+s.message,h,l,u),s.ngTokenPath=h,s[Hr]=null,s}(v,o,"R3InjectorError",this.source)}throw v}finally{Kr(m),jr(h)}}resolveInjectorInitializers(){const o=jr(this),l=Kr(void 0);try{const u=this.get(Yd.multi,Mt,pt.Self);for(const h of u)h()}finally{jr(o),Kr(l)}}toString(){const o=[],l=this.records;for(const u of l.keys())o.push(Ee(u));return`R3Injector[${o.join(", ")}]`}assertNotDestroyed(){if(this._destroyed)throw new De(205,!1)}processProvider(o){let l=sl(o=Y(o))?o:Y(o&&o.provide);const u=function Gg(s){return H_(s)?Tu(void 0,s.useValue):Tu(Wf(s),Du)}(o);if(sl(o)||!0!==o.multi)this.records.get(l);else{let h=this.records.get(l);h||(h=Tu(void 0,Du,!0),h.factory=()=>Md(h.multi),this.records.set(l,h)),l=o,h.multi.push(o)}this.records.set(l,u)}hydrate(o,l){return l.value===Du&&(l.value=wD,l.value=l.factory()),"object"==typeof l.value&&l.value&&function c0(s){return null!==s&&"object"==typeof s&&"function"==typeof s.ngOnDestroy}(l.value)&&this._ngOnDestroyHooks.add(l.value),l.value}injectableDefInScope(o){if(!o.providedIn)return!1;const l=Y(o.providedIn);return"string"==typeof l?"any"===l||this.scopes.has(l):this.injectorDefTypes.has(l)}}function zg(s){const o=nn(s),l=null!==o?o.factory:Ss(s);if(null!==l)return l;if(s instanceof mn)throw new De(204,!1);if(s instanceof Function)return function l0(s){const o=s.length;if(o>0)throw ea(o,"?"),new De(204,!1);const l=function Lr(s){const o=s&&(s[is]||s[Ta]);if(o){const l=function ei(s){if(s.hasOwnProperty("name"))return s.name;const o=(""+s).match(/^function\s*([^\s(]+)/);return null===o?"":o[1]}(s);return console.warn(`DEPRECATED: DI is instantiating a token "${l}" that inherits its @Injectable decorator but does not provide one itself.\nThis will become an error in a future version of Angular. Please add @Injectable() to the "${l}" class.`),o}return null}(s);return null!==l?()=>l.factory(s):()=>new s}(s);throw new De(204,!1)}function Wf(s,o,l){let u;if(sl(s)){const h=Y(s);return Ss(h)||zg(h)}if(H_(s))u=()=>Y(s.useValue);else if(function o0(s){return!(!s||!s.useFactory)}(s))u=()=>s.useFactory(...Md(s.deps||[]));else if(function j_(s){return!(!s||!s.useExisting)}(s))u=()=>qn(Y(s.useExisting));else{const h=Y(s&&(s.useClass||s.provide));if(!function Kf(s){return!!s.deps}(s))return Ss(h)||zg(h);u=()=>new h(...Md(s.deps))}return u}function Tu(s,o,l=!1){return{factory:s,value:o,multi:l?[]:void 0}}function CD(s){return!!s.\u0275providers}function z_(s,o){for(const l of s)Array.isArray(l)?z_(l,o):CD(l)?z_(l.\u0275providers,o):o(l)}class u0{}class DD{resolveComponentFactory(o){throw function qg(s){const o=Error(`No component factory found for ${Ee(s)}. Did you add it to @NgModule.entryComponents?`);return o.ngComponent=s,o}(o)}}let Zf=(()=>{class s{}return s.NULL=new DD,s})();function SD(){return Qd(Bn(),Te())}function Qd(s,o){return new Yf(Qr(s,o))}let Yf=(()=>{class s{constructor(l){this.nativeElement=l}}return s.__NG_ELEMENT_ID__=SD,s})();function h0(s){return s instanceof Yf?s.nativeElement:s}class G_{}let f0=(()=>{class s{}return s.__NG_ELEMENT_ID__=()=>function p0(){const s=Te(),l=Gn(Bn().index,s);return(gr(l)?l:s)[11]}(),s})(),g0=(()=>{class s{}return s.\u0275prov=He({token:s,providedIn:"root",factory:()=>null}),s})();class q_{constructor(o){this.full=o,this.major=o.split(".")[0],this.minor=o.split(".")[1],this.patch=o.split(".").slice(2).join(".")}}const m0=new q_("14.3.0"),W_={};function Z_(s){return s.ngOriginalError}class Qf{constructor(){this._console=console}handleError(o){const l=this._findOriginalError(o);this._console.error("ERROR",o),l&&this._console.error("ORIGINAL ERROR",l)}_findOriginalError(o){let l=o&&Z_(o);for(;l&&Z_(l);)l=Z_(l);return l||null}}function ol(s){return s instanceof Function?s():s}function Xf(s,o,l){let u=s.length;for(;;){const h=s.indexOf(o,l);if(-1===h)return h;if(0===h||s.charCodeAt(h-1)<=32){const m=o.length;if(h+m===u||s.charCodeAt(h+m)<=32)return h}l=h+1}}const I0="ng-template";function xD(s,o,l){let u=0;for(;u<s.length;){let h=s[u++];if(l&&"class"===h){if(h=s[u],-1!==Xf(h.toLowerCase(),o,0))return!0}else if(1===h){for(;u<s.length&&"string"==typeof(h=s[u++]);)if(h.toLowerCase()===o)return!0;return!1}}return!1}function D0(s){return 4===s.type&&s.value!==I0}function RD(s,o,l){return o===(4!==s.type||l?s.value:I0)}function S0(s,o,l){let u=4;const h=s.attrs||[],m=function J_(s){for(let o=0;o<s.length;o++)if(Ol(s[o]))return o;return s.length}(h);let v=!1;for(let C=0;C<o.length;C++){const D=o[C];if("number"!=typeof D){if(!v)if(4&u){if(u=2|1&u,""!==D&&!RD(s,D,l)||""===D&&1===o.length){if(Rn(u))return!1;v=!0}}else{const M=8&u?D:o[++C];if(8&u&&null!==s.attrs){if(!xD(s.attrs,M,l)){if(Rn(u))return!1;v=!0}continue}const V=kD(8&u?"class":D,h,D0(s),l);if(-1===V){if(Rn(u))return!1;v=!0;continue}if(""!==M){let q;q=V>m?"":h[V+1].toLowerCase();const te=8&u?q:null;if(te&&-1!==Xf(te,M,0)||2&u&&M!==q){if(Rn(u))return!1;v=!0}}}}else{if(!v&&!Rn(u)&&!Rn(D))return!1;if(v&&Rn(D))continue;v=!1,u=D|1&u}}return Rn(u)||v}function Rn(s){return 0==(1&s)}function kD(s,o,l,u){if(null===o)return-1;let h=0;if(u||!l){let m=!1;for(;h<o.length;){const v=o[h];if(v===s)return h;if(3===v||6===v)m=!0;else{if(1===v||2===v){let C=o[++h];for(;"string"==typeof C;)C=o[++h];continue}if(4===v)break;if(0===v){h+=4;continue}}h+=m?1:2}return-1}return function OD(s,o){let l=s.indexOf(4);if(l>-1)for(l++;l<s.length;){const u=s[l];if("number"==typeof u)return-1;if(u===o)return l;l++}return-1}(o,s)}function Q_(s,o,l=!1){for(let u=0;u<o.length;u++)if(S0(s,o[u],l))return!0;return!1}function PD(s,o){e:for(let l=0;l<o.length;l++){const u=o[l];if(s.length===u.length){for(let h=0;h<s.length;h++)if(s[h]!==u[h])continue e;return!0}}return!1}function ey(s,o){return s?":not("+o.trim()+")":o}function aO(s){let o=s[0],l=1,u=2,h="",m=!1;for(;l<s.length;){let v=s[l];if("string"==typeof v)if(2&u){const C=s[++l];h+="["+v+(C.length>0?'="'+C+'"':"")+"]"}else 8&u?h+="."+v:4&u&&(h+=" "+v);else""!==h&&!Rn(v)&&(o+=ey(m,h),h=""),u=v,m=m||!Rn(u);l++}return""!==h&&(o+=ey(m,h)),o}const $t={};function ty(s){Jf(Wt(),Te(),ln()+s,!1)}function Jf(s,o,l,u){if(!u)if(3==(3&o[2])){const m=s.preOrderCheckHooks;null!==m&&Na(o,m,l)}else{const m=s.preOrderHooks;null!==m&&Ko(o,m,0,l)}xs(l)}function M0(s,o=null,l=null,u){const h=x0(s,o,l,u);return h.resolveInjectorInitializers(),h}function x0(s,o=null,l=null,u,h=new Set){const m=[l||Mt,vD(s)];return u=u||("object"==typeof s?void 0:Ee(s)),new qf(m,o||$g(),u||null,h)}let uc=(()=>{class s{static create(l,u){if(Array.isArray(l))return M0({name:""},u,l,"");{const h=l.name??"";return M0({name:h},l.parent,l.providers,h)}}}return s.THROW_IF_NOT_FOUND=Kt,s.NULL=new n0,s.\u0275prov=He({token:s,providedIn:"any",factory:()=>qn(Iu)}),s.__NG_ELEMENT_ID__=-1,s})();function nh(s,o=pt.Default){const l=Te();return null===l?qn(s,o):Qo(Bn(),l,Y(s),o)}function _s(){throw new Error("invalid")}function np(s,o){return s<<17|o<<2}function lo(s){return s>>17&32767}function Qg(s){return 2|s}function ha(s){return(131068&s)>>2}function Xg(s,o){return-131069&s|o<<2}function Jg(s){return 1|s}function lp(s,o){const l=s.contentQueries;if(null!==l)for(let u=0;u<l.length;u+=2){const h=l[u],m=l[u+1];if(-1!==m){const v=s.data[m];Ur(h),v.contentQueries(2,o[m],m)}}}function ih(s,o,l,u,h,m,v,C,D,M,O){const V=o.blueprint.slice();return V[0]=h,V[2]=76|u,(null!==O||s&&1024&s[2])&&(V[2]|=1024),Js(V),V[3]=V[15]=s,V[8]=l,V[10]=v||s&&s[10],V[11]=C||s&&s[11],V[12]=D||s&&s[12]||null,V[9]=M||s&&s[9]||null,V[6]=m,V[20]=function Q(){return G++}(),V[21]=O,V[16]=2==o.type?s[16]:V,V}function ku(s,o,l,u,h){let m=s.data[o];if(null===m)m=function up(s,o,l,u,h){const m=Sl(),v=Go(),D=s.data[o]=function sm(s,o,l,u,h,m){return{type:l,index:u,insertBeforeIndex:null,injectorIndex:o?o.injectorIndex:-1,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,propertyBindings:null,flags:0,providerIndexes:0,value:h,attrs:m,mergedAttrs:null,localNames:null,initialInputs:void 0,inputs:null,outputs:null,tViews:null,next:null,projectionNext:null,child:null,parent:o,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}(0,v?m:m&&m.parent,l,o,u,h);return null===s.firstChild&&(s.firstChild=D),null!==m&&(v?null==m.child&&null!==D.parent&&(m.child=D):null===m.next&&(m.next=D)),D}(s,o,l,u,h),function yd(){return Rt.lFrame.inI18n}()&&(m.flags|=64);else if(64&m.type){m.type=l,m.value=u,m.attrs=h;const v=function go(){const s=Rt.lFrame,o=s.currentTNode;return s.isParent?o:o.parent}();m.injectorIndex=null===v?-1:v.injectorIndex}return si(m,!0),m}function Ou(s,o,l,u){if(0===l)return-1;const h=o.length;for(let m=0;m<l;m++)o.push(u),s.blueprint.push(u),s.data.push(null);return h}function sh(s,o,l){Oa(o);try{const u=s.viewQuery;null!==u&&um(1,u,l);const h=s.template;null!==h&&fy(s,o,h,1,l),s.firstCreatePass&&(s.firstCreatePass=!1),s.staticContentQueries&&lp(s,o),s.staticViewQueries&&um(2,s.viewQuery,l);const m=s.components;null!==m&&function cp(s,o){for(let l=0;l<o.length;l++)IO(s,o[l])}(o,m)}catch(u){throw s.firstCreatePass&&(s.incompleteFirstPass=!0,s.firstCreatePass=!1),u}finally{o[2]&=-5,Wo()}}function dp(s,o,l,u){const h=o[2];if(128!=(128&h)){Oa(o);try{Js(o),function Ui(s){return Rt.lFrame.bindingIndex=s}(s.bindingStartIndex),null!==l&&fy(s,o,l,2,u);const v=3==(3&h);if(v){const M=s.preOrderCheckHooks;null!==M&&Na(o,M,null)}else{const M=s.preOrderHooks;null!==M&&Ko(o,M,0,null),Ed(o,0)}if(function EO(s){for(let o=tc(s);null!==o;o=xg(o)){if(!o[2])continue;const l=o[9];for(let u=0;u<l.length;u++){const h=l[u],m=h[3];0==(512&h[2])&&xr(m,1),h[2]|=512}}}(o),function ow(s){for(let o=tc(s);null!==o;o=xg(o))for(let l=10;l<o.length;l++){const u=o[l],h=u[1];po(u)&&dp(h,u,h.template,u[8])}}(o),null!==s.contentQueries&&lp(s,o),v){const M=s.contentCheckHooks;null!==M&&Na(o,M)}else{const M=s.contentHooks;null!==M&&Ko(o,M,1),Ed(o,1)}!function ap(s,o){const l=s.hostBindingOpCodes;if(null!==l)try{for(let u=0;u<l.length;u++){const h=l[u];if(h<0)xs(~h);else{const m=h,v=l[++u],C=l[++u];wg(v,m),C(2,o[m])}}}finally{xs(-1)}}(s,o);const C=s.components;null!==C&&function rh(s,o){for(let l=0;l<o.length;l++)CO(s,o[l])}(o,C);const D=s.viewQuery;if(null!==D&&um(2,D,u),v){const M=s.viewCheckHooks;null!==M&&Na(o,M)}else{const M=s.viewHooks;null!==M&&Ko(o,M,2),Ed(o,2)}!0===s.firstUpdatePass&&(s.firstUpdatePass=!1),o[2]&=-41,512&o[2]&&(o[2]&=-513,xr(o[3],-1))}finally{Wo()}}}function fy(s,o,l,u,h){const m=ln(),v=2&u;try{xs(-1),v&&o.length>22&&Jf(s,o,22,!1),l(u,h)}finally{xs(m)}}function hp(s,o,l){if(Xs(o)){const h=o.directiveEnd;for(let m=o.directiveStart;m<h;m++){const v=s.data[m];v.contentQueries&&v.contentQueries(1,l[m],m)}}}function Pu(s,o,l){!_d()||(function nw(s,o,l,u){const h=l.directiveStart,m=l.directiveEnd;s.firstCreatePass||Yo(l,o),yt(u,o);const v=l.initialInputs;for(let C=h;C<m;C++){const D=s.data[C],M=Li(D);M&&gp(o,l,D);const O=ja(o,s,C,l);yt(O,o),null!==v&&iw(0,C-h,O,D,0,v),M&&(Gn(l.index,o)[8]=O)}}(s,o,l,Qr(l,o)),128==(128&l.flags)&&function wO(s,o,l){const u=l.directiveStart,h=l.directiveEnd,m=l.index,v=function qo(){return Rt.lFrame.currentDirectiveIndex}();try{xs(m);for(let C=u;C<h;C++){const D=s.data[C],M=o[C];zc(C),(null!==D.hostBindings||0!==D.hostVars||null!==D.hostAttrs)&&lm(D,M)}}finally{xs(-1),zc(v)}}(s,o,l))}function Q0(s,o,l=Qr){const u=o.localNames;if(null!==u){let h=o.index+1;for(let m=0;m<u.length;m+=2){const v=u[m+1],C=-1===v?l(o,s):s[v];s[h++]=C}}}function QD(s){const o=s.tView;return null===o||o.incompleteFirstPass?s.tView=im(1,null,s.template,s.decls,s.vars,s.directiveDefs,s.pipeDefs,s.viewQuery,s.schemas,s.consts):o}function im(s,o,l,u,h,m,v,C,D,M){const O=22+u,V=O+h,q=function vO(s,o){const l=[];for(let u=0;u<o;u++)l.push(u<s?null:$t);return l}(O,V),te="function"==typeof M?M():M;return q[1]={type:s,blueprint:q,template:l,queries:null,viewQuery:C,declTNode:o,data:q.slice().fill(null,O),bindingStartIndex:O,expandoStartIndex:V,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:"function"==typeof m?m():m,pipeRegistry:"function"==typeof v?v():v,firstChild:null,schemas:D,consts:te,incompleteFirstPass:!1}}function pp(s,o,l,u){const h=vy(o);null===l?h.push(u):(h.push(l),s.firstCreatePass&&lw(s).push(u,h.length-1))}function X0(s,o,l){for(let u in s)if(s.hasOwnProperty(u)){const h=s[u];(l=null===l?{}:l).hasOwnProperty(u)?l[u].push(o,h):l[u]=[o,h]}return l}function om(s,o){const u=o.directiveEnd,h=s.data,m=o.attrs,v=[];let C=null,D=null;for(let M=o.directiveStart;M<u;M++){const O=h[M],V=O.inputs,q=null===m||D0(o)?null:mp(V,m);v.push(q),C=X0(V,M,C),D=X0(O.outputs,M,D)}null!==C&&(C.hasOwnProperty("class")&&(o.flags|=16),C.hasOwnProperty("style")&&(o.flags|=32)),o.initialInputs=v,o.inputs=C,o.outputs=D}function Hs(s,o,l,u,h,m,v,C){const D=Qr(o,l);let O,M=o.inputs;!C&&null!=M&&(O=M[u])?(wy(s,l,O,u,h),jo(o)&&J0(l,o.index)):3&o.type&&(u=function am(s){return"class"===s?"className":"for"===s?"htmlFor":"formaction"===s?"formAction":"innerHtml"===s?"innerHTML":"readonly"===s?"readOnly":"tabindex"===s?"tabIndex":s}(u),h=null!=v?v(h,o.value||"",u):h,m.setProperty(D,u,h))}function J0(s,o){const l=Gn(o,s);16&l[2]||(l[2]|=32)}function gy(s,o,l,u){let h=!1;if(_d()){const m=function eS(s,o,l){const u=s.directiveRegistry;let h=null;if(u)for(let m=0;m<u.length;m++){const v=u[m];Q_(l,v.selectors,!1)&&(h||(h=[]),Ha(Yo(l,o),s,v.type),Li(v)?(my(s,l),h.unshift(v)):h.push(v))}return h}(s,o,l),v=null===u?null:{"":-1};if(null!==m){h=!0,nS(l,s.data.length,m.length);for(let O=0;O<m.length;O++){const V=m[O];V.providersResolver&&V.providersResolver(V)}let C=!1,D=!1,M=Ou(s,o,m.length,null);for(let O=0;O<m.length;O++){const V=m[O];l.mergedAttrs=Zo(l.mergedAttrs,V.hostAttrs),rw(s,l,o,M,V),tS(M,V,v),null!==V.contentQueries&&(l.flags|=8),(null!==V.hostBindings||null!==V.hostAttrs||0!==V.hostVars)&&(l.flags|=128);const q=V.type.prototype;!C&&(q.ngOnChanges||q.ngOnInit||q.ngDoCheck)&&((s.preOrderHooks||(s.preOrderHooks=[])).push(l.index),C=!0),!D&&(q.ngOnChanges||q.ngDoCheck)&&((s.preOrderCheckHooks||(s.preOrderCheckHooks=[])).push(l.index),D=!0),M++}om(s,l)}v&&function _y(s,o,l){if(o){const u=s.localNames=[];for(let h=0;h<o.length;h+=2){const m=l[o[h+1]];if(null==m)throw new De(-301,!1);u.push(o[h],m)}}}(l,u,v)}return l.mergedAttrs=Zo(l.mergedAttrs,l.attrs),h}function XD(s,o,l,u,h,m){const v=m.hostBindings;if(v){let C=s.hostBindingOpCodes;null===C&&(C=s.hostBindingOpCodes=[]);const D=~o.index;(function JD(s){let o=s.length;for(;o>0;){const l=s[--o];if("number"==typeof l&&l<0)return l}return 0})(C)!=D&&C.push(D),C.push(u,h,v)}}function lm(s,o){null!==s.hostBindings&&s.hostBindings(1,o)}function my(s,o){o.flags|=2,(s.components||(s.components=[])).push(o.index)}function tS(s,o,l){if(l){if(o.exportAs)for(let u=0;u<o.exportAs.length;u++)l[o.exportAs[u]]=s;Li(o)&&(l[""]=s)}}function nS(s,o,l){s.flags|=1,s.directiveStart=o,s.directiveEnd=o+l,s.providerIndexes=o}function rw(s,o,l,u,h){s.data[u]=h;const m=h.factory||(h.factory=Ss(h.type)),v=new La(m,Li(h),nh);s.blueprint[u]=v,l[u]=v,XD(s,o,0,u,Ou(s,l,h.hostVars,$t),h)}function gp(s,o,l){const u=Qr(o,s),h=QD(l),m=s[10],v=_p(s,ih(s,h,null,l.onPush?32:16,u,o,m,m.createRenderer(u,l),null,null,null));s[o.index]=v}function js(s,o,l,u,h,m){const v=Qr(s,o);!function cm(s,o,l,u,h,m,v){if(null==m)s.removeAttribute(o,h,l);else{const C=null==v?be(m):v(m,u||"",h);s.setAttribute(o,h,C,l)}}(o[11],v,m,s.value,l,u,h)}function iw(s,o,l,u,h,m){const v=m[o];if(null!==v){const C=u.setInput;for(let D=0;D<v.length;){const M=v[D++],O=v[D++],V=v[D++];null!==C?u.setInput(l,V,M,O):l[O]=V}}}function mp(s,o){let l=null,u=0;for(;u<o.length;){const h=o[u];if(0!==h)if(5!==h){if("number"==typeof h)break;s.hasOwnProperty(h)&&(null===l&&(l=[]),l.push(h,s[h],o[u+1])),u+=2}else u+=2;else u+=4}return l}function sw(s,o,l,u){return new Array(s,!0,!1,o,null,0,u,l,null,null)}function CO(s,o){const l=Gn(o,s);if(po(l)){const u=l[1];48&l[2]?dp(u,l,u.template,l[8]):l[5]>0&&aw(l)}}function aw(s){for(let u=tc(s);null!==u;u=xg(u))for(let h=10;h<u.length;h++){const m=u[h];if(po(m))if(512&m[2]){const v=m[1];dp(v,m,v.template,m[8])}else m[5]>0&&aw(m)}const l=s[1].components;if(null!==l)for(let u=0;u<l.length;u++){const h=Gn(l[u],s);po(h)&&h[5]>0&&aw(h)}}function IO(s,o){const l=Gn(o,s),u=l[1];(function rS(s,o){for(let l=o.length;l<s.blueprint.length;l++)o.push(s.blueprint[l])})(u,l),sh(u,l,l[8])}function _p(s,o){return s[13]?s[14][4]=o:s[13]=o,s[14]=o,o}function yy(s){for(;s;){s[2]|=32;const o=du(s);if($o(s)&&!o)return s;s=o}return null}function yp(s,o,l,u=!0){const h=o[10];h.begin&&h.begin();try{dp(s,o,s.template,l)}catch(v){throw u&&by(o,v),v}finally{h.end&&h.end()}}function um(s,o,l){Ur(0),o(s,l)}function vy(s){return s[7]||(s[7]=[])}function lw(s){return s.cleanup||(s.cleanup=[])}function sS(s,o,l){return(null===s||Li(s))&&(l=function As(s){for(;Array.isArray(s);){if("object"==typeof s[1])return s;s=s[0]}return null}(l[o.index])),l[11]}function by(s,o){const l=s[9],u=l?l.get(Qf,null):null;u&&u.handleError(o)}function wy(s,o,l,u,h){for(let m=0;m<l.length;){const v=l[m++],C=l[m++],D=o[v],M=s.data[v];null!==M.setInput?M.setInput(D,h,u,C):D[C]=h}}function dm(s,o,l){let u=l?s.styles:null,h=l?s.classes:null,m=0;if(null!==o)for(let v=0;v<o.length;v++){const C=o[v];"number"==typeof C?m=C:1==m?h=ge(h,C):2==m&&(u=ge(u,C+": "+o[++v]+";"))}l?s.styles=u:s.stylesWithoutHost=u,l?s.classes=h:s.classesWithoutHost=h}function vp(s,o,l,u,h=!1){for(;null!==l;){const m=o[l.index];if(null!==m&&u.push(zn(m)),Yr(m))for(let C=10;C<m.length;C++){const D=m[C],M=D[1].firstChild;null!==M&&vp(D[1],D,M,u)}const v=l.type;if(8&v)vp(s,o,l.child,u);else if(32&v){const C=ec(l,o);let D;for(;D=C();)u.push(D)}else if(16&v){const C=Of(o,l);if(Array.isArray(C))u.push(...C);else{const D=du(o[16]);vp(D[1],D,C,u,!0)}}l=h?l.projectionNext:l.next}return u}class Nu{constructor(o,l){this._lView=o,this._cdRefInjectingView=l,this._appRef=null,this._attachedToViewContainer=!1}get rootNodes(){const o=this._lView,l=o[1];return vp(l,o,l.firstChild,[])}get context(){return this._lView[8]}set context(o){this._lView[8]=o}get destroyed(){return 128==(128&this._lView[2])}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){const o=this._lView[3];if(Yr(o)){const l=o[8],u=l?l.indexOf(this):-1;u>-1&&(el(o,u),iu(l,u))}this._attachedToViewContainer=!1}tl(this._lView[1],this._lView)}onDestroy(o){pp(this._lView[1],this._lView,null,o)}markForCheck(){yy(this._cdRefInjectingView||this._lView)}detach(){this._lView[2]&=-65}reattach(){this._lView[2]|=64}detectChanges(){yp(this._lView[1],this._lView,this.context)}checkNoChanges(){}attachToViewContainerRef(){if(this._appRef)throw new De(902,!1);this._attachedToViewContainer=!0}detachFromAppRef(){this._appRef=null,function Jb(s,o){gu(s,o,o[11],2,null,null)}(this._lView[1],this._lView)}attachToAppRef(o){if(this._attachedToViewContainer)throw new De(902,!1);this._appRef=o}}class oS extends Nu{constructor(o){super(o),this._view=o}detectChanges(){const o=this._view;yp(o[1],o,o[8],!1)}checkNoChanges(){}get context(){return null}}class hm extends Zf{constructor(o){super(),this.ngModule=o}resolveComponentFactory(o){const l=ue(o);return new Fu(l,this.ngModule)}}function cw(s){const o=[];for(let l in s)s.hasOwnProperty(l)&&o.push({propName:s[l],templateName:l});return o}class aS{constructor(o,l){this.injector=o,this.parentInjector=l}get(o,l,u){const h=this.injector.get(o,W_,u);return h!==W_||l===W_?h:this.parentInjector.get(o,l,u)}}class Fu extends u0{constructor(o,l){super(),this.componentDef=o,this.ngModule=l,this.componentType=o.type,this.selector=function lO(s){return s.map(aO).join(",")}(o.selectors),this.ngContentSelectors=o.ngContentSelectors?o.ngContentSelectors:[],this.isBoundToModule=!!l}get inputs(){return cw(this.componentDef.inputs)}get outputs(){return cw(this.componentDef.outputs)}create(o,l,u,h){let m=(h=h||this.ngModule)instanceof Su?h:h?.injector;m&&null!==this.componentDef.getStandaloneInjector&&(m=this.componentDef.getStandaloneInjector(m)||m);const v=m?new aS(o,m):o,C=v.get(G_,null);if(null===C)throw new De(407,!1);const D=v.get(g0,null),M=C.createRenderer(null,this.componentDef),O=this.componentDef.selectors[0][0]||"div",V=u?function fp(s,o,l){return s.selectRootElement(o,l===Ct.ShadowDom)}(M,u,this.componentDef.encapsulation):Tf(M,O,function bp(s){const o=s.toLowerCase();return"svg"===o?"svg":"math"===o?"math":null}(O)),q=this.componentDef.onPush?288:272,te=im(0,null,null,1,0,null,null,null,null,null),Ie=ih(null,te,null,q,null,null,C,M,D,v,null);let je,Qe;Oa(Ie);try{const mt=function Ey(s,o,l,u,h,m){const v=l[1];l[22]=s;const D=ku(v,22,2,"#host",null),M=D.mergedAttrs=o.hostAttrs;null!==M&&(dm(D,M,!0),null!==s&&(kl(h,s,M),null!==D.classes&&Uf(h,s,D.classes),null!==D.styles&&Bf(h,s,D.styles)));const O=u.createRenderer(s,o),V=ih(l,QD(o),null,o.onPush?32:16,l[22],D,u,O,m||null,null,null);return v.firstCreatePass&&(Ha(Yo(D,l),v,o.type),my(v,D),nS(D,l.length,1)),_p(l,V),l[22]=V}(V,this.componentDef,Ie,C,M);if(V)if(u)kl(M,V,["ng-version",m0.full]);else{const{attrs:Pt,classes:Oe}=function ND(s){const o=[],l=[];let u=1,h=2;for(;u<s.length;){let m=s[u];if("string"==typeof m)2===h?""!==m&&o.push(m,s[++u]):8===h&&l.push(m);else{if(!Rn(h))break;h=m}u++}return{attrs:o,classes:l}}(this.componentDef.selectors[0]);Pt&&kl(M,V,Pt),Oe&&Oe.length>0&&Uf(M,V,Oe.join(" "))}if(Qe=Cl(te,22),void 0!==l){const Pt=Qe.projection=[];for(let Oe=0;Oe<this.ngContentSelectors.length;Oe++){const Bt=l[Oe];Pt.push(null!=Bt?Array.from(Bt):null)}}je=function cS(s,o,l,u){const h=l[1],m=function tw(s,o,l){const u=Bn();s.firstCreatePass&&(l.providersResolver&&l.providersResolver(l),rw(s,u,o,Ou(s,o,1,null),l),om(s,u));const h=ja(o,s,u.directiveStart,u);yt(h,o);const m=Qr(u,o);return m&&yt(m,o),h}(h,l,o);if(s[8]=l[8]=m,null!==u)for(const C of u)C(m,o);if(o.contentQueries){const C=Bn();o.contentQueries(1,m,C.directiveStart)}const v=Bn();return!h.firstCreatePass||null===o.hostBindings&&null===o.hostAttrs||(xs(v.index),XD(l[1],v,0,v.directiveStart,v.directiveEnd,o),lm(o,m)),m}(mt,this.componentDef,Ie,[hw]),sh(te,Ie,null)}finally{Wo()}return new dw(this.componentType,je,Qd(Qe,Ie),Ie,Qe)}}class dw extends class ID{}{constructor(o,l,u,h,m){super(),this.location=u,this._rootLView=h,this._tNode=m,this.instance=l,this.hostView=this.changeDetectorRef=new oS(h),this.componentType=o}setInput(o,l){const u=this._tNode.inputs;let h;if(null!==u&&(h=u[o])){const m=this._rootLView;wy(m[1],m,h,o,l),J0(m,this._tNode.index)}}get injector(){return new ds(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(o){this.hostView.onDestroy(o)}}function hw(){const s=Bn();yo(Te()[1],s)}function wp(s){let o=function fw(s){return Object.getPrototypeOf(s.prototype).constructor}(s.type),l=!0;const u=[s];for(;o;){let h;if(Li(s))h=o.\u0275cmp||o.\u0275dir;else{if(o.\u0275cmp)throw new De(903,!1);h=o.\u0275dir}if(h){if(l){u.push(h);const v=s;v.inputs=Cy(s.inputs),v.declaredInputs=Cy(s.declaredInputs),v.outputs=Cy(s.outputs);const C=h.hostBindings;C&&TO(s,C);const D=h.viewQuery,M=h.contentQueries;if(D&&pw(s,D),M&&dS(s,M),se(s.inputs,h.inputs),se(s.declaredInputs,h.declaredInputs),se(s.outputs,h.outputs),Li(h)&&h.data.animation){const O=s.data;O.animation=(O.animation||[]).concat(h.data.animation)}}const m=h.features;if(m)for(let v=0;v<m.length;v++){const C=m[v];C&&C.ngInherit&&C(s),C===wp&&(l=!1)}}o=Object.getPrototypeOf(o)}!function uS(s){let o=0,l=null;for(let u=s.length-1;u>=0;u--){const h=s[u];h.hostVars=o+=h.hostVars,h.hostAttrs=Zo(h.hostAttrs,l=Zo(l,h.hostAttrs))}}(u)}function Cy(s){return s===tr?{}:s===Mt?[]:s}function pw(s,o){const l=s.viewQuery;s.viewQuery=l?(u,h)=>{o(u,h),l(u,h)}:o}function dS(s,o){const l=s.contentQueries;s.contentQueries=l?(u,h,m)=>{o(u,h,m),l(u,h,m)}:o}function TO(s,o){const l=s.hostBindings;s.hostBindings=l?(u,h)=>{o(u,h),l(u,h)}:o}let Ep=null;function $s(){if(!Ep){const s=vn.Symbol;if(s&&s.iterator)Ep=s.iterator;else{const o=Object.getOwnPropertyNames(Map.prototype);for(let l=0;l<o.length;++l){const u=o[l];"entries"!==u&&"size"!==u&&Map.prototype[u]===Map.prototype.entries&&(Ep=u)}}}return Ep}function oh(s){return!!Dy(s)&&(Array.isArray(s)||!(s instanceof Map)&&$s()in s)}function Dy(s){return null!==s&&("function"==typeof s||"object"==typeof s)}function Ci(s,o,l){return!Object.is(s[o],l)&&(s[o]=l,!0)}function Sy(s,o,l,u){const h=Te();return Ci(h,Ms(),o)&&(Wt(),js(Mn(),h,s,o,l,u)),Sy}function lh(s,o,l,u){return Ci(s,Ms(),l)?o+be(l)+u:$t}function My(s,o,l,u,h,m,v,C){const D=Te(),M=Wt(),O=s+22,V=M.firstCreatePass?function bS(s,o,l,u,h,m,v,C,D){const M=o.consts,O=ku(o,s,4,v||null,ii(M,C));gy(o,l,O,ii(M,D)),yo(o,O);const V=O.tViews=im(2,O,u,h,m,o.directiveRegistry,o.pipeRegistry,null,o.schemas,M);return null!==o.queries&&(o.queries.template(o,O),V.queries=o.queries.embeddedTView(O)),O}(O,M,D,o,l,u,h,m,v):M.data[O];si(V,!1);const q=D[11].createComment("");so(M,D,q,V),yt(q,D),_p(D,D[O]=sw(q,D,q,V)),Ds(V)&&Pu(M,D,V),null!=v&&Q0(D,V,C)}function yw(s,o,l){const u=Te();return Ci(u,Ms(),o)&&Hs(Wt(),Mn(),u,s,o,u[11],l,!1),yw}function xy(s,o,l,u,h){const v=h?"class":"style";wy(s,l,o.inputs[v],v,u)}function gm(s,o,l,u){const h=Te(),m=Wt(),v=22+s,C=h[11],D=h[v]=Tf(C,o,function Ml(){return Rt.lFrame.currentNamespace}()),M=m.firstCreatePass?function wS(s,o,l,u,h,m,v){const C=o.consts,M=ku(o,s,2,h,ii(C,m));return gy(o,l,M,ii(C,v)),null!==M.attrs&&dm(M,M.attrs,!1),null!==M.mergedAttrs&&dm(M,M.mergedAttrs,!0),null!==o.queries&&o.queries.elementStart(o,M),M}(v,m,h,0,o,l,u):m.data[v];si(M,!0);const O=M.mergedAttrs;null!==O&&kl(C,D,O);const V=M.classes;null!==V&&Uf(C,D,V);const q=M.styles;return null!==q&&Bf(C,D,q),64!=(64&M.flags)&&so(m,h,D,M),0===function xa(){return Rt.lFrame.elementDepthCount}()&&yt(D,h),function gd(){Rt.lFrame.elementDepthCount++}(),Ds(M)&&(Pu(m,h,M),hp(m,M,h)),null!==u&&Q0(h,M),gm}function mm(){let s=Bn();Go()?jc():(s=s.parent,si(s,!1));const o=s;!function md(){Rt.lFrame.elementDepthCount--}();const l=Wt();return l.firstCreatePass&&(yo(l,s),Xs(s)&&l.queries.elementEnd(s)),null!=o.classesWithoutHost&&function Cd(s){return 0!=(16&s.flags)}(o)&&xy(l,o,Te(),o.classesWithoutHost,!0),null!=o.stylesWithoutHost&&function sf(s){return 0!=(32&s.flags)}(o)&&xy(l,o,Te(),o.stylesWithoutHost,!1),mm}function uh(s,o,l,u){return gm(s,o,l,u),mm(),uh}function _m(s,o,l){const u=Te(),h=Wt(),m=s+22,v=h.firstCreatePass?function vw(s,o,l,u,h){const m=o.consts,v=ii(m,u),C=ku(o,s,8,"ng-container",v);return null!==v&&dm(C,v,!0),gy(o,l,C,ii(m,h)),null!==o.queries&&o.queries.elementStart(o,C),C}(m,h,u,o,l):h.data[m];si(v,!0);const C=u[m]=u[11].createComment("");return so(h,u,C,v),yt(C,u),Ds(v)&&(Pu(h,u,v),hp(h,v,u)),null!=l&&Q0(u,v),_m}function ym(){let s=Bn();const o=Wt();return Go()?jc():(s=s.parent,si(s,!1)),o.firstCreatePass&&(yo(o,s),Xs(s)&&o.queries.elementEnd(s)),ym}function Ry(){return Te()}function Uu(s){return!!s&&"function"==typeof s.then}function ww(s){return!!s&&"function"==typeof s.subscribe}const ky=ww;function Oy(s,o,l,u){const h=Te(),m=Wt(),v=Bn();return Ew(m,h,h[11],v,s,o,0,u),Oy}function Py(s,o){const l=Bn(),u=Te(),h=Wt();return Ew(h,u,sS(Ra(h.data),l,u),l,s,o),Py}function Ew(s,o,l,u,h,m,v,C){const D=Ds(u),O=s.firstCreatePass&&lw(s),V=o[8],q=vy(o);let te=!0;if(3&u.type||C){const Qe=Qr(u,o),mt=C?C(Qe):Qe,Pt=q.length,Oe=C?Dn=>C(zn(Dn[u.index])):u.index;let Bt=null;if(!C&&D&&(Bt=function MO(s,o,l,u){const h=s.cleanup;if(null!=h)for(let m=0;m<h.length-1;m+=2){const v=h[m];if(v===l&&h[m+1]===u){const C=o[7],D=h[m+2];return C.length>D?C[D]:null}"string"==typeof v&&(m+=2)}return null}(s,o,h,u.index)),null!==Bt)(Bt.__ngLastListenerFn__||Bt).__ngNextListenerFn__=m,Bt.__ngLastListenerFn__=m,te=!1;else{m=Sp(u,o,V,m,!1);const Dn=l.listen(mt,h,m);q.push(m,Dn),O&&O.push(h,Oe,Pt,Pt+1)}}else m=Sp(u,o,V,m,!1);const Ie=u.outputs;let je;if(te&&null!==Ie&&(je=Ie[h])){const Qe=je.length;if(Qe)for(let mt=0;mt<Qe;mt+=2){const lr=o[je[mt]][je[mt+1]].subscribe(m),ye=q.length;q.push(m,lr),O&&O.push(h,u.index,ye,-(ye+1))}}}function vm(s,o,l,u){try{return!1!==l(u)}catch(h){return by(s,h),!1}}function Sp(s,o,l,u,h){return function m(v){if(v===Function)return u;yy(2&s.flags?Gn(s.index,o):o);let D=vm(o,0,u,v),M=m.__ngNextListenerFn__;for(;M;)D=vm(o,0,M,v)&&D,M=M.__ngNextListenerFn__;return h&&!1===D&&(v.preventDefault(),v.returnValue=!1),D}}function Ny(s=1){return function Al(s){return(Rt.lFrame.contextLView=function Eg(s,o){for(;s>0;)o=o[15],s--;return o}(s,Rt.lFrame.contextLView))[8]}(s)}function ES(s,o){let l=null;const u=function X_(s){const o=s.attrs;if(null!=o){const l=o.indexOf(5);if(0==(1&l))return o[l+1]}return null}(s);for(let h=0;h<o.length;h++){const m=o[h];if("*"!==m){if(null===u?Q_(s,m,!0):PD(u,m))return h}else l=h}return l}function CS(s){const o=Te()[16][6];if(!o.projection){const u=o.projection=ea(s?s.length:1,null),h=u.slice();let m=o.child;for(;null!==m;){const v=s?ES(m,s):0;null!==v&&(h[v]?h[v].projectionNext=m:u[v]=m,h[v]=m),m=m.next}}}function Cw(s,o=0,l){const u=Te(),h=Wt(),m=ku(h,22+s,16,null,l||null);null===m.projection&&(m.projection=o),jc(),64!=(64&m.flags)&&function V_(s,o,l){Ff(o[11],0,o,l,nl(s,l,o),Og(l.parent||o[6],l,o))}(h,u,m)}function Hu(s,o,l,u,h){const m=Te(),v=lh(m,o,l,u);return v!==$t&&Hs(Wt(),Mn(),m,s,v,m[11],h,!1),Hu}function ys(s,o,l,u,h){const m=s[l+1],v=null===o;let C=u?lo(m):ha(m),D=!1;for(;0!==C&&(!1===D||v);){const O=s[C+1];Ly(s[C],o)&&(D=!0,s[C+1]=u?Jg(O):Qg(O)),C=u?lo(O):ha(O)}D&&(s[l+1]=u?Qg(m):Jg(m))}function Ly(s,o){return null===s||null==o||(Array.isArray(s)?s[1]:s)===o||!(!Array.isArray(s)||"string"!=typeof o)&&qa(s,o)>=0}function qs(s,o,l){return Yi(s,o,l,!1),qs}function xp(s,o){return Yi(s,o,null,!0),xp}function Yi(s,o,l,u){const h=Te(),m=Wt(),v=function ai(s){const o=Rt.lFrame,l=o.bindingIndex;return o.bindingIndex=o.bindingIndex+s,l}(2);m.firstUpdatePass&&function TS(s,o,l,u){const h=s.data;if(null===h[l+1]){const m=h[ln()],v=function SS(s,o){return o>=s.expandoStartIndex}(s,l);(function $y(s,o){return 0!=(s.flags&(o?16:32))})(m,u)&&null===o&&!v&&(o=!1),o=function kO(s,o,l,u){const h=Ra(s);let m=u?o.residualClasses:o.residualStyles;if(null===h)0===(u?o.classBindings:o.styleBindings)&&(l=Cm(l=Uy(null,s,o,l,u),o.attrs,u),m=null);else{const v=o.directiveStylingLast;if(-1===v||s[v]!==h)if(l=Uy(h,s,o,l,u),null===m){let D=function OO(s,o,l){const u=l?o.classBindings:o.styleBindings;if(0!==ha(u))return s[lo(u)]}(s,o,u);void 0!==D&&Array.isArray(D)&&(D=Uy(null,s,o,D[1],u),D=Cm(D,o.attrs,u),function PO(s,o,l,u){s[lo(l?o.classBindings:o.styleBindings)]=u}(s,o,u,D))}else m=function AS(s,o,l){let u;const h=o.directiveEnd;for(let m=1+o.directiveStylingLast;m<h;m++)u=Cm(u,s[m].hostAttrs,l);return Cm(u,o.attrs,l)}(s,o,u)}return void 0!==m&&(u?o.residualClasses=m:o.residualStyles=m),l}(h,m,o,u),function Rw(s,o,l,u,h,m){let v=m?o.classBindings:o.styleBindings,C=lo(v),D=ha(v);s[u]=l;let O,M=!1;if(Array.isArray(l)){const V=l;O=V[1],(null===O||qa(V,O)>0)&&(M=!0)}else O=l;if(h)if(0!==D){const q=lo(s[C+1]);s[u+1]=np(q,C),0!==q&&(s[q+1]=Xg(s[q+1],u)),s[C+1]=function L0(s,o){return 131071&s|o<<17}(s[C+1],u)}else s[u+1]=np(C,0),0!==C&&(s[C+1]=Xg(s[C+1],u)),C=u;else s[u+1]=np(D,0),0===C?C=u:s[D+1]=Xg(s[D+1],u),D=u;M&&(s[u+1]=Qg(s[u+1])),ys(s,O,u,!0),ys(s,O,u,!1),function Fy(s,o,l,u,h){const m=h?s.residualClasses:s.residualStyles;null!=m&&"string"==typeof o&&qa(m,o)>=0&&(l[u+1]=Jg(l[u+1]))}(o,O,s,u,m),v=np(C,D),m?o.classBindings=v:o.styleBindings=v}(h,m,o,l,v,u)}}(m,s,v,u),o!==$t&&Ci(h,v,o)&&function xS(s,o,l,u,h,m,v,C){if(!(3&o.type))return;const D=s.data,M=D[C+1];jy(function rp(s){return 1==(1&s)}(M)?RS(D,o,l,h,ha(M),v):void 0)||(jy(m)||function ly(s){return 2==(2&s)}(M)&&(m=RS(D,null,l,h,C,v)),function Vf(s,o,l,u,h){if(o)h?s.addClass(l,u):s.removeClass(l,u);else{let m=-1===u.indexOf("-")?void 0:Wi.DashCase;null==h?s.removeStyle(l,u,m):("string"==typeof h&&h.endsWith("!important")&&(h=h.slice(0,-10),m|=Wi.Important),s.setStyle(l,u,h,m))}}(u,v,mi(ln(),l),h,m))}(m,m.data[ln()],h,h[11],s,h[v+1]=function FO(s,o){return null==s||("string"==typeof o?s+=o:"object"==typeof s&&(s=Ee(or(s)))),s}(o,l),u,v)}function Uy(s,o,l,u,h){let m=null;const v=l.directiveEnd;let C=l.directiveStylingLast;for(-1===C?C=l.directiveStart:C++;C<v&&(m=o[C],u=Cm(u,m.hostAttrs,h),m!==s);)C++;return null!==s&&(l.directiveStylingLast=C),u}function Cm(s,o,l){const u=l?1:2;let h=-1;if(null!==o)for(let m=0;m<o.length;m++){const v=o[m];"number"==typeof v?h=v:h===u&&(Array.isArray(s)||(s=void 0===s?[]:["",s]),li(s,v,!!l||o[++m]))}return void 0===s?null:s}function RS(s,o,l,u,h,m){const v=null===o;let C;for(;h>0;){const D=s[h],M=Array.isArray(D),O=M?D[1]:D,V=null===O;let q=l[h+1];q===$t&&(q=V?Mt:void 0);let te=V?$l(q,u):O===u?q:void 0;if(M&&!jy(te)&&(te=$l(D,u)),jy(te)&&(C=te,v))return C;const Ie=s[h+1];h=v?lo(Ie):ha(Ie)}if(null!==o){let D=m?o.residualClasses:o.residualStyles;null!=D&&(C=$l(D,u))}return C}function jy(s){return void 0!==s}function zy(s,o=""){const l=Te(),u=Wt(),h=s+22,m=u.firstCreatePass?ku(u,h,1,o,null):u.data[h],v=l[h]=function hu(s,o){return s.createText(o)}(l[11],o);so(u,l,v,m),si(m,!1)}function Rp(s){return Fw("",s,""),Rp}function Fw(s,o,l){const u=Te(),h=lh(u,s,o,l);return h!==$t&&function pa(s,o,l){const u=mi(o,s);!function Nd(s,o,l){s.setValue(o,l)}(s[11],u,l)}(u,ln(),h),Fw}function Gw(s,o,l){const u=Te();return Ci(u,Ms(),o)&&Hs(Wt(),Mn(),u,s,o,u[11],l,!0),Gw}function qw(s,o,l){const u=Te();if(Ci(u,Ms(),o)){const m=Wt(),v=Mn();Hs(m,v,u,s,o,sS(Ra(m.data),v,u),l,!0)}return qw}const mc=void 0;var $S=["en",[["a","p"],["AM","PM"],mc],[["AM","PM"],mc,mc],[["S","M","T","W","T","F","S"],["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],["Su","Mo","Tu","We","Th","Fr","Sa"]],mc,[["J","F","M","A","M","J","J","A","S","O","N","D"],["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],["January","February","March","April","May","June","July","August","September","October","November","December"]],mc,[["B","A"],["BC","AD"],["Before Christ","Anno Domini"]],0,[6,0],["M/d/yy","MMM d, y","MMMM d, y","EEEE, MMMM d, y"],["h:mm a","h:mm:ss a","h:mm:ss a z","h:mm:ss a zzzz"],["{1}, {0}",mc,"{1} 'at' {0}",mc],[".",",",";","%","+","-","E","\xd7","\u2030","\u221e","NaN",":"],["#,##0.###","#,##0%","\xa4#,##0.00","#E0"],"USD","$","US Dollar",{},"ltr",function jS(s){const l=Math.floor(Math.abs(s)),u=s.toString().replace(/^[^.]*\.?/,"").length;return 1===l&&0===u?1:5}];let _c={};function Tm(s){const o=function Kw(s){return s.toLowerCase().replace(/_/g,"-")}(s);let l=yc(o);if(l)return l;const u=o.split("-")[0];if(l=yc(u),l)return l;if("en"===u)return $S;throw new De(701,!1)}function Ww(s){return Tm(s)[Ot.PluralCase]}function yc(s){return s in _c||(_c[s]=vn.ng&&vn.ng.common&&vn.ng.common.locales&&vn.ng.common.locales[s]),_c[s]}var Ot=(()=>((Ot=Ot||{})[Ot.LocaleId=0]="LocaleId",Ot[Ot.DayPeriodsFormat=1]="DayPeriodsFormat",Ot[Ot.DayPeriodsStandalone=2]="DayPeriodsStandalone",Ot[Ot.DaysFormat=3]="DaysFormat",Ot[Ot.DaysStandalone=4]="DaysStandalone",Ot[Ot.MonthsFormat=5]="MonthsFormat",Ot[Ot.MonthsStandalone=6]="MonthsStandalone",Ot[Ot.Eras=7]="Eras",Ot[Ot.FirstDayOfWeek=8]="FirstDayOfWeek",Ot[Ot.WeekendRange=9]="WeekendRange",Ot[Ot.DateFormat=10]="DateFormat",Ot[Ot.TimeFormat=11]="TimeFormat",Ot[Ot.DateTimeFormat=12]="DateTimeFormat",Ot[Ot.NumberSymbols=13]="NumberSymbols",Ot[Ot.NumberFormats=14]="NumberFormats",Ot[Ot.CurrencyCode=15]="CurrencyCode",Ot[Ot.CurrencySymbol=16]="CurrencySymbol",Ot[Ot.CurrencyName=17]="CurrencyName",Ot[Ot.Currencies=18]="Currencies",Ot[Ot.Directionality=19]="Directionality",Ot[Ot.PluralCase=20]="PluralCase",Ot[Ot.ExtraData=21]="ExtraData",Ot))();const fh="en-US";let Zw=fh;function Jw(s,o,l,u,h){if(s=Y(s),Array.isArray(s))for(let m=0;m<s.length;m++)Jw(s[m],o,l,u,h);else{const m=Wt(),v=Te();let C=sl(s)?s:Y(s.provide),D=Wf(s);const M=Bn(),O=1048575&M.providerIndexes,V=M.directiveStart,q=M.providerIndexes>>20;if(sl(s)||!s.multi){const te=new La(D,h,nh),Ie=tE(C,o,h?O:O+q,V);-1===Ie?(Ha(Yo(M,v),m,C),eE(m,s,o.length),o.push(C),M.directiveStart++,M.directiveEnd++,h&&(M.providerIndexes+=1048576),l.push(te),v.push(te)):(l[Ie]=te,v[Ie]=te)}else{const te=tE(C,o,O+q,V),Ie=tE(C,o,O,O+q),je=te>=0&&l[te],Qe=Ie>=0&&l[Ie];if(h&&!Qe||!h&&!je){Ha(Yo(M,v),m,C);const mt=function NP(s,o,l,u,h){const m=new La(s,l,nh);return m.multi=[],m.index=o,m.componentProviders=0,bT(m,h,u&&!l),m}(h?PP:OP,l.length,h,u,D);!h&&Qe&&(l[Ie].providerFactory=mt),eE(m,s,o.length,0),o.push(C),M.directiveStart++,M.directiveEnd++,h&&(M.providerIndexes+=1048576),l.push(mt),v.push(mt)}else eE(m,s,te>-1?te:Ie,bT(l[h?Ie:te],D,!h&&u));!h&&u&&Qe&&l[Ie].componentProviders++}}}function eE(s,o,l,u){const h=sl(o),m=function a0(s){return!!s.useClass}(o);if(h||m){const D=(m?Y(o.useClass):o).prototype.ngOnDestroy;if(D){const M=s.destroyHooks||(s.destroyHooks=[]);if(!h&&o.multi){const O=M.indexOf(l);-1===O?M.push(l,[u,D]):M[O+1].push(u,D)}else M.push(l,D)}}}function bT(s,o,l){return l&&s.componentProviders++,s.multi.push(o)-1}function tE(s,o,l,u){for(let h=l;h<u;h++)if(o[h]===s)return h;return-1}function OP(s,o,l,u){return nE(this.multi,[])}function PP(s,o,l,u){const h=this.multi;let m;if(this.providerFactory){const v=this.providerFactory.componentProviders,C=ja(l,l[1],this.providerFactory.index,u);m=C.slice(0,v),nE(h,m);for(let D=v;D<C.length;D++)m.push(C[D])}else m=[],nE(h,m);return m}function nE(s,o){for(let l=0;l<s.length;l++)o.push((0,s[l])());return o}function wT(s,o=[]){return l=>{l.providersResolver=(u,h)=>function kP(s,o,l){const u=Wt();if(u.firstCreatePass){const h=Li(s);Jw(l,u.data,u.blueprint,h,!0),Jw(o,u.data,u.blueprint,h,!1)}}(u,h?h(s):s,o)}}class Pp{}class ET{}function FP(s,o){return new CT(s,o??null)}class CT extends Pp{constructor(o,l){super(),this._parent=l,this._bootstrapComponents=[],this.destroyCbs=[],this.componentFactoryResolver=new hm(this);const u=Ut(o);this._bootstrapComponents=ol(u.bootstrap),this._r3Injector=x0(o,l,[{provide:Pp,useValue:this},{provide:Zf,useValue:this.componentFactoryResolver}],Ee(o),new Set(["environment"])),this._r3Injector.resolveInjectorInitializers(),this.instance=this._r3Injector.get(o)}get injector(){return this._r3Injector}destroy(){const o=this._r3Injector;!o.destroyed&&o.destroy(),this.destroyCbs.forEach(l=>l()),this.destroyCbs=null}onDestroy(o){this.destroyCbs.push(o)}}class rE extends ET{constructor(o){super(),this.moduleType=o}create(o){return new CT(this.moduleType,o)}}class LP extends Pp{constructor(o,l,u){super(),this.componentFactoryResolver=new hm(this),this.instance=null;const h=new qf([...o,{provide:Pp,useValue:this},{provide:Zf,useValue:this.componentFactoryResolver}],l||$g(),u,new Set(["environment"]));this.injector=h,h.resolveInjectorInitializers()}destroy(){this.injector.destroy()}onDestroy(o){this.injector.onDestroy(o)}}function iE(s,o,l=null){return new LP(s,o,l).injector}let VP=(()=>{class s{constructor(l){this._injector=l,this.cachedInjectors=new Map}getOrCreateStandaloneInjector(l){if(!l.standalone)return null;if(!this.cachedInjectors.has(l.id)){const u=r0(0,l.type),h=u.length>0?iE([u],this._injector,`Standalone[${l.type.name}]`):null;this.cachedInjectors.set(l.id,h)}return this.cachedInjectors.get(l.id)}ngOnDestroy(){try{for(const l of this.cachedInjectors.values())null!==l&&l.destroy()}finally{this.cachedInjectors.clear()}}}return s.\u0275prov=He({token:s,providedIn:"environment",factory:()=>new s(qn(Su))}),s})();function IT(s){s.getStandaloneInjector=o=>o.get(VP).getOrCreateStandaloneInjector(s)}function RT(s,o,l,u){return function FT(s,o,l,u,h,m){const v=o+l;return Ci(s,v,h)?function zs(s,o,l){return s[o]=l}(s,v+1,m?u.call(m,h):u(h)):function ph(s,o){const l=s[o];return l===$t?void 0:l}(s,v+1)}(Te(),function Br(){const s=Rt.lFrame;let o=s.bindingRootIndex;return-1===o&&(o=s.bindingRootIndex=s.tView.bindingStartIndex),o}(),s,o,l,u)}function Jy(s){return o=>{setTimeout(s,void 0,o)}}const _a=class BT extends d.x{constructor(o=!1){super(),this.__isAsync=o}emit(o){super.next(o)}subscribe(o,l,u){let h=o,m=l||(()=>null),v=u;if(o&&"object"==typeof o){const D=o;h=D.next?.bind(D),m=D.error?.bind(D),v=D.complete?.bind(D)}this.__isAsync&&(m=Jy(m),h&&(h=Jy(h)),v&&(v=Jy(v)));const C=super.subscribe({next:h,error:m,complete:v});return o instanceof ee.w0&&o.add(C),C}};function UT(){return this._results[$s()]()}class ev{constructor(o=!1){this._emitDistinctChangesOnly=o,this.dirty=!0,this._results=[],this._changesDetected=!1,this._changes=null,this.length=0,this.first=void 0,this.last=void 0;const l=$s(),u=ev.prototype;u[l]||(u[l]=UT)}get changes(){return this._changes||(this._changes=new _a)}get(o){return this._results[o]}map(o){return this._results.map(o)}filter(o){return this._results.filter(o)}find(o){return this._results.find(o)}reduce(o,l){return this._results.reduce(o,l)}forEach(o){this._results.forEach(o)}some(o){return this._results.some(o)}toArray(){return this._results.slice()}toString(){return this._results.toString()}reset(o,l){const u=this;u.dirty=!1;const h=Yn(o);(this._changesDetected=!function mf(s,o,l){if(s.length!==o.length)return!1;for(let u=0;u<s.length;u++){let h=s[u],m=o[u];if(l&&(h=l(h),m=l(m)),m!==h)return!1}return!0}(u._results,h,l))&&(u._results=h,u.length=h.length,u.last=h[this.length-1],u.first=h[0])}notifyOnChanges(){this._changes&&(this._changesDetected||!this._emitDistinctChangesOnly)&&this._changes.emit(this)}setDirty(){this.dirty=!0}destroy(){this.changes.complete(),this.changes.unsubscribe()}}let Np=(()=>{class s{}return s.__NG_ELEMENT_ID__=dE,s})();const HT=Np,uE=class extends HT{constructor(o,l,u){super(),this._declarationLView=o,this._declarationTContainer=l,this.elementRef=u}createEmbeddedView(o,l){const u=this._declarationTContainer.tViews,h=ih(this._declarationLView,u,o,16,null,u.declTNode,null,null,null,null,l||null);h[17]=this._declarationLView[this._declarationTContainer.index];const v=this._declarationLView[19];return null!==v&&(h[19]=v.createEmbeddedView(u)),sh(u,h,o),new Nu(h)}};function dE(){return Nm(Bn(),Te())}function Nm(s,o){return 4&s.type?new uE(o,s,Qd(s,o)):null}let Fm=(()=>{class s{}return s.__NG_ELEMENT_ID__=jT,s})();function jT(){return GT(Bn(),Te())}const $T=Fm,hE=class extends $T{constructor(o,l,u){super(),this._lContainer=o,this._hostTNode=l,this._hostLView=u}get element(){return Qd(this._hostTNode,this._hostLView)}get injector(){return new ds(this._hostTNode,this._hostLView)}get parentInjector(){const o=wo(this._hostTNode,this._hostLView);if(Xc(o)){const l=ls(o,this._hostLView),u=Va(o);return new ds(l[1].data[u+8],l)}return new ds(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(o){const l=zT(this._lContainer);return null!==l&&l[o]||null}get length(){return this._lContainer.length-10}createEmbeddedView(o,l,u){let h,m;"number"==typeof u?h=u:null!=u&&(h=u.index,m=u.injector);const v=o.createEmbeddedView(l||{},m);return this.insert(v,h),v}createComponent(o,l,u,h,m){const v=o&&!function yi(s){return"function"==typeof s}(o);let C;if(v)C=l;else{const V=l||{};C=V.index,u=V.injector,h=V.projectableNodes,m=V.environmentInjector||V.ngModuleRef}const D=v?o:new Fu(ue(o)),M=u||this.parentInjector;if(!m&&null==D.ngModule){const q=(v?M:this.parentInjector).get(Su,null);q&&(m=q)}const O=D.create(M,h,void 0,m);return this.insert(O.hostView,C),O}insert(o,l){const u=o._lView,h=u[1];if(function Uc(s){return Yr(s[3])}(u)){const O=this.indexOf(o);if(-1!==O)this.detach(O);else{const V=u[3],q=new hE(V,V[6],V[3]);q.detach(q.indexOf(o))}}const m=this._adjustIndex(l),v=this._lContainer;!function Af(s,o,l,u){const h=10+u,m=l.length;u>0&&(l[h-1][4]=o),u<m-10?(o[4]=l[h],ru(l,10+u,o)):(l.push(o),o[4]=null),o[3]=l;const v=o[17];null!==v&&l!==v&&function L_(s,o){const l=s[9];o[16]!==o[3][3][16]&&(s[2]=!0),null===l?s[9]=[o]:l.push(o)}(v,o);const C=o[19];null!==C&&C.insertView(s),o[2]|=64}(h,u,v,m);const C=Hd(m,v),D=u[11],M=Vd(D,v[7]);return null!==M&&function fu(s,o,l,u,h,m){u[0]=h,u[6]=o,gu(s,u,l,1,h,m)}(h,v[6],D,u,M,C),o.attachToViewContainerRef(),ru(fE(v),m,o),o}move(o,l){return this.insert(o,l)}indexOf(o){const l=zT(this._lContainer);return null!==l?l.indexOf(o):-1}remove(o){const l=this._adjustIndex(o,-1),u=el(this._lContainer,l);u&&(iu(fE(this._lContainer),l),tl(u[1],u))}detach(o){const l=this._adjustIndex(o,-1),u=el(this._lContainer,l);return u&&null!=iu(fE(this._lContainer),l)?new Nu(u):null}_adjustIndex(o,l=0){return o??this.length+l}};function zT(s){return s[8]}function fE(s){return s[8]||(s[8]=[])}function GT(s,o){let l;const u=o[s.index];if(Yr(u))l=u;else{let h;if(8&s.type)h=zn(u);else{const m=o[11];h=m.createComment("");const v=Qr(s,o);xo(m,Vd(m,v),h,function Rf(s,o){return s.nextSibling(o)}(m,v),!1)}o[s.index]=l=sw(u,o,h,s),_p(o,l)}return new hE(l,s,o)}class tv{constructor(o){this.queryList=o,this.matches=null}clone(){return new tv(this.queryList)}setDirty(){this.queryList.setDirty()}}class nv{constructor(o=[]){this.queries=o}createEmbeddedView(o){const l=o.queries;if(null!==l){const u=null!==o.contentQueries?o.contentQueries[0]:l.length,h=[];for(let m=0;m<u;m++){const v=l.getByIndex(m);h.push(this.queries[v.indexInDeclarationView].clone())}return new nv(h)}return null}insertView(o){this.dirtyQueriesWithMatches(o)}detachView(o){this.dirtyQueriesWithMatches(o)}dirtyQueriesWithMatches(o){for(let l=0;l<this.queries.length;l++)null!==yE(o,l).matches&&this.queries[l].setDirty()}}class pE{constructor(o,l,u=null){this.predicate=o,this.flags=l,this.read=u}}class rv{constructor(o=[]){this.queries=o}elementStart(o,l){for(let u=0;u<this.queries.length;u++)this.queries[u].elementStart(o,l)}elementEnd(o){for(let l=0;l<this.queries.length;l++)this.queries[l].elementEnd(o)}embeddedTView(o){let l=null;for(let u=0;u<this.length;u++){const h=null!==l?l.length:0,m=this.getByIndex(u).embeddedTView(o,h);m&&(m.indexInDeclarationView=u,null!==l?l.push(m):l=[m])}return null!==l?new rv(l):null}template(o,l){for(let u=0;u<this.queries.length;u++)this.queries[u].template(o,l)}getByIndex(o){return this.queries[o]}get length(){return this.queries.length}track(o){this.queries.push(o)}}class Lm{constructor(o,l=-1){this.metadata=o,this.matches=null,this.indexInDeclarationView=-1,this.crossesNgTemplate=!1,this._appliesToNextNode=!0,this._declarationNodeIndex=l}elementStart(o,l){this.isApplyingToNode(l)&&this.matchTNode(o,l)}elementEnd(o){this._declarationNodeIndex===o.index&&(this._appliesToNextNode=!1)}template(o,l){this.elementStart(o,l)}embeddedTView(o,l){return this.isApplyingToNode(o)?(this.crossesNgTemplate=!0,this.addMatch(-o.index,l),new Lm(this.metadata)):null}isApplyingToNode(o){if(this._appliesToNextNode&&1!=(1&this.metadata.flags)){const l=this._declarationNodeIndex;let u=o.parent;for(;null!==u&&8&u.type&&u.index!==l;)u=u.parent;return l===(null!==u?u.index:-1)}return this._appliesToNextNode}matchTNode(o,l){const u=this.metadata.predicate;if(Array.isArray(u))for(let h=0;h<u.length;h++){const m=u[h];this.matchTNodeWithReadOption(o,l,mh(l,m)),this.matchTNodeWithReadOption(o,l,us(l,o,m,!1,!1))}else u===Np?4&l.type&&this.matchTNodeWithReadOption(o,l,-1):this.matchTNodeWithReadOption(o,l,us(l,o,u,!1,!1))}matchTNodeWithReadOption(o,l,u){if(null!==u){const h=this.metadata.read;if(null!==h)if(h===Yf||h===Fm||h===Np&&4&l.type)this.addMatch(l.index,-2);else{const m=us(l,o,h,!1,!1);null!==m&&this.addMatch(l.index,m)}else this.addMatch(l.index,u)}}addMatch(o,l){null===this.matches?this.matches=[o,l]:this.matches.push(o,l)}}function mh(s,o){const l=s.localNames;if(null!==l)for(let u=0;u<l.length;u+=2)if(l[u]===o)return l[u+1];return null}function o1(s,o,l,u){return-1===l?function qT(s,o){return 11&s.type?Qd(s,o):4&s.type?Nm(s,o):null}(o,s):-2===l?function WT(s,o,l){return l===Yf?Qd(o,s):l===Np?Nm(o,s):l===Fm?GT(o,s):void 0}(s,o,u):ja(s,s[1],l,o)}function KT(s,o,l,u){const h=o[19].queries[u];if(null===h.matches){const m=s.data,v=l.matches,C=[];for(let D=0;D<v.length;D+=2){const M=v[D];C.push(M<0?null:o1(o,m[M],v[D+1],l.metadata.read))}h.matches=C}return h.matches}function gE(s,o,l,u){const h=s.queries.getByIndex(l),m=h.matches;if(null!==m){const v=KT(s,o,h,l);for(let C=0;C<m.length;C+=2){const D=m[C];if(D>0)u.push(v[C/2]);else{const M=m[C+1],O=o[-D];for(let V=10;V<O.length;V++){const q=O[V];q[17]===q[3]&&gE(q[1],q,M,u)}if(null!==O[9]){const V=O[9];for(let q=0;q<V.length;q++){const te=V[q];gE(te[1],te,M,u)}}}}}return u}function ZT(s){const o=Te(),l=Wt(),u=Tl();Ur(u+1);const h=yE(l,u);if(s.dirty&&function bg(s){return 4==(4&s[2])}(o)===(2==(2&h.metadata.flags))){if(null===h.matches)s.reset([]);else{const m=h.crossesNgTemplate?gE(l,o,u,[]):KT(l,o,h,u);s.reset(m,h0),s.notifyOnChanges()}return!0}return!1}function mE(s,o,l){const u=Wt();u.firstCreatePass&&(sv(u,new pE(s,o,l),-1),2==(2&o)&&(u.staticViewQueries=!0)),iv(u,Te(),o)}function Fp(s,o,l,u){const h=Wt();if(h.firstCreatePass){const m=Bn();sv(h,new pE(o,l,u),m.index),function ov(s,o){const l=s.contentQueries||(s.contentQueries=[]);o!==(l.length?l[l.length-1]:-1)&&l.push(s.queries.length-1,o)}(h,s),2==(2&l)&&(h.staticContentQueries=!0)}iv(h,Te(),l)}function _E(){return function a1(s,o){return s[19].queries[o].queryList}(Te(),Tl())}function iv(s,o,l){const u=new ev(4==(4&l));pp(s,o,u,u.destroy),null===o[19]&&(o[19]=new nv),o[19].queries.push(new tv(u))}function sv(s,o,l){null===s.queries&&(s.queries=new rv),s.queries.track(new Lm(o,l))}function yE(s,o){return s.queries.getByIndex(o)}function hv(...s){}const fv=new mn("Application Initializer");let Um=(()=>{class s{constructor(l){this.appInits=l,this.resolve=hv,this.reject=hv,this.initialized=!1,this.done=!1,this.donePromise=new Promise((u,h)=>{this.resolve=u,this.reject=h})}runInitializers(){if(this.initialized)return;const l=[],u=()=>{this.done=!0,this.resolve()};if(this.appInits)for(let h=0;h<this.appInits.length;h++){const m=this.appInits[h]();if(Uu(m))l.push(m);else if(ky(m)){const v=new Promise((C,D)=>{m.subscribe({complete:C,error:D})});l.push(v)}}Promise.all(l).then(()=>{u()}).catch(h=>{this.reject(h)}),0===l.length&&u(),this.initialized=!0}}return s.\u0275fac=function(l){return new(l||s)(qn(fv,8))},s.\u0275prov=He({token:s,factory:s.\u0275fac,providedIn:"root"}),s})();const ya=new mn("AppId",{providedIn:"root",factory:function pv(){return`${xE()}${xE()}${xE()}`}});function xE(){return String.fromCharCode(97+Math.floor(25*Math.random()))}const gv=new mn("Platform Initializer"),vc=new mn("Platform ID",{providedIn:"platform",factory:()=>"unknown"}),Hm=new mn("appBootstrapListener"),mv=new mn("AnimationModuleType");let b1=(()=>{class s{log(l){console.log(l)}warn(l){console.warn(l)}}return s.\u0275fac=function(l){return new(l||s)},s.\u0275prov=He({token:s,factory:s.\u0275fac,providedIn:"platform"}),s})();const _v=new mn("LocaleId",{providedIn:"root",factory:()=>_t(_v,pt.Optional|pt.SkipSelf)||function w1(){return typeof $localize<"u"&&$localize.locale||fh}()}),E1=new mn("DefaultCurrencyCode",{providedIn:"root",factory:()=>"USD"});class RE{constructor(o,l){this.ngModuleFactory=o,this.componentFactories=l}}let yv=(()=>{class s{compileModuleSync(l){return new rE(l)}compileModuleAsync(l){return Promise.resolve(this.compileModuleSync(l))}compileModuleAndAllComponentsSync(l){const u=this.compileModuleSync(l),m=ol(Ut(l).declarations).reduce((v,C)=>{const D=ue(C);return D&&v.push(new Fu(D)),v},[]);return new RE(u,m)}compileModuleAndAllComponentsAsync(l){return Promise.resolve(this.compileModuleAndAllComponentsSync(l))}clearCache(){}clearCacheFor(l){}getModuleId(l){}}return s.\u0275fac=function(l){return new(l||s)},s.\u0275prov=He({token:s,factory:s.\u0275fac,providedIn:"root"}),s})();const PE=(()=>Promise.resolve(0))();function $m(s){typeof Zone>"u"?PE.then(()=>{s&&s.apply(null,null)}):Zone.current.scheduleMicroTask("scheduleMicrotask",s)}class co{constructor({enableLongStackTrace:o=!1,shouldCoalesceEventChangeDetection:l=!1,shouldCoalesceRunChangeDetection:u=!1}){if(this.hasPendingMacrotasks=!1,this.hasPendingMicrotasks=!1,this.isStable=!0,this.onUnstable=new _a(!1),this.onMicrotaskEmpty=new _a(!1),this.onStable=new _a(!1),this.onError=new _a(!1),typeof Zone>"u")throw new De(908,!1);Zone.assertZonePatched();const h=this;if(h._nesting=0,h._outer=h._inner=Zone.current,Zone.AsyncStackTaggingZoneSpec){const m=Zone.AsyncStackTaggingZoneSpec;h._inner=h._inner.fork(new m("Angular"))}Zone.TaskTrackingZoneSpec&&(h._inner=h._inner.fork(new Zone.TaskTrackingZoneSpec)),o&&Zone.longStackTraceZoneSpec&&(h._inner=h._inner.fork(Zone.longStackTraceZoneSpec)),h.shouldCoalesceEventChangeDetection=!u&&l,h.shouldCoalesceRunChangeDetection=u,h.lastRequestAnimationFrameId=-1,h.nativeRequestAnimationFrame=function fA(){let s=vn.requestAnimationFrame,o=vn.cancelAnimationFrame;if(typeof Zone<"u"&&s&&o){const l=s[Zone.__symbol__("OriginalDelegate")];l&&(s=l);const u=o[Zone.__symbol__("OriginalDelegate")];u&&(o=u)}return{nativeRequestAnimationFrame:s,nativeCancelAnimationFrame:o}}().nativeRequestAnimationFrame,function gA(s){const o=()=>{!function pA(s){s.isCheckStableRunning||-1!==s.lastRequestAnimationFrameId||(s.lastRequestAnimationFrameId=s.nativeRequestAnimationFrame.call(vn,()=>{s.fakeTopEventTask||(s.fakeTopEventTask=Zone.root.scheduleEventTask("fakeTopEventTask",()=>{s.lastRequestAnimationFrameId=-1,vv(s),s.isCheckStableRunning=!0,FE(s),s.isCheckStableRunning=!1},void 0,()=>{},()=>{})),s.fakeTopEventTask.invoke()}),vv(s))}(s)};s._inner=s._inner.fork({name:"angular",properties:{isAngularZone:!0},onInvokeTask:(l,u,h,m,v,C)=>{try{return bv(s),l.invokeTask(h,m,v,C)}finally{(s.shouldCoalesceEventChangeDetection&&"eventTask"===m.type||s.shouldCoalesceRunChangeDetection)&&o(),LE(s)}},onInvoke:(l,u,h,m,v,C,D)=>{try{return bv(s),l.invoke(h,m,v,C,D)}finally{s.shouldCoalesceRunChangeDetection&&o(),LE(s)}},onHasTask:(l,u,h,m)=>{l.hasTask(h,m),u===h&&("microTask"==m.change?(s._hasPendingMicrotasks=m.microTask,vv(s),FE(s)):"macroTask"==m.change&&(s.hasPendingMacrotasks=m.macroTask))},onHandleError:(l,u,h,m)=>(l.handleError(h,m),s.runOutsideAngular(()=>s.onError.emit(m)),!1)})}(h)}static isInAngularZone(){return typeof Zone<"u"&&!0===Zone.current.get("isAngularZone")}static assertInAngularZone(){if(!co.isInAngularZone())throw new De(909,!1)}static assertNotInAngularZone(){if(co.isInAngularZone())throw new De(909,!1)}run(o,l,u){return this._inner.run(o,l,u)}runTask(o,l,u,h){const m=this._inner,v=m.scheduleEventTask("NgZoneEvent: "+h,o,NE,hv,hv);try{return m.runTask(v,l,u)}finally{m.cancelTask(v)}}runGuarded(o,l,u){return this._inner.runGuarded(o,l,u)}runOutsideAngular(o){return this._outer.run(o)}}const NE={};function FE(s){if(0==s._nesting&&!s.hasPendingMicrotasks&&!s.isStable)try{s._nesting++,s.onMicrotaskEmpty.emit(null)}finally{if(s._nesting--,!s.hasPendingMicrotasks)try{s.runOutsideAngular(()=>s.onStable.emit(null))}finally{s.isStable=!0}}}function vv(s){s.hasPendingMicrotasks=!!(s._hasPendingMicrotasks||(s.shouldCoalesceEventChangeDetection||s.shouldCoalesceRunChangeDetection)&&-1!==s.lastRequestAnimationFrameId)}function bv(s){s._nesting++,s.isStable&&(s.isStable=!1,s.onUnstable.emit(null))}function LE(s){s._nesting--,FE(s)}class I1{constructor(){this.hasPendingMicrotasks=!1,this.hasPendingMacrotasks=!1,this.isStable=!0,this.onUnstable=new _a,this.onMicrotaskEmpty=new _a,this.onStable=new _a,this.onError=new _a}run(o,l,u){return o.apply(l,u)}runGuarded(o,l,u){return o.apply(l,u)}runOutsideAngular(o){return o()}runTask(o,l,u,h){return o.apply(l,u)}}const mA=new mn(""),_A=new mn("");let Up,D1=(()=>{class s{constructor(l,u,h){this._ngZone=l,this.registry=u,this._pendingCount=0,this._isZoneStable=!0,this._didWork=!1,this._callbacks=[],this.taskTrackingZone=null,Up||(function S1(s){Up=s}(h),h.addToWindow(u)),this._watchAngularEvents(),l.run(()=>{this.taskTrackingZone=typeof Zone>"u"?null:Zone.current.get("TaskTrackingZone")})}_watchAngularEvents(){this._ngZone.onUnstable.subscribe({next:()=>{this._didWork=!0,this._isZoneStable=!1}}),this._ngZone.runOutsideAngular(()=>{this._ngZone.onStable.subscribe({next:()=>{co.assertNotInAngularZone(),$m(()=>{this._isZoneStable=!0,this._runCallbacksIfReady()})}})})}increasePendingRequestCount(){return this._pendingCount+=1,this._didWork=!0,this._pendingCount}decreasePendingRequestCount(){if(this._pendingCount-=1,this._pendingCount<0)throw new Error("pending async requests below zero");return this._runCallbacksIfReady(),this._pendingCount}isStable(){return this._isZoneStable&&0===this._pendingCount&&!this._ngZone.hasPendingMacrotasks}_runCallbacksIfReady(){if(this.isStable())$m(()=>{for(;0!==this._callbacks.length;){let l=this._callbacks.pop();clearTimeout(l.timeoutId),l.doneCb(this._didWork)}this._didWork=!1});else{let l=this.getPendingTasks();this._callbacks=this._callbacks.filter(u=>!u.updateCb||!u.updateCb(l)||(clearTimeout(u.timeoutId),!1)),this._didWork=!0}}getPendingTasks(){return this.taskTrackingZone?this.taskTrackingZone.macroTasks.map(l=>({source:l.source,creationLocation:l.creationLocation,data:l.data})):[]}addCallback(l,u,h){let m=-1;u&&u>0&&(m=setTimeout(()=>{this._callbacks=this._callbacks.filter(v=>v.timeoutId!==m),l(this._didWork,this.getPendingTasks())},u)),this._callbacks.push({doneCb:l,timeoutId:m,updateCb:h})}whenStable(l,u,h){if(h&&!this.taskTrackingZone)throw new Error('Task tracking zone is required when passing an update callback to whenStable(). Is "zone.js/plugins/task-tracking" loaded?');this.addCallback(l,u,h),this._runCallbacksIfReady()}getPendingRequestCount(){return this._pendingCount}registerApplication(l){this.registry.registerApplication(l,this)}unregisterApplication(l){this.registry.unregisterApplication(l)}findProviders(l,u,h){return[]}}return s.\u0275fac=function(l){return new(l||s)(qn(co),qn(yA),qn(_A))},s.\u0275prov=He({token:s,factory:s.\u0275fac}),s})(),yA=(()=>{class s{constructor(){this._applications=new Map}registerApplication(l,u){this._applications.set(l,u)}unregisterApplication(l){this._applications.delete(l)}unregisterAllApplications(){this._applications.clear()}getTestability(l){return this._applications.get(l)||null}getAllTestabilities(){return Array.from(this._applications.values())}getAllRootElements(){return Array.from(this._applications.keys())}findTestabilityInTree(l,u=!0){return Up?.findTestabilityInTree(this,l,u)??null}}return s.\u0275fac=function(l){return new(l||s)},s.\u0275prov=He({token:s,factory:s.\u0275fac,providedIn:"platform"}),s})(),bc=null;const wv=new mn("AllowMultipleToken"),Ev=new mn("PlatformDestroyListeners");class wA{constructor(o,l){this.name=o,this.token=l}}function BE(s,o,l=[]){const u=`Platform: ${o}`,h=new mn(u);return(m=[])=>{let v=Cv();if(!v||v.injector.get(wv,!1)){const C=[...l,...m,{provide:h,useValue:!0}];s?s(C):function EA(s){if(bc&&!bc.get(wv,!1))throw new De(400,!1);bc=s;const o=s.get(HE);(function VE(s){const o=s.get(gv,null);o&&o.forEach(l=>l())})(s)}(function UE(s=[],o){return uc.create({name:o,providers:[{provide:Gf,useValue:"platform"},{provide:Ev,useValue:new Set([()=>bc=null])},...s]})}(C,u))}return function IA(s){const o=Cv();if(!o)throw new De(401,!1);return o}()}}function Cv(){return bc?.get(HE)??null}let HE=(()=>{class s{constructor(l){this._injector=l,this._modules=[],this._destroyListeners=[],this._destroyed=!1}bootstrapModuleFactory(l,u){const h=function $E(s,o){let l;return l="noop"===s?new I1:("zone.js"===s?void 0:s)||new co(o),l}(u?.ngZone,function jE(s){return{enableLongStackTrace:!1,shouldCoalesceEventChangeDetection:!(!s||!s.ngZoneEventCoalescing)||!1,shouldCoalesceRunChangeDetection:!(!s||!s.ngZoneRunCoalescing)||!1}}(u)),m=[{provide:co,useValue:h}];return h.run(()=>{const v=uc.create({providers:m,parent:this.injector,name:l.moduleType.name}),C=l.create(v),D=C.injector.get(Qf,null);if(!D)throw new De(402,!1);return h.runOutsideAngular(()=>{const M=h.onError.subscribe({next:O=>{D.handleError(O)}});C.onDestroy(()=>{Iv(this._modules,C),M.unsubscribe()})}),function zE(s,o,l){try{const u=l();return Uu(u)?u.catch(h=>{throw o.runOutsideAngular(()=>s.handleError(h)),h}):u}catch(u){throw o.runOutsideAngular(()=>s.handleError(u)),u}}(D,h,()=>{const M=C.injector.get(Um);return M.runInitializers(),M.donePromise.then(()=>(function Yw(s){Ve(s,"Expected localeId to be defined"),"string"==typeof s&&(Zw=s.toLowerCase().replace(/_/g,"-"))}(C.injector.get(_v,fh)||fh),this._moduleDoBootstrap(C),C))})})}bootstrapModule(l,u=[]){const h=DA({},u);return function vA(s,o,l){const u=new rE(l);return Promise.resolve(u)}(0,0,l).then(m=>this.bootstrapModuleFactory(m,h))}_moduleDoBootstrap(l){const u=l.injector.get(zm);if(l._bootstrapComponents.length>0)l._bootstrapComponents.forEach(h=>u.bootstrap(h));else{if(!l.instance.ngDoBootstrap)throw new De(403,!1);l.instance.ngDoBootstrap(u)}this._modules.push(l)}onDestroy(l){this._destroyListeners.push(l)}get injector(){return this._injector}destroy(){if(this._destroyed)throw new De(404,!1);this._modules.slice().forEach(u=>u.destroy()),this._destroyListeners.forEach(u=>u());const l=this._injector.get(Ev,null);l&&(l.forEach(u=>u()),l.clear()),this._destroyed=!0}get destroyed(){return this._destroyed}}return s.\u0275fac=function(l){return new(l||s)(qn(uc))},s.\u0275prov=He({token:s,factory:s.\u0275fac,providedIn:"platform"}),s})();function DA(s,o){return Array.isArray(o)?o.reduce(DA,s):{...s,...o}}let zm=(()=>{class s{constructor(l,u,h){this._zone=l,this._injector=u,this._exceptionHandler=h,this._bootstrapListeners=[],this._views=[],this._runningTick=!1,this._stable=!0,this._destroyed=!1,this._destroyListeners=[],this.componentTypes=[],this.components=[],this._onMicrotaskEmptySubscription=this._zone.onMicrotaskEmpty.subscribe({next:()=>{this._zone.run(()=>{this.tick()})}});const m=new P.y(C=>{this._stable=this._zone.isStable&&!this._zone.hasPendingMacrotasks&&!this._zone.hasPendingMicrotasks,this._zone.runOutsideAngular(()=>{C.next(this._stable),C.complete()})}),v=new P.y(C=>{let D;this._zone.runOutsideAngular(()=>{D=this._zone.onStable.subscribe(()=>{co.assertNotInAngularZone(),$m(()=>{!this._stable&&!this._zone.hasPendingMacrotasks&&!this._zone.hasPendingMicrotasks&&(this._stable=!0,C.next(!0))})})});const M=this._zone.onUnstable.subscribe(()=>{co.assertInAngularZone(),this._stable&&(this._stable=!1,this._zone.runOutsideAngular(()=>{C.next(!1)}))});return()=>{D.unsubscribe(),M.unsubscribe()}});this.isStable=(0,ce.T)(m,v.pipe((0,le.B)()))}get destroyed(){return this._destroyed}get injector(){return this._injector}bootstrap(l,u){const h=l instanceof u0;if(!this._injector.get(Um).done)throw!h&&xt(l),new De(405,false);let v;v=h?l:this._injector.get(Zf).resolveComponentFactory(l),this.componentTypes.push(v.componentType);const C=function bA(s){return s.isBoundToModule}(v)?void 0:this._injector.get(Pp),M=v.create(uc.NULL,[],u||v.selector,C),O=M.location.nativeElement,V=M.injector.get(mA,null);return V?.registerApplication(O),M.onDestroy(()=>{this.detachView(M.hostView),Iv(this.components,M),V?.unregisterApplication(O)}),this._loadComponent(M),M}tick(){if(this._runningTick)throw new De(101,!1);try{this._runningTick=!0;for(let l of this._views)l.detectChanges()}catch(l){this._zone.runOutsideAngular(()=>this._exceptionHandler.handleError(l))}finally{this._runningTick=!1}}attachView(l){const u=l;this._views.push(u),u.attachToAppRef(this)}detachView(l){const u=l;Iv(this._views,u),u.detachFromAppRef()}_loadComponent(l){this.attachView(l.hostView),this.tick(),this.components.push(l),this._injector.get(Hm,[]).concat(this._bootstrapListeners).forEach(h=>h(l))}ngOnDestroy(){if(!this._destroyed)try{this._destroyListeners.forEach(l=>l()),this._views.slice().forEach(l=>l.destroy()),this._onMicrotaskEmptySubscription.unsubscribe()}finally{this._destroyed=!0,this._views=[],this._bootstrapListeners=[],this._destroyListeners=[]}}onDestroy(l){return this._destroyListeners.push(l),()=>Iv(this._destroyListeners,l)}destroy(){if(this._destroyed)throw new De(406,!1);const l=this._injector;l.destroy&&!l.destroyed&&l.destroy()}get viewCount(){return this._views.length}warnIfDestroyed(){}}return s.\u0275fac=function(l){return new(l||s)(qn(co),qn(Su),qn(Qf))},s.\u0275prov=He({token:s,factory:s.\u0275fac,providedIn:"root"}),s})();function Iv(s,o){const l=s.indexOf(o);l>-1&&s.splice(l,1)}let SA=!0,TA=!1;function x1(){return TA=!0,SA}function R1(){if(TA)throw new Error("Cannot enable prod mode after platform setup.");SA=!1}let AA=(()=>{class s{}return s.__NG_ELEMENT_ID__=MA,s})();function MA(s){return function O1(s,o,l){if(jo(s)&&!l){const u=Gn(s.index,o);return new Nu(u,u)}return 47&s.type?new Nu(o[16],o):null}(Bn(),Te(),16==(16&s))}class JE{constructor(){}supports(o){return oh(o)}create(o){return new eC(o)}}const PA=(s,o)=>o;class eC{constructor(o){this.length=0,this._linkedRecords=null,this._unlinkedRecords=null,this._previousItHead=null,this._itHead=null,this._itTail=null,this._additionsHead=null,this._additionsTail=null,this._movesHead=null,this._movesTail=null,this._removalsHead=null,this._removalsTail=null,this._identityChangesHead=null,this._identityChangesTail=null,this._trackByFn=o||PA}forEachItem(o){let l;for(l=this._itHead;null!==l;l=l._next)o(l)}forEachOperation(o){let l=this._itHead,u=this._removalsHead,h=0,m=null;for(;l||u;){const v=!u||l&&l.currentIndex<nC(u,h,m)?l:u,C=nC(v,h,m),D=v.currentIndex;if(v===u)h--,u=u._nextRemoved;else if(l=l._next,null==v.previousIndex)h++;else{m||(m=[]);const M=C-h,O=D-h;if(M!=O){for(let q=0;q<M;q++){const te=q<m.length?m[q]:m[q]=0,Ie=te+q;O<=Ie&&Ie<M&&(m[q]=te+1)}m[v.previousIndex]=O-M}}C!==D&&o(v,C,D)}}forEachPreviousItem(o){let l;for(l=this._previousItHead;null!==l;l=l._nextPrevious)o(l)}forEachAddedItem(o){let l;for(l=this._additionsHead;null!==l;l=l._nextAdded)o(l)}forEachMovedItem(o){let l;for(l=this._movesHead;null!==l;l=l._nextMoved)o(l)}forEachRemovedItem(o){let l;for(l=this._removalsHead;null!==l;l=l._nextRemoved)o(l)}forEachIdentityChange(o){let l;for(l=this._identityChangesHead;null!==l;l=l._nextIdentityChange)o(l)}diff(o){if(null==o&&(o=[]),!oh(o))throw new De(900,!1);return this.check(o)?this:null}onDestroy(){}check(o){this._reset();let h,m,v,l=this._itHead,u=!1;if(Array.isArray(o)){this.length=o.length;for(let C=0;C<this.length;C++)m=o[C],v=this._trackByFn(C,m),null!==l&&Object.is(l.trackById,v)?(u&&(l=this._verifyReinsertion(l,m,v,C)),Object.is(l.item,m)||this._addIdentityChange(l,m)):(l=this._mismatch(l,m,v,C),u=!0),l=l._next}else h=0,function mw(s,o){if(Array.isArray(s))for(let l=0;l<s.length;l++)o(s[l]);else{const l=s[$s()]();let u;for(;!(u=l.next()).done;)o(u.value)}}(o,C=>{v=this._trackByFn(h,C),null!==l&&Object.is(l.trackById,v)?(u&&(l=this._verifyReinsertion(l,C,v,h)),Object.is(l.item,C)||this._addIdentityChange(l,C)):(l=this._mismatch(l,C,v,h),u=!0),l=l._next,h++}),this.length=h;return this._truncate(l),this.collection=o,this.isDirty}get isDirty(){return null!==this._additionsHead||null!==this._movesHead||null!==this._removalsHead||null!==this._identityChangesHead}_reset(){if(this.isDirty){let o;for(o=this._previousItHead=this._itHead;null!==o;o=o._next)o._nextPrevious=o._next;for(o=this._additionsHead;null!==o;o=o._nextAdded)o.previousIndex=o.currentIndex;for(this._additionsHead=this._additionsTail=null,o=this._movesHead;null!==o;o=o._nextMoved)o.previousIndex=o.currentIndex;this._movesHead=this._movesTail=null,this._removalsHead=this._removalsTail=null,this._identityChangesHead=this._identityChangesTail=null}}_mismatch(o,l,u,h){let m;return null===o?m=this._itTail:(m=o._prev,this._remove(o)),null!==(o=null===this._unlinkedRecords?null:this._unlinkedRecords.get(u,null))?(Object.is(o.item,l)||this._addIdentityChange(o,l),this._reinsertAfter(o,m,h)):null!==(o=null===this._linkedRecords?null:this._linkedRecords.get(u,h))?(Object.is(o.item,l)||this._addIdentityChange(o,l),this._moveAfter(o,m,h)):o=this._addAfter(new NA(l,u),m,h),o}_verifyReinsertion(o,l,u,h){let m=null===this._unlinkedRecords?null:this._unlinkedRecords.get(u,null);return null!==m?o=this._reinsertAfter(m,o._prev,h):o.currentIndex!=h&&(o.currentIndex=h,this._addToMoves(o,h)),o}_truncate(o){for(;null!==o;){const l=o._next;this._addToRemovals(this._unlink(o)),o=l}null!==this._unlinkedRecords&&this._unlinkedRecords.clear(),null!==this._additionsTail&&(this._additionsTail._nextAdded=null),null!==this._movesTail&&(this._movesTail._nextMoved=null),null!==this._itTail&&(this._itTail._next=null),null!==this._removalsTail&&(this._removalsTail._nextRemoved=null),null!==this._identityChangesTail&&(this._identityChangesTail._nextIdentityChange=null)}_reinsertAfter(o,l,u){null!==this._unlinkedRecords&&this._unlinkedRecords.remove(o);const h=o._prevRemoved,m=o._nextRemoved;return null===h?this._removalsHead=m:h._nextRemoved=m,null===m?this._removalsTail=h:m._prevRemoved=h,this._insertAfter(o,l,u),this._addToMoves(o,u),o}_moveAfter(o,l,u){return this._unlink(o),this._insertAfter(o,l,u),this._addToMoves(o,u),o}_addAfter(o,l,u){return this._insertAfter(o,l,u),this._additionsTail=null===this._additionsTail?this._additionsHead=o:this._additionsTail._nextAdded=o,o}_insertAfter(o,l,u){const h=null===l?this._itHead:l._next;return o._next=h,o._prev=l,null===h?this._itTail=o:h._prev=o,null===l?this._itHead=o:l._next=o,null===this._linkedRecords&&(this._linkedRecords=new tC),this._linkedRecords.put(o),o.currentIndex=u,o}_remove(o){return this._addToRemovals(this._unlink(o))}_unlink(o){null!==this._linkedRecords&&this._linkedRecords.remove(o);const l=o._prev,u=o._next;return null===l?this._itHead=u:l._next=u,null===u?this._itTail=l:u._prev=l,o}_addToMoves(o,l){return o.previousIndex===l||(this._movesTail=null===this._movesTail?this._movesHead=o:this._movesTail._nextMoved=o),o}_addToRemovals(o){return null===this._unlinkedRecords&&(this._unlinkedRecords=new tC),this._unlinkedRecords.put(o),o.currentIndex=null,o._nextRemoved=null,null===this._removalsTail?(this._removalsTail=this._removalsHead=o,o._prevRemoved=null):(o._prevRemoved=this._removalsTail,this._removalsTail=this._removalsTail._nextRemoved=o),o}_addIdentityChange(o,l){return o.item=l,this._identityChangesTail=null===this._identityChangesTail?this._identityChangesHead=o:this._identityChangesTail._nextIdentityChange=o,o}}class NA{constructor(o,l){this.item=o,this.trackById=l,this.currentIndex=null,this.previousIndex=null,this._nextPrevious=null,this._prev=null,this._next=null,this._prevDup=null,this._nextDup=null,this._prevRemoved=null,this._nextRemoved=null,this._nextAdded=null,this._nextMoved=null,this._nextIdentityChange=null}}class FA{constructor(){this._head=null,this._tail=null}add(o){null===this._head?(this._head=this._tail=o,o._nextDup=null,o._prevDup=null):(this._tail._nextDup=o,o._prevDup=this._tail,o._nextDup=null,this._tail=o)}get(o,l){let u;for(u=this._head;null!==u;u=u._nextDup)if((null===l||l<=u.currentIndex)&&Object.is(u.trackById,o))return u;return null}remove(o){const l=o._prevDup,u=o._nextDup;return null===l?this._head=u:l._nextDup=u,null===u?this._tail=l:u._prevDup=l,null===this._head}}class tC{constructor(){this.map=new Map}put(o){const l=o.trackById;let u=this.map.get(l);u||(u=new FA,this.map.set(l,u)),u.add(o)}get(o,l){const h=this.map.get(o);return h?h.get(o,l):null}remove(o){const l=o.trackById;return this.map.get(l).remove(o)&&this.map.delete(l),o}get isEmpty(){return 0===this.map.size}clear(){this.map.clear()}}function nC(s,o,l){const u=s.previousIndex;if(null===u)return u;let h=0;return l&&u<l.length&&(h=l[u]),u+o+h}class rC{constructor(){}supports(o){return o instanceof Map||Dy(o)}create(){return new LA}}class LA{constructor(){this._records=new Map,this._mapHead=null,this._appendAfter=null,this._previousMapHead=null,this._changesHead=null,this._changesTail=null,this._additionsHead=null,this._additionsTail=null,this._removalsHead=null,this._removalsTail=null}get isDirty(){return null!==this._additionsHead||null!==this._changesHead||null!==this._removalsHead}forEachItem(o){let l;for(l=this._mapHead;null!==l;l=l._next)o(l)}forEachPreviousItem(o){let l;for(l=this._previousMapHead;null!==l;l=l._nextPrevious)o(l)}forEachChangedItem(o){let l;for(l=this._changesHead;null!==l;l=l._nextChanged)o(l)}forEachAddedItem(o){let l;for(l=this._additionsHead;null!==l;l=l._nextAdded)o(l)}forEachRemovedItem(o){let l;for(l=this._removalsHead;null!==l;l=l._nextRemoved)o(l)}diff(o){if(o){if(!(o instanceof Map||Dy(o)))throw new De(900,!1)}else o=new Map;return this.check(o)?this:null}onDestroy(){}check(o){this._reset();let l=this._mapHead;if(this._appendAfter=null,this._forEach(o,(u,h)=>{if(l&&l.key===h)this._maybeAddToChanges(l,u),this._appendAfter=l,l=l._next;else{const m=this._getOrCreateRecordForKey(h,u);l=this._insertBeforeOrAppend(l,m)}}),l){l._prev&&(l._prev._next=null),this._removalsHead=l;for(let u=l;null!==u;u=u._nextRemoved)u===this._mapHead&&(this._mapHead=null),this._records.delete(u.key),u._nextRemoved=u._next,u.previousValue=u.currentValue,u.currentValue=null,u._prev=null,u._next=null}return this._changesTail&&(this._changesTail._nextChanged=null),this._additionsTail&&(this._additionsTail._nextAdded=null),this.isDirty}_insertBeforeOrAppend(o,l){if(o){const u=o._prev;return l._next=o,l._prev=u,o._prev=l,u&&(u._next=l),o===this._mapHead&&(this._mapHead=l),this._appendAfter=o,o}return this._appendAfter?(this._appendAfter._next=l,l._prev=this._appendAfter):this._mapHead=l,this._appendAfter=l,null}_getOrCreateRecordForKey(o,l){if(this._records.has(o)){const h=this._records.get(o);this._maybeAddToChanges(h,l);const m=h._prev,v=h._next;return m&&(m._next=v),v&&(v._prev=m),h._next=null,h._prev=null,h}const u=new B1(o);return this._records.set(o,u),u.currentValue=l,this._addToAdditions(u),u}_reset(){if(this.isDirty){let o;for(this._previousMapHead=this._mapHead,o=this._previousMapHead;null!==o;o=o._next)o._nextPrevious=o._next;for(o=this._changesHead;null!==o;o=o._nextChanged)o.previousValue=o.currentValue;for(o=this._additionsHead;null!=o;o=o._nextAdded)o.previousValue=o.currentValue;this._changesHead=this._changesTail=null,this._additionsHead=this._additionsTail=null,this._removalsHead=null}}_maybeAddToChanges(o,l){Object.is(l,o.currentValue)||(o.previousValue=o.currentValue,o.currentValue=l,this._addToChanges(o))}_addToAdditions(o){null===this._additionsHead?this._additionsHead=this._additionsTail=o:(this._additionsTail._nextAdded=o,this._additionsTail=o)}_addToChanges(o){null===this._changesHead?this._changesHead=this._changesTail=o:(this._changesTail._nextChanged=o,this._changesTail=o)}_forEach(o,l){o instanceof Map?o.forEach(l):Object.keys(o).forEach(u=>l(o[u],u))}}class B1{constructor(o){this.key=o,this.previousValue=null,this.currentValue=null,this._nextPrevious=null,this._next=null,this._prev=null,this._nextAdded=null,this._nextRemoved=null,this._nextChanged=null}}function VA(){return new iC([new JE])}let iC=(()=>{class s{constructor(l){this.factories=l}static create(l,u){if(null!=u){const h=u.factories.slice();l=l.concat(h)}return new s(l)}static extend(l){return{provide:s,useFactory:u=>s.create(l,u||VA()),deps:[[s,new Ao,new eo]]}}find(l){const u=this.factories.find(h=>h.supports(l));if(null!=u)return u;throw new De(901,!1)}}return s.\u0275prov=He({token:s,providedIn:"root",factory:VA}),s})();function oC(){return new Av([new rC])}let Av=(()=>{class s{constructor(l){this.factories=l}static create(l,u){if(u){const h=u.factories.slice();l=l.concat(h)}return new s(l)}static extend(l){return{provide:s,useFactory:u=>s.create(l,u||oC()),deps:[[s,new Ao,new eo]]}}find(l){const u=this.factories.find(h=>h.supports(l));if(u)return u;throw new De(901,!1)}}return s.\u0275prov=He({token:s,providedIn:"root",factory:oC}),s})();const H1=BE(null,"core",[]);let aC=(()=>{class s{constructor(l){}}return s.\u0275fac=function(l){return new(l||s)(qn(zm))},s.\u0275mod=ni({type:s}),s.\u0275inj=Xt({}),s})();function HA(s){return"boolean"==typeof s?s:null!=s&&"false"!==s}},3942:(vt,Ae,F)=>{F.d(Ae,{Z:()=>De});var d=F(2090),ee=F(4859),P=F(6881),ce=F(1877);class le{constructor(be,ve){this._delegate=be,this.firebase=ve,(0,P._addComponent)(be,new ee.wA("app-compat",()=>this,"PUBLIC")),this.container=be.container}get automaticDataCollectionEnabled(){return this._delegate.automaticDataCollectionEnabled}set automaticDataCollectionEnabled(be){this._delegate.automaticDataCollectionEnabled=be}get name(){return this._delegate.name}get options(){return this._delegate.options}delete(){return new Promise(be=>{this._delegate.checkDestroyed(),be()}).then(()=>(this.firebase.INTERNAL.removeApp(this.name),(0,P.deleteApp)(this._delegate)))}_getService(be,ve=P._DEFAULT_ENTRY_NAME){var bt;this._delegate.checkDestroyed();const St=this._delegate.container.getProvider(be);return!St.isInitialized()&&"EXPLICIT"===(null===(bt=St.getComponent())||void 0===bt?void 0:bt.instantiationMode)&&St.initialize(),St.getImmediate({identifier:ve})}_removeServiceInstance(be,ve=P._DEFAULT_ENTRY_NAME){this._delegate.container.getProvider(be).clearInstance(ve)}_addComponent(be){(0,P._addComponent)(this._delegate,be)}_addOrOverwriteComponent(be){(0,P._addOrOverwriteComponent)(this._delegate,be)}toJSON(){return{name:this.name,automaticDataCollectionEnabled:this.automaticDataCollectionEnabled,options:this.options}}}const se=new d.LL("app-compat","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance."}),z=function ge(){const at=function Ee(at){const be={},ve={__esModule:!0,initializeApp:function Ne($e,rt={}){const re=P.initializeApp($e,rt);if((0,d.r3)(be,re.name))return be[re.name];const kt=new at(re,ve);return be[re.name]=kt,kt},app:St,registerVersion:P.registerVersion,setLogLevel:P.setLogLevel,onLog:P.onLog,apps:null,SDK_VERSION:P.SDK_VERSION,INTERNAL:{registerComponent:function me($e){const rt=$e.name,re=rt.replace("-compat","");if(P._registerComponent($e)&&"PUBLIC"===$e.type){const kt=(ft=St())=>{if("function"!=typeof ft[re])throw se.create("invalid-app-argument",{appName:rt});return ft[re]()};void 0!==$e.serviceProps&&(0,d.ZB)(kt,$e.serviceProps),ve[re]=kt,at.prototype[re]=function(...ft){return this._getService.bind(this,rt).apply(this,$e.multipleInstances?ft:[])}}return"PUBLIC"===$e.type?ve[re]:null},removeApp:function bt($e){delete be[$e]},useAsService:function Ke($e,rt){return"serverAuth"===rt?null:rt},modularAPIs:P}};function St($e){if(!(0,d.r3)(be,$e=$e||P._DEFAULT_ENTRY_NAME))throw se.create("no-app",{appName:$e});return be[$e]}return ve.default=ve,Object.defineProperty(ve,"apps",{get:function Ce(){return Object.keys(be).map($e=>be[$e])}}),St.App=at,ve}(le);return at.INTERNAL=Object.assign(Object.assign({},at.INTERNAL),{createFirebaseNamespace:ge,extendNamespace:function be(ve){(0,d.ZB)(at,ve)},createSubscribe:d.ne,ErrorFactory:d.LL,deepExtend:d.ZB}),at}(),$=new ce.Yd("@firebase/app-compat");if((0,d.jU)()&&void 0!==self.firebase){$.warn("\n    Warning: Firebase is already defined in the global scope. Please make sure\n    Firebase library is only loaded once.\n  ");const at=self.firebase.SDK_VERSION;at&&at.indexOf("LITE")>=0&&$.warn("\n    Warning: You are trying to load Firebase while using Firebase Performance standalone script.\n    You should load Firebase Performance with this instance of Firebase to avoid loading duplicate code.\n    ")}const De=z;!function xe(at){(0,P.registerVersion)("@firebase/app-compat","0.2.9",at)}()},6881:(vt,Ae,F)=>{F.r(Ae),F.d(Ae,{FirebaseError:()=>ce.ZR,SDK_VERSION:()=>Uo,_DEFAULT_ENTRY_NAME:()=>fi,_addComponent:()=>it,_addOrOverwriteComponent:()=>Ct,_apps:()=>An,_clearComponents:()=>tr,_components:()=>sn,_getProvider:()=>ss,_registerComponent:()=>vn,_removeServiceInstance:()=>ti,deleteApp:()=>Ni,getApp:()=>pr,getApps:()=>Sr,initializeApp:()=>on,onLog:()=>os,registerVersion:()=>Tr,setLogLevel:()=>$n});var d=F(5861),ee=F(4859),P=F(1877),ce=F(2090);let fe,se;const z=new WeakMap,$=new WeakMap,Y=new WeakMap,We=new WeakMap,xe=new WeakMap;let be={get(oe,ne,Fe){if(oe instanceof IDBTransaction){if("done"===ne)return $.get(oe);if("objectStoreNames"===ne)return oe.objectStoreNames||Y.get(oe);if("store"===ne)return Fe.objectStoreNames[1]?void 0:Fe.objectStore(Fe.objectStoreNames[0])}return Ne(oe[ne])},set:(oe,ne,Fe)=>(oe[ne]=Fe,!0),has:(oe,ne)=>oe instanceof IDBTransaction&&("done"===ne||"store"===ne)||ne in oe};function St(oe){return"function"==typeof oe?function bt(oe){return oe!==IDBDatabase.prototype.transaction||"objectStoreNames"in IDBTransaction.prototype?function ge(){return se||(se=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}().includes(oe)?function(...ne){return oe.apply(Ce(this),ne),Ne(z.get(this))}:function(...ne){return Ne(oe.apply(Ce(this),ne))}:function(ne,...Fe){const Le=oe.call(Ce(this),ne,...Fe);return Y.set(Le,ne.sort?ne.sort():[ne]),Ne(Le)}}(oe):(oe instanceof IDBTransaction&&function at(oe){if($.has(oe))return;const ne=new Promise((Fe,Le)=>{const Tt=()=>{oe.removeEventListener("complete",Ht),oe.removeEventListener("error",an),oe.removeEventListener("abort",an)},Ht=()=>{Fe(),Tt()},an=()=>{Le(oe.error||new DOMException("AbortError","AbortError")),Tt()};oe.addEventListener("complete",Ht),oe.addEventListener("error",an),oe.addEventListener("abort",an)});$.set(oe,ne)}(oe),((oe,ne)=>ne.some(Fe=>oe instanceof Fe))(oe,function Ee(){return fe||(fe=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}())?new Proxy(oe,be):oe)}function Ne(oe){if(oe instanceof IDBRequest)return function De(oe){const ne=new Promise((Fe,Le)=>{const Tt=()=>{oe.removeEventListener("success",Ht),oe.removeEventListener("error",an)},Ht=()=>{Fe(Ne(oe.result)),Tt()},an=()=>{Le(oe.error),Tt()};oe.addEventListener("success",Ht),oe.addEventListener("error",an)});return ne.then(Fe=>{Fe instanceof IDBCursor&&z.set(Fe,oe)}).catch(()=>{}),xe.set(ne,oe),ne}(oe);if(We.has(oe))return We.get(oe);const ne=St(oe);return ne!==oe&&(We.set(oe,ne),xe.set(ne,oe)),ne}const Ce=oe=>xe.get(oe),$e=["get","getKey","getAll","getAllKeys","count"],rt=["put","add","delete","clear"],re=new Map;function kt(oe,ne){if(!(oe instanceof IDBDatabase)||ne in oe||"string"!=typeof ne)return;if(re.get(ne))return re.get(ne);const Fe=ne.replace(/FromIndex$/,""),Le=ne!==Fe,Tt=rt.includes(Fe);if(!(Fe in(Le?IDBIndex:IDBObjectStore).prototype)||!Tt&&!$e.includes(Fe))return;const Ht=function(){var an=(0,d.Z)(function*(On,...en){const Mr=this.transaction(On,Tt?"readwrite":"readonly");let pi=Mr.store;return Le&&(pi=pi.index(en.shift())),(yield Promise.all([pi[Fe](...en),Tt&&Mr.done]))[0]});return function(en){return an.apply(this,arguments)}}();return re.set(ne,Ht),Ht}!function ve(oe){be=oe(be)}(oe=>({...oe,get:(ne,Fe,Le)=>kt(ne,Fe)||oe.get(ne,Fe,Le),has:(ne,Fe)=>!!kt(ne,Fe)||oe.has(ne,Fe)}));class ft{constructor(ne){this.container=ne}getPlatformInfoString(){return this.container.getProviders().map(Fe=>{if(function Qt(oe){return"VERSION"===oe.getComponent()?.type}(Fe)){const Le=Fe.getImmediate();return`${Le.library}/${Le.version}`}return null}).filter(Fe=>Fe).join(" ")}}const ut="@firebase/app",_e=new P.Yd("@firebase/app"),fi="[DEFAULT]",fr={[ut]:"fire-core","@firebase/app-compat":"fire-core-compat","@firebase/analytics":"fire-analytics","@firebase/analytics-compat":"fire-analytics-compat","@firebase/app-check":"fire-app-check","@firebase/app-check-compat":"fire-app-check-compat","@firebase/auth":"fire-auth","@firebase/auth-compat":"fire-auth-compat","@firebase/database":"fire-rtdb","@firebase/database-compat":"fire-rtdb-compat","@firebase/functions":"fire-fn","@firebase/functions-compat":"fire-fn-compat","@firebase/installations":"fire-iid","@firebase/installations-compat":"fire-iid-compat","@firebase/messaging":"fire-fcm","@firebase/messaging-compat":"fire-fcm-compat","@firebase/performance":"fire-perf","@firebase/performance-compat":"fire-perf-compat","@firebase/remote-config":"fire-rc","@firebase/remote-config-compat":"fire-rc-compat","@firebase/storage":"fire-gcs","@firebase/storage-compat":"fire-gcs-compat","@firebase/firestore":"fire-fst","@firebase/firestore-compat":"fire-fst-compat","fire-js":"fire-js",firebase:"fire-js-all"},An=new Map,sn=new Map;function it(oe,ne){try{oe.container.addComponent(ne)}catch(Fe){_e.debug(`Component ${ne.name} failed to register with FirebaseApp ${oe.name}`,Fe)}}function Ct(oe,ne){oe.container.addOrOverwriteComponent(ne)}function vn(oe){const ne=oe.name;if(sn.has(ne))return _e.debug(`There were multiple attempts to register component ${ne}.`),!1;sn.set(ne,oe);for(const Fe of An.values())it(Fe,oe);return!0}function ss(oe,ne){const Fe=oe.container.getProvider("heartbeat").getImmediate({optional:!0});return Fe&&Fe.triggerHeartbeat(),oe.container.getProvider(ne)}function ti(oe,ne,Fe=fi){ss(oe,ne).clearInstance(Fe)}function tr(){sn.clear()}const Dr=new ce.LL("app","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()","bad-app-name":"Illegal App name: '{$appName}","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}."});class pn{constructor(ne,Fe,Le){this._isDeleted=!1,this._options=Object.assign({},ne),this._config=Object.assign({},Fe),this._name=Fe.name,this._automaticDataCollectionEnabled=Fe.automaticDataCollectionEnabled,this._container=Le,this.container.addComponent(new ee.wA("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(ne){this.checkDestroyed(),this._automaticDataCollectionEnabled=ne}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(ne){this._isDeleted=ne}checkDestroyed(){if(this.isDeleted)throw Dr.create("app-deleted",{appName:this._name})}}const Uo="9.21.0";function on(oe,ne={}){let Fe=oe;"object"!=typeof ne&&(ne={name:ne});const Le=Object.assign({name:fi,automaticDataCollectionEnabled:!1},ne),Tt=Le.name;if("string"!=typeof Tt||!Tt)throw Dr.create("bad-app-name",{appName:String(Tt)});if(Fe||(Fe=(0,ce.aH)()),!Fe)throw Dr.create("no-options");const Ht=An.get(Tt);if(Ht){if((0,ce.vZ)(Fe,Ht.options)&&(0,ce.vZ)(Le,Ht.config))return Ht;throw Dr.create("duplicate-app",{appName:Tt})}const an=new ee.H0(Tt);for(const en of sn.values())an.addComponent(en);const On=new pn(Fe,Le,an);return An.set(Tt,On),On}function pr(oe=fi){const ne=An.get(oe);if(!ne&&oe===fi)return on();if(!ne)throw Dr.create("no-app",{appName:oe});return ne}function Sr(){return Array.from(An.values())}function Ni(oe){return Vn.apply(this,arguments)}function Vn(){return(Vn=(0,d.Z)(function*(oe){const ne=oe.name;An.has(ne)&&(An.delete(ne),yield Promise.all(oe.container.getProviders().map(Fe=>Fe.delete())),oe.isDeleted=!0)})).apply(this,arguments)}function Tr(oe,ne,Fe){var Le;let Tt=null!==(Le=fr[oe])&&void 0!==Le?Le:oe;Fe&&(Tt+=`-${Fe}`);const Ht=Tt.match(/\s|\//),an=ne.match(/\s|\//);if(Ht||an){const On=[`Unable to register library "${Tt}" with version "${ne}":`];return Ht&&On.push(`library name "${Tt}" contains illegal characters (whitespace or "/")`),Ht&&an&&On.push("and"),an&&On.push(`version name "${ne}" contains illegal characters (whitespace or "/")`),void _e.warn(On.join(" "))}vn(new ee.wA(`${Tt}-version`,()=>({library:Tt,version:ne}),"VERSION"))}function os(oe,ne){if(null!==oe&&"function"!=typeof oe)throw Dr.create("invalid-log-argument");(0,P.Am)(oe,ne)}function $n(oe){(0,P.Ub)(oe)}const H="firebase-heartbeat-store";let B=null;function K(){return B||(B=function me(oe,ne,{blocked:Fe,upgrade:Le,blocking:Tt,terminated:Ht}={}){const an=indexedDB.open(oe,ne),On=Ne(an);return Le&&an.addEventListener("upgradeneeded",en=>{Le(Ne(an.result),en.oldVersion,en.newVersion,Ne(an.transaction),en)}),Fe&&an.addEventListener("blocked",en=>Fe(en.oldVersion,en.newVersion,en)),On.then(en=>{Ht&&en.addEventListener("close",()=>Ht()),Tt&&en.addEventListener("versionchange",Mr=>Tt(Mr.oldVersion,Mr.newVersion,Mr))}).catch(()=>{}),On}("firebase-heartbeat-database",1,{upgrade:(oe,ne)=>{0===ne&&oe.createObjectStore(H)}}).catch(oe=>{throw Dr.create("idb-open",{originalErrorMessage:oe.message})})),B}function J(){return(J=(0,d.Z)(function*(oe){try{return(yield K()).transaction(H).objectStore(H).get(Ut(oe))}catch(ne){if(ne instanceof ce.ZR)_e.warn(ne.message);else{const Fe=Dr.create("idb-get",{originalErrorMessage:ne?.message});_e.warn(Fe.message)}}})).apply(this,arguments)}function Ze(oe,ne){return xt.apply(this,arguments)}function xt(){return(xt=(0,d.Z)(function*(oe,ne){try{const Le=(yield K()).transaction(H,"readwrite");return yield Le.objectStore(H).put(ne,Ut(oe)),Le.done}catch(Fe){if(Fe instanceof ce.ZR)_e.warn(Fe.message);else{const Le=Dr.create("idb-set",{originalErrorMessage:Fe?.message});_e.warn(Le.message)}}})).apply(this,arguments)}function Ut(oe){return`${oe.name}!${oe.options.appId}`}class dt{constructor(ne){this.container=ne,this._heartbeatsCache=null;const Fe=this.container.getProvider("app").getImmediate();this._storage=new Ar(Fe),this._heartbeatsCachePromise=this._storage.read().then(Le=>(this._heartbeatsCache=Le,Le))}triggerHeartbeat(){var ne=this;return(0,d.Z)(function*(){const Le=ne.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),Tt=wt();if(null===ne._heartbeatsCache&&(ne._heartbeatsCache=yield ne._heartbeatsCachePromise),ne._heartbeatsCache.lastSentHeartbeatDate!==Tt&&!ne._heartbeatsCache.heartbeats.some(Ht=>Ht.date===Tt))return ne._heartbeatsCache.heartbeats.push({date:Tt,agent:Le}),ne._heartbeatsCache.heartbeats=ne._heartbeatsCache.heartbeats.filter(Ht=>{const an=new Date(Ht.date).valueOf();return Date.now()-an<=2592e6}),ne._storage.overwrite(ne._heartbeatsCache)})()}getHeartbeatsHeader(){var ne=this;return(0,d.Z)(function*(){if(null===ne._heartbeatsCache&&(yield ne._heartbeatsCachePromise),null===ne._heartbeatsCache||0===ne._heartbeatsCache.heartbeats.length)return"";const Fe=wt(),{heartbeatsToSend:Le,unsentEntries:Tt}=function bn(oe,ne=1024){const Fe=[];let Le=oe.slice();for(const Tt of oe){const Ht=Fe.find(an=>an.agent===Tt.agent);if(Ht){if(Ht.dates.push(Tt.date),wn(Fe)>ne){Ht.dates.pop();break}}else if(Fe.push({agent:Tt.agent,dates:[Tt.date]}),wn(Fe)>ne){Fe.pop();break}Le=Le.slice(1)}return{heartbeatsToSend:Fe,unsentEntries:Le}}(ne._heartbeatsCache.heartbeats),Ht=(0,ce.L)(JSON.stringify({version:2,heartbeats:Le}));return ne._heartbeatsCache.lastSentHeartbeatDate=Fe,Tt.length>0?(ne._heartbeatsCache.heartbeats=Tt,yield ne._storage.overwrite(ne._heartbeatsCache)):(ne._heartbeatsCache.heartbeats=[],ne._storage.overwrite(ne._heartbeatsCache)),Ht})()}}function wt(){return(new Date).toISOString().substring(0,10)}class Ar{constructor(ne){this.app=ne,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}runIndexedDBEnvironmentCheck(){return(0,d.Z)(function*(){return!!(0,ce.hl)()&&(0,ce.eu)().then(()=>!0).catch(()=>!1)})()}read(){var ne=this;return(0,d.Z)(function*(){return(yield ne._canUseIndexedDBPromise)&&(yield function ue(oe){return J.apply(this,arguments)}(ne.app))||{heartbeats:[]}})()}overwrite(ne){var Fe=this;return(0,d.Z)(function*(){var Le;if(yield Fe._canUseIndexedDBPromise){const Ht=yield Fe.read();return Ze(Fe.app,{lastSentHeartbeatDate:null!==(Le=ne.lastSentHeartbeatDate)&&void 0!==Le?Le:Ht.lastSentHeartbeatDate,heartbeats:ne.heartbeats})}})()}add(ne){var Fe=this;return(0,d.Z)(function*(){var Le;if(yield Fe._canUseIndexedDBPromise){const Ht=yield Fe.read();return Ze(Fe.app,{lastSentHeartbeatDate:null!==(Le=ne.lastSentHeartbeatDate)&&void 0!==Le?Le:Ht.lastSentHeartbeatDate,heartbeats:[...Ht.heartbeats,...ne.heartbeats]})}})()}}function wn(oe){return(0,ce.L)(JSON.stringify({version:2,heartbeats:oe})).length}!function Fi(oe){vn(new ee.wA("platform-logger",ne=>new ft(ne),"PRIVATE")),vn(new ee.wA("heartbeat",ne=>new dt(ne),"PRIVATE")),Tr(ut,"0.9.9",oe),Tr(ut,"0.9.9","esm2017"),Tr("fire-js","")}("")},4859:(vt,Ae,F)=>{F.d(Ae,{H0:()=>Ee,wA:()=>P});var d=F(5861),ee=F(2090);class P{constructor(z,$,Y){this.name=z,this.instanceFactory=$,this.type=Y,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(z){return this.instantiationMode=z,this}setMultipleInstances(z){return this.multipleInstances=z,this}setServiceProps(z){return this.serviceProps=z,this}setInstanceCreatedCallback(z){return this.onInstanceCreated=z,this}}const ce="[DEFAULT]";class le{constructor(z,$){this.name=z,this.container=$,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(z){const $=this.normalizeInstanceIdentifier(z);if(!this.instancesDeferred.has($)){const Y=new ee.BH;if(this.instancesDeferred.set($,Y),this.isInitialized($)||this.shouldAutoInitialize())try{const We=this.getOrInitializeService({instanceIdentifier:$});We&&Y.resolve(We)}catch{}}return this.instancesDeferred.get($).promise}getImmediate(z){var $;const Y=this.normalizeInstanceIdentifier(z?.identifier),We=null!==($=z?.optional)&&void 0!==$&&$;if(!this.isInitialized(Y)&&!this.shouldAutoInitialize()){if(We)return null;throw Error(`Service ${this.name} is not available`)}try{return this.getOrInitializeService({instanceIdentifier:Y})}catch(xe){if(We)return null;throw xe}}getComponent(){return this.component}setComponent(z){if(z.name!==this.name)throw Error(`Mismatching Component ${z.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=z,this.shouldAutoInitialize()){if(function se(ge){return"EAGER"===ge.instantiationMode}(z))try{this.getOrInitializeService({instanceIdentifier:ce})}catch{}for(const[$,Y]of this.instancesDeferred.entries()){const We=this.normalizeInstanceIdentifier($);try{const xe=this.getOrInitializeService({instanceIdentifier:We});Y.resolve(xe)}catch{}}}}clearInstance(z=ce){this.instancesDeferred.delete(z),this.instancesOptions.delete(z),this.instances.delete(z)}delete(){var z=this;return(0,d.Z)(function*(){const $=Array.from(z.instances.values());yield Promise.all([...$.filter(Y=>"INTERNAL"in Y).map(Y=>Y.INTERNAL.delete()),...$.filter(Y=>"_delete"in Y).map(Y=>Y._delete())])})()}isComponentSet(){return null!=this.component}isInitialized(z=ce){return this.instances.has(z)}getOptions(z=ce){return this.instancesOptions.get(z)||{}}initialize(z={}){const{options:$={}}=z,Y=this.normalizeInstanceIdentifier(z.instanceIdentifier);if(this.isInitialized(Y))throw Error(`${this.name}(${Y}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const We=this.getOrInitializeService({instanceIdentifier:Y,options:$});for(const[xe,De]of this.instancesDeferred.entries())Y===this.normalizeInstanceIdentifier(xe)&&De.resolve(We);return We}onInit(z,$){var Y;const We=this.normalizeInstanceIdentifier($),xe=null!==(Y=this.onInitCallbacks.get(We))&&void 0!==Y?Y:new Set;xe.add(z),this.onInitCallbacks.set(We,xe);const De=this.instances.get(We);return De&&z(De,We),()=>{xe.delete(z)}}invokeOnInitCallbacks(z,$){const Y=this.onInitCallbacks.get($);if(Y)for(const We of Y)try{We(z,$)}catch{}}getOrInitializeService({instanceIdentifier:z,options:$={}}){let Y=this.instances.get(z);if(!Y&&this.component&&(Y=this.component.instanceFactory(this.container,{instanceIdentifier:(ge=z,ge===ce?void 0:ge),options:$}),this.instances.set(z,Y),this.instancesOptions.set(z,$),this.invokeOnInitCallbacks(Y,z),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,z,Y)}catch{}var ge;return Y||null}normalizeInstanceIdentifier(z=ce){return this.component?this.component.multipleInstances?z:ce:z}shouldAutoInitialize(){return!!this.component&&"EXPLICIT"!==this.component.instantiationMode}}class Ee{constructor(z){this.name=z,this.providers=new Map}addComponent(z){const $=this.getProvider(z.name);if($.isComponentSet())throw new Error(`Component ${z.name} has already been registered with ${this.name}`);$.setComponent(z)}addOrOverwriteComponent(z){this.getProvider(z.name).isComponentSet()&&this.providers.delete(z.name),this.addComponent(z)}getProvider(z){if(this.providers.has(z))return this.providers.get(z);const $=new le(z,this);return this.providers.set(z,$),$}getProviders(){return Array.from(this.providers.values())}}},1877:(vt,Ae,F)=>{F.d(Ae,{Am:()=>ge,Ub:()=>Ee,Yd:()=>se,in:()=>ee});const d=[];var ee=(()=>{return(z=ee||(ee={}))[z.DEBUG=0]="DEBUG",z[z.VERBOSE=1]="VERBOSE",z[z.INFO=2]="INFO",z[z.WARN=3]="WARN",z[z.ERROR=4]="ERROR",z[z.SILENT=5]="SILENT",ee;var z})();const P={debug:ee.DEBUG,verbose:ee.VERBOSE,info:ee.INFO,warn:ee.WARN,error:ee.ERROR,silent:ee.SILENT},ce=ee.INFO,le={[ee.DEBUG]:"log",[ee.VERBOSE]:"log",[ee.INFO]:"info",[ee.WARN]:"warn",[ee.ERROR]:"error"},fe=(z,$,...Y)=>{if($<z.logLevel)return;const We=(new Date).toISOString(),xe=le[$];if(!xe)throw new Error(`Attempted to log a message with an invalid logType (value: ${$})`);console[xe](`[${We}]  ${z.name}:`,...Y)};class se{constructor($){this.name=$,this._logLevel=ce,this._logHandler=fe,this._userLogHandler=null,d.push(this)}get logLevel(){return this._logLevel}set logLevel($){if(!($ in ee))throw new TypeError(`Invalid value "${$}" assigned to \`logLevel\``);this._logLevel=$}setLogLevel($){this._logLevel="string"==typeof $?P[$]:$}get logHandler(){return this._logHandler}set logHandler($){if("function"!=typeof $)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=$}get userLogHandler(){return this._userLogHandler}set userLogHandler($){this._userLogHandler=$}debug(...$){this._userLogHandler&&this._userLogHandler(this,ee.DEBUG,...$),this._logHandler(this,ee.DEBUG,...$)}log(...$){this._userLogHandler&&this._userLogHandler(this,ee.VERBOSE,...$),this._logHandler(this,ee.VERBOSE,...$)}info(...$){this._userLogHandler&&this._userLogHandler(this,ee.INFO,...$),this._logHandler(this,ee.INFO,...$)}warn(...$){this._userLogHandler&&this._userLogHandler(this,ee.WARN,...$),this._logHandler(this,ee.WARN,...$)}error(...$){this._userLogHandler&&this._userLogHandler(this,ee.ERROR,...$),this._logHandler(this,ee.ERROR,...$)}}function Ee(z){d.forEach($=>{$.setLogLevel(z)})}function ge(z,$){for(const Y of d){let We=null;$&&$.level&&(We=P[$.level]),Y.userLogHandler=null===z?null:(xe,De,...at)=>{const be=at.map(ve=>{if(null==ve)return null;if("string"==typeof ve)return ve;if("number"==typeof ve||"boolean"==typeof ve)return ve.toString();if(ve instanceof Error)return ve.message;try{return JSON.stringify(ve)}catch{return null}}).filter(ve=>ve).join(" ");De>=(We??xe.logLevel)&&z({level:ee[De].toLowerCase(),message:be,args:at,type:xe.name})}}}},259:(vt,Ae,F)=>{F.d(Ae,{C6:()=>d.getApps,Mq:()=>d.getApp});var d=F(6881);(0,d.registerVersion)("firebase","9.21.0","app")},9260:(vt,Ae,F)=>{F.d(Ae,{Z:()=>d.Z});var d=F(3942);d.Z.registerVersion("firebase","9.21.0","app-compat")},3042:(vt,Ae,F)=>{F.r(Ae);var d=F(5861),ee=F(3942),P=F(2090),ce=F(6881),le=F(655),fe=F(1877),se=F(4859);const De=function We(){return{"admin-restricted-operation":"This operation is restricted to administrators only.","argument-error":"","app-not-authorized":"This app, identified by the domain where it's hosted, is not authorized to use Firebase Authentication with the provided API key. Review your key configuration in the Google API console.","app-not-installed":"The requested mobile application corresponding to the identifier (Android package name or iOS bundle ID) provided is not installed on this device.","captcha-check-failed":"The reCAPTCHA response token provided is either invalid, expired, already used or the domain associated with it does not match the list of whitelisted domains.","code-expired":"The SMS code has expired. Please re-send the verification code to try again.","cordova-not-ready":"Cordova framework is not ready.","cors-unsupported":"This browser is not supported.","credential-already-in-use":"This credential is already associated with a different user account.","custom-token-mismatch":"The custom token corresponds to a different audience.","requires-recent-login":"This operation is sensitive and requires recent authentication. Log in again before retrying this request.","dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK.","dynamic-link-not-activated":"Please activate Dynamic Links in the Firebase Console and agree to the terms and conditions.","email-change-needs-verification":"Multi-factor users must always have a verified email.","email-already-in-use":"The email address is already in use by another account.","emulator-config-failed":'Auth instance has already been used to make a network call. Auth can no longer be configured to use the emulator. Try calling "connectAuthEmulator()" sooner.',"expired-action-code":"The action code has expired.","cancelled-popup-request":"This operation has been cancelled due to another conflicting popup being opened.","internal-error":"An internal AuthError has occurred.","invalid-app-credential":"The phone verification request contains an invalid application verifier. The reCAPTCHA token response is either invalid or expired.","invalid-app-id":"The mobile app identifier is not registed for the current project.","invalid-user-token":"This user's credential isn't valid for this project. This can happen if the user's token has been tampered with, or if the user isn't for the project associated with this API key.","invalid-auth-event":"An internal AuthError has occurred.","invalid-verification-code":"The SMS verification code used to create the phone auth credential is invalid. Please resend the verification code sms and be sure to use the verification code provided by the user.","invalid-continue-uri":"The continue URL provided in the request is invalid.","invalid-cordova-configuration":"The following Cordova plugins must be installed to enable OAuth sign-in: cordova-plugin-buildinfo, cordova-universal-links-plugin, cordova-plugin-browsertab, cordova-plugin-inappbrowser and cordova-plugin-customurlscheme.","invalid-custom-token":"The custom token format is incorrect. Please check the documentation.","invalid-dynamic-link-domain":"The provided dynamic link domain is not configured or authorized for the current project.","invalid-email":"The email address is badly formatted.","invalid-emulator-scheme":"Emulator URL must start with a valid scheme (http:// or https://).","invalid-api-key":"Your API key is invalid, please check you have copied it correctly.","invalid-cert-hash":"The SHA-1 certificate hash provided is invalid.","invalid-credential":"The supplied auth credential is malformed or has expired.","invalid-message-payload":"The email template corresponding to this action contains invalid characters in its message. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-multi-factor-session":"The request does not contain a valid proof of first factor successful sign-in.","invalid-oauth-provider":"EmailAuthProvider is not supported for this operation. This operation only supports OAuth providers.","invalid-oauth-client-id":"The OAuth client ID provided is either invalid or does not match the specified API key.","unauthorized-domain":"This domain is not authorized for OAuth operations for your Firebase project. Edit the list of authorized domains from the Firebase console.","invalid-action-code":"The action code is invalid. This can happen if the code is malformed, expired, or has already been used.","wrong-password":"The password is invalid or the user does not have a password.","invalid-persistence-type":"The specified persistence type is invalid. It can only be local, session or none.","invalid-phone-number":"The format of the phone number provided is incorrect. Please enter the phone number in a format that can be parsed into E.164 format. E.164 phone numbers are written in the format [+][country code][subscriber number including area code].","invalid-provider-id":"The specified provider ID is invalid.","invalid-recipient-email":"The email corresponding to this action failed to send as the provided recipient email address is invalid.","invalid-sender":"The email template corresponding to this action contains an invalid sender email or name. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-verification-id":"The verification ID used to create the phone auth credential is invalid.","invalid-tenant-id":"The Auth instance's tenant ID is invalid.","login-blocked":"Login blocked by user-provided method: {$originalMessage}","missing-android-pkg-name":"An Android Package Name must be provided if the Android App is required to be installed.","auth-domain-config-required":"Be sure to include authDomain when calling firebase.initializeApp(), by following the instructions in the Firebase console.","missing-app-credential":"The phone verification request is missing an application verifier assertion. A reCAPTCHA response token needs to be provided.","missing-verification-code":"The phone auth credential was created with an empty SMS verification code.","missing-continue-uri":"A continue URL must be provided in the request.","missing-iframe-start":"An internal AuthError has occurred.","missing-ios-bundle-id":"An iOS Bundle ID must be provided if an App Store ID is provided.","missing-or-invalid-nonce":"The request does not contain a valid nonce. This can occur if the SHA-256 hash of the provided raw nonce does not match the hashed nonce in the ID token payload.","missing-password":"A non-empty password must be provided","missing-multi-factor-info":"No second factor identifier is provided.","missing-multi-factor-session":"The request is missing proof of first factor successful sign-in.","missing-phone-number":"To send verification codes, provide a phone number for the recipient.","missing-verification-id":"The phone auth credential was created with an empty verification ID.","app-deleted":"This instance of FirebaseApp has been deleted.","multi-factor-info-not-found":"The user does not have a second factor matching the identifier provided.","multi-factor-auth-required":"Proof of ownership of a second factor is required to complete sign-in.","account-exists-with-different-credential":"An account already exists with the same email address but different sign-in credentials. Sign in using a provider associated with this email address.","network-request-failed":"A network AuthError (such as timeout, interrupted connection or unreachable host) has occurred.","no-auth-event":"An internal AuthError has occurred.","no-such-provider":"User was not linked to an account with the given provider.","null-user":"A null user object was provided as the argument for an operation which requires a non-null user object.","operation-not-allowed":"The given sign-in provider is disabled for this Firebase project. Enable it in the Firebase console, under the sign-in method tab of the Auth section.","operation-not-supported-in-this-environment":'This operation is not supported in the environment this application is running on. "location.protocol" must be http, https or chrome-extension and web storage must be enabled.',"popup-blocked":"Unable to establish a connection with the popup. It may have been blocked by the browser.","popup-closed-by-user":"The popup has been closed by the user before finalizing the operation.","provider-already-linked":"User can only be linked to one identity for the given provider.","quota-exceeded":"The project's quota for this operation has been exceeded.","redirect-cancelled-by-user":"The redirect operation has been cancelled by the user before finalizing.","redirect-operation-pending":"A redirect sign-in operation is already pending.","rejected-credential":"The request contains malformed or mismatching credentials.","second-factor-already-in-use":"The second factor is already enrolled on this account.","maximum-second-factor-count-exceeded":"The maximum allowed number of second factors on a user has been exceeded.","tenant-id-mismatch":"The provided tenant ID does not match the Auth instance's tenant ID",timeout:"The operation has timed out.","user-token-expired":"The user's credential is no longer valid. The user must sign in again.","too-many-requests":"We have blocked all requests from this device due to unusual activity. Try again later.","unauthorized-continue-uri":"The domain of the continue URL is not whitelisted.  Please whitelist the domain in the Firebase console.","unsupported-first-factor":"Enrolling a second factor or signing in with a multi-factor account requires sign-in with a supported first factor.","unsupported-persistence-type":"The current environment does not support the specified persistence type.","unsupported-tenant-operation":"This operation is not supported in a multi-tenant context.","unverified-email":"The operation requires a verified email.","user-cancelled":"The user did not grant your application the permissions it requested.","user-not-found":"There is no user record corresponding to this identifier. The user may have been deleted.","user-disabled":"The user account has been disabled by an administrator.","user-mismatch":"The supplied credentials do not correspond to the previously signed in user.","user-signed-out":"","weak-password":"The password must be 6 characters long or more.","web-storage-unsupported":"This browser is not supported or 3rd party cookies and data may be disabled.","already-initialized":"initializeAuth() has already been called with different options. To avoid this error, call initializeAuth() with the same options as when it was originally called, or call getAuth() to return the already initialized instance.","missing-recaptcha-token":"The reCAPTCHA token is missing when sending request to the backend.","invalid-recaptcha-token":"The reCAPTCHA token is invalid when sending request to the backend.","invalid-recaptcha-action":"The reCAPTCHA action is invalid when sending request to the backend.","recaptcha-not-enabled":"reCAPTCHA Enterprise integration is not enabled for this project.","missing-client-type":"The reCAPTCHA client type is missing when sending request to the backend.","missing-recaptcha-version":"The reCAPTCHA version is missing when sending request to the backend.","invalid-req-type":"Invalid request parameters.","invalid-recaptcha-version":"The reCAPTCHA version is invalid when sending request to the backend."}},at=function xe(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}},be=new P.LL("auth","Firebase",{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}),bt=new fe.Yd("@firebase/auth");function Ne(y,...p){bt.logLevel<=fe.in.ERROR&&bt.error(`Auth (${ce.SDK_VERSION}): ${y}`,...p)}function Ce(y,...p){throw rt(y,...p)}function me(y,...p){return rt(y,...p)}function Ke(y,p,g){const b=Object.assign(Object.assign({},at()),{[p]:g});return new P.LL("auth","Firebase",b).create(p,{appName:y.name})}function $e(y,p,g){if(!(p instanceof g))throw g.name!==p.constructor.name&&Ce(y,"argument-error"),Ke(y,"argument-error",`Type of ${p.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function rt(y,...p){if("string"!=typeof y){const g=p[0],b=[...p.slice(1)];return b[0]&&(b[0].appName=y.name),y._errorFactory.create(g,...b)}return be.create(y,...p)}function re(y,p,...g){if(!y)throw rt(p,...g)}function kt(y){const p="INTERNAL ASSERTION FAILED: "+y;throw Ne(p),new Error(p)}function ft(y,p){y||kt(p)}function Qt(){var y;return typeof self<"u"&&(null===(y=self.location)||void 0===y?void 0:y.href)||""}function ut(){return"http:"===pe()||"https:"===pe()}function pe(){var y;return typeof self<"u"&&(null===(y=self.location)||void 0===y?void 0:y.protocol)||null}class Re{constructor(p,g){this.shortDelay=p,this.longDelay=g,ft(g>p,"Short delay should be less than long delay!"),this.isMobile=(0,P.uI)()||(0,P.b$)()}get(){return function _e(){return!(typeof navigator<"u"&&navigator&&"onLine"in navigator&&"boolean"==typeof navigator.onLine&&(ut()||(0,P.ru)()||"connection"in navigator))||navigator.onLine}()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}function Ve(y,p){ft(y.emulator,"Emulator should always be set here");const{url:g}=y.emulator;return p?`${g}${p.startsWith("/")?p.slice(1):p}`:g}class Se{static initialize(p,g,b){this.fetchImpl=p,g&&(this.headersImpl=g),b&&(this.responseImpl=b)}static fetch(){return this.fetchImpl?this.fetchImpl:typeof self<"u"&&"fetch"in self?self.fetch:void kt("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){return this.headersImpl?this.headersImpl:typeof self<"u"&&"Headers"in self?self.Headers:void kt("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){return this.responseImpl?this.responseImpl:typeof self<"u"&&"Response"in self?self.Response:void kt("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}const Nt={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"},rn=new Re(3e4,6e4);function Vt(y,p){return y.tenantId&&!p.tenantId?Object.assign(Object.assign({},p),{tenantId:y.tenantId}):p}function He(y,p,g,b){return qt.apply(this,arguments)}function qt(){return(qt=(0,d.Z)(function*(y,p,g,b,T={}){return Xt(y,T,(0,d.Z)(function*(){let k={},j={};b&&("GET"===p?j=b:k={body:JSON.stringify(b)});const X=(0,P.xO)(Object.assign({key:y.config.apiKey},j)).slice(1),ke=yield y._getAdditionalHeaders();return ke["Content-Type"]="application/json",y.languageCode&&(ke["X-Firebase-Locale"]=y.languageCode),Se.fetch()(Lr(y,y.config.apiHost,g,X),Object.assign({method:p,headers:ke,referrerPolicy:"no-referrer"},k))}))})).apply(this,arguments)}function Xt(y,p,g){return nn.apply(this,arguments)}function nn(){return(nn=(0,d.Z)(function*(y,p,g){y._canInitEmulator=!1;const b=Object.assign(Object.assign({},Nt),p);try{const T=new ei(y),k=yield Promise.race([g(),T.promise]);T.clearNetworkTimeout();const j=yield k.json();if("needConfirmation"in j)throw Ir(y,"account-exists-with-different-credential",j);if(k.ok&&!("errorMessage"in j))return j;{const X=k.ok?j.errorMessage:j.error.message,[ke,Ge]=X.split(" : ");if("FEDERATED_USER_ID_ALREADY_LINKED"===ke)throw Ir(y,"credential-already-in-use",j);if("EMAIL_EXISTS"===ke)throw Ir(y,"email-already-in-use",j);if("USER_DISABLED"===ke)throw Ir(y,"user-disabled",j);const et=b[ke]||ke.toLowerCase().replace(/[_\s]+/g,"-");if(Ge)throw Ke(y,et,Ge);Ce(y,et)}}catch(T){if(T instanceof P.ZR)throw T;Ce(y,"network-request-failed",{message:String(T)})}})).apply(this,arguments)}function kn(y,p,g,b){return jn.apply(this,arguments)}function jn(){return(jn=(0,d.Z)(function*(y,p,g,b,T={}){const k=yield He(y,p,g,b,T);return"mfaPendingCredential"in k&&Ce(y,"multi-factor-auth-required",{_serverResponse:k}),k})).apply(this,arguments)}function Lr(y,p,g,b){const T=`${p}${g}?${b}`;return y.config.emulator?Ve(y.config,T):`${y.config.apiScheme}://${T}`}class ei{constructor(p){this.auth=p,this.timer=null,this.promise=new Promise((g,b)=>{this.timer=setTimeout(()=>b(me(this.auth,"network-request-failed")),rn.get())})}clearNetworkTimeout(){clearTimeout(this.timer)}}function Ir(y,p,g){const b={appName:y.name};g.email&&(b.email=g.email),g.phoneNumber&&(b.phoneNumber=g.phoneNumber);const T=me(y,p,b);return T.customData._tokenResponse=g,T}function Oi(){return(Oi=(0,d.Z)(function*(y,p){return He(y,"POST","/v1/accounts:delete",p)})).apply(this,arguments)}function Ta(y,p){return Vo.apply(this,arguments)}function Vo(){return(Vo=(0,d.Z)(function*(y,p){return He(y,"POST","/v1/accounts:update",p)})).apply(this,arguments)}function pt(y,p){return Wr.apply(this,arguments)}function Wr(){return(Wr=(0,d.Z)(function*(y,p){return He(y,"POST","/v1/accounts:lookup",p)})).apply(this,arguments)}function Pi(y){if(y)try{const p=new Date(Number(y));if(!isNaN(p.getTime()))return p.toUTCString()}catch{}}function fi(){return(fi=(0,d.Z)(function*(y,p=!1){const g=(0,P.m9)(y),b=yield g.getIdToken(p),T=An(b);re(T&&T.exp&&T.auth_time&&T.iat,g.auth,"internal-error");const k="object"==typeof T.firebase?T.firebase:void 0,j=k?.sign_in_provider;return{claims:T,token:b,authTime:Pi(fr(T.auth_time)),issuedAtTime:Pi(fr(T.iat)),expirationTime:Pi(fr(T.exp)),signInProvider:j||null,signInSecondFactor:k?.sign_in_second_factor||null}})).apply(this,arguments)}function fr(y){return 1e3*Number(y)}function An(y){const[p,g,b]=y.split(".");if(void 0===p||void 0===g||void 0===b)return Ne("JWT malformed, contained fewer than 3 sections"),null;try{const T=(0,P.tV)(g);return T?JSON.parse(T):(Ne("Failed to decode base64 JWT payload"),null)}catch(T){return Ne("Caught error parsing JWT payload as JSON",T?.toString()),null}}function it(y,p){return Ct.apply(this,arguments)}function Ct(){return(Ct=(0,d.Z)(function*(y,p,g=!1){if(g)return p;try{return yield p}catch(b){throw b instanceof P.ZR&&vn(b)&&y.auth.currentUser===y&&(yield y.auth.signOut()),b}})).apply(this,arguments)}function vn({code:y}){return"auth/user-disabled"===y||"auth/user-token-expired"===y}class ss{constructor(p){this.user=p,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){!this.isRunning||(this.isRunning=!1,null!==this.timerId&&clearTimeout(this.timerId))}getInterval(p){var g;if(p){const b=this.errorBackoff;return this.errorBackoff=Math.min(2*this.errorBackoff,96e4),b}{this.errorBackoff=3e4;const T=(null!==(g=this.user.stsTokenManager.expirationTime)&&void 0!==g?g:0)-Date.now()-3e5;return Math.max(0,T)}}schedule(p=!1){var g=this;if(!this.isRunning)return;const b=this.getInterval(p);this.timerId=setTimeout((0,d.Z)(function*(){yield g.iteration()}),b)}iteration(){var p=this;return(0,d.Z)(function*(){try{yield p.user.getIdToken(!0)}catch(g){return void("auth/network-request-failed"===g?.code&&p.schedule(!0))}p.schedule()})()}}class ti{constructor(p,g){this.createdAt=p,this.lastLoginAt=g,this._initializeTime()}_initializeTime(){this.lastSignInTime=Pi(this.lastLoginAt),this.creationTime=Pi(this.createdAt)}_copy(p){this.createdAt=p.createdAt,this.lastLoginAt=p.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}function tr(y){return Mt.apply(this,arguments)}function Mt(){return(Mt=(0,d.Z)(function*(y){var p;const g=y.auth,b=yield y.getIdToken(),T=yield it(y,pt(g,{idToken:b}));re(T?.users.length,g,"internal-error");const k=T.users[0];y._notifyReloadListener(k);const j=null!==(p=k.providerUserInfo)&&void 0!==p&&p.length?on(k.providerUserInfo):[],X=Uo(y.providerData,j),et=!!y.isAnonymous&&!(y.email&&k.passwordHash||X?.length),lt={uid:k.localId,displayName:k.displayName||null,photoURL:k.photoUrl||null,email:k.email||null,emailVerified:k.emailVerified||!1,phoneNumber:k.phoneNumber||null,tenantId:k.tenantId||null,providerData:X,metadata:new ti(k.createdAt,k.lastLoginAt),isAnonymous:et};Object.assign(y,lt)})).apply(this,arguments)}function pn(){return(pn=(0,d.Z)(function*(y){const p=(0,P.m9)(y);yield tr(p),yield p.auth._persistUserIfCurrent(p),p.auth._notifyListenersIfCurrent(p)})).apply(this,arguments)}function Uo(y,p){return[...y.filter(b=>!p.some(T=>T.providerId===b.providerId)),...p]}function on(y){return y.map(p=>{var{providerId:g}=p,b=(0,le._T)(p,["providerId"]);return{providerId:g,uid:b.rawId||"",displayName:b.displayName||null,email:b.email||null,phoneNumber:b.phoneNumber||null,photoURL:b.photoUrl||null}})}function Sr(){return(Sr=(0,d.Z)(function*(y,p){const g=yield Xt(y,{},(0,d.Z)(function*(){const b=(0,P.xO)({grant_type:"refresh_token",refresh_token:p}).slice(1),{tokenApiHost:T,apiKey:k}=y.config,j=Lr(y,T,"/v1/token",`key=${k}`),X=yield y._getAdditionalHeaders();return X["Content-Type"]="application/x-www-form-urlencoded",Se.fetch()(j,{method:"POST",headers:X,body:b})}));return{accessToken:g.access_token,expiresIn:g.expires_in,refreshToken:g.refresh_token}})).apply(this,arguments)}class Ni{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(p){re(p.idToken,"internal-error"),re(typeof p.idToken<"u","internal-error"),re(typeof p.refreshToken<"u","internal-error");const g="expiresIn"in p&&typeof p.expiresIn<"u"?Number(p.expiresIn):function sn(y){const p=An(y);return re(p,"internal-error"),re(typeof p.exp<"u","internal-error"),re(typeof p.iat<"u","internal-error"),Number(p.exp)-Number(p.iat)}(p.idToken);this.updateTokensAndExpiration(p.idToken,p.refreshToken,g)}getToken(p,g=!1){var b=this;return(0,d.Z)(function*(){return re(!b.accessToken||b.refreshToken,p,"user-token-expired"),g||!b.accessToken||b.isExpired?b.refreshToken?(yield b.refresh(p,b.refreshToken),b.accessToken):null:b.accessToken})()}clearRefreshToken(){this.refreshToken=null}refresh(p,g){var b=this;return(0,d.Z)(function*(){const{accessToken:T,refreshToken:k,expiresIn:j}=yield function pr(y,p){return Sr.apply(this,arguments)}(p,g);b.updateTokensAndExpiration(T,k,Number(j))})()}updateTokensAndExpiration(p,g,b){this.refreshToken=g||null,this.accessToken=p||null,this.expirationTime=Date.now()+1e3*b}static fromJSON(p,g){const{refreshToken:b,accessToken:T,expirationTime:k}=g,j=new Ni;return b&&(re("string"==typeof b,"internal-error",{appName:p}),j.refreshToken=b),T&&(re("string"==typeof T,"internal-error",{appName:p}),j.accessToken=T),k&&(re("number"==typeof k,"internal-error",{appName:p}),j.expirationTime=k),j}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(p){this.accessToken=p.accessToken,this.refreshToken=p.refreshToken,this.expirationTime=p.expirationTime}_clone(){return Object.assign(new Ni,this.toJSON())}_performRefresh(){return kt("not implemented")}}function Vn(y,p){re("string"==typeof y||typeof y>"u","internal-error",{appName:p})}class Tr{constructor(p){var{uid:g,auth:b,stsTokenManager:T}=p,k=(0,le._T)(p,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new ss(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=g,this.auth=b,this.stsTokenManager=T,this.accessToken=T.accessToken,this.displayName=k.displayName||null,this.email=k.email||null,this.emailVerified=k.emailVerified||!1,this.phoneNumber=k.phoneNumber||null,this.photoURL=k.photoURL||null,this.isAnonymous=k.isAnonymous||!1,this.tenantId=k.tenantId||null,this.providerData=k.providerData?[...k.providerData]:[],this.metadata=new ti(k.createdAt||void 0,k.lastLoginAt||void 0)}getIdToken(p){var g=this;return(0,d.Z)(function*(){const b=yield it(g,g.stsTokenManager.getToken(g.auth,p));return re(b,g.auth,"internal-error"),g.accessToken!==b&&(g.accessToken=b,yield g.auth._persistUserIfCurrent(g),g.auth._notifyListenersIfCurrent(g)),b})()}getIdTokenResult(p){return function Bo(y){return fi.apply(this,arguments)}(this,p)}reload(){return function Dr(y){return pn.apply(this,arguments)}(this)}_assign(p){this!==p&&(re(this.uid===p.uid,this.auth,"internal-error"),this.displayName=p.displayName,this.photoURL=p.photoURL,this.email=p.email,this.emailVerified=p.emailVerified,this.phoneNumber=p.phoneNumber,this.isAnonymous=p.isAnonymous,this.tenantId=p.tenantId,this.providerData=p.providerData.map(g=>Object.assign({},g)),this.metadata._copy(p.metadata),this.stsTokenManager._assign(p.stsTokenManager))}_clone(p){const g=new Tr(Object.assign(Object.assign({},this),{auth:p,stsTokenManager:this.stsTokenManager._clone()}));return g.metadata._copy(this.metadata),g}_onReload(p){re(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=p,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(p){this.reloadListener?this.reloadListener(p):this.reloadUserInfo=p}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}_updateTokensIfNecessary(p,g=!1){var b=this;return(0,d.Z)(function*(){let T=!1;p.idToken&&p.idToken!==b.stsTokenManager.accessToken&&(b.stsTokenManager.updateFromServerResponse(p),T=!0),g&&(yield tr(b)),yield b.auth._persistUserIfCurrent(b),T&&b.auth._notifyListenersIfCurrent(b)})()}delete(){var p=this;return(0,d.Z)(function*(){const g=yield p.getIdToken();return yield it(p,function is(y,p){return Oi.apply(this,arguments)}(p.auth,{idToken:g})),p.stsTokenManager.clearRefreshToken(),p.auth.signOut()})()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(p=>Object.assign({},p)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(p,g){var b,T,k,j,X,ke,Ge,et;const lt=null!==(b=g.displayName)&&void 0!==b?b:void 0,Nn=null!==(T=g.email)&&void 0!==T?T:void 0,Zi=null!==(k=g.phoneNumber)&&void 0!==k?k:void 0,bu=null!==(j=g.photoURL)&&void 0!==j?j:void 0,ms=null!==(X=g.tenantId)&&void 0!==X?X:void 0,wu=null!==(ke=g._redirectEventId)&&void 0!==ke?ke:void 0,ac=null!==(Ge=g.createdAt)&&void 0!==Ge?Ge:void 0,jg=null!==(et=g.lastLoginAt)&&void 0!==et?et:void 0,{uid:Hf,emailVerified:jf,isAnonymous:lc,providerData:cc,stsTokenManager:$f}=g;re(Hf&&$f,p,"internal-error");const ua=Ni.fromJSON(this.name,$f);re("string"==typeof Hf,p,"internal-error"),Vn(lt,p.name),Vn(Nn,p.name),re("boolean"==typeof jf,p,"internal-error"),re("boolean"==typeof lc,p,"internal-error"),Vn(Zi,p.name),Vn(bu,p.name),Vn(ms,p.name),Vn(wu,p.name),Vn(ac,p.name),Vn(jg,p.name);const il=new Tr({uid:Hf,auth:p,email:Nn,emailVerified:jf,displayName:lt,isAnonymous:lc,photoURL:bu,phoneNumber:Zi,tenantId:ms,stsTokenManager:ua,createdAt:ac,lastLoginAt:jg});return cc&&Array.isArray(cc)&&(il.providerData=cc.map(ar=>Object.assign({},ar))),wu&&(il._redirectEventId=wu),il}static _fromIdTokenResponse(p,g,b=!1){return(0,d.Z)(function*(){const T=new Ni;T.updateFromServerResponse(g);const k=new Tr({uid:g.localId,auth:p,stsTokenManager:T,isAnonymous:b});return yield tr(k),k})()}}const os=new Map;function $n(y){ft(y instanceof Function,"Expected a class definition");let p=os.get(y);return p?(ft(p instanceof y,"Instance stored in cache mismatched with class"),p):(p=new y,os.set(y,p),p)}const Zr=(()=>{class y{constructor(){this.type="NONE",this.storage={}}_isAvailable(){return(0,d.Z)(function*(){return!0})()}_set(g,b){var T=this;return(0,d.Z)(function*(){T.storage[g]=b})()}_get(g){var b=this;return(0,d.Z)(function*(){const T=b.storage[g];return void 0===T?null:T})()}_remove(g){var b=this;return(0,d.Z)(function*(){delete b.storage[g]})()}_addListener(g,b){}_removeListener(g,b){}}return y.type="NONE",y})();function H(y,p,g){return`firebase:${y}:${p}:${g}`}class B{constructor(p,g,b){this.persistence=p,this.auth=g,this.userKey=b;const{config:T,name:k}=this.auth;this.fullUserKey=H(this.userKey,T.apiKey,k),this.fullPersistenceKey=H("persistence",T.apiKey,k),this.boundEventHandler=g._onStorageEvent.bind(g),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(p){return this.persistence._set(this.fullUserKey,p.toJSON())}getCurrentUser(){var p=this;return(0,d.Z)(function*(){const g=yield p.persistence._get(p.fullUserKey);return g?Tr._fromJSON(p.auth,g):null})()}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}setPersistence(p){var g=this;return(0,d.Z)(function*(){if(g.persistence===p)return;const b=yield g.getCurrentUser();return yield g.removeCurrentUser(),g.persistence=p,b?g.setCurrentUser(b):void 0})()}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static create(p,g,b="authUser"){return(0,d.Z)(function*(){if(!g.length)return new B($n(Zr),p,b);const T=(yield Promise.all(g.map(function(){var Ge=(0,d.Z)(function*(et){if(yield et._isAvailable())return et});return function(et){return Ge.apply(this,arguments)}}()))).filter(Ge=>Ge);let k=T[0]||$n(Zr);const j=H(b,p.config.apiKey,p.name);let X=null;for(const Ge of g)try{const et=yield Ge._get(j);if(et){const lt=Tr._fromJSON(p,et);Ge!==k&&(X=lt),k=Ge;break}}catch{}const ke=T.filter(Ge=>Ge._shouldAllowMigration);return k._shouldAllowMigration&&ke.length?(k=ke[0],X&&(yield k._set(j,X.toJSON())),yield Promise.all(g.map(function(){var Ge=(0,d.Z)(function*(et){if(et!==k)try{yield et._remove(j)}catch{}});return function(et){return Ge.apply(this,arguments)}}())),new B(k,p,b)):new B(k,p,b)})()}}function K(y){const p=y.toLowerCase();if(p.includes("opera/")||p.includes("opr/")||p.includes("opios/"))return"Opera";if(xt(p))return"IEMobile";if(p.includes("msie")||p.includes("trident/"))return"IE";if(p.includes("edge/"))return"Edge";if(ue(p))return"Firefox";if(p.includes("silk/"))return"Silk";if(hn(p))return"Blackberry";if(Be(p))return"Webos";if(J(p))return"Safari";if((p.includes("chrome/")||Ze(p))&&!p.includes("edge/"))return"Chrome";if(Ut(p))return"Android";{const b=y.match(/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/);if(2===b?.length)return b[1]}return"Other"}function ue(y=(0,P.z$)()){return/firefox\//i.test(y)}function J(y=(0,P.z$)()){const p=y.toLowerCase();return p.includes("safari/")&&!p.includes("chrome/")&&!p.includes("crios/")&&!p.includes("android")}function Ze(y=(0,P.z$)()){return/crios\//i.test(y)}function xt(y=(0,P.z$)()){return/iemobile/i.test(y)}function Ut(y=(0,P.z$)()){return/android/i.test(y)}function hn(y=(0,P.z$)()){return/blackberry/i.test(y)}function Be(y=(0,P.z$)()){return/webos/i.test(y)}function dt(y=(0,P.z$)()){return/iphone|ipad|ipod/i.test(y)||/macintosh/i.test(y)&&/mobile/i.test(y)}function wn(y=(0,P.z$)()){return dt(y)||Ut(y)||Be(y)||hn(y)||/windows phone/i.test(y)||xt(y)}function oe(y,p=[]){let g;switch(y){case"Browser":g=K((0,P.z$)());break;case"Worker":g=`${K((0,P.z$)())}-${y}`;break;default:g=y}const b=p.length?p.join(","):"FirebaseCore-web";return`${g}/JsCore/${ce.SDK_VERSION}/${b}`}function Fe(){return(Fe=(0,d.Z)(function*(y){return(yield He(y,"GET","/v1/recaptchaParams")).recaptchaSiteKey||""})).apply(this,arguments)}function Le(y,p){return Tt.apply(this,arguments)}function Tt(){return(Tt=(0,d.Z)(function*(y,p){return He(y,"GET","/v2/recaptchaConfig",Vt(y,p))})).apply(this,arguments)}function Ht(y){return void 0!==y&&void 0!==y.getResponse}function an(y){return void 0!==y&&void 0!==y.enterprise}class On{constructor(p){if(this.siteKey="",this.emailPasswordEnabled=!1,void 0===p.recaptchaKey)throw new Error("recaptchaKey undefined");this.siteKey=p.recaptchaKey.split("/")[3],this.emailPasswordEnabled=p.recaptchaEnforcementState.some(g=>"EMAIL_PASSWORD_PROVIDER"===g.provider&&"OFF"!==g.enforcementState)}}function Mr(y){return new Promise((p,g)=>{const b=document.createElement("script");b.setAttribute("src",y),b.onload=p,b.onerror=T=>{const k=me("internal-error");k.customData=T,g(k)},b.type="text/javascript",b.charset="UTF-8",function en(){var y,p;return null!==(p=null===(y=document.getElementsByTagName("head"))||void 0===y?void 0:y[0])&&void 0!==p?p:document}().appendChild(b)})}function pi(y){return`__${y}${Math.floor(1e6*Math.random())}`}class gn{constructor(p){this.type="recaptcha-enterprise",this.auth=In(p)}verify(p="verify",g=!1){var b=this;return(0,d.Z)(function*(){function k(){return k=(0,d.Z)(function*(X){if(!g){if(null==X.tenantId&&null!=X._agentRecaptchaConfig)return X._agentRecaptchaConfig.siteKey;if(null!=X.tenantId&&void 0!==X._tenantRecaptchaConfigs[X.tenantId])return X._tenantRecaptchaConfigs[X.tenantId].siteKey}return new Promise(function(){var ke=(0,d.Z)(function*(Ge,et){Le(X,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(lt=>{if(void 0!==lt.recaptchaKey){const Nn=new On(lt);return null==X.tenantId?X._agentRecaptchaConfig=Nn:X._tenantRecaptchaConfigs[X.tenantId]=Nn,Ge(Nn.siteKey)}et(new Error("recaptcha Enterprise site key undefined"))}).catch(lt=>{et(lt)})});return function(Ge,et){return ke.apply(this,arguments)}}())}),k.apply(this,arguments)}function j(X,ke,Ge){const et=window.grecaptcha;an(et)?et.enterprise.ready(()=>{et.enterprise.execute(X,{action:p}).then(lt=>{ke(lt)}).catch(()=>{ke("NO_RECAPTCHA")})}):Ge(Error("No reCAPTCHA enterprise script loaded."))}return new Promise((X,ke)=>{(function T(X){return k.apply(this,arguments)})(b.auth).then(Ge=>{if(!g&&an(window.grecaptcha))j(Ge,X,ke);else{if(typeof window>"u")return void ke(new Error("RecaptchaVerifier is only supported in browser"));Mr("https://www.google.com/recaptcha/enterprise.js?render="+Ge).then(()=>{j(Ge,X,ke)}).catch(et=>{ke(et)})}}).catch(Ge=>{ke(Ge)})})})()}}function as(y,p,g){return gl.apply(this,arguments)}function gl(){return(gl=(0,d.Z)(function*(y,p,g,b=!1){const T=new gn(y);let k;try{k=yield T.verify(g)}catch{k=yield T.verify(g,!0)}const j=Object.assign({},p);return Object.assign(j,b?{captchaResp:k}:{captchaResponse:k}),Object.assign(j,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(j,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),j})).apply(this,arguments)}class fo{constructor(p){this.auth=p,this.queue=[]}pushCallback(p,g){const b=k=>new Promise((j,X)=>{try{j(p(k))}catch(ke){X(ke)}});b.onAbort=g,this.queue.push(b);const T=this.queue.length-1;return()=>{this.queue[T]=()=>Promise.resolve()}}runMiddleware(p){var g=this;return(0,d.Z)(function*(){if(g.auth.currentUser===p)return;const b=[];try{for(const T of g.queue)yield T(p),T.onAbort&&b.push(T.onAbort)}catch(T){b.reverse();for(const k of b)try{k()}catch{}throw g.auth._errorFactory.create("login-blocked",{originalMessage:T?.message})}})()}}class Oc{constructor(p,g,b,T){this.app=p,this.heartbeatServiceProvider=g,this.appCheckServiceProvider=b,this.config=T,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new Qs(this),this.idTokenSubscription=new Qs(this),this.beforeStateQueue=new fo(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=be,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=p.name,this.clientVersion=T.sdkClientVersion}_initializeWithPersistence(p,g){var b=this;return g&&(this._popupRedirectResolver=$n(g)),this._initializationPromise=this.queue((0,d.Z)(function*(){var T,k;if(!b._deleted&&(b.persistenceManager=yield B.create(b,p),!b._deleted)){if(null!==(T=b._popupRedirectResolver)&&void 0!==T&&T._shouldInitProactively)try{yield b._popupRedirectResolver._initialize(b)}catch{}yield b.initializeCurrentUser(g),b.lastNotifiedUid=(null===(k=b.currentUser)||void 0===k?void 0:k.uid)||null,!b._deleted&&(b._isInitialized=!0)}})),this._initializationPromise}_onStorageEvent(){var p=this;return(0,d.Z)(function*(){if(p._deleted)return;const g=yield p.assertedPersistence.getCurrentUser();if(p.currentUser||g){if(p.currentUser&&g&&p.currentUser.uid===g.uid)return p._currentUser._assign(g),void(yield p.currentUser.getIdToken());yield p._updateCurrentUser(g,!0)}})()}initializeCurrentUser(p){var g=this;return(0,d.Z)(function*(){var b;const T=yield g.assertedPersistence.getCurrentUser();let k=T,j=!1;if(p&&g.config.authDomain){yield g.getOrInitRedirectPersistenceManager();const X=null===(b=g.redirectUser)||void 0===b?void 0:b._redirectEventId,ke=k?._redirectEventId,Ge=yield g.tryRedirectSignIn(p);(!X||X===ke)&&Ge?.user&&(k=Ge.user,j=!0)}if(!k)return g.directlySetCurrentUser(null);if(!k._redirectEventId){if(j)try{yield g.beforeStateQueue.runMiddleware(k)}catch(X){k=T,g._popupRedirectResolver._overrideRedirectResult(g,()=>Promise.reject(X))}return k?g.reloadAndSetCurrentUserOrClear(k):g.directlySetCurrentUser(null)}return re(g._popupRedirectResolver,g,"argument-error"),yield g.getOrInitRedirectPersistenceManager(),g.redirectUser&&g.redirectUser._redirectEventId===k._redirectEventId?g.directlySetCurrentUser(k):g.reloadAndSetCurrentUserOrClear(k)})()}tryRedirectSignIn(p){var g=this;return(0,d.Z)(function*(){let b=null;try{b=yield g._popupRedirectResolver._completeRedirectFn(g,p,!0)}catch{yield g._setRedirectUser(null)}return b})()}reloadAndSetCurrentUserOrClear(p){var g=this;return(0,d.Z)(function*(){try{yield tr(p)}catch(b){if("auth/network-request-failed"!==b?.code)return g.directlySetCurrentUser(null)}return g.directlySetCurrentUser(p)})()}useDeviceLanguage(){this.languageCode=function Me(){if(typeof navigator>"u")return null;const y=navigator;return y.languages&&y.languages[0]||y.language||null}()}_delete(){var p=this;return(0,d.Z)(function*(){p._deleted=!0})()}updateCurrentUser(p){var g=this;return(0,d.Z)(function*(){const b=p?(0,P.m9)(p):null;return b&&re(b.auth.config.apiKey===g.config.apiKey,g,"invalid-user-token"),g._updateCurrentUser(b&&b._clone(g))})()}_updateCurrentUser(p,g=!1){var b=this;return(0,d.Z)(function*(){if(!b._deleted)return p&&re(b.tenantId===p.tenantId,b,"tenant-id-mismatch"),g||(yield b.beforeStateQueue.runMiddleware(p)),b.queue((0,d.Z)(function*(){yield b.directlySetCurrentUser(p),b.notifyAuthListeners()}))})()}signOut(){var p=this;return(0,d.Z)(function*(){return yield p.beforeStateQueue.runMiddleware(null),(p.redirectPersistenceManager||p._popupRedirectResolver)&&(yield p._setRedirectUser(null)),p._updateCurrentUser(null,!0)})()}setPersistence(p){var g=this;return this.queue((0,d.Z)(function*(){yield g.assertedPersistence.setPersistence($n(p))}))}initializeRecaptchaConfig(){var p=this;return(0,d.Z)(function*(){const g=yield Le(p,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}),b=new On(g);null==p.tenantId?p._agentRecaptchaConfig=b:p._tenantRecaptchaConfigs[p.tenantId]=b,b.emailPasswordEnabled&&new gn(p).verify()})()}_getRecaptchaConfig(){return null==this.tenantId?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(p){this._errorFactory=new P.LL("auth","Firebase",p())}onAuthStateChanged(p,g,b){return this.registerStateListener(this.authStateSubscription,p,g,b)}beforeAuthStateChanged(p,g){return this.beforeStateQueue.pushCallback(p,g)}onIdTokenChanged(p,g,b){return this.registerStateListener(this.idTokenSubscription,p,g,b)}toJSON(){var p;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:null===(p=this._currentUser)||void 0===p?void 0:p.toJSON()}}_setRedirectUser(p,g){var b=this;return(0,d.Z)(function*(){const T=yield b.getOrInitRedirectPersistenceManager(g);return null===p?T.removeCurrentUser():T.setCurrentUser(p)})()}getOrInitRedirectPersistenceManager(p){var g=this;return(0,d.Z)(function*(){if(!g.redirectPersistenceManager){const b=p&&$n(p)||g._popupRedirectResolver;re(b,g,"argument-error"),g.redirectPersistenceManager=yield B.create(g,[$n(b._redirectPersistence)],"redirectUser"),g.redirectUser=yield g.redirectPersistenceManager.getCurrentUser()}return g.redirectPersistenceManager})()}_redirectUserForId(p){var g=this;return(0,d.Z)(function*(){var b,T;return g._isInitialized&&(yield g.queue((0,d.Z)(function*(){}))),(null===(b=g._currentUser)||void 0===b?void 0:b._redirectEventId)===p?g._currentUser:(null===(T=g.redirectUser)||void 0===T?void 0:T._redirectEventId)===p?g.redirectUser:null})()}_persistUserIfCurrent(p){var g=this;return(0,d.Z)(function*(){if(p===g.currentUser)return g.queue((0,d.Z)(function*(){return g.directlySetCurrentUser(p)}))})()}_notifyListenersIfCurrent(p){p===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var p,g;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const b=null!==(g=null===(p=this.currentUser)||void 0===p?void 0:p.uid)&&void 0!==g?g:null;this.lastNotifiedUid!==b&&(this.lastNotifiedUid=b,this.authStateSubscription.next(this.currentUser))}registerStateListener(p,g,b,T){if(this._deleted)return()=>{};const k="function"==typeof g?g:g.next.bind(g),j=this._isInitialized?Promise.resolve():this._initializationPromise;return re(j,this,"internal-error"),j.then(()=>k(this.currentUser)),"function"==typeof g?p.addObserver(g,b,T):p.addObserver(g)}directlySetCurrentUser(p){var g=this;return(0,d.Z)(function*(){g.currentUser&&g.currentUser!==p&&g._currentUser._stopProactiveRefresh(),p&&g.isProactiveRefreshEnabled&&p._startProactiveRefresh(),g.currentUser=p,p?yield g.assertedPersistence.setCurrentUser(p):yield g.assertedPersistence.removeCurrentUser()})()}queue(p){return this.operations=this.operations.then(p,p),this.operations}get assertedPersistence(){return re(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(p){!p||this.frameworks.includes(p)||(this.frameworks.push(p),this.frameworks.sort(),this.clientVersion=oe(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}_getAdditionalHeaders(){var p=this;return(0,d.Z)(function*(){var g;const b={"X-Client-Version":p.clientVersion};p.app.options.appId&&(b["X-Firebase-gmpid"]=p.app.options.appId);const T=yield null===(g=p.heartbeatServiceProvider.getImmediate({optional:!0}))||void 0===g?void 0:g.getHeartbeatsHeader();T&&(b["X-Firebase-Client"]=T);const k=yield p._getAppCheckToken();return k&&(b["X-Firebase-AppCheck"]=k),b})()}_getAppCheckToken(){var p=this;return(0,d.Z)(function*(){var g;const b=yield null===(g=p.appCheckServiceProvider.getImmediate({optional:!0}))||void 0===g?void 0:g.getToken();return b?.error&&function St(y,...p){bt.logLevel<=fe.in.WARN&&bt.warn(`Auth (${ce.SDK_VERSION}): ${y}`,...p)}(`Error while retrieving App Check token: ${b.error}`),b?.token})()}}function In(y){return(0,P.m9)(y)}class Qs{constructor(p){this.auth=p,this.observer=null,this.addObserver=(0,P.ne)(g=>this.observer=g)}get next(){return re(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}function gr(y){const p=y.indexOf(":");return p<0?"":y.substr(0,p+1)}function Xs(y){if(!y)return null;const p=Number(y);return isNaN(p)?null:p}class Ds{constructor(p,g){this.providerId=p,this.signInMethod=g}toJSON(){return kt("not implemented")}_getIdTokenResponse(p){return kt("not implemented")}_linkToIdToken(p,g){return kt("not implemented")}_getReauthenticationResolver(p){return kt("not implemented")}}function Li(y,p){return $o.apply(this,arguments)}function $o(){return($o=(0,d.Z)(function*(y,p){return He(y,"POST","/v1/accounts:resetPassword",Vt(y,p))})).apply(this,arguments)}function rd(y,p){return Pc.apply(this,arguments)}function Pc(){return(Pc=(0,d.Z)(function*(y,p){return He(y,"POST","/v1/accounts:update",p)})).apply(this,arguments)}function id(y,p){return qh.apply(this,arguments)}function qh(){return(qh=(0,d.Z)(function*(y,p){return He(y,"POST","/v1/accounts:update",Vt(y,p))})).apply(this,arguments)}function Sn(y,p){return sd.apply(this,arguments)}function sd(){return(sd=(0,d.Z)(function*(y,p){return kn(y,"POST","/v1/accounts:signInWithPassword",Vt(y,p))})).apply(this,arguments)}function Nc(y,p){return od.apply(this,arguments)}function od(){return(od=(0,d.Z)(function*(y,p){return He(y,"POST","/v1/accounts:sendOobCode",Vt(y,p))})).apply(this,arguments)}function Wh(y,p){return ad.apply(this,arguments)}function ad(){return(ad=(0,d.Z)(function*(y,p){return Nc(y,p)})).apply(this,arguments)}function ml(y,p){return Kh.apply(this,arguments)}function Kh(){return(Kh=(0,d.Z)(function*(y,p){return Nc(y,p)})).apply(this,arguments)}function ld(y,p){return _l.apply(this,arguments)}function _l(){return(_l=(0,d.Z)(function*(y,p){return Nc(y,p)})).apply(this,arguments)}function vg(y,p){return cd.apply(this,arguments)}function cd(){return(cd=(0,d.Z)(function*(y,p){return Nc(y,p)})).apply(this,arguments)}function Fc(){return(Fc=(0,d.Z)(function*(y,p){return kn(y,"POST","/v1/accounts:signInWithEmailLink",Vt(y,p))})).apply(this,arguments)}function Zh(){return(Zh=(0,d.Z)(function*(y,p){return kn(y,"POST","/v1/accounts:signInWithEmailLink",Vt(y,p))})).apply(this,arguments)}class Lc extends Ds{constructor(p,g,b,T=null){super("password",b),this._email=p,this._password=g,this._tenantId=T}static _fromEmailAndPassword(p,g){return new Lc(p,g,"password")}static _fromEmailAndCode(p,g,b=null){return new Lc(p,g,"emailLink",b)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(p){const g="string"==typeof p?JSON.parse(p):p;if(g?.email&&g?.password){if("password"===g.signInMethod)return this._fromEmailAndPassword(g.email,g.password);if("emailLink"===g.signInMethod)return this._fromEmailAndCode(g.email,g.password,g.tenantId)}return null}_getIdTokenResponse(p){var g=this;return(0,d.Z)(function*(){var b;switch(g.signInMethod){case"password":const T={returnSecureToken:!0,email:g._email,password:g._password,clientType:"CLIENT_TYPE_WEB"};if(null!==(b=p._getRecaptchaConfig())&&void 0!==b&&b.emailPasswordEnabled){const k=yield as(p,T,"signInWithPassword");return Sn(p,k)}return Sn(p,T).catch(function(){var k=(0,d.Z)(function*(j){if("auth/missing-recaptcha-token"===j.code){console.log("Sign-in with email address and password is protected by reCAPTCHA for this project. Automatically triggering the reCAPTCHA flow and restarting the sign-in flow.");const X=yield as(p,T,"signInWithPassword");return Sn(p,X)}return Promise.reject(j)});return function(j){return k.apply(this,arguments)}}());case"emailLink":return function ud(y,p){return Fc.apply(this,arguments)}(p,{email:g._email,oobCode:g._password});default:Ce(p,"internal-error")}})()}_linkToIdToken(p,g){var b=this;return(0,d.Z)(function*(){switch(b.signInMethod){case"password":return rd(p,{idToken:g,returnSecureToken:!0,email:b._email,password:b._password});case"emailLink":return function dd(y,p){return Zh.apply(this,arguments)}(p,{idToken:g,email:b._email,oobCode:b._password});default:Ce(p,"internal-error")}})()}_getReauthenticationResolver(p){return this._getIdTokenResponse(p)}}function Vi(y,p){return Ss.apply(this,arguments)}function Ss(){return(Ss=(0,d.Z)(function*(y,p){return kn(y,"POST","/v1/accounts:signInWithIdp",Vt(y,p))})).apply(this,arguments)}class gi extends Ds{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(p){const g=new gi(p.providerId,p.signInMethod);return p.idToken||p.accessToken?(p.idToken&&(g.idToken=p.idToken),p.accessToken&&(g.accessToken=p.accessToken),p.nonce&&!p.pendingToken&&(g.nonce=p.nonce),p.pendingToken&&(g.pendingToken=p.pendingToken)):p.oauthToken&&p.oauthTokenSecret?(g.accessToken=p.oauthToken,g.secret=p.oauthTokenSecret):Ce("argument-error"),g}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(p){const g="string"==typeof p?JSON.parse(p):p,{providerId:b,signInMethod:T}=g,k=(0,le._T)(g,["providerId","signInMethod"]);if(!b||!T)return null;const j=new gi(b,T);return j.idToken=k.idToken||void 0,j.accessToken=k.accessToken||void 0,j.secret=k.secret,j.nonce=k.nonce,j.pendingToken=k.pendingToken||null,j}_getIdTokenResponse(p){return Vi(p,this.buildRequest())}_linkToIdToken(p,g){const b=this.buildRequest();return b.idToken=g,Vi(p,b)}_getReauthenticationResolver(p){const g=this.buildRequest();return g.autoCreate=!1,Vi(p,g)}buildRequest(){const p={requestUri:"http://localhost",returnSecureToken:!0};if(this.pendingToken)p.pendingToken=this.pendingToken;else{const g={};this.idToken&&(g.id_token=this.idToken),this.accessToken&&(g.access_token=this.accessToken),this.secret&&(g.oauth_token_secret=this.secret),g.providerId=this.providerId,this.nonce&&!this.pendingToken&&(g.nonce=this.nonce),p.postBody=(0,P.xO)(g)}return p}}function hd(y,p){return Ma.apply(this,arguments)}function Ma(){return(Ma=(0,d.Z)(function*(y,p){return He(y,"POST","/v1/accounts:sendVerificationCode",Vt(y,p))})).apply(this,arguments)}function yl(){return(yl=(0,d.Z)(function*(y,p){return kn(y,"POST","/v1/accounts:signInWithPhoneNumber",Vt(y,p))})).apply(this,arguments)}function Ts(){return(Ts=(0,d.Z)(function*(y,p){const g=yield kn(y,"POST","/v1/accounts:signInWithPhoneNumber",Vt(y,p));if(g.temporaryProof)throw Ir(y,"account-exists-with-different-credential",g);return g})).apply(this,arguments)}const vl={USER_NOT_FOUND:"user-not-found"};function vr(){return(vr=(0,d.Z)(function*(y,p){return kn(y,"POST","/v1/accounts:signInWithPhoneNumber",Vt(y,Object.assign(Object.assign({},p),{operation:"REAUTH"})),vl)})).apply(this,arguments)}class Vr extends Ds{constructor(p){super("phone","phone"),this.params=p}static _fromVerification(p,g){return new Vr({verificationId:p,verificationCode:g})}static _fromTokenResponse(p,g){return new Vr({phoneNumber:p,temporaryProof:g})}_getIdTokenResponse(p){return function Vc(y,p){return yl.apply(this,arguments)}(p,this._makeVerificationRequest())}_linkToIdToken(p,g){return function Qh(y,p){return Ts.apply(this,arguments)}(p,Object.assign({idToken:g},this._makeVerificationRequest()))}_getReauthenticationResolver(p){return function Xh(y,p){return vr.apply(this,arguments)}(p,this._makeVerificationRequest())}_makeVerificationRequest(){const{temporaryProof:p,phoneNumber:g,verificationId:b,verificationCode:T}=this.params;return p&&g?{temporaryProof:p,phoneNumber:g}:{sessionInfo:b,code:T}}toJSON(){const p={providerId:this.providerId};return this.params.phoneNumber&&(p.phoneNumber=this.params.phoneNumber),this.params.temporaryProof&&(p.temporaryProof=this.params.temporaryProof),this.params.verificationCode&&(p.verificationCode=this.params.verificationCode),this.params.verificationId&&(p.verificationId=this.params.verificationId),p}static fromJSON(p){"string"==typeof p&&(p=JSON.parse(p));const{verificationId:g,verificationCode:b,phoneNumber:T,temporaryProof:k}=p;return b||g||T||k?new Vr({verificationId:g,verificationCode:b,phoneNumber:T,temporaryProof:k}):null}}class wl{constructor(p){var g,b,T,k,j,X;const ke=(0,P.zd)((0,P.pd)(p)),Ge=null!==(g=ke.apiKey)&&void 0!==g?g:null,et=null!==(b=ke.oobCode)&&void 0!==b?b:null,lt=function Jh(y){switch(y){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}(null!==(T=ke.mode)&&void 0!==T?T:null);re(Ge&&et&&lt,"argument-error"),this.apiKey=Ge,this.operation=lt,this.code=et,this.continueUrl=null!==(k=ke.continueUrl)&&void 0!==k?k:null,this.languageCode=null!==(j=ke.languageCode)&&void 0!==j?j:null,this.tenantId=null!==(X=ke.tenantId)&&void 0!==X?X:null}static parseLink(p){const g=function bl(y){const p=(0,P.zd)((0,P.pd)(y)).link,g=p?(0,P.zd)((0,P.pd)(p)).deep_link_id:null,b=(0,P.zd)((0,P.pd)(y)).deep_link_id;return(b?(0,P.zd)((0,P.pd)(b)).link:null)||b||g||p||y}(p);try{return new wl(g)}catch{return null}}}let zn=(()=>{class y{constructor(){this.providerId=y.PROVIDER_ID}static credential(g,b){return Lc._fromEmailAndPassword(g,b)}static credentialWithLink(g,b){const T=wl.parseLink(b);return re(T,"argument-error"),Lc._fromEmailAndCode(g,T.code,T.tenantId)}}return y.PROVIDER_ID="password",y.EMAIL_PASSWORD_SIGN_IN_METHOD="password",y.EMAIL_LINK_SIGN_IN_METHOD="emailLink",y})();class As{constructor(p){this.providerId=p,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(p){this.defaultLanguageCode=p}setCustomParameters(p){return this.customParameters=p,this}getCustomParameters(){return this.customParameters}}class El extends As{constructor(){super(...arguments),this.scopes=[]}addScope(p){return this.scopes.includes(p)||this.scopes.push(p),this}getScopes(){return[...this.scopes]}}class mi extends El{static credentialFromJSON(p){const g="string"==typeof p?JSON.parse(p):p;return re("providerId"in g&&"signInMethod"in g,"argument-error"),gi._fromParams(g)}credential(p){return this._credential(Object.assign(Object.assign({},p),{nonce:p.rawNonce}))}_credential(p){return re(p.idToken||p.accessToken,"argument-error"),gi._fromParams(Object.assign(Object.assign({},p),{providerId:this.providerId,signInMethod:this.providerId}))}static credentialFromResult(p){return mi.oauthCredentialFromTaggedObject(p)}static credentialFromError(p){return mi.oauthCredentialFromTaggedObject(p.customData||{})}static oauthCredentialFromTaggedObject({_tokenResponse:p}){if(!p)return null;const{oauthIdToken:g,oauthAccessToken:b,oauthTokenSecret:T,pendingToken:k,nonce:j,providerId:X}=p;if(!b&&!T&&!g&&!k||!X)return null;try{return new mi(X)._credential({idToken:g,accessToken:b,nonce:j,pendingToken:k})}catch{return null}}}let Qr=(()=>{class y extends El{constructor(){super("facebook.com")}static credential(g){return gi._fromParams({providerId:y.PROVIDER_ID,signInMethod:y.FACEBOOK_SIGN_IN_METHOD,accessToken:g})}static credentialFromResult(g){return y.credentialFromTaggedObject(g)}static credentialFromError(g){return y.credentialFromTaggedObject(g.customData||{})}static credentialFromTaggedObject({_tokenResponse:g}){if(!g||!("oauthAccessToken"in g)||!g.oauthAccessToken)return null;try{return y.credential(g.oauthAccessToken)}catch{return null}}}return y.FACEBOOK_SIGN_IN_METHOD="facebook.com",y.PROVIDER_ID="facebook.com",y})(),Bc=(()=>{class y extends El{constructor(){super("google.com"),this.addScope("profile")}static credential(g,b){return gi._fromParams({providerId:y.PROVIDER_ID,signInMethod:y.GOOGLE_SIGN_IN_METHOD,idToken:g,accessToken:b})}static credentialFromResult(g){return y.credentialFromTaggedObject(g)}static credentialFromError(g){return y.credentialFromTaggedObject(g.customData||{})}static credentialFromTaggedObject({_tokenResponse:g}){if(!g)return null;const{oauthIdToken:b,oauthAccessToken:T}=g;if(!b&&!T)return null;try{return y.credential(b,T)}catch{return null}}}return y.GOOGLE_SIGN_IN_METHOD="google.com",y.PROVIDER_ID="google.com",y})(),Cl=(()=>{class y extends El{constructor(){super("github.com")}static credential(g){return gi._fromParams({providerId:y.PROVIDER_ID,signInMethod:y.GITHUB_SIGN_IN_METHOD,accessToken:g})}static credentialFromResult(g){return y.credentialFromTaggedObject(g)}static credentialFromError(g){return y.credentialFromTaggedObject(g.customData||{})}static credentialFromTaggedObject({_tokenResponse:g}){if(!g||!("oauthAccessToken"in g)||!g.oauthAccessToken)return null;try{return y.credential(g.oauthAccessToken)}catch{return null}}}return y.GITHUB_SIGN_IN_METHOD="github.com",y.PROVIDER_ID="github.com",y})();class Gn extends Ds{constructor(p,g){super(p,p),this.pendingToken=g}_getIdTokenResponse(p){return Vi(p,this.buildRequest())}_linkToIdToken(p,g){const b=this.buildRequest();return b.idToken=g,Vi(p,b)}_getReauthenticationResolver(p){const g=this.buildRequest();return g.autoCreate=!1,Vi(p,g)}toJSON(){return{signInMethod:this.signInMethod,providerId:this.providerId,pendingToken:this.pendingToken}}static fromJSON(p){const g="string"==typeof p?JSON.parse(p):p,{providerId:b,signInMethod:T,pendingToken:k}=g;return b&&T&&k&&b===T?new Gn(b,k):null}static _create(p,g){return new Gn(p,g)}buildRequest(){return{requestUri:"http://localhost",returnSecureToken:!0,pendingToken:this.pendingToken}}}class po extends As{constructor(p){re(p.startsWith("saml."),"argument-error"),super(p)}static credentialFromResult(p){return po.samlCredentialFromTaggedObject(p)}static credentialFromError(p){return po.samlCredentialFromTaggedObject(p.customData||{})}static credentialFromJSON(p){const g=Gn.fromJSON(p);return re(g,"argument-error"),g}static samlCredentialFromTaggedObject({_tokenResponse:p}){if(!p)return null;const{pendingToken:g,providerId:b}=p;if(!g||!b)return null;try{return Gn._create(b,g)}catch{return null}}}let Uc=(()=>{class y extends El{constructor(){super("twitter.com")}static credential(g,b){return gi._fromParams({providerId:y.PROVIDER_ID,signInMethod:y.TWITTER_SIGN_IN_METHOD,oauthToken:g,oauthTokenSecret:b})}static credentialFromResult(g){return y.credentialFromTaggedObject(g)}static credentialFromError(g){return y.credentialFromTaggedObject(g.customData||{})}static credentialFromTaggedObject({_tokenResponse:g}){if(!g)return null;const{oauthAccessToken:b,oauthTokenSecret:T}=g;if(!b||!T)return null;try{return y.credential(b,T)}catch{return null}}}return y.TWITTER_SIGN_IN_METHOD="twitter.com",y.PROVIDER_ID="twitter.com",y})();function ii(y,p){return Js.apply(this,arguments)}function Js(){return(Js=(0,d.Z)(function*(y,p){return kn(y,"POST","/v1/accounts:signUp",Vt(y,p))})).apply(this,arguments)}class xr{constructor(p){this.user=p.user,this.providerId=p.providerId,this._tokenResponse=p._tokenResponse,this.operationType=p.operationType}static _fromIdTokenResponse(p,g,b,T=!1){return(0,d.Z)(function*(){const k=yield Tr._fromIdTokenResponse(p,b,T),j=Rt(b);return new xr({user:k,providerId:j,_tokenResponse:b,operationType:g})})()}static _forOperation(p,g,b){return(0,d.Z)(function*(){yield p._updateTokensIfNecessary(b,!0);const T=Rt(b);return new xr({user:p,providerId:T,_tokenResponse:b,operationType:g})})()}}function Rt(y){return y.providerId?y.providerId:"phoneNumber"in y?"phone":null}function pd(){return(pd=(0,d.Z)(function*(y){var p;const g=In(y);if(yield g._initializationPromise,null!==(p=g.currentUser)&&void 0!==p&&p.isAnonymous)return new xr({user:g.currentUser,providerId:null,operationType:"signIn"});const b=yield ii(g,{returnSecureToken:!0}),T=yield xr._fromIdTokenResponse(g,"signIn",b,!0);return yield g._updateCurrentUser(T.user),T})).apply(this,arguments)}class xa extends P.ZR{constructor(p,g,b,T){var k;super(g.code,g.message),this.operationType=b,this.user=T,Object.setPrototypeOf(this,xa.prototype),this.customData={appName:p.name,tenantId:null!==(k=p.tenantId)&&void 0!==k?k:void 0,_serverResponse:g.customData._serverResponse,operationType:b}}static _fromErrorAndOperation(p,g,b,T){return new xa(p,g,b,T)}}function gd(y,p,g,b){return("reauthenticate"===p?g._getReauthenticationResolver(y):g._getIdTokenResponse(y)).catch(k=>{throw"auth/multi-factor-auth-required"===k.code?xa._fromErrorAndOperation(y,k,p,b):k})}function md(y){return new Set(y.map(({providerId:p})=>p).filter(p=>!!p))}function Bi(){return(Bi=(0,d.Z)(function*(y,p){const g=(0,P.m9)(y);yield Wt(!0,g,p);const{providerUserInfo:b}=yield Ta(g.auth,{idToken:yield g.getIdToken(),deleteProvider:[p]}),T=md(b||[]);return g.providerData=g.providerData.filter(k=>T.has(k.providerId)),T.has("phone")||(g.phoneNumber=null),yield g.auth._persistUserIfCurrent(g),g})).apply(this,arguments)}function Il(y,p){return Te.apply(this,arguments)}function Te(){return(Te=(0,d.Z)(function*(y,p,g=!1){const b=yield it(y,p._linkToIdToken(y.auth,yield y.getIdToken()),g);return xr._forOperation(y,"link",b)})).apply(this,arguments)}function Wt(y,p,g){return Dl.apply(this,arguments)}function Dl(){return(Dl=(0,d.Z)(function*(y,p,g){yield tr(p);const T=!1===y?"provider-already-linked":"no-such-provider";re(md(p.providerData).has(g)===y,p.auth,T)})).apply(this,arguments)}function Hc(y,p){return Bn.apply(this,arguments)}function Bn(){return(Bn=(0,d.Z)(function*(y,p,g=!1){const{auth:b}=y,T="reauthenticate";try{const k=yield it(y,gd(b,T,p,y),g);re(k.idToken,b,"internal-error");const j=An(k.idToken);re(j,b,"internal-error");const{sub:X}=j;return re(y.uid===X,b,"user-mismatch"),xr._forOperation(y,T,k)}catch(k){throw"auth/user-not-found"===k?.code&&Ce(b,"user-mismatch"),k}})).apply(this,arguments)}function Sl(y,p){return go.apply(this,arguments)}function go(){return(go=(0,d.Z)(function*(y,p,g=!1){const b="signIn",T=yield gd(y,b,p),k=yield xr._fromIdTokenResponse(y,b,T);return g||(yield y._updateCurrentUser(k.user)),k})).apply(this,arguments)}function si(y,p){return Go.apply(this,arguments)}function Go(){return(Go=(0,d.Z)(function*(y,p){return Sl(In(y),p)})).apply(this,arguments)}function jc(y,p){return $c.apply(this,arguments)}function $c(){return($c=(0,d.Z)(function*(y,p){const g=(0,P.m9)(y);return yield Wt(!1,g,p.providerId),Il(g,p)})).apply(this,arguments)}function Un(y,p){return ef.apply(this,arguments)}function ef(){return(ef=(0,d.Z)(function*(y,p){return Hc((0,P.m9)(y),p)})).apply(this,arguments)}function tf(y,p){return Br.apply(this,arguments)}function Br(){return(Br=(0,d.Z)(function*(y,p){return kn(y,"POST","/v1/accounts:signInWithCustomToken",Vt(y,p))})).apply(this,arguments)}function Ui(){return(Ui=(0,d.Z)(function*(y,p){const g=In(y),b=yield tf(g,{token:p,returnSecureToken:!0}),T=yield xr._fromIdTokenResponse(g,"signIn",b);return yield g._updateCurrentUser(T.user),T})).apply(this,arguments)}class Ms{constructor(p,g){this.factorId=p,this.uid=g.mfaEnrollmentId,this.enrollmentTime=new Date(g.enrolledAt).toUTCString(),this.displayName=g.displayName}static _fromServerResponse(p,g){return"phoneInfo"in g?ai._fromServerResponse(p,g):"totpInfo"in g?yd._fromServerResponse(p,g):Ce(p,"internal-error")}}class ai extends Ms{constructor(p){super("phone",p),this.phoneNumber=p.phoneInfo}static _fromServerResponse(p,g){return new ai(g)}}class yd extends Ms{constructor(p){super("totp",p)}static _fromServerResponse(p,g){return new yd(g)}}function mo(y,p,g){var b;re((null===(b=g.url)||void 0===b?void 0:b.length)>0,y,"invalid-continue-uri"),re(typeof g.dynamicLinkDomain>"u"||g.dynamicLinkDomain.length>0,y,"invalid-dynamic-link-domain"),p.continueUrl=g.url,p.dynamicLinkDomain=g.dynamicLinkDomain,p.canHandleCodeInApp=g.handleCodeInApp,g.iOS&&(re(g.iOS.bundleId.length>0,y,"missing-ios-bundle-id"),p.iOSBundleId=g.iOS.bundleId),g.android&&(re(g.android.packageName.length>0,y,"missing-android-pkg-name"),p.androidInstallApp=g.android.installApp,p.androidMinimumVersionCode=g.android.minimumVersion,p.androidPackageName=g.android.packageName)}function qo(){return qo=(0,d.Z)(function*(y,p,g){var b;const T=In(y),k={requestType:"PASSWORD_RESET",email:p,clientType:"CLIENT_TYPE_WEB"};if(null!==(b=T._getRecaptchaConfig())&&void 0!==b&&b.emailPasswordEnabled){const j=yield as(T,k,"getOobCode",!0);g&&mo(T,j,g),yield ml(T,j)}else g&&mo(T,k,g),yield ml(T,k).catch(function(){var j=(0,d.Z)(function*(X){if("auth/missing-recaptcha-token"!==X.code)return Promise.reject(X);{console.log("Password resets are protected by reCAPTCHA for this project. Automatically triggering the reCAPTCHA flow and restarting the password reset flow.");const ke=yield as(T,k,"getOobCode",!0);g&&mo(T,ke,g),yield ml(T,ke)}});return function(X){return j.apply(this,arguments)}}())}),qo.apply(this,arguments)}function Ra(){return(Ra=(0,d.Z)(function*(y,p,g){yield Li((0,P.m9)(y),{oobCode:p,newPassword:g})})).apply(this,arguments)}function Ur(){return(Ur=(0,d.Z)(function*(y,p){yield id((0,P.m9)(y),{oobCode:p})})).apply(this,arguments)}function Gc(y,p){return ka.apply(this,arguments)}function ka(){return(ka=(0,d.Z)(function*(y,p){const g=(0,P.m9)(y),b=yield Li(g,{oobCode:p}),T=b.requestType;switch(re(T,g,"internal-error"),T){case"EMAIL_SIGNIN":break;case"VERIFY_AND_CHANGE_EMAIL":re(b.newEmail,g,"internal-error");break;case"REVERT_SECOND_FACTOR_ADDITION":re(b.mfaInfo,g,"internal-error");default:re(b.email,g,"internal-error")}let k=null;return b.mfaInfo&&(k=Ms._fromServerResponse(In(g),b.mfaInfo)),{data:{email:("VERIFY_AND_CHANGE_EMAIL"===b.requestType?b.newEmail:b.email)||null,previousEmail:("VERIFY_AND_CHANGE_EMAIL"===b.requestType?b.email:b.newEmail)||null,multiFactorInfo:k},operation:T}})).apply(this,arguments)}function _o(){return(_o=(0,d.Z)(function*(y,p){const{data:g}=yield Gc((0,P.m9)(y),p);return g.email})).apply(this,arguments)}function Pa(){return Pa=(0,d.Z)(function*(y,p,g){var b;const T=In(y),k={returnSecureToken:!0,email:p,password:g,clientType:"CLIENT_TYPE_WEB"};let j;if(null!==(b=T._getRecaptchaConfig())&&void 0!==b&&b.emailPasswordEnabled){const Ge=yield as(T,k,"signUpPassword");j=ii(T,Ge)}else j=ii(T,k).catch(function(){var Ge=(0,d.Z)(function*(et){if("auth/missing-recaptcha-token"===et.code){console.log("Sign-up is protected by reCAPTCHA for this project. Automatically triggering the reCAPTCHA flow and restarting the sign-up flow.");const lt=yield as(T,k,"signUpPassword");return ii(T,lt)}return Promise.reject(et)});return function(et){return Ge.apply(this,arguments)}}());const X=yield j.catch(Ge=>Promise.reject(Ge)),ke=yield xr._fromIdTokenResponse(T,"signIn",X);return yield T._updateCurrentUser(ke.user),ke}),Pa.apply(this,arguments)}function Al(){return Al=(0,d.Z)(function*(y,p,g){var b;const T=In(y),k={requestType:"EMAIL_SIGNIN",email:p,clientType:"CLIENT_TYPE_WEB"};function j(X,ke){re(ke.handleCodeInApp,T,"argument-error"),ke&&mo(T,X,ke)}if(null!==(b=T._getRecaptchaConfig())&&void 0!==b&&b.emailPasswordEnabled){const X=yield as(T,k,"getOobCode",!0);j(X,g),yield ld(T,X)}else j(k,g),yield ld(T,k).catch(function(){var X=(0,d.Z)(function*(ke){if("auth/missing-recaptcha-token"!==ke.code)return Promise.reject(ke);{console.log("Email link sign-in is protected by reCAPTCHA for this project. Automatically triggering the reCAPTCHA flow and restarting the sign-in flow.");const Ge=yield as(T,k,"getOobCode",!0);j(Ge,g),yield ld(T,Ge)}});return function(ke){return X.apply(this,arguments)}}())}),Al.apply(this,arguments)}function xs(){return(xs=(0,d.Z)(function*(y,p,g){const b=(0,P.m9)(y),T=zn.credentialWithLink(p,g||Qt());return re(T._tenantId===(b.tenantId||null),b,"tenant-id-mismatch"),si(b,T)})).apply(this,arguments)}function Mn(y,p){return Wc.apply(this,arguments)}function Wc(){return(Wc=(0,d.Z)(function*(y,p){return He(y,"POST","/v1/accounts:createAuthUri",Vt(y,p))})).apply(this,arguments)}function Kc(){return(Kc=(0,d.Z)(function*(y,p){const b={identifier:p,continueUri:ut()?Qt():"http://localhost"},{signinMethods:T}=yield Mn((0,P.m9)(y),b);return T||[]})).apply(this,arguments)}function Ml(){return(Ml=(0,d.Z)(function*(y,p){const g=(0,P.m9)(y),T={requestType:"VERIFY_EMAIL",idToken:yield y.getIdToken()};p&&mo(g.auth,T,p);const{email:k}=yield Wh(g.auth,T);k!==y.email&&(yield y.reload())})).apply(this,arguments)}function yo(){return(yo=(0,d.Z)(function*(y,p,g){const b=(0,P.m9)(y),k={requestType:"VERIFY_AND_CHANGE_EMAIL",idToken:yield y.getIdToken(),newEmail:p};g&&mo(b.auth,k,g);const{email:j}=yield vg(b.auth,k);j!==y.email&&(yield y.reload())})).apply(this,arguments)}function Na(y,p){return Ko.apply(this,arguments)}function Ko(){return(Ko=(0,d.Z)(function*(y,p){return He(y,"POST","/v1/accounts:update",p)})).apply(this,arguments)}function Fa(){return(Fa=(0,d.Z)(function*(y,{displayName:p,photoURL:g}){if(void 0===p&&void 0===g)return;const b=(0,P.m9)(y),k={idToken:yield b.getIdToken(),displayName:p,photoUrl:g,returnSecureToken:!0},j=yield it(b,Na(b.auth,k));b.displayName=j.displayName||null,b.photoURL=j.photoUrl||null;const X=b.providerData.find(({providerId:ke})=>"password"===ke);X&&(X.displayName=b.displayName,X.photoURL=b.photoURL),yield b._updateTokensIfNecessary(j)})).apply(this,arguments)}function La(y,p,g){return xl.apply(this,arguments)}function xl(){return(xl=(0,d.Z)(function*(y,p,g){const{auth:b}=y,k={idToken:yield y.getIdToken(),returnSecureToken:!0};p&&(k.email=p),g&&(k.password=g);const j=yield it(y,rd(b,k));yield y._updateTokensIfNecessary(j,!0)})).apply(this,arguments)}class Hi{constructor(p,g,b={}){this.isNewUser=p,this.providerId=g,this.profile=b}}class Yc extends Hi{constructor(p,g,b,T){super(p,g,b),this.username=T}}class Cd extends Hi{constructor(p,g){super(p,"facebook.com",g)}}class sf extends Yc{constructor(p,g){super(p,"github.com",g,"string"==typeof g?.login?g?.login:null)}}class Qc extends Hi{constructor(p,g){super(p,"google.com",g)}}class Rl extends Yc{constructor(p,g,b){super(p,"twitter.com",g,b)}}function kl(y){const{user:p,_tokenResponse:g}=y;return p.isAnonymous&&!g?{providerId:null,isNewUser:!1,profile:null}:function rf(y){var p,g;if(!y)return null;const{providerId:b}=y,T=y.rawUserInfo?JSON.parse(y.rawUserInfo):{},k=y.isNewUser||"identitytoolkit#SignupNewUserResponse"===y.kind;if(!b&&y?.idToken){const j=null===(g=null===(p=An(y.idToken))||void 0===p?void 0:p.firebase)||void 0===g?void 0:g.sign_in_provider;if(j)return new Hi(k,"anonymous"!==j&&"custom"!==j?j:null)}if(!b)return null;switch(b){case"facebook.com":return new Cd(k,T);case"github.com":return new sf(k,T);case"google.com":return new Qc(k,T);case"twitter.com":return new Rl(k,T,y.screenName||null);case"custom":case"anonymous":return new Hi(k,null);default:return new Hi(k,b,T)}}(g)}class vo{constructor(p,g,b){this.type=p,this.credential=g,this.auth=b}static _fromIdtoken(p,g){return new vo("enroll",p,g)}static _fromMfaPendingCredential(p){return new vo("signin",p)}toJSON(){return{multiFactorSession:{["enroll"===this.type?"idToken":"pendingCredential"]:this.credential}}}static fromJSON(p){var g,b;if(p?.multiFactorSession){if(null!==(g=p.multiFactorSession)&&void 0!==g&&g.pendingCredential)return vo._fromMfaPendingCredential(p.multiFactorSession.pendingCredential);if(null!==(b=p.multiFactorSession)&&void 0!==b&&b.idToken)return vo._fromIdtoken(p.multiFactorSession.idToken)}return null}}class cs{constructor(p,g,b){this.session=p,this.hints=g,this.signInResolver=b}static _fromError(p,g){const b=In(p),T=g.customData._serverResponse,k=(T.mfaInfo||[]).map(X=>Ms._fromServerResponse(b,X));re(T.mfaPendingCredential,b,"internal-error");const j=vo._fromMfaPendingCredential(T.mfaPendingCredential);return new cs(j,k,function(){var X=(0,d.Z)(function*(ke){const Ge=yield ke._process(b,j);delete T.mfaInfo,delete T.mfaPendingCredential;const et=Object.assign(Object.assign({},T),{idToken:Ge.idToken,refreshToken:Ge.refreshToken});switch(g.operationType){case"signIn":const lt=yield xr._fromIdTokenResponse(b,g.operationType,et);return yield b._updateCurrentUser(lt.user),lt;case"reauthenticate":return re(g.user,b,"internal-error"),xr._forOperation(g.user,g.operationType,et);default:Ce(b,"internal-error")}});return function(ke){return X.apply(this,arguments)}}())}resolveSignIn(p){var g=this;return(0,d.Z)(function*(){return g.signInResolver(p)})()}}function Ua(y,p){return He(y,"POST","/v2/accounts/mfaEnrollment:start",Vt(y,p))}class bo{constructor(p){this.user=p,this.enrolledFactors=[],p._onReload(g=>{g.mfaInfo&&(this.enrolledFactors=g.mfaInfo.map(b=>Ms._fromServerResponse(p.auth,b)))})}static _fromUser(p){return new bo(p)}getSession(){var p=this;return(0,d.Z)(function*(){return vo._fromIdtoken(yield p.user.getIdToken(),p.user.auth)})()}enroll(p,g){var b=this;return(0,d.Z)(function*(){const T=p,k=yield b.getSession(),j=yield it(b.user,T._process(b.user.auth,k,g));return yield b.user._updateTokensIfNecessary(j),b.user.reload()})()}unenroll(p){var g=this;return(0,d.Z)(function*(){const b="string"==typeof p?p:p.uid,T=yield g.user.getIdToken();try{const k=yield it(g.user,function eu(y,p){return He(y,"POST","/v2/accounts/mfaEnrollment:withdraw",Vt(y,p))}(g.user.auth,{idToken:T,mfaEnrollmentId:b}));g.enrolledFactors=g.enrolledFactors.filter(({uid:j})=>j!==b),yield g.user._updateTokensIfNecessary(k),yield g.user.reload()}catch(k){throw k}})()}}const wo=new WeakMap,Eo="__sak";class Nl{constructor(p,g){this.storageRetriever=p,this.type=g}_isAvailable(){try{return this.storage?(this.storage.setItem(Eo,"1"),this.storage.removeItem(Eo),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(p,g){return this.storage.setItem(p,JSON.stringify(g)),Promise.resolve()}_get(p){const g=this.storage.getItem(p);return Promise.resolve(g?JSON.parse(g):null)}_remove(p){return this.storage.removeItem(p),Promise.resolve()}get storage(){return this.storageRetriever()}}const us=(()=>{class y extends Nl{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(g,b)=>this.onStorageEvent(g,b),this.listeners={},this.localCache={},this.pollTimer=null,this.safariLocalStorageNotSynced=function cf(){const y=(0,P.z$)();return J(y)||dt(y)}()&&function Fi(){try{return!(!window||window===window.top)}catch{return!1}}(),this.fallbackToPolling=wn(),this._shouldAllowMigration=!0}forAllChangedKeys(g){for(const b of Object.keys(this.listeners)){const T=this.storage.getItem(b),k=this.localCache[b];T!==k&&g(b,k,T)}}onStorageEvent(g,b=!1){if(!g.key)return void this.forAllChangedKeys((X,ke,Ge)=>{this.notifyListeners(X,Ge)});const T=g.key;if(b?this.detachListener():this.stopPolling(),this.safariLocalStorageNotSynced){const X=this.storage.getItem(T);if(g.newValue!==X)null!==g.newValue?this.storage.setItem(T,g.newValue):this.storage.removeItem(T);else if(this.localCache[T]===g.newValue&&!b)return}const k=()=>{const X=this.storage.getItem(T);!b&&this.localCache[T]===X||this.notifyListeners(T,X)},j=this.storage.getItem(T);!function Ar(){return(0,P.w1)()&&10===document.documentMode}()||j===g.newValue||g.newValue===g.oldValue?k():setTimeout(k,10)}notifyListeners(g,b){this.localCache[g]=b;const T=this.listeners[g];if(T)for(const k of Array.from(T))k(b&&JSON.parse(b))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((g,b,T)=>{this.onStorageEvent(new StorageEvent("storage",{key:g,oldValue:b,newValue:T}),!0)})},1e3)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(g,b){0===Object.keys(this.listeners).length&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[g]||(this.listeners[g]=new Set,this.localCache[g]=this.storage.getItem(g)),this.listeners[g].add(b)}_removeListener(g,b){this.listeners[g]&&(this.listeners[g].delete(b),0===this.listeners[g].size&&delete this.listeners[g]),0===Object.keys(this.listeners).length&&(this.detachListener(),this.stopPolling())}_set(g,b){var T=()=>super._set,k=this;return(0,d.Z)(function*(){yield T().call(k,g,b),k.localCache[g]=JSON.stringify(b)})()}_get(g){var b=()=>super._get,T=this;return(0,d.Z)(function*(){const k=yield b().call(T,g);return T.localCache[g]=JSON.stringify(k),k})()}_remove(g){var b=()=>super._remove,T=this;return(0,d.Z)(function*(){yield b().call(T,g),delete T.localCache[g]})()}}return y.type="LOCAL",y})(),Co=(()=>{class y extends Nl{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(g,b){}_removeListener(g,b){}}return y.type="SESSION",y})();let Fl=(()=>{class y{constructor(g){this.eventTarget=g,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(g){const b=this.receivers.find(k=>k.isListeningto(g));if(b)return b;const T=new y(g);return this.receivers.push(T),T}isListeningto(g){return this.eventTarget===g}handleEvent(g){var b=this;return(0,d.Z)(function*(){const T=g,{eventId:k,eventType:j,data:X}=T.data,ke=b.handlersMap[j];if(!ke?.size)return;T.ports[0].postMessage({status:"ack",eventId:k,eventType:j});const Ge=Array.from(ke).map(function(){var lt=(0,d.Z)(function*(Nn){return Nn(T.origin,X)});return function(Nn){return lt.apply(this,arguments)}}()),et=yield function uf(y){return Promise.all(y.map(function(){var p=(0,d.Z)(function*(g){try{return{fulfilled:!0,value:yield g}}catch(b){return{fulfilled:!1,reason:b}}});return function(g){return p.apply(this,arguments)}}()))}(Ge);T.ports[0].postMessage({status:"done",eventId:k,eventType:j,response:et})})()}_subscribe(g,b){0===Object.keys(this.handlersMap).length&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[g]||(this.handlersMap[g]=new Set),this.handlersMap[g].add(b)}_unsubscribe(g,b){this.handlersMap[g]&&b&&this.handlersMap[g].delete(b),(!b||0===this.handlersMap[g].size)&&delete this.handlersMap[g],0===Object.keys(this.handlersMap).length&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}return y.receivers=[],y})();function ds(y="",p=10){let g="";for(let b=0;b<p;b++)g+=Math.floor(10*Math.random());return y+g}class Ig{constructor(p){this.target=p,this.handlers=new Set}removeMessageHandler(p){p.messageChannel&&(p.messageChannel.port1.removeEventListener("message",p.onMessage),p.messageChannel.port1.close()),this.handlers.delete(p)}_send(p,g,b=50){var T=this;return(0,d.Z)(function*(){const k=typeof MessageChannel<"u"?new MessageChannel:null;if(!k)throw new Error("connection_unavailable");let j,X;return new Promise((ke,Ge)=>{const et=ds("",20);k.port1.start();const lt=setTimeout(()=>{Ge(new Error("unsupported_event"))},b);X={messageChannel:k,onMessage(Nn){const Zi=Nn;if(Zi.data.eventId===et)switch(Zi.data.status){case"ack":clearTimeout(lt),j=setTimeout(()=>{Ge(new Error("timeout"))},3e3);break;case"done":clearTimeout(j),ke(Zi.data.response);break;default:clearTimeout(lt),clearTimeout(j),Ge(new Error("invalid_response"))}}},T.handlers.add(X),k.port1.addEventListener("message",X.onMessage),T.target.postMessage({eventType:p,eventId:et,data:g},[k.port2])}).finally(()=>{X&&T.removeMessageHandler(X)})})()}}function xn(){return window}function $a(){return typeof xn().WorkerGlobalScope<"u"&&"function"==typeof xn().importScripts}function Ll(){return(Ll=(0,d.Z)(function*(){if(!navigator?.serviceWorker)return null;try{return(yield navigator.serviceWorker.ready).active}catch{return null}})).apply(this,arguments)}const Io="firebaseLocalStorageDb",Jo="firebaseLocalStorage",Ps="fbase_key";class Vl{constructor(p){this.request=p}toPromise(){return new Promise((p,g)=>{this.request.addEventListener("success",()=>{p(this.request.result)}),this.request.addEventListener("error",()=>{g(this.request.error)})})}}function za(y,p){return y.transaction([Jo],p?"readwrite":"readonly").objectStore(Jo)}function nu(){const y=indexedDB.open(Io,1);return new Promise((p,g)=>{y.addEventListener("error",()=>{g(y.error)}),y.addEventListener("upgradeneeded",()=>{const b=y.result;try{b.createObjectStore(Jo,{keyPath:Ps})}catch(T){g(T)}}),y.addEventListener("success",(0,d.Z)(function*(){const b=y.result;b.objectStoreNames.contains(Jo)?p(b):(b.close(),yield function mn(){const y=indexedDB.deleteDatabase(Io);return new Vl(y).toPromise()}(),p(yield nu()))}))})}function Bl(y,p,g){return hf.apply(this,arguments)}function hf(){return(hf=(0,d.Z)(function*(y,p,g){const b=za(y,!0).put({[Ps]:p,value:g});return new Vl(b).toPromise()})).apply(this,arguments)}function ff(){return(ff=(0,d.Z)(function*(y,p){const g=za(y,!1).get(p),b=yield new Vl(g).toPromise();return void 0===b?null:b.value})).apply(this,arguments)}function pf(y,p){const g=za(y,!0).delete(p);return new Vl(g).toPromise()}const Ul=(()=>{class y{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}_openDb(){var g=this;return(0,d.Z)(function*(){return g.db||(g.db=yield nu()),g.db})()}_withRetries(g){var b=this;return(0,d.Z)(function*(){let T=0;for(;;)try{const k=yield b._openDb();return yield g(k)}catch(k){if(T++>3)throw k;b.db&&(b.db.close(),b.db=void 0)}})()}initializeServiceWorkerMessaging(){var g=this;return(0,d.Z)(function*(){return $a()?g.initializeReceiver():g.initializeSender()})()}initializeReceiver(){var g=this;return(0,d.Z)(function*(){g.receiver=Fl._getInstance(function Hn(){return $a()?self:null}()),g.receiver._subscribe("keyChanged",function(){var b=(0,d.Z)(function*(T,k){return{keyProcessed:(yield g._poll()).includes(k.key)}});return function(T,k){return b.apply(this,arguments)}}()),g.receiver._subscribe("ping",function(){var b=(0,d.Z)(function*(T,k){return["keyChanged"]});return function(T,k){return b.apply(this,arguments)}}())})()}initializeSender(){var g=this;return(0,d.Z)(function*(){var b,T;if(g.activeServiceWorker=yield function df(){return Ll.apply(this,arguments)}(),!g.activeServiceWorker)return;g.sender=new Ig(g.activeServiceWorker);const k=yield g.sender._send("ping",{},800);!k||(null===(b=k[0])||void 0===b?void 0:b.fulfilled)&&(null===(T=k[0])||void 0===T?void 0:T.value.includes("keyChanged"))&&(g.serviceWorkerReceiverAvailable=!0)})()}notifyServiceWorker(g){var b=this;return(0,d.Z)(function*(){if(b.sender&&b.activeServiceWorker&&function Os(){var y;return(null===(y=navigator?.serviceWorker)||void 0===y?void 0:y.controller)||null}()===b.activeServiceWorker)try{yield b.sender._send("keyChanged",{key:g},b.serviceWorkerReceiverAvailable?800:50)}catch{}})()}_isAvailable(){return(0,d.Z)(function*(){try{if(!indexedDB)return!1;const g=yield nu();return yield Bl(g,Eo,"1"),yield pf(g,Eo),!0}catch{}return!1})()}_withPendingWrite(g){var b=this;return(0,d.Z)(function*(){b.pendingWrites++;try{yield g()}finally{b.pendingWrites--}})()}_set(g,b){var T=this;return(0,d.Z)(function*(){return T._withPendingWrite((0,d.Z)(function*(){return yield T._withRetries(k=>Bl(k,g,b)),T.localCache[g]=b,T.notifyServiceWorker(g)}))})()}_get(g){var b=this;return(0,d.Z)(function*(){const T=yield b._withRetries(k=>function Dd(y,p){return ff.apply(this,arguments)}(k,g));return b.localCache[g]=T,T})()}_remove(g){var b=this;return(0,d.Z)(function*(){return b._withPendingWrite((0,d.Z)(function*(){return yield b._withRetries(T=>pf(T,g)),delete b.localCache[g],b.notifyServiceWorker(g)}))})()}_poll(){var g=this;return(0,d.Z)(function*(){const b=yield g._withRetries(j=>{const X=za(j,!1).getAll();return new Vl(X).toPromise()});if(!b)return[];if(0!==g.pendingWrites)return[];const T=[],k=new Set;for(const{fbase_key:j,value:X}of b)k.add(j),JSON.stringify(g.localCache[j])!==JSON.stringify(X)&&(g.notifyListeners(j,X),T.push(j));for(const j of Object.keys(g.localCache))g.localCache[j]&&!k.has(j)&&(g.notifyListeners(j,null),T.push(j));return T})()}notifyListeners(g,b){this.localCache[g]=b;const T=this.listeners[g];if(T)for(const k of Array.from(T))k(b)}startPolling(){var g=this;this.stopPolling(),this.pollTimer=setInterval((0,d.Z)(function*(){return g._poll()}),800)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(g,b){0===Object.keys(this.listeners).length&&this.startPolling(),this.listeners[g]||(this.listeners[g]=new Set,this._get(g)),this.listeners[g].add(b)}_removeListener(g,b){this.listeners[g]&&(this.listeners[g].delete(b),0===this.listeners[g].size&&delete this.listeners[g]),0===Object.keys(this.listeners).length&&this.stopPolling()}}return y.type="LOCAL",y})();function rr(y,p){return He(y,"POST","/v2/accounts/mfaSignIn:start",Vt(y,p))}const Yn=1e12;class ji{constructor(p){this.auth=p,this.counter=Yn,this._widgets=new Map}render(p,g){const b=this.counter;return this._widgets.set(b,new ru(p,this.auth.name,g||{})),this.counter++,b}reset(p){var g;const b=p||Yn;null===(g=this._widgets.get(b))||void 0===g||g.delete(),this._widgets.delete(b)}getResponse(p){var g;return(null===(g=this._widgets.get(p||Yn))||void 0===g?void 0:g.getResponse())||""}execute(p){var g=this;return(0,d.Z)(function*(){var b;return null===(b=g._widgets.get(p||Yn))||void 0===b||b.execute(),""})()}}class ru{constructor(p,g,b){this.params=b,this.timerId=null,this.deleted=!1,this.responseToken=null,this.clickHandler=()=>{this.execute()};const T="string"==typeof p?document.getElementById(p):p;re(T,"argument-error",{appName:g}),this.container=T,this.isVisible="invisible"!==this.params.size,this.isVisible?this.execute():this.container.addEventListener("click",this.clickHandler)}getResponse(){return this.checkIfDeleted(),this.responseToken}delete(){this.checkIfDeleted(),this.deleted=!0,this.timerId&&(clearTimeout(this.timerId),this.timerId=null),this.container.removeEventListener("click",this.clickHandler)}execute(){this.checkIfDeleted(),!this.timerId&&(this.timerId=window.setTimeout(()=>{this.responseToken=function iu(y){const p=[],g="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";for(let b=0;b<y;b++)p.push(g.charAt(Math.floor(Math.random()*g.length)));return p.join("")}(50);const{callback:p,"expired-callback":g}=this.params;if(p)try{p(this.responseToken)}catch{}this.timerId=window.setTimeout(()=>{if(this.timerId=null,this.responseToken=null,g)try{g()}catch{}this.isVisible&&this.execute()},6e4)},500))}checkIfDeleted(){if(this.deleted)throw new Error("reCAPTCHA mock was already deleted!")}}const ea=pi("rcb"),Td=new Re(3e4,6e4);class Dg{constructor(){var p;this.hostLanguage="",this.counter=0,this.librarySeparatelyLoaded=!(null===(p=xn().grecaptcha)||void 0===p||!p.render)}load(p,g=""){return re(function _f(y){return y.length<=6&&/^\s*[a-zA-Z0-9\-]*\s*$/.test(y)}(g),p,"argument-error"),this.shouldResolveImmediately(g)&&Ht(xn().grecaptcha)?Promise.resolve(xn().grecaptcha):new Promise((b,T)=>{const k=xn().setTimeout(()=>{T(me(p,"network-request-failed"))},Td.get());xn()[ea]=()=>{xn().clearTimeout(k),delete xn()[ea];const X=xn().grecaptcha;if(!X||!Ht(X))return void T(me(p,"internal-error"));const ke=X.render;X.render=(Ge,et)=>{const lt=ke(Ge,et);return this.counter++,lt},this.hostLanguage=g,b(X)},Mr(`https://www.google.com/recaptcha/api.js??${(0,P.xO)({onload:ea,render:"explicit",hl:g})}`).catch(()=>{clearTimeout(k),T(me(p,"internal-error"))})})}clearedOneInstance(){this.counter--}shouldResolveImmediately(p){var g;return!(null===(g=xn().grecaptcha)||void 0===g||!g.render)&&(p===this.hostLanguage||this.counter>0||this.librarySeparatelyLoaded)}}class O_{load(p){return(0,d.Z)(function*(){return new ji(p)})()}clearedOneInstance(){}}const jl="recaptcha",li={theme:"light",type:"image"};class $l{constructor(p,g=Object.assign({},li),b){this.parameters=g,this.type=jl,this.destroyed=!1,this.widgetId=null,this.tokenChangeListeners=new Set,this.renderPromise=null,this.recaptcha=null,this.auth=In(b),this.isInvisible="invisible"===this.parameters.size,re(typeof document<"u",this.auth,"operation-not-supported-in-this-environment");const T="string"==typeof p?document.getElementById(p):p;re(T,this.auth,"argument-error"),this.container=T,this.parameters.callback=this.makeTokenCallback(this.parameters.callback),this._recaptchaLoader=this.auth.settings.appVerificationDisabledForTesting?new O_:new Dg,this.validateStartingState()}verify(){var p=this;return(0,d.Z)(function*(){p.assertNotDestroyed();const g=yield p.render(),b=p.getAssertedRecaptcha();return b.getResponse(g)||new Promise(k=>{const j=X=>{!X||(p.tokenChangeListeners.delete(j),k(X))};p.tokenChangeListeners.add(j),p.isInvisible&&b.execute(g)})})()}render(){try{this.assertNotDestroyed()}catch(p){return Promise.reject(p)}return this.renderPromise||(this.renderPromise=this.makeRenderPromise().catch(p=>{throw this.renderPromise=null,p})),this.renderPromise}_reset(){this.assertNotDestroyed(),null!==this.widgetId&&this.getAssertedRecaptcha().reset(this.widgetId)}clear(){this.assertNotDestroyed(),this.destroyed=!0,this._recaptchaLoader.clearedOneInstance(),this.isInvisible||this.container.childNodes.forEach(p=>{this.container.removeChild(p)})}validateStartingState(){re(!this.parameters.sitekey,this.auth,"argument-error"),re(this.isInvisible||!this.container.hasChildNodes(),this.auth,"argument-error"),re(typeof document<"u",this.auth,"operation-not-supported-in-this-environment")}makeTokenCallback(p){return g=>{if(this.tokenChangeListeners.forEach(b=>b(g)),"function"==typeof p)p(g);else if("string"==typeof p){const b=xn()[p];"function"==typeof b&&b(g)}}}assertNotDestroyed(){re(!this.destroyed,this.auth,"internal-error")}makeRenderPromise(){var p=this;return(0,d.Z)(function*(){if(yield p.init(),!p.widgetId){let g=p.container;if(!p.isInvisible){const b=document.createElement("div");g.appendChild(b),g=b}p.widgetId=p.getAssertedRecaptcha().render(g,p.parameters)}return p.widgetId})()}init(){var p=this;return(0,d.Z)(function*(){re(ut()&&!$a(),p.auth,"internal-error"),yield function qa(){let y=null;return new Promise(p=>{"complete"!==document.readyState?(y=()=>p(),window.addEventListener("load",y)):p()}).catch(p=>{throw y&&window.removeEventListener("load",y),p})}(),p.recaptcha=yield p._recaptchaLoader.load(p.auth,p.auth.languageCode||void 0);const g=yield function ne(y){return Fe.apply(this,arguments)}(p.auth);re(g,p.auth,"internal-error"),p.parameters.sitekey=g})()}getAssertedRecaptcha(){return re(this.recaptcha,this.auth,"internal-error"),this.recaptcha}}class su{constructor(p,g){this.verificationId=p,this.onConfirmation=g}confirm(p){const g=Vr._fromVerification(this.verificationId,p);return this.onConfirmation(g)}}function zl(){return(zl=(0,d.Z)(function*(y,p,g){const b=In(y),T=yield Gl(b,p,(0,P.m9)(g));return new su(T,k=>si(b,k))})).apply(this,arguments)}function Do(){return(Do=(0,d.Z)(function*(y,p,g){const b=(0,P.m9)(y);yield Wt(!1,b,"phone");const T=yield Gl(b.auth,p,(0,P.m9)(g));return new su(T,k=>jc(b,k))})).apply(this,arguments)}function Wa(){return(Wa=(0,d.Z)(function*(y,p,g){const b=(0,P.m9)(y),T=yield Gl(b.auth,p,(0,P.m9)(g));return new su(T,k=>Un(b,k))})).apply(this,arguments)}function Gl(y,p,g){return fn.apply(this,arguments)}function fn(){return(fn=(0,d.Z)(function*(y,p,g){var b;const T=yield g.verify();try{let k;if(re("string"==typeof T,y,"argument-error"),re(g.type===jl,y,"argument-error"),k="string"==typeof p?{phoneNumber:p}:p,"session"in k){const j=k.session;if("phoneNumber"in k)return re("enroll"===j.type,y,"internal-error"),(yield Ua(y,{idToken:j.credential,phoneEnrollmentInfo:{phoneNumber:k.phoneNumber,recaptchaToken:T}})).phoneSessionInfo.sessionInfo;{re("signin"===j.type,y,"internal-error");const X=(null===(b=k.multiFactorHint)||void 0===b?void 0:b.uid)||k.multiFactorUid;return re(X,y,"missing-multi-factor-info"),(yield rr(y,{mfaPendingCredential:j.credential,mfaEnrollmentId:X,phoneSignInInfo:{recaptchaToken:T}})).phoneResponseInfo.sessionInfo}}{const{sessionInfo:j}=yield hd(y,{phoneNumber:k.phoneNumber,recaptchaToken:T});return j}}finally{g._reset()}})).apply(this,arguments)}function nt(){return(nt=(0,d.Z)(function*(y,p){yield Il((0,P.m9)(y),p)})).apply(this,arguments)}let Kt=(()=>{class y{constructor(g){this.providerId=y.PROVIDER_ID,this.auth=In(g)}verifyPhoneNumber(g,b){return Gl(this.auth,g,(0,P.m9)(b))}static credential(g,b){return Vr._fromVerification(g,b)}static credentialFromResult(g){return y.credentialFromTaggedObject(g)}static credentialFromError(g){return y.credentialFromTaggedObject(g.customData||{})}static credentialFromTaggedObject({_tokenResponse:g}){if(!g)return null;const{phoneNumber:b,temporaryProof:T}=g;return b&&T?Vr._fromTokenResponse(b,T):null}}return y.PROVIDER_ID="phone",y.PHONE_SIGN_IN_METHOD="phone",y})();function Qn(y,p){return p?$n(p):(re(y._popupRedirectResolver,y,"argument-error"),y._popupRedirectResolver)}class Hr extends Ds{constructor(p){super("custom","custom"),this.params=p}_getIdTokenResponse(p){return Vi(p,this._buildIdpRequest())}_linkToIdToken(p,g){return Vi(p,this._buildIdpRequest(g))}_getReauthenticationResolver(p){return Vi(p,this._buildIdpRequest())}_buildIdpRequest(p){const g={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return p&&(g.idToken=p),g}}function Ka(y){return Sl(y.auth,new Hr(y),y.bypassAuthState)}function Xr(y){const{auth:p,user:g}=y;return re(g,p,"internal-error"),Hc(g,new Hr(y),y.bypassAuthState)}function ql(y){return Za.apply(this,arguments)}function Za(){return(Za=(0,d.Z)(function*(y){const{auth:p,user:g}=y;return re(g,p,"internal-error"),Il(g,new Hr(y),y.bypassAuthState)})).apply(this,arguments)}class So{constructor(p,g,b,T,k=!1){this.auth=p,this.resolver=b,this.user=T,this.bypassAuthState=k,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(g)?g:[g]}execute(){var p=this;return new Promise(function(){var g=(0,d.Z)(function*(b,T){p.pendingPromise={resolve:b,reject:T};try{p.eventManager=yield p.resolver._initialize(p.auth),yield p.onExecution(),p.eventManager.registerConsumer(p)}catch(k){p.reject(k)}});return function(b,T){return g.apply(this,arguments)}}())}onAuthEvent(p){var g=this;return(0,d.Z)(function*(){const{urlResponse:b,sessionId:T,postBody:k,tenantId:j,error:X,type:ke}=p;if(X)return void g.reject(X);const Ge={auth:g.auth,requestUri:b,sessionId:T,tenantId:j||void 0,postBody:k||void 0,user:g.user,bypassAuthState:g.bypassAuthState};try{g.resolve(yield g.getIdpTask(ke)(Ge))}catch(et){g.reject(et)}})()}onError(p){this.reject(p)}getIdpTask(p){switch(p){case"signInViaPopup":case"signInViaRedirect":return Ka;case"linkViaPopup":case"linkViaRedirect":return ql;case"reauthViaPopup":case"reauthViaRedirect":return Xr;default:Ce(this.auth,"internal-error")}}resolve(p){ft(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(p),this.unregisterAndCleanUp()}reject(p){ft(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(p),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}const jr=new Re(2e3,1e4);function qn(){return(qn=(0,d.Z)(function*(y,p,g){const b=In(y);$e(y,p,As);const T=Qn(b,g);return new Ya(b,"signInViaPopup",p,T).executeNotNull()})).apply(this,arguments)}function _t(){return(_t=(0,d.Z)(function*(y,p,g){const b=(0,P.m9)(y);$e(b.auth,p,As);const T=Qn(b.auth,g);return new Ya(b.auth,"reauthViaPopup",p,T,b).executeNotNull()})).apply(this,arguments)}function To(){return(To=(0,d.Z)(function*(y,p,g){const b=(0,P.m9)(y);$e(b.auth,p,As);const T=Qn(b.auth,g);return new Ya(b.auth,"linkViaPopup",p,T,b).executeNotNull()})).apply(this,arguments)}let Ya=(()=>{class y extends So{constructor(g,b,T,k,j){super(g,b,k,j),this.provider=T,this.authWindow=null,this.pollId=null,y.currentPopupAction&&y.currentPopupAction.cancel(),y.currentPopupAction=this}executeNotNull(){var g=this;return(0,d.Z)(function*(){const b=yield g.execute();return re(b,g.auth,"internal-error"),b})()}onExecution(){var g=this;return(0,d.Z)(function*(){ft(1===g.filter.length,"Popup operations only handle one event");const b=ds();g.authWindow=yield g.resolver._openPopup(g.auth,g.provider,g.filter[0],b),g.authWindow.associatedEvent=b,g.resolver._originValidation(g.auth).catch(T=>{g.reject(T)}),g.resolver._isIframeWebStorageSupported(g.auth,T=>{T||g.reject(me(g.auth,"web-storage-unsupported"))}),g.pollUserCancellation()})()}get eventId(){var g;return(null===(g=this.authWindow)||void 0===g?void 0:g.associatedEvent)||null}cancel(){this.reject(me(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,y.currentPopupAction=null}pollUserCancellation(){const g=()=>{var b,T;this.pollId=null!==(T=null===(b=this.authWindow)||void 0===b?void 0:b.window)&&void 0!==T&&T.closed?window.setTimeout(()=>{this.pollId=null,this.reject(me(this.auth,"popup-closed-by-user"))},8e3):window.setTimeout(g,jr.get())};g()}}return y.currentPopupAction=null,y})();const Pn=new Map;class xd extends So{constructor(p,g,b=!1){super(p,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],g,void 0,b),this.eventId=null}execute(){var p=()=>super.execute,g=this;return(0,d.Z)(function*(){let b=Pn.get(g.auth._key());if(!b){try{const k=(yield function eo(y,p){return au.apply(this,arguments)}(g.resolver,g.auth))?yield p().call(g):null;b=()=>Promise.resolve(k)}catch(T){b=()=>Promise.reject(T)}Pn.set(g.auth._key(),b)}return g.bypassAuthState||Pn.set(g.auth._key(),()=>Promise.resolve(null)),b()})()}onAuthEvent(p){var g=()=>super.onAuthEvent,b=this;return(0,d.Z)(function*(){if("signInViaRedirect"===p.type)return g().call(b,p);if("unknown"!==p.type){if(p.eventId){const T=yield b.auth._redirectUserForId(p.eventId);if(T)return b.user=T,g().call(b,p);b.resolve(null)}}else b.resolve(null)})()}onExecution(){return(0,d.Z)(function*(){})()}cleanUp(){}}function au(){return(au=(0,d.Z)(function*(y,p){const g=ra(p),b=hs(y);if(!(yield b._isAvailable()))return!1;const T="true"===(yield b._get(g));return yield b._remove(g),T})).apply(this,arguments)}function Ao(y,p){return na.apply(this,arguments)}function na(){return(na=(0,d.Z)(function*(y,p){return hs(y)._set(ra(p),"true")})).apply(this,arguments)}function Ns(y,p){Pn.set(y._key(),p)}function hs(y){return $n(y._redirectPersistence)}function ra(y){return H("pendingRedirect",y.config.apiKey,y.name)}function ci(){return(ci=(0,d.Z)(function*(y,p,g){const b=In(y);$e(y,p,As),yield b._initializationPromise;const T=Qn(b,g);return yield Ao(T,b),T._openRedirect(b,p,"signInViaRedirect")})).apply(this,arguments)}function ir(){return(ir=(0,d.Z)(function*(y,p,g){const b=(0,P.m9)(y);$e(b.auth,p,As),yield b.auth._initializationPromise;const T=Qn(b.auth,g);yield Ao(T,b.auth);const k=yield to(b);return T._openRedirect(b.auth,p,"reauthViaRedirect",k)})).apply(this,arguments)}function sr(){return(sr=(0,d.Z)(function*(y,p,g){const b=(0,P.m9)(y);$e(b.auth,p,As),yield b.auth._initializationPromise;const T=Qn(b.auth,g);yield Wt(!1,b,p.providerId),yield Ao(T,b.auth);const k=yield to(b);return T._openRedirect(b.auth,p,"linkViaRedirect",k)})).apply(this,arguments)}function ps(){return(ps=(0,d.Z)(function*(y,p){return yield In(y)._initializationPromise,Wn(y,p,!1)})).apply(this,arguments)}function Wn(y,p){return Kn.apply(this,arguments)}function Kn(){return(Kn=(0,d.Z)(function*(y,p,g=!1){const b=In(y),T=Qn(b,p),j=yield new xd(b,T,g).execute();return j&&!g&&(delete j.user._redirectEventId,yield b._persistUserIfCurrent(j.user),yield b._setRedirectUser(null,p)),j})).apply(this,arguments)}function to(y){return sa.apply(this,arguments)}function sa(){return(sa=(0,d.Z)(function*(y){const p=ds(`${y.uid}:::`);return y._redirectEventId=p,yield y.auth._setRedirectUser(y),yield y.auth._persistUserIfCurrent(y),p})).apply(this,arguments)}class Gi{constructor(p){this.auth=p,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(p){this.consumers.add(p),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,p)&&(this.sendToConsumer(this.queuedRedirectEvent,p),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(p){this.consumers.delete(p)}onEvent(p){if(this.hasEventBeenHandled(p))return!1;let g=!1;return this.consumers.forEach(b=>{this.isEventForConsumer(p,b)&&(g=!0,this.sendToConsumer(p,b),this.saveEventToCache(p))}),this.hasHandledPotentialRedirect||!function qi(y){switch(y.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return Zn(y);default:return!1}}(p)||(this.hasHandledPotentialRedirect=!0,g||(this.queuedRedirectEvent=p,g=!0)),g}sendToConsumer(p,g){var b;if(p.error&&!Zn(p)){const T=(null===(b=p.error.code)||void 0===b?void 0:b.split("auth/")[1])||"internal-error";g.onError(me(this.auth,T))}else g.onAuthEvent(p)}isEventForConsumer(p,g){const b=null===g.eventId||!!p.eventId&&p.eventId===g.eventId;return g.filter.includes(p.type)&&b}hasEventBeenHandled(p){return Date.now()-this.lastProcessedEventTime>=6e5&&this.cachedEventUids.clear(),this.cachedEventUids.has(bi(p))}saveEventToCache(p){this.cachedEventUids.add(bi(p)),this.lastProcessedEventTime=Date.now()}}function bi(y){return[y.type,y.eventId,y.sessionId,y.tenantId].filter(p=>p).join("-")}function Zn({type:y,error:p}){return"unknown"===y&&"auth/no-auth-event"===p?.code}function wf(y){return no.apply(this,arguments)}function no(){return(no=(0,d.Z)(function*(y,p={}){return He(y,"GET","/v1/projects",p)})).apply(this,arguments)}const Ef=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,Cf=/^https?/;function Mo(){return(Mo=(0,d.Z)(function*(y){if(y.config.emulator)return;const{authorizedDomains:p}=yield wf(y);for(const g of p)try{if(Ql(g))return}catch{}Ce(y,"unauthorized-domain")})).apply(this,arguments)}function Ql(y){const p=Qt(),{protocol:g,hostname:b}=new URL(p);if(y.startsWith("chrome-extension://")){const j=new URL(y);return""===j.hostname&&""===b?"chrome-extension:"===g&&y.replace("chrome-extension://","")===p.replace("chrome-extension://",""):"chrome-extension:"===g&&j.hostname===b}if(!Cf.test(g))return!1;if(Ef.test(y))return b===y;const T=y.replace(/\./g,"\\.");return new RegExp("^(.+\\."+T+"|"+T+")$","i").test(b)}const Jt=new Re(3e4,6e4);function Qa(){const y=xn().___jsl;if(y?.H)for(const p of Object.keys(y.H))if(y.H[p].r=y.H[p].r||[],y.H[p].L=y.H[p].L||[],y.H[p].r=[...y.H[p].L],y.CP)for(let g=0;g<y.CP.length;g++)y.CP[g]=null}let Fs=null;function ro(y){return Fs=Fs||function oa(y){return new Promise((p,g)=>{var b,T,k;function j(){Qa(),gapi.load("gapi.iframes",{callback:()=>{p(gapi.iframes.getContext())},ontimeout:()=>{Qa(),g(me(y,"network-request-failed"))},timeout:Jt.get()})}if(null!==(T=null===(b=xn().gapi)||void 0===b?void 0:b.iframes)&&void 0!==T&&T.Iframe)p(gapi.iframes.getContext());else{if(null===(k=xn().gapi)||void 0===k||!k.load){const X=pi("iframefcb");return xn()[X]=()=>{gapi.load?j():g(me(y,"network-request-failed"))},Mr(`https://apis.google.com/js/api.js?onload=${X}`).catch(ke=>g(ke))}j()}}).catch(p=>{throw Fs=null,p})}(y),Fs}const kd=new Re(5e3,15e3),cu={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},Wi=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function P_(y){const p=y.config;re(p.authDomain,y,"auth-domain-config-required");const g=p.emulator?Ve(p,"emulator/auth/iframe"):`https://${y.config.authDomain}/__/auth/iframe`,b={apiKey:p.apiKey,appName:y.name,v:ce.SDK_VERSION},T=Wi.get(y.config.apiHost);T&&(b.eid=T);const k=y._getFrameworks();return k.length&&(b.fw=k.join(",")),`${g}?${(0,P.xO)(b).slice(1)}`}function I(){return I=(0,d.Z)(function*(y){const p=yield ro(y),g=xn().gapi;return re(g,y,"internal-error"),p.open({where:document.body,url:P_(y),messageHandlersFilter:g.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:cu,dontclear:!0},b=>new Promise(function(){var T=(0,d.Z)(function*(k,j){yield b.restyle({setHideOnLeave:!1});const X=me(y,"network-request-failed"),ke=xn().setTimeout(()=>{j(X)},kd.get());function Ge(){xn().clearTimeout(ke),k(b)}b.ping(Ge).then(Ge,()=>{j(X)})});return function(k,j){return T.apply(this,arguments)}}()))}),I.apply(this,arguments)}const R={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"};class Ye{constructor(p){this.window=p,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}const kr=encodeURIComponent("fac");function En(y,p,g,b,T,k){return yt.apply(this,arguments)}function yt(){return(yt=(0,d.Z)(function*(y,p,g,b,T,k){re(y.config.authDomain,y,"auth-domain-config-required"),re(y.config.apiKey,y,"invalid-api-key");const j={apiKey:y.config.apiKey,appName:y.name,authType:g,redirectUrl:b,v:ce.SDK_VERSION,eventId:T};if(p instanceof As){p.setDefaultLanguage(y.languageCode),j.providerId=p.providerId||"",(0,P.xb)(p.getCustomParameters())||(j.customParameters=JSON.stringify(p.getCustomParameters()));for(const[et,lt]of Object.entries(k||{}))j[et]=lt}if(p instanceof El){const et=p.getScopes().filter(lt=>""!==lt);et.length>0&&(j.scopes=et.join(","))}y.tenantId&&(j.tid=y.tenantId);const X=j;for(const et of Object.keys(X))void 0===X[et]&&delete X[et];const ke=yield y._getAppCheckToken(),Ge=ke?`#${kr}=${encodeURIComponent(ke)}`:"";return`${Ki(y)}?${(0,P.xO)(X).slice(1)}${Ge}`})).apply(this,arguments)}function Ki({config:y}){return y.emulator?Ve(y,"emulator/auth/handler"):`https://${y.authDomain}/__/auth/handler`}const io="webStorageSupport";class uu extends class Jl{constructor(p){this.factorId=p}_process(p,g,b){switch(g.type){case"enroll":return this._finalizeEnroll(p,g.credential,b);case"signin":return this._finalizeSignIn(p,g.credential);default:return kt("unexpected MultiFactorSessionType")}}}{constructor(p){super("phone"),this.credential=p}static _fromCredential(p){return new uu(p)}_finalizeEnroll(p,g,b){return function _i(y,p){return He(y,"POST","/v2/accounts/mfaEnrollment:finalize",Vt(y,p))}(p,{idToken:g,displayName:b,phoneVerificationInfo:this.credential._makeVerificationRequest()})}_finalizeSignIn(p,g){return function Hl(y,p){return He(y,"POST","/v2/accounts/mfaSignIn:finalize",Vt(y,p))}(p,{mfaPendingCredential:g,phoneVerificationInfo:this.credential._makeVerificationRequest()})}}let Tg=(()=>{class y{constructor(){}static assertion(g){return uu._fromCredential(g)}}return y.FACTOR_ID="phone",y})();var Od="@firebase/auth";class Pd{constructor(p){this.auth=p,this.internalListeners=new Map}getUid(){var p;return this.assertAuthConfigured(),(null===(p=this.auth.currentUser)||void 0===p?void 0:p.uid)||null}getToken(p){var g=this;return(0,d.Z)(function*(){return g.assertAuthConfigured(),yield g.auth._initializationPromise,g.auth.currentUser?{accessToken:yield g.auth.currentUser.getIdToken(p)}:null})()}addAuthTokenListener(p){if(this.assertAuthConfigured(),this.internalListeners.has(p))return;const g=this.auth.onIdTokenChanged(b=>{p(b?.stsTokenManager.accessToken||null)});this.internalListeners.set(p,g),this.updateProactiveRefresh()}removeAuthTokenListener(p){this.assertAuthConfigured();const g=this.internalListeners.get(p);!g||(this.internalListeners.delete(p),g(),this.updateProactiveRefresh())}assertAuthConfigured(){re(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}function la(){return window}function hu(){return(hu=(0,d.Z)(function*(y,p,g){var b;const{BuildInfo:T}=la();ft(p.sessionId,"AuthEvent did not contain a session ID");const k=yield F_(p.sessionId),j={};return dt()?j.ibi=T.packageName:Ut()?j.apn=T.packageName:Ce(y,"operation-not-supported-in-this-environment"),T.displayName&&(j.appDisplayName=T.displayName),j.sessionId=k,En(y,g,p.type,void 0,null!==(b=p.eventId)&&void 0!==b?b:void 0,j)})).apply(this,arguments)}function rc(){return(rc=(0,d.Z)(function*(y){const{BuildInfo:p}=la(),g={};dt()?g.iosBundleId=p.packageName:Ut()?g.androidPackageName=p.packageName:Ce(y,"operation-not-supported-in-this-environment"),yield wf(y,g)})).apply(this,arguments)}function fu(){return(fu=(0,d.Z)(function*(y,p,g){const{cordova:b}=la();let T=()=>{};try{yield new Promise((k,j)=>{let X=null;function ke(){var lt;k();const Nn=null===(lt=b.plugins.browsertab)||void 0===lt?void 0:lt.close;"function"==typeof Nn&&Nn(),"function"==typeof g?.close&&g.close()}function Ge(){X||(X=window.setTimeout(()=>{j(me(y,"redirect-cancelled-by-user"))},2e3))}function et(){"visible"===document?.visibilityState&&Ge()}p.addPassiveListener(ke),document.addEventListener("resume",Ge,!1),Ut()&&document.addEventListener("visibilitychange",et,!1),T=()=>{p.removePassiveListener(ke),document.removeEventListener("resume",Ge,!1),document.removeEventListener("visibilitychange",et,!1),X&&window.clearTimeout(X)}})}finally{T()}})).apply(this,arguments)}function F_(y){return Af.apply(this,arguments)}function Af(){return(Af=(0,d.Z)(function*(y){const p=L_(y),g=yield crypto.subtle.digest("SHA-256",p);return Array.from(new Uint8Array(g)).map(T=>T.toString(16).padStart(2,"0")).join("")})).apply(this,arguments)}function L_(y){if(ft(/[0-9a-zA-Z]+/.test(y),"Can only convert alpha-numeric strings"),typeof TextEncoder<"u")return(new TextEncoder).encode(y);const p=new ArrayBuffer(y.length),g=new Uint8Array(p);for(let b=0;b<y.length;b++)g[b]=y.charCodeAt(b);return g}(0,P.Pz)("authIdTokenMaxAge"),function Ag(y){(0,ce._registerComponent)(new se.wA("auth",(p,{options:g})=>{const b=p.getProvider("app").getImmediate(),T=p.getProvider("heartbeat"),k=p.getProvider("app-check-internal"),{apiKey:j,authDomain:X}=b.options;re(j&&!j.includes(":"),"invalid-api-key",{appName:b.name}),re(!X?.includes(":"),"argument-error",{appName:b.name});const ke={apiKey:j,authDomain:X,clientPlatform:y,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:oe(y)},Ge=new Oc(b,T,k,ke);return function nr(y,p){const g=p?.persistence||[],b=(Array.isArray(g)?g:[g]).map($n);p?.errorMap&&y._updateErrorMap(p.errorMap),y._initializeWithPersistence(b,p?.popupRedirectResolver)}(Ge,g),Ge},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((p,g,b)=>{p.getProvider("auth-internal").initialize()})),(0,ce._registerComponent)(new se.wA("auth-internal",p=>{const g=In(p.getProvider("auth").getImmediate());return new Pd(g)},"PRIVATE").setInstantiationMode("EXPLICIT")),(0,ce.registerVersion)(Od,"0.23.1",function Sf(y){switch(y){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";default:return}}(y)),(0,ce.registerVersion)(Od,"0.23.1","esm2017")}("Browser");class el extends Gi{constructor(){super(...arguments),this.passiveListeners=new Set,this.initPromise=new Promise(p=>{this.resolveInialized=p})}addPassiveListener(p){this.passiveListeners.add(p)}removePassiveListener(p){this.passiveListeners.delete(p)}resetRedirect(){this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1}onEvent(p){return this.resolveInialized(),this.passiveListeners.forEach(g=>g(p)),super.onEvent(p)}initialized(){var p=this;return(0,d.Z)(function*(){yield p.initPromise})()}}function Mf(y){return Ld.apply(this,arguments)}function Ld(){return(Ld=(0,d.Z)(function*(y){const p=yield xo()._get(pu(y));return p&&(yield xo()._remove(pu(y))),p})).apply(this,arguments)}function Rg(){const y=[],p="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";for(let g=0;g<20;g++){const b=Math.floor(Math.random()*p.length);y.push(p.charAt(b))}return y.join("")}function xo(){return $n(us)}function pu(y){return H("authEvent",y.config.apiKey,y.name)}function rl(y){if(!y?.includes("?"))return{};const[p,...g]=y.split("?");return(0,P.zd)(g.join("?"))}function Bd(){return{type:"unknown",eventId:null,sessionId:null,urlResponse:null,postBody:null,tenantId:null,error:me("no-auth-event")}}function Bs(){var y;return(null===(y=self?.location)||void 0===y?void 0:y.protocol)||null}function Hd(y=(0,P.z$)()){return!("file:"!==Bs()&&"ionic:"!==Bs()&&"capacitor:"!==Bs()||!y.toLowerCase().match(/iphone|ipad|ipod|android/))}function Ff(){try{const y=self.localStorage,p=ds();if(y)return y.setItem(p,"1"),y.removeItem(p),!function V_(y=(0,P.z$)()){return function Nf(){return(0,P.w1)()&&11===document?.documentMode}()||function gu(y=(0,P.z$)()){return/Edge\/\d+/.test(y)}(y)}()||(0,P.hl)()}catch{return Lf()&&(0,P.hl)()}return!1}function Lf(){return typeof global<"u"&&"WorkerGlobalScope"in global&&"importScripts"in global}function Vf(){return(function Of(){return"http:"===Bs()||"https:"===Bs()}()||(0,P.ru)()||Hd())&&!function Pf(){return(0,P.b$)()||(0,P.UG)()}()&&Ff()&&!Lf()}function Bf(){return Hd()&&typeof document<"u"}function sc(){return(sc=(0,d.Z)(function*(){return!!Bf()&&new Promise(y=>{const p=setTimeout(()=>{y(!1)},1e3);document.addEventListener("deviceready",()=>{clearTimeout(p),y(!0)})})})).apply(this,arguments)}const wr={LOCAL:"local",NONE:"none",SESSION:"session"},oc=re,$d="persistence";function Us(y){return oo.apply(this,arguments)}function oo(){return(oo=(0,d.Z)(function*(y){yield y._initializationPromise;const p=zd(),g=H($d,y.config.apiKey,y.name);p&&p.setItem(g,y._getPersistence())})).apply(this,arguments)}function zd(){var y;try{return(null===(y=function jd(){return typeof window<"u"?window:null}())||void 0===y?void 0:y.sessionStorage)||null}catch{return null}}const Gd=re;class $r{constructor(){this.browserResolver=$n(class br{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=Co,this._completeRedirectFn=Wn,this._overrideRedirectResult=Ns}_openPopup(p,g,b,T){var k=this;return(0,d.Z)(function*(){var j;ft(null===(j=k.eventManagers[p._key()])||void 0===j?void 0:j.manager,"_initialize() not called before _openPopup()");const X=yield En(p,g,b,Qt(),T);return function ze(y,p,g,b=500,T=600){const k=Math.max((window.screen.availHeight-T)/2,0).toString(),j=Math.max((window.screen.availWidth-b)/2,0).toString();let X="";const ke=Object.assign(Object.assign({},R),{width:b.toString(),height:T.toString(),top:k,left:j}),Ge=(0,P.z$)().toLowerCase();g&&(X=Ze(Ge)?"_blank":g),ue(Ge)&&(p=p||"http://localhost",ke.scrollbars="yes");const et=Object.entries(ke).reduce((Nn,[Zi,bu])=>`${Nn}${Zi}=${bu},`,"");if(function bn(y=(0,P.z$)()){var p;return dt(y)&&!(null===(p=window.navigator)||void 0===p||!p.standalone)}(Ge)&&"_self"!==X)return function ht(y,p){const g=document.createElement("a");g.href=y,g.target=p;const b=document.createEvent("MouseEvent");b.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),g.dispatchEvent(b)}(p||"",X),new Ye(null);const lt=window.open(p||"",X,et);re(lt,y,"popup-blocked");try{lt.focus()}catch{}return new Ye(lt)}(p,X,ds())})()}_openRedirect(p,g,b,T){var k=this;return(0,d.Z)(function*(){return yield k._originValidation(p),function tu(y){xn().location.href=y}(yield En(p,g,b,Qt(),T)),new Promise(()=>{})})()}_initialize(p){const g=p._key();if(this.eventManagers[g]){const{manager:T,promise:k}=this.eventManagers[g];return T?Promise.resolve(T):(ft(k,"If manager is not set, promise should be"),k)}const b=this.initAndGetManager(p);return this.eventManagers[g]={promise:b},b.catch(()=>{delete this.eventManagers[g]}),b}initAndGetManager(p){var g=this;return(0,d.Z)(function*(){const b=yield function E(y){return I.apply(this,arguments)}(p),T=new Gi(p);return b.register("authEvent",k=>(re(k?.authEvent,p,"invalid-auth-event"),{status:T.onEvent(k.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),g.eventManagers[p._key()]={manager:T},g.iframes[p._key()]=b,T})()}_isIframeWebStorageSupported(p,g){this.iframes[p._key()].send(io,{type:io},T=>{var k;const j=null===(k=T?.[0])||void 0===k?void 0:k[io];void 0!==j&&g(!!j),Ce(p,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(p){const g=p._key();return this.originValidationPromises[g]||(this.originValidationPromises[g]=function lu(y){return Mo.apply(this,arguments)}(p)),this.originValidationPromises[g]}get _shouldInitProactively(){return wn()||J()||dt()}}),this.cordovaResolver=$n(class Rf{constructor(){this._redirectPersistence=Co,this._shouldInitProactively=!0,this.eventManagers=new Map,this.originValidationPromises={},this._completeRedirectFn=Wn,this._overrideRedirectResult=Ns}_initialize(p){var g=this;return(0,d.Z)(function*(){const b=p._key();let T=g.eventManagers.get(b);return T||(T=new el(p),g.eventManagers.set(b,T),g.attachCallbackListeners(p,T)),T})()}_openPopup(p){Ce(p,"operation-not-supported-in-this-environment")}_openRedirect(p,g,b,T){var k=this;return(0,d.Z)(function*(){!function Jb(y){var p,g,b,T,k,j,X,ke,Ge,et;const lt=la();re("function"==typeof(null===(p=lt?.universalLinks)||void 0===p?void 0:p.subscribe),y,"invalid-cordova-configuration",{missingPlugin:"cordova-universal-links-plugin-fix"}),re(typeof(null===(g=lt?.BuildInfo)||void 0===g?void 0:g.packageName)<"u",y,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-buildInfo"}),re("function"==typeof(null===(k=null===(T=null===(b=lt?.cordova)||void 0===b?void 0:b.plugins)||void 0===T?void 0:T.browsertab)||void 0===k?void 0:k.openUrl),y,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),re("function"==typeof(null===(ke=null===(X=null===(j=lt?.cordova)||void 0===j?void 0:j.plugins)||void 0===X?void 0:X.browsertab)||void 0===ke?void 0:ke.isAvailable),y,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),re("function"==typeof(null===(et=null===(Ge=lt?.cordova)||void 0===Ge?void 0:Ge.InAppBrowser)||void 0===et?void 0:et.open),y,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-inappbrowser"})}(p);const j=yield k._initialize(p);yield j.initialized(),j.resetRedirect(),function vf(){Pn.clear()}(),yield k._originValidation(p);const X=function tl(y,p,g=null){return{type:p,eventId:g,urlResponse:null,sessionId:Rg(),postBody:null,tenantId:y.tenantId,error:me(y,"no-auth-event")}}(p,b,T);yield function Fd(y,p){return xo()._set(pu(y),p)}(p,X);const ke=yield function nc(y,p,g){return hu.apply(this,arguments)}(p,X,g),Ge=yield function Tf(y){const{cordova:p}=la();return new Promise(g=>{p.plugins.browsertab.isAvailable(b=>{let T=null;b?p.plugins.browsertab.openUrl(y):T=p.InAppBrowser.open(y,function wt(y=(0,P.z$)()){return/(iPad|iPhone|iPod).*OS 7_\d/i.test(y)||/(iPad|iPhone|iPod).*OS 8_\d/i.test(y)}()?"_blank":"_system","location=yes"),g(T)})})}(ke);return function Ja(y,p,g){return fu.apply(this,arguments)}(p,j,Ge)})()}_isIframeWebStorageSupported(p,g){throw new Error("Method not implemented.")}_originValidation(p){const g=p._key();return this.originValidationPromises[g]||(this.originValidationPromises[g]=function Nd(y){return rc.apply(this,arguments)}(p)),this.originValidationPromises[g]}attachCallbackListeners(p,g){const{universalLinks:b,handleOpenURL:T,BuildInfo:k}=la(),j=setTimeout((0,d.Z)(function*(){yield Mf(p),g.onEvent(Bd())}),500),X=function(){var et=(0,d.Z)(function*(lt){clearTimeout(j);const Nn=yield Mf(p);let Zi=null;Nn&&lt?.url&&(Zi=function nl(y,p){var g,b;const T=function xf(y){const p=rl(y),g=p.link?decodeURIComponent(p.link):void 0,b=rl(g).link,T=p.deep_link_id?decodeURIComponent(p.deep_link_id):void 0;return rl(T).link||T||b||g||y}(p);if(T.includes("/__/auth/callback")){const k=rl(T),j=k.firebaseError?function kg(y){try{return JSON.parse(y)}catch{return null}}(decodeURIComponent(k.firebaseError)):null,X=null===(b=null===(g=j?.code)||void 0===g?void 0:g.split("auth/"))||void 0===b?void 0:b[1],ke=X?me(X):null;return ke?{type:y.type,eventId:y.eventId,tenantId:y.tenantId,error:ke,urlResponse:null,sessionId:null,postBody:null}:{type:y.type,eventId:y.eventId,tenantId:y.tenantId,sessionId:y.sessionId,urlResponse:T,postBody:null}}return null}(Nn,lt.url)),g.onEvent(Zi||Bd())});return function(Nn){return et.apply(this,arguments)}}();typeof b<"u"&&"function"==typeof b.subscribe&&b.subscribe(null,X);const ke=T,Ge=`${k.packageName.toLowerCase()}://`;la().handleOpenURL=function(){var et=(0,d.Z)(function*(lt){if(lt.toLowerCase().startsWith(Ge)&&X({url:lt}),"function"==typeof ke)try{ke(lt)}catch(Nn){console.error(Nn)}});return function(lt){return et.apply(this,arguments)}}()}}),this.underlyingResolver=null,this._redirectPersistence=Co,this._completeRedirectFn=Wn,this._overrideRedirectResult=Ns}_initialize(p){var g=this;return(0,d.Z)(function*(){return yield g.selectUnderlyingResolver(),g.assertedUnderlyingResolver._initialize(p)})()}_openPopup(p,g,b,T){var k=this;return(0,d.Z)(function*(){return yield k.selectUnderlyingResolver(),k.assertedUnderlyingResolver._openPopup(p,g,b,T)})()}_openRedirect(p,g,b,T){var k=this;return(0,d.Z)(function*(){return yield k.selectUnderlyingResolver(),k.assertedUnderlyingResolver._openRedirect(p,g,b,T)})()}_isIframeWebStorageSupported(p,g){this.assertedUnderlyingResolver._isIframeWebStorageSupported(p,g)}_originValidation(p){return this.assertedUnderlyingResolver._originValidation(p)}get _shouldInitProactively(){return Bf()||this.browserResolver._shouldInitProactively}get assertedUnderlyingResolver(){return Gd(this.underlyingResolver,"internal-error"),this.underlyingResolver}selectUnderlyingResolver(){var p=this;return(0,d.Z)(function*(){if(p.underlyingResolver)return;const g=yield function Uf(){return sc.apply(this,arguments)}();p.underlyingResolver=g?p.cordovaResolver:p.browserResolver})()}}function qd(y){return y.unwrap()}function mu(y){return Wd(y)}function Wd(y){const{_tokenResponse:p}=y instanceof P.ZR?y.customData:y;if(!p)return null;if(!(y instanceof P.ZR)&&"temporaryProof"in p&&"phoneNumber"in p)return Kt.credentialFromResult(y);const g=p.providerId;if(!g||"password"===g)return null;let b;switch(g){case"google.com":b=Bc;break;case"facebook.com":b=Qr;break;case"github.com":b=Cl;break;case"twitter.com":b=Uc;break;default:const{oauthIdToken:T,oauthAccessToken:k,oauthTokenSecret:j,pendingToken:X,nonce:ke}=p;return k||j||T||X?X?g.startsWith("saml.")?Gn._create(g,X):gi._fromParams({providerId:g,signInMethod:g,pendingToken:X,idToken:T,accessToken:k}):new mi(g).credential({idToken:T,accessToken:k,rawNonce:ke}):null}return y instanceof P.ZR?b.credentialFromError(y):b.credentialFromResult(y)}function ui(y,p){return p.catch(g=>{throw g instanceof P.ZR&&function ca(y,p){var g;const b=null===(g=p.customData)||void 0===g?void 0:g._tokenResponse;if("auth/multi-factor-auth-required"===p?.code)p.resolver=new B_(y,function Pl(y,p){var g;const b=(0,P.m9)(y),T=p;return re(p.customData.operationType,b,"argument-error"),re(null===(g=T.customData._serverResponse)||void 0===g?void 0:g.mfaPendingCredential,b,"argument-error"),cs._fromError(b,T)}(y,p));else if(b){const T=Wd(p),k=p;T&&(k.credential=T,k.tenantId=b.tenantId||void 0,k.email=b.email||void 0,k.phoneNumber=b.phoneNumber||void 0)}}(y,g),g}).then(g=>{const T=g.user;return{operationType:g.operationType,credential:mu(g),additionalUserInfo:kl(g),user:or.getOrCreate(T)}})}function _u(y,p){return yu.apply(this,arguments)}function yu(){return(yu=(0,d.Z)(function*(y,p){const g=yield p;return{verificationId:g.verificationId,confirm:b=>ui(y,g.confirm(b))}})).apply(this,arguments)}class B_{constructor(p,g){this.resolver=g,this.auth=function Fg(y){return y.wrapped()}(p)}get session(){return this.resolver.session}get hints(){return this.resolver.hints}resolveSignIn(p){return ui(qd(this.auth),this.resolver.resolveSignIn(p))}}class or{constructor(p){this._delegate=p,this.multiFactor=function Ha(y){const p=(0,P.m9)(y);return wo.has(p)||wo.set(p,bo._fromUser(p)),wo.get(p)}(p)}static getOrCreate(p){return or.USER_MAP.has(p)||or.USER_MAP.set(p,new or(p)),or.USER_MAP.get(p)}delete(){return this._delegate.delete()}reload(){return this._delegate.reload()}toJSON(){return this._delegate.toJSON()}getIdTokenResult(p){return this._delegate.getIdTokenResult(p)}getIdToken(p){return this._delegate.getIdToken(p)}linkAndRetrieveDataWithCredential(p){return this.linkWithCredential(p)}linkWithCredential(p){var g=this;return(0,d.Z)(function*(){return ui(g.auth,jc(g._delegate,p))})()}linkWithPhoneNumber(p,g){var b=this;return(0,d.Z)(function*(){return _u(b.auth,function Sg(y,p,g){return Do.apply(this,arguments)}(b._delegate,p,g))})()}linkWithPopup(p){var g=this;return(0,d.Z)(function*(){return ui(g.auth,function Md(y,p,g){return To.apply(this,arguments)}(g._delegate,p,$r))})()}linkWithRedirect(p){var g=this;return(0,d.Z)(function*(){return yield Us(In(g.auth)),function Zl(y,p,g){return function bf(y,p,g){return sr.apply(this,arguments)}(y,p,g)}(g._delegate,p,$r)})()}reauthenticateAndRetrieveDataWithCredential(p){return this.reauthenticateWithCredential(p)}reauthenticateWithCredential(p){var g=this;return(0,d.Z)(function*(){return ui(g.auth,Un(g._delegate,p))})()}reauthenticateWithPhoneNumber(p,g){return _u(this.auth,function ou(y,p,g){return Wa.apply(this,arguments)}(this._delegate,p,g))}reauthenticateWithPopup(p){return ui(this.auth,function ta(y,p,g){return _t.apply(this,arguments)}(this._delegate,p,$r))}reauthenticateWithRedirect(p){var g=this;return(0,d.Z)(function*(){return yield Us(In(g.auth)),function vi(y,p,g){return function ia(y,p,g){return ir.apply(this,arguments)}(y,p,g)}(g._delegate,p,$r)})()}sendEmailVerification(p){return function wd(y,p){return Ml.apply(this,arguments)}(this._delegate,p)}unlink(p){var g=this;return(0,d.Z)(function*(){return yield function _d(y,p){return Bi.apply(this,arguments)}(g._delegate,p),g})()}updateEmail(p){return function nf(y,p){return La((0,P.m9)(y),p,null)}(this._delegate,p)}updatePassword(p){return function Rs(y,p){return La((0,P.m9)(y),null,p)}(this._delegate,p)}updatePhoneNumber(p){return function $i(y,p){return nt.apply(this,arguments)}(this._delegate,p)}updateProfile(p){return function Ed(y,p){return Fa.apply(this,arguments)}(this._delegate,p)}verifyBeforeUpdateEmail(p,g){return function Zc(y,p,g){return yo.apply(this,arguments)}(this._delegate,p,g)}get emailVerified(){return this._delegate.emailVerified}get isAnonymous(){return this._delegate.isAnonymous}get metadata(){return this._delegate.metadata}get phoneNumber(){return this._delegate.phoneNumber}get providerData(){return this._delegate.providerData}get refreshToken(){return this._delegate.refreshToken}get tenantId(){return this._delegate.tenantId}get displayName(){return this._delegate.displayName}get email(){return this._delegate.email}get photoURL(){return this._delegate.photoURL}get providerId(){return this._delegate.providerId}get uid(){return this._delegate.uid}get auth(){return this._delegate.auth}}or.USER_MAP=new WeakMap;const ao=re;let Lg=(()=>{class y{constructor(g,b){if(this.app=g,b.isInitialized())return this._delegate=b.getImmediate(),void this.linkUnderlyingAuth();const{apiKey:T}=g.options;ao(T,"invalid-api-key",{appName:g.name}),ao(T,"invalid-api-key",{appName:g.name});const k=typeof window<"u"?$r:void 0;this._delegate=b.initialize({options:{persistence:Vg(T,g.name),popupRedirectResolver:k}}),this._delegate._updateErrorMap(De),this.linkUnderlyingAuth()}get emulatorConfig(){return this._delegate.emulatorConfig}get currentUser(){return this._delegate.currentUser?or.getOrCreate(this._delegate.currentUser):null}get languageCode(){return this._delegate.languageCode}set languageCode(g){this._delegate.languageCode=g}get settings(){return this._delegate.settings}get tenantId(){return this._delegate.tenantId}set tenantId(g){this._delegate.tenantId=g}useDeviceLanguage(){this._delegate.useDeviceLanguage()}signOut(){return this._delegate.signOut()}useEmulator(g,b){!function nd(y,p,g){const b=In(y);re(b._canInitEmulator,b,"emulator-config-failed"),re(/^https?:\/\//.test(p),b,"invalid-emulator-scheme");const T=!!g?.disableWarnings,k=gr(p),{host:j,port:X}=function Yr(y){const p=gr(y),g=/(\/\/)?([^?#/]+)/.exec(y.substr(p.length));if(!g)return{host:"",port:null};const b=g[2].split("@").pop()||"",T=/^(\[[^\]]+\])(:|$)/.exec(b);if(T){const k=T[1];return{host:k,port:Xs(b.substr(k.length+1))}}{const[k,j]=b.split(":");return{host:k,port:Xs(j)}}}(p);b.config.emulator={url:`${k}//${j}${null===X?"":`:${X}`}/`},b.settings.appVerificationDisabledForTesting=!0,b.emulatorConfig=Object.freeze({host:j,port:X,protocol:k.replace(":",""),options:Object.freeze({disableWarnings:T})}),T||function jo(){function y(){const p=document.createElement("p"),g=p.style;p.innerText="Running in emulator mode. Do not use with production credentials.",g.position="fixed",g.width="100%",g.backgroundColor="#ffffff",g.border=".1em solid #000000",g.color="#b50000",g.bottom="0px",g.left="0px",g.margin="0px",g.zIndex="10000",g.textAlign="center",p.classList.add("firebase-emulator-warning"),document.body.appendChild(p)}typeof console<"u"&&"function"==typeof console.info&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&("loading"===document.readyState?window.addEventListener("DOMContentLoaded",y):y())}()}(this._delegate,g,b)}applyActionCode(g){return function Tl(y,p){return Ur.apply(this,arguments)}(this._delegate,g)}checkActionCode(g){return Gc(this._delegate,g)}confirmPasswordReset(g,b){return function zc(y,p,g){return Ra.apply(this,arguments)}(this._delegate,g,b)}createUserWithEmailAndPassword(g,b){var T=this;return(0,d.Z)(function*(){return ui(T._delegate,function qc(y,p,g){return Pa.apply(this,arguments)}(T._delegate,g,b))})()}fetchProvidersForEmail(g){return this.fetchSignInMethodsForEmail(g)}fetchSignInMethodsForEmail(g){return function bd(y,p){return Kc.apply(this,arguments)}(this._delegate,g)}isSignInWithEmailLink(g){return function Eg(y,p){return"EMAIL_SIGNIN"===wl.parseLink(p)?.operation}(0,g)}getRedirectResult(){var g=this;return(0,d.Z)(function*(){ao(Vf(),g._delegate,"operation-not-supported-in-this-environment");const b=yield function zi(y,p){return ps.apply(this,arguments)}(g._delegate,$r);return b?ui(g._delegate,Promise.resolve(b)):{credential:null,user:null}})()}addFrameworkForLogging(g){!function kf(y,p){In(y)._logFramework(p)}(this._delegate,g)}onAuthStateChanged(g,b,T){const{next:k,error:j,complete:X}=Kd(g,b,T);return this._delegate.onAuthStateChanged(k,j,X)}onIdTokenChanged(g,b,T){const{next:k,error:j,complete:X}=Kd(g,b,T);return this._delegate.onIdTokenChanged(k,j,X)}sendSignInLinkToEmail(g,b){return function Wo(y,p,g){return Al.apply(this,arguments)}(this._delegate,g,b)}sendPasswordResetEmail(g,b){return function wg(y,p,g){return qo.apply(this,arguments)}(this._delegate,g,b||void 0)}setPersistence(g){var b=this;return(0,d.Z)(function*(){let T;switch(function Pg(y,p){oc(Object.values(wr).includes(p),y,"invalid-persistence-type"),(0,P.b$)()?oc(p!==wr.SESSION,y,"unsupported-persistence-type"):(0,P.UG)()?oc(p===wr.NONE,y,"unsupported-persistence-type"):Lf()?oc(p===wr.NONE||p===wr.LOCAL&&(0,P.hl)(),y,"unsupported-persistence-type"):oc(p===wr.NONE||Ff(),y,"unsupported-persistence-type")}(b._delegate,g),g){case wr.SESSION:T=Co;break;case wr.LOCAL:T=(yield $n(Ul)._isAvailable())?Ul:us;break;case wr.NONE:T=Zr;break;default:return Ce("argument-error",{appName:b._delegate.name})}return b._delegate.setPersistence(T)})()}signInAndRetrieveDataWithCredential(g){return this.signInWithCredential(g)}signInAnonymously(){return ui(this._delegate,function fd(y){return pd.apply(this,arguments)}(this._delegate))}signInWithCredential(g){return ui(this._delegate,si(this._delegate,g))}signInWithCustomToken(g){return ui(this._delegate,function oi(y,p){return Ui.apply(this,arguments)}(this._delegate,g))}signInWithEmailAndPassword(g,b){return ui(this._delegate,function vd(y,p,g){return si((0,P.m9)(y),zn.credential(p,g))}(this._delegate,g,b))}signInWithEmailLink(g,b){return ui(this._delegate,function ln(y,p,g){return xs.apply(this,arguments)}(this._delegate,g,b))}signInWithPhoneNumber(g,b){return _u(this._delegate,function yf(y,p,g){return zl.apply(this,arguments)}(this._delegate,g,b))}signInWithPopup(g){var b=this;return(0,d.Z)(function*(){return ao(Vf(),b._delegate,"operation-not-supported-in-this-environment"),ui(b._delegate,function Wl(y,p,g){return qn.apply(this,arguments)}(b._delegate,g,$r))})()}signInWithRedirect(g){var b=this;return(0,d.Z)(function*(){return ao(Vf(),b._delegate,"operation-not-supported-in-this-environment"),yield Us(b._delegate),function Rd(y,p,g){return function fs(y,p,g){return ci.apply(this,arguments)}(y,p,g)}(b._delegate,g,$r)})()}updateCurrentUser(g){return this._delegate.updateCurrentUser(g)}verifyPasswordResetCode(g){return function Oa(y,p){return _o.apply(this,arguments)}(this._delegate,g)}unwrap(){return this._delegate}_delete(){return this._delegate._delete()}linkUnderlyingAuth(){this._delegate.wrapped=()=>this}}return y.Persistence=wr,y})();function Kd(y,p,g){let b=y;"function"!=typeof y&&({next:b,error:p,complete:g}=y);const T=b;return{next:j=>T(j&&or.getOrCreate(j)),error:p,complete:g}}function Vg(y,p){const g=function Ng(y,p){const g=zd();if(!g)return[];const b=H($d,y,p);switch(g.getItem(b)){case wr.NONE:return[Zr];case wr.LOCAL:return[Ul,Co];case wr.SESSION:return[Co];default:return[]}}(y,p);if(typeof self<"u"&&!g.includes(Ul)&&g.push(Ul),typeof window<"u")for(const b of[us,Co])g.includes(b)||g.push(b);return g.includes(Zr)||g.push(Zr),g}class Zd{constructor(){this.providerId="phone",this._delegate=new Kt(qd(ee.Z.auth()))}static credential(p,g){return Kt.credential(p,g)}verifyPhoneNumber(p,g){return this._delegate.verifyPhoneNumber(p,g)}unwrap(){return this._delegate}}Zd.PHONE_SIGN_IN_METHOD=Kt.PHONE_SIGN_IN_METHOD,Zd.PROVIDER_ID=Kt.PROVIDER_ID;const Bg=re;class Ug{constructor(p,g,b=ee.Z.app()){var T;Bg(null===(T=b.options)||void 0===T?void 0:T.apiKey,"invalid-api-key",{appName:b.name}),this._delegate=new $l(p,g,b.auth()),this.type=this._delegate.type}clear(){this._delegate.clear()}render(){return this._delegate.render()}verify(){return this._delegate.verify()}}!function vu(y){y.INTERNAL.registerComponent(new se.wA("auth-compat",p=>{const g=p.getProvider("app-compat").getImmediate(),b=p.getProvider("auth");return new Lg(g,b)},"PUBLIC").setServiceProps({ActionCodeInfo:{Operation:{EMAIL_SIGNIN:"EMAIL_SIGNIN",PASSWORD_RESET:"PASSWORD_RESET",RECOVER_EMAIL:"RECOVER_EMAIL",REVERT_SECOND_FACTOR_ADDITION:"REVERT_SECOND_FACTOR_ADDITION",VERIFY_AND_CHANGE_EMAIL:"VERIFY_AND_CHANGE_EMAIL",VERIFY_EMAIL:"VERIFY_EMAIL"}},EmailAuthProvider:zn,FacebookAuthProvider:Qr,GithubAuthProvider:Cl,GoogleAuthProvider:Bc,OAuthProvider:mi,SAMLAuthProvider:po,PhoneAuthProvider:Zd,PhoneMultiFactorGenerator:Tg,RecaptchaVerifier:Ug,TwitterAuthProvider:Uc,Auth:Lg,AuthCredential:Ds,Error:P.ZR}).setInstantiationMode("LAZY").setMultipleInstances(!1)),y.registerVersion("@firebase/auth-compat","0.4.1")}(ee.Z)},5861:(vt,Ae,F)=>{function d(P,ce,le,fe,se,Ee,ge){try{var z=P[Ee](ge),$=z.value}catch(Y){return void le(Y)}z.done?ce($):Promise.resolve($).then(fe,se)}function ee(P){return function(){var ce=this,le=arguments;return new Promise(function(fe,se){var Ee=P.apply(ce,le);function ge($){d(Ee,fe,se,ge,z,"next",$)}function z($){d(Ee,fe,se,ge,z,"throw",$)}ge(void 0)})}}F.d(Ae,{Z:()=>ee})}},vt=>{vt(vt.s=3954)}]);